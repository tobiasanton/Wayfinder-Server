<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: DBufRequester Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>DBufRequester Class Reference</h1>Class describing something that can request BitBuffers.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="DBufRequester_8h-source.html">DBufRequester.h</a>&gt;</code>
<p>
Inheritance diagram for DBufRequester:<p><center><img src="classDBufRequester__inherit__graph.png" border="0" usemap="#DBufRequester__inherit__map" alt="Inheritance graph"></center>
<map name="DBufRequester__inherit__map">
<area href="classFileDBufRequester.html" shape="rect" coords="45,155,179,181" alt="">
<area href="classMemoryDBufRequester.html" shape="rect" coords="203,155,363,181" alt="">
<area href="classMultiFileDBufRequester.html" shape="rect" coords="387,155,549,181" alt="">
<area href="classNotCopyable.html" shape="rect" coords="233,5,332,32" alt="">
<area href="classParserThreadFileDBufRequester.html" shape="rect" coords="5,229,219,256" alt="">
<area href="classUnixMFDBufRequester.html" shape="rect" coords="389,229,547,256" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for DBufRequester:<p><center><img src="classDBufRequester__coll__graph.png" border="0" usemap="#DBufRequester__coll__map" alt="Collaboration graph"></center>
<map name="DBufRequester__coll__map">
<area href="classNotCopyable.html" shape="rect" coords="12,5,111,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classDBufRequester-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classDBufRequester.html#a0">DBufRequester</a> (<a class="el" href="classDBufRequester.html">DBufRequester</a> *parentRequester=NULL)
<dl class="el"><dd class="mdescRight">Creates a new DBufRequester with the supplied parent requester.  <a href="#a0"></a><br></dl><li>virtual <a class="el" href="classDBufRequester.html#a1">~DBufRequester</a> ()
<dl class="el"><dd class="mdescRight">Deletes the parent.  <a href="#a1"></a><br></dl><li>virtual void <a class="el" href="classDBufRequester.html#a2">request</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;descr, <a class="el" href="classDBufRequestListener.html">DBufRequestListener</a> *caller)
<dl class="el"><dd class="mdescRight">Requests a <a class="el" href="classBitBuffer.html">BitBuffer</a> from the DBufRequester.  <a href="#a2"></a><br></dl><li>void <a class="el" href="classDBufRequester.html#a3">removeBuffer</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;descr)
<dl class="el"><dd class="mdescRight">Deletes the cached version of the buffer.  <a href="#a3"></a><br></dl><li>virtual <a class="el" href="classBitBuffer.html">BitBuffer</a> * <a class="el" href="classDBufRequester.html#a4">requestCached</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;descr)
<dl class="el"><dd class="mdescRight">If the DBufRequester already has the map in cache it should return it here or NULL.  <a href="#a4"></a><br></dl><li>virtual void <a class="el" href="classDBufRequester.html#a5">release</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;descr, <a class="el" href="classBitBuffer.html">BitBuffer</a> *obj)
<dl class="el"><dd class="mdescRight">Makes it ok for the <a class="el" href="classRequester.html">Requester</a> to delete the <a class="el" href="classBitBuffer.html">BitBuffer</a> or to put it in the cache.  <a href="#a5"></a><br></dl><li>virtual void <a class="el" href="classDBufRequester.html#a6">releaseCached</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;descr, <a class="el" href="classBitBuffer.html">BitBuffer</a> *obj)
<dl class="el"><dd class="mdescRight">The same method as release but with the extra knowledge that the buffer is from requestCached.  <a href="#a6"></a><br></dl><li>virtual void <a class="el" href="classDBufRequester.html#a7">cancelAll</a> ()
<dl class="el"><dd class="mdescRight">Tries to cancel all requests in the requester.  <a href="#a7"></a><br></dl></ul>
<h2>Protected Member Functions</h2>
<ul>
<li>virtual void <a class="el" href="classDBufRequester.html#b0">requestFromExternal</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;descr, <a class="el" href="classDBufRequestListener.html">DBufRequestListener</a> *caller)
<dl class="el"><dd class="mdescRight">Does the real requesting.  <a href="#b0"></a><br></dl><li>virtual void <a class="el" href="classDBufRequester.html#b1">internalRemove</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;descr)
<dl class="el"><dd class="mdescRight">Should be overridden by the subclasses if they are caches.  <a href="#b1"></a><br></dl></ul>
<h2>Protected Attributes</h2>
<ul>
<li><a class="el" href="classDBufRequester.html">DBufRequester</a> * <a class="el" href="classDBufRequester.html#p0">m_parentRequester</a>
<dl class="el"><dd class="mdescRight">The parent requester.  <a href="#p0"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class describing something that can request BitBuffers. 
<p>
&lt;br /&gt; If you are making a DBufRequester which request stuff from an external source, you will have to override cancelAll and requestFromExternal and set parent to NULL. &lt;br /&gt; If you are making a caching DBufRequester you will have to override requestCached and release and set parent == real parent. 
<p>

<p>
Definition at line <a class="el" href="DBufRequester_8h-source.html#l00048">48</a> of file <a class="el" href="DBufRequester_8h-source.html">DBufRequester.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="DBufRequester::DBufRequester"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">DBufRequester::DBufRequester           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classDBufRequester.html">DBufRequester</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>parentRequester</em> = <code>NULL</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a new DBufRequester with the supplied parent requester. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="DBufRequester::~DBufRequester"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual DBufRequester::~<a class="el" href="classDBufRequester.html">DBufRequester</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deletes the parent. 
<p>

<p>
Definition at line <a class="el" href="DBufRequester_8h-source.html#l00060">60</a> of file <a class="el" href="DBufRequester_8h-source.html">DBufRequester.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a7" doxytag="DBufRequester::cancelAll"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void DBufRequester::cancelAll           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Tries to cancel all requests in the requester. 
<p>
Note that the requests e.g. already sent to the server cannot be canceled. Default implementation calls the cancelAll in the parent requester if there is one. 
<p>
Reimplemented in <a class="el" href="classMultiFileDBufRequester.html#a6">MultiFileDBufRequester</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="DBufRequester::internalRemove"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void DBufRequester::internalRemove           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>descr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Should be overridden by the subclasses if they are caches. 
<p>
Should delete all occurances of the buffer associated with the descr. 
<p>
Reimplemented in <a class="el" href="classFileDBufRequester.html#b0">FileDBufRequester</a>, <a class="el" href="classMemoryDBufRequester.html#d1">MemoryDBufRequester</a>, and <a class="el" href="classMultiFileDBufRequester.html#d14">MultiFileDBufRequester</a>.
<p>
Definition at line <a class="el" href="DBufRequester_8h-source.html#l00146">146</a> of file <a class="el" href="DBufRequester_8h-source.html">DBufRequester.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="DBufRequester::release"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void DBufRequester::release           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>descr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classBitBuffer.html">BitBuffer</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Makes it ok for the <a class="el" href="classRequester.html">Requester</a> to delete the <a class="el" href="classBitBuffer.html">BitBuffer</a> or to put it in the cache. 
<p>
Requesters which use other requesters should hand the objects back to their parents and requesters which are top-requesters should delete them. It is important that the descr is the correct one. &lt;br /&gt; This is where the caching requesters should save their buffers. &lt;br /&gt; Default implementaion calls release in the parent if there is one or else deletes the buffer. 
<p>
Reimplemented in <a class="el" href="classFileDBufRequester.html#a2">FileDBufRequester</a>, <a class="el" href="classMemoryDBufRequester.html#a2">MemoryDBufRequester</a>, <a class="el" href="classMultiFileDBufRequester.html#a5">MultiFileDBufRequester</a>, and <a class="el" href="classParserThreadFileDBufRequester.html#a4">ParserThreadFileDBufRequester</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="DBufRequester::releaseCached"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void DBufRequester::releaseCached           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>descr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classBitBuffer.html">BitBuffer</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The same method as release but with the extra knowledge that the buffer is from requestCached. 
<p>
Default implementaion calls release. 
<p>
Reimplemented in <a class="el" href="classFileDBufRequester.html#a4">FileDBufRequester</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="DBufRequester::removeBuffer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void DBufRequester::removeBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>descr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deletes the cached version of the buffer. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="DBufRequester::request"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void DBufRequester::request           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>descr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classDBufRequestListener.html">DBufRequestListener</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>caller</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Requests a <a class="el" href="classBitBuffer.html">BitBuffer</a> from the DBufRequester. 
<p>
When the buffer is received caller-&gt;requestReceived(desc, buffer) will be called. &lt;br /&gt; Default implementation calls requestCached and if it returns a buffer, caller-&gt;requestReceived will be called immideately, otherwise, if there is a parent, it will be called and if there is no parent requestFromExternal will be called. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>descr</em>&nbsp;</td><td>The description. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>caller</em>&nbsp;</td><td>The RequestListener that wants an update if a delayed answer comes back. </td></tr>
  </table>
</dl>

<p>
Reimplemented in <a class="el" href="classMultiFileDBufRequester.html#a3">MultiFileDBufRequester</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="DBufRequester::requestCached"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual <a class="el" href="classBitBuffer.html">BitBuffer</a>* DBufRequester::requestCached           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>descr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
If the DBufRequester already has the map in cache it should return it here or NULL. 
<p>
The <a class="el" href="classBitBuffer.html">BitBuffer</a> should be returned in release as usual. &lt;br /&gt;Default implementation returns <code>m_parentRequester-&gt;requestCached</code> or <b>NULL</b> if <code>m_parentRequester</code> is <b>NULL</b>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>descr</em>&nbsp;</td><td>Key for databuffer. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Cached <a class="el" href="classBitBuffer.html">BitBuffer</a> or NULL. </dd></dl>

<p>
Reimplemented in <a class="el" href="classFileDBufRequester.html#a5">FileDBufRequester</a>, <a class="el" href="classMemoryDBufRequester.html#a3">MemoryDBufRequester</a>, <a class="el" href="classMultiFileDBufRequester.html#a4">MultiFileDBufRequester</a>, and <a class="el" href="classParserThreadFileDBufRequester.html#a5">ParserThreadFileDBufRequester</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="DBufRequester::requestFromExternal"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void DBufRequester::requestFromExternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>descr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classDBufRequestListener.html">DBufRequestListener</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>caller</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Does the real requesting. 
<p>
Default implementation does nothing. This is the one to override if doing a requester which requests buffers from e.g. internet.     </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="p0" doxytag="DBufRequester::m_parentRequester"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classDBufRequester.html">DBufRequester</a>* <a class="el" href="classDBufRequester.html#p0">DBufRequester::m_parentRequester</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The parent requester. 
<p>

<p>
Definition at line <a class="el" href="DBufRequester_8h-source.html#l00151">151</a> of file <a class="el" href="DBufRequester_8h-source.html">DBufRequester.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="DBufRequester_8h-source.html">DBufRequester.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:23:38 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
