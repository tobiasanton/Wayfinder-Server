<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: DBaseObject.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000006.html">include</a></div>
<h1>DBaseObject.h</h1><a href="DBaseObject_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef DBASEOBJECT_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define DBASEOBJECT_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include "<a class="code" href="StringUtility_8h.html">StringUtility.h</a>"</span>
00019 <span class="preprocessor">#include "<a class="code" href="StringTable_8h.html">StringTable.h</a>"</span>
00020 <span class="preprocessor">#include "vector"</span>
00021 
00022 
00023 <span class="keyword">class </span><a class="code" href="classPacket.html">Packet</a>;
00024 <span class="keyword">class </span><a class="code" href="classSQLQuery.html">SQLQuery</a>;
00025 
00026 
<a name="l00031"></a><a class="code" href="classDBaseElement.html">00031</a> <span class="keyword">class </span><a class="code" href="classDBaseElement.html">DBaseElement</a> {
00032    <span class="keyword">public</span>:
<a name="l00033"></a><a class="code" href="classDBaseElement.html#w13">00033</a>       <span class="keyword">enum</span> element_t {
00034          DB_INT = 0,
00035          DB_INT_NOTNULL,
00036          DB_SMALLINT,
00037          DB_SMALLINT_NOTNULL,
00038          DB_LARGESTRING,
00039          DB_LARGESTRING_NOTNULL,
00040          DB_MEDIUMSTRING,
00041          DB_MEDIUMSTRING_NOTNULL,
00042          DB_SMALLSTRING,
00043          DB_SMALLSTRING_NOTNULL,
00044          DB_BOOL,
00045          DB_BOOL_NOTNULL,
00046 
00047          DB_NBR_ITEMS
00048       };
00049 
00050       <a class="code" href="classDBaseElement.html">DBaseElement</a>();
00051 
00052       <a class="code" href="classDBaseElement.html">DBaseElement</a>( <span class="keywordtype">int</span> fieldNum, <span class="keyword">const</span> <span class="keywordtype">char</span>* pszFieldName,
00053                     <span class="keywordtype">bool</span> bNotNull = <span class="keyword">false</span> );
00054 
00055       <span class="keyword">virtual</span> ~<a class="code" href="classDBaseElement.html">DBaseElement</a>();
00056 
00057       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceSTLUtility.html#a31">operator == </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const </span>= 0;
00058    
00059       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="namespaceSTLUtility.html#a33">operator != </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const </span>= 0;
00060 
00061       <span class="keyword">virtual</span> <span class="keywordtype">void</span> readValue( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) = 0;
00062 
00063       <span class="keyword">virtual</span> <span class="keywordtype">void</span> writeValue( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) <span class="keyword">const </span>= 0;
00064 
00065       <span class="keyword">virtual</span> <span class="keywordtype">int</span> <a class="code" href="namespaceMC2Itoa.html#a0">toStr</a>( <span class="keywordtype">char</span>* pszStr, <span class="keywordtype">bool</span> addComma ) <span class="keyword">const </span>= 0;
00066 
00067       <span class="keyword">virtual</span> <span class="keywordtype">int</span> toQuery( <span class="keywordtype">char</span>* pszStr, 
00068                            <span class="keyword">const</span> <span class="keywordtype">char</span>* pszCompOp,
00069                            <span class="keywordtype">void</span>* pValue = NULL ) <span class="keyword">const </span>= 0;
00070 
00071       <span class="keyword">virtual</span> <span class="keywordtype">int</span> toDBType( <span class="keywordtype">char</span>* pszStr ) <span class="keyword">const </span>= 0;
00072 
00073       <span class="keyword">virtual</span> <span class="keywordtype">void</span> setValue( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery ) = 0;
00074 
00075       <span class="keyword">inline</span> <span class="keywordtype">bool</span> changed() <span class="keyword">const</span>;
00076 
00077       <span class="keyword">inline</span> <span class="keywordtype">void</span> setChanged( <span class="keywordtype">bool</span> changed );
00078 
00079       <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* getFieldName() <span class="keyword">const</span>;
00080 
00081       <span class="keyword">inline</span> <span class="keywordtype">bool</span> notNull() <span class="keyword">const</span>;
00082 
00083       <span class="keyword">inline</span> <span class="keywordtype">void</span> setNotNull( <span class="keywordtype">bool</span> bNotNull );
00084 
00085    <span class="keyword">protected</span>:
<a name="l00086"></a><a class="code" href="classDBaseElement.html#p0">00086</a>       <span class="keywordtype">bool</span> m_changed;
00087 
<a name="l00088"></a><a class="code" href="classDBaseElement.html#p1">00088</a>       <span class="keyword">const</span> <span class="keywordtype">char</span>* m_pszFieldName;
<a name="l00089"></a><a class="code" href="classDBaseElement.html#p2">00089</a>       <span class="keywordtype">int</span> m_fieldNum;
00090 
<a name="l00091"></a><a class="code" href="classDBaseElement.html#p3">00091</a>       <span class="keywordtype">bool</span> m_notNull;
00092 };
00093 
<a name="l00094"></a><a class="code" href="DBaseObject_8h.html#a0">00094</a> <span class="keyword">typedef</span> std::vector&lt; DBaseElement* &gt; DBaseElementVector;
00095 
<a name="l00101"></a><a class="code" href="classDBaseObject.html">00101</a> <span class="keyword">class </span><a class="code" href="classDBaseObject.html">DBaseObject</a> {
00102    <span class="keyword">public</span>:
00103 
<a name="l00107"></a><a class="code" href="classDBaseObject.html#w8">00107</a>       <span class="keyword">enum</span> comp_t {
00108          COMPOP_GREATER = 0,
00109          COMPOP_LESS,
00110          COMPOP_EQUAL,
00111          COMPOP_EXACT,
00112 
00113          COMPOP_NBROPS
00114       };
00115 
<a name="l00116"></a><a class="code" href="classDBaseObject.html#w9">00116</a>       <span class="keyword">enum</span> bool_t {
00117          BOOLOP_AND = 0,
00118          BOOLOP_OR,
00119 
00120          BOOLOP_NBROPS
00121       };
00122 
00129       <a class="code" href="classDBaseObject.html">DBaseObject</a>( <span class="keywordtype">int</span> nbrFields );
00130 
00135       <a class="code" href="classDBaseObject.html">DBaseObject</a>( <span class="keyword">const</span> <a class="code" href="classDBaseObject.html">DBaseObject</a>&amp; copy );
00136       
00140       <span class="keyword">virtual</span> ~<a class="code" href="classDBaseObject.html">DBaseObject</a>();
00141 
00147       <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* getTableStr() <span class="keyword">const </span>= 0;
00148 
00154       <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>** getFieldDescriptions() <span class="keyword">const</span>;
00155 
00163       <span class="keyword">virtual</span> <span class="keyword">const</span> StringTable::stringCode* getFieldStringCode() <span class="keyword">const</span>;
00164 
00170       <span class="keyword">const</span> <a class="code" href="classDBaseObject.html">DBaseObject</a>&amp; operator=( <span class="keyword">const</span> <a class="code" href="classDBaseObject.html">DBaseObject</a>&amp; copy );
00171 
00181       <span class="keywordtype">void</span> packInto( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) <span class="keyword">const</span>;
00182 
00183       <span class="keywordtype">void</span> readChanges( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos );
00184 
00185       <span class="keywordtype">void</span> addChanges( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) <span class="keyword">const</span>;
00186 
00187       <span class="keywordtype">void</span> reset();
00188 
00194       <span class="keyword">const</span> <span class="keywordtype">char</span>* createTableQuery() <span class="keyword">const</span>;
00195 
00205       <span class="keywordtype">bool</span> insert( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery, uint32 <span class="keywordtype">id</span> = MAX_UINT32 );
00206 
00216       <span class="keywordtype">bool</span> update( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery );
00217 
00225       <span class="keywordtype">bool</span> remove( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery );
00226 
00227       <span class="keywordtype">void</span> getAllItems();
00228 
00229       <span class="keywordtype">void</span> addQuery( <span class="keywordtype">void</span>* value,
00230                      <span class="keywordtype">int</span> field,
00231                      DBaseObject::comp_t compOp,
00232                      DBaseObject::bool_t boolOp );
00233 
00234       <span class="keywordtype">bool</span> makeQuery( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) <span class="keyword">const</span>;
00235 
00236       <span class="keywordtype">bool</span> readQuery( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos );
00237 
00238       <span class="keywordtype">bool</span> compareTo( <span class="keyword">const</span> <a class="code" href="classDBaseObject.html">DBaseObject</a>&amp; dbObj ) <span class="keyword">const</span>;
00239 
00240       <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* getQuery() <span class="keyword">const</span>;
00241 
00245       <span class="keywordtype">void</span> dump() <span class="keyword">const</span>;
00246 
00247    <span class="keyword">protected</span>:
00248       <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>** getFieldNames() <span class="keyword">const </span>= 0;
00249 
00250       <span class="keyword">virtual</span> <span class="keyword">const</span> DBaseElement::element_t* getFieldTypes() <span class="keyword">const </span>= 0;
00251 
00252       <span class="keywordtype">void</span> init( <span class="keywordtype">int</span> nbrFields );
00253 
00254       <span class="keywordtype">void</span> init( <span class="keywordtype">int</span> nbrFields, <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery );
00255 
00256       <span class="keywordtype">void</span> init( <span class="keywordtype">int</span> nbrFields, <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos );
00257 
00258       <span class="keyword">inline</span> <span class="keywordtype">int</span> getInt( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field ) <span class="keyword">const</span>;
00259 
00260       <span class="keyword">inline</span> <span class="keywordtype">void</span> setInt( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field, <span class="keywordtype">int</span> iValue );
00261 
00262       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a20">int16</a> getSmallInt( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field ) <span class="keyword">const</span>;
00263 
00264       <span class="keyword">inline</span> <span class="keywordtype">void</span> setSmallInt( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field, int16 nValue );
00265 
00266       <span class="keyword">inline</span> <span class="keywordtype">bool</span> getBool( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field ) <span class="keyword">const</span>;
00267 
00268       <span class="keyword">inline</span> <span class="keywordtype">void</span> setBool( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field, <span class="keywordtype">bool</span> bValue );
00269 
00270       <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* getString( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field ) <span class="keyword">const</span>;
00271 
00272       <span class="keyword">inline</span> <span class="keywordtype">void</span> setString( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field, <span class="keyword">const</span> <span class="keywordtype">char</span>* pszValue );
00273 
<a name="l00274"></a><a class="code" href="classDBaseObject.html#p0">00274</a>       <a class="code" href="DBaseObject_8h.html#a0">DBaseElementVector</a> m_dBaseElm;
00275 
<a name="l00276"></a><a class="code" href="classDBaseObject.html#t0">00276</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* m_pszCompOp[];
00277 
<a name="l00278"></a><a class="code" href="classDBaseObject.html#t1">00278</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* m_pszBoolOp[];
00279 
<a name="l00281"></a><a class="code" href="classDBaseObject.html#p1">00281</a>       <span class="keywordtype">char</span>* m_pszQuery;
00282 
<a name="l00284"></a><a class="code" href="classDBaseObject.html#p2">00284</a>       <span class="keywordtype">int</span> m_lastBoolOp;
00285 
00286    <span class="keyword">private</span>:
00287       <a class="code" href="Types_8h.html#a21">uint32</a> getNewId( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery );
00288 
00289       <span class="keywordtype">void</span> copyMembers( <span class="keyword">const</span> <a class="code" href="classDBaseObject.html">DBaseObject</a>&amp; copy );
00290 };
00291 
00292 
00293 
<a name="l00298"></a><a class="code" href="classDBaseInt.html">00298</a> <span class="keyword">class </span><a class="code" href="classDBaseInt.html">DBaseInt</a> : <span class="keyword">public</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>
00299 {
00300 <span class="keyword">public</span>:
00301    <a class="code" href="classDBaseInt.html#a0">DBaseInt</a>( <span class="keywordtype">int</span> fieldNum, <span class="keyword">const</span> <span class="keywordtype">char</span>* pszFieldName, <span class="keywordtype">bool</span> bNotNull = <span class="keyword">false</span> );
00302 
00303    <span class="keyword">virtual</span> <a class="code" href="classDBaseInt.html#a1">~DBaseInt</a>();
00304 
00305    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseInt.html#a2">operator == </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const</span>;
00306    
00307    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseInt.html#a3">operator != </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const</span>;
00308 
00309    <span class="keywordtype">void</span> <a class="code" href="classDBaseInt.html#a4">readValue</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos );
00310 
00311    <span class="keywordtype">void</span> <a class="code" href="classDBaseInt.html#a5">writeValue</a>( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) <span class="keyword">const</span>;
00312 
00313    <span class="keywordtype">int</span> <a class="code" href="classDBaseInt.html#a6">toStr</a>( <span class="keywordtype">char</span>* pszStr, <span class="keywordtype">bool</span> addComma ) <span class="keyword">const</span>;
00314 
00315    <span class="keywordtype">int</span> <a class="code" href="classDBaseInt.html#a7">toQuery</a>( <span class="keywordtype">char</span>* pszStr, 
00316                 <span class="keyword">const</span> <span class="keywordtype">char</span>* pszCompOp,
00317                 <span class="keywordtype">void</span>* pValue = NULL ) <span class="keyword">const</span>;
00318 
00319    <span class="keywordtype">int</span> <a class="code" href="classDBaseInt.html#a8">toDBType</a>( <span class="keywordtype">char</span>* pszStr ) <span class="keyword">const</span>;
00320 
00321    <span class="keywordtype">void</span> <a class="code" href="classDBaseInt.html#a9">setValue</a>( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery );
00322 
00323    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseInt.html#a9">setValue</a>( <span class="keywordtype">int</span> iValue );
00324 
00325    <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classDBaseInt.html#a11">getValue</a>() <span class="keyword">const</span>;
00326 
00327 <span class="keyword">protected</span>:
<a name="l00328"></a><a class="code" href="classDBaseInt.html#p0">00328</a>    <a class="code" href="Types_8h.html#a22">int32</a> m_iValue;
00329 };
00330 
00331 
<a name="l00336"></a><a class="code" href="classDBaseSmallInt.html">00336</a> <span class="keyword">class </span><a class="code" href="classDBaseSmallInt.html">DBaseSmallInt</a> : <span class="keyword">public</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>
00337 {
00338 <span class="keyword">public</span>:
00339    <a class="code" href="classDBaseSmallInt.html#a0">DBaseSmallInt</a>( <span class="keywordtype">int</span> fieldNum, <span class="keyword">const</span> <span class="keywordtype">char</span>* pszFieldName, 
00340                   <span class="keywordtype">bool</span> bNotNull = <span class="keyword">false</span> );
00341 
00342    <span class="keyword">virtual</span> <a class="code" href="classDBaseSmallInt.html#a1">~DBaseSmallInt</a>();
00343 
00344    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseSmallInt.html#a2">operator == </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const</span>;
00345    
00346    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseSmallInt.html#a3">operator != </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const</span>;
00347 
00348    <span class="keywordtype">void</span> <a class="code" href="classDBaseSmallInt.html#a4">readValue</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos );
00349 
00350    <span class="keywordtype">void</span> <a class="code" href="classDBaseSmallInt.html#a5">writeValue</a>( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) <span class="keyword">const</span>;
00351 
00352    <span class="keywordtype">int</span> <a class="code" href="classDBaseSmallInt.html#a6">toStr</a>( <span class="keywordtype">char</span>* pszStr, <span class="keywordtype">bool</span> addComma ) <span class="keyword">const</span>;
00353 
00354    <span class="keywordtype">int</span> <a class="code" href="classDBaseSmallInt.html#a7">toQuery</a>( <span class="keywordtype">char</span>* pszStr,
00355                 <span class="keyword">const</span> <span class="keywordtype">char</span>* pszCompOp,
00356                 <span class="keywordtype">void</span>* pValue = NULL ) <span class="keyword">const</span>;
00357 
00358    <span class="keywordtype">int</span> <a class="code" href="classDBaseSmallInt.html#a8">toDBType</a>( <span class="keywordtype">char</span>* pszStr ) <span class="keyword">const</span>;
00359 
00360    <span class="keywordtype">void</span> <a class="code" href="classDBaseSmallInt.html#a9">setValue</a>( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery );
00361 
00362    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseSmallInt.html#a9">setValue</a>( <a class="code" href="Types_8h.html#a20">int16</a> nValue );
00363 
00364    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a20">int16</a> <a class="code" href="classDBaseSmallInt.html#a11">getValue</a>() <span class="keyword">const</span>;
00365 
00366 <span class="keyword">protected</span>:
<a name="l00367"></a><a class="code" href="classDBaseSmallInt.html#p0">00367</a>    <a class="code" href="Types_8h.html#a20">int16</a> m_nValue;
00368 };
00369 
00370 
<a name="l00375"></a><a class="code" href="classDBaseString.html">00375</a> <span class="keyword">class </span><a class="code" href="classDBaseString.html">DBaseString</a> : <span class="keyword">public</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>
00376 {
00377 <span class="keyword">public</span>:
00378    <a class="code" href="classDBaseString.html#a0">DBaseString</a>( <span class="keywordtype">int</span> fieldNum, <span class="keyword">const</span> <span class="keywordtype">char</span>* pszFieldName, <span class="keywordtype">int</span> size,
00379                 <span class="keywordtype">bool</span> bNotNull = <span class="keyword">false</span> );
00380 
00381    <a class="code" href="classDBaseString.html#a0">DBaseString</a>( <span class="keyword">const</span> <a class="code" href="classDBaseString.html">DBaseString</a>&amp; copy );
00382 
00383    <span class="keyword">virtual</span> <a class="code" href="classDBaseString.html#a2">~DBaseString</a>();
00384 
00385    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseString.html#a3">operator == </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const</span>;
00386    
00387    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseString.html#a4">operator != </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const</span>;
00388 
00389    <span class="keywordtype">void</span> <a class="code" href="classDBaseString.html#a5">readValue</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos );
00390 
00391    <span class="keywordtype">void</span> <a class="code" href="classDBaseString.html#a6">writeValue</a>( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) <span class="keyword">const</span>;
00392 
00393    <span class="keywordtype">int</span> <a class="code" href="classDBaseString.html#a7">toStr</a>( <span class="keywordtype">char</span>* pszStr, <span class="keywordtype">bool</span> addComma ) <span class="keyword">const</span>;
00394 
00395    <span class="keywordtype">int</span> <a class="code" href="classDBaseString.html#a8">toQuery</a>( <span class="keywordtype">char</span>* pszStr,
00396                 <span class="keyword">const</span> <span class="keywordtype">char</span>* pszCompOp,
00397                 <span class="keywordtype">void</span>* pValue = NULL ) <span class="keyword">const</span>;
00398 
00399    <span class="keywordtype">int</span> <a class="code" href="classDBaseString.html#a9">toDBType</a>( <span class="keywordtype">char</span>* pszStr ) <span class="keyword">const</span>;
00400 
00401    <span class="keywordtype">void</span> <a class="code" href="classDBaseString.html#a10">setValue</a>( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery );
00402 
00403    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseString.html#a10">setValue</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* pszStr );
00404 
00405    <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classDBaseString.html#a12">getValue</a>() <span class="keyword">const</span>;
00406 
00407 <span class="keyword">protected</span>:
<a name="l00408"></a><a class="code" href="classDBaseString.html#p0">00408</a>    <span class="keywordtype">char</span>* m_pszValue;
00409 
<a name="l00410"></a><a class="code" href="classDBaseString.html#p1">00410</a>    <span class="keywordtype">int</span> m_strSize;
00411 };
00412 
00413 
<a name="l00418"></a><a class="code" href="classDBaseBool.html">00418</a> <span class="keyword">class </span><a class="code" href="classDBaseBool.html">DBaseBool</a> : <span class="keyword">public</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>
00419 {
00420 <span class="keyword">public</span>:
00421    <a class="code" href="classDBaseBool.html#a0">DBaseBool</a>( <span class="keywordtype">int</span> fieldNum, <span class="keyword">const</span> <span class="keywordtype">char</span>* pszFieldName, <span class="keywordtype">bool</span> bNotNull = <span class="keyword">false</span> );
00422 
00423    <span class="keyword">virtual</span> <a class="code" href="classDBaseBool.html#a1">~DBaseBool</a>();
00424 
00425    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseBool.html#a2">operator == </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const</span>;
00426    
00427    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseBool.html#a3">operator != </a>(<span class="keyword">const</span> <a class="code" href="classDBaseElement.html">DBaseElement</a>&amp; elm) <span class="keyword">const</span>;
00428 
00429    <span class="keywordtype">void</span> <a class="code" href="classDBaseBool.html#a4">readValue</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos );
00430 
00431    <span class="keywordtype">void</span> <a class="code" href="classDBaseBool.html#a5">writeValue</a>( <a class="code" href="classPacket.html">Packet</a>* pPacket, <span class="keywordtype">int</span>&amp; pos ) <span class="keyword">const</span>;
00432 
00433    <span class="keywordtype">int</span> <a class="code" href="classDBaseBool.html#a6">toStr</a>( <span class="keywordtype">char</span>* pszStr, <span class="keywordtype">bool</span> addComma ) <span class="keyword">const</span>;
00434 
00435    <span class="keywordtype">int</span> <a class="code" href="classDBaseBool.html#a7">toQuery</a>( <span class="keywordtype">char</span>* pszStr,
00436                 <span class="keyword">const</span> <span class="keywordtype">char</span>* pszCompOp,
00437                 <span class="keywordtype">void</span>* pValue = NULL ) <span class="keyword">const</span>;
00438 
00439    <span class="keywordtype">int</span> <a class="code" href="classDBaseBool.html#a8">toDBType</a>( <span class="keywordtype">char</span>* pszStr ) <span class="keyword">const</span>;
00440 
00441    <span class="keywordtype">void</span> <a class="code" href="classDBaseBool.html#a9">setValue</a>( <a class="code" href="classSQLQuery.html">SQLQuery</a>* pQuery );
00442 
00443    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseBool.html#a9">setValue</a>( <span class="keywordtype">bool</span> bValue );
00444 
00445    <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseBool.html#a11">getValue</a>() <span class="keyword">const</span>;
00446 
00447 <span class="keyword">protected</span>:
<a name="l00448"></a><a class="code" href="classDBaseBool.html#p0">00448</a>    <span class="keywordtype">bool</span> m_bValue;
00449 };
00450 
00451 <span class="comment">/*</span>
00452 <span class="comment"> * Inlined methods</span>
00453 <span class="comment"> */</span>
00454 
<a name="l00455"></a><a class="code" href="classDBaseElement.html#a11">00455</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseElement.html#a11">DBaseElement::changed</a>()<span class="keyword"> const</span>
00456 <span class="keyword"></span>{
00457    <span class="keywordflow">return</span> m_changed;
00458 }
00459 
<a name="l00460"></a><a class="code" href="classDBaseElement.html#a12">00460</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseElement.html#a12">DBaseElement::setChanged</a>( <span class="keywordtype">bool</span> changed )
00461 {
00462    <a class="code" href="classDBaseElement.html#p0">m_changed</a> = changed;
00463 }
00464 
<a name="l00465"></a><a class="code" href="classDBaseElement.html#a13">00465</a> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classDBaseElement.html#a13">DBaseElement::getFieldName</a>()<span class="keyword"> const</span>
00466 <span class="keyword"></span>{
00467    <span class="keywordflow">return</span> m_pszFieldName;
00468 }
00469 
<a name="l00470"></a><a class="code" href="classDBaseElement.html#a15">00470</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseElement.html#a15">DBaseElement::setNotNull</a>( <span class="keywordtype">bool</span> bNotNull )
00471 {
00472    <a class="code" href="classDBaseElement.html#p3">m_notNull</a> = bNotNull;
00473 }
00474 
<a name="l00475"></a><a class="code" href="classDBaseElement.html#a14">00475</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseElement.html#a14">DBaseElement::notNull</a>()<span class="keyword"> const</span>
00476 <span class="keyword"></span>{
00477    <span class="keywordflow">return</span> m_notNull;
00478 }
00479 
<a name="l00480"></a><a class="code" href="classDBaseObject.html#a20">00480</a> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classDBaseObject.html#a20">DBaseObject::getQuery</a>()<span class="keyword"> const</span>
00481 <span class="keyword"></span>{
00482    <span class="keywordflow">return</span> m_pszQuery;
00483 }
00484 
<a name="l00485"></a><a class="code" href="classDBaseObject.html#b5">00485</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classDBaseObject.html#b5">DBaseObject::getInt</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field )<span class="keyword"> const</span>
00486 <span class="keyword"></span>{
00487    <a class="code" href="classDBaseInt.html">DBaseInt</a>* pInt = NULL;
00488    
00489    <span class="keywordflow">if</span> ( field &lt; <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>.size() ) {
00490       pInt = dynamic_cast&lt;DBaseInt*&gt;( <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>[field] );
00491    }
00492 
00493    <span class="keywordflow">if</span>( pInt != NULL )
00494       <span class="keywordflow">return</span> pInt-&gt;<a class="code" href="classDBaseInt.html#a11">getValue</a>();
00495    <span class="keywordflow">else</span>
00496       <span class="keywordflow">return</span> MAX_INT32;
00497 }
00498 
<a name="l00499"></a><a class="code" href="classDBaseObject.html#b6">00499</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseObject.html#b6">DBaseObject::setInt</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field, <span class="keywordtype">int</span> iValue )
00500 {
00501    <a class="code" href="classDBaseInt.html">DBaseInt</a>* pInt = NULL; 
00502  
00503    <span class="keywordflow">if</span> ( field &lt; <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>.size() ) {
00504       pInt = dynamic_cast&lt;DBaseInt*&gt;( <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>[field] );
00505    }
00506 
00507    <span class="keywordflow">if</span>( pInt != NULL )
00508       pInt-&gt;<a class="code" href="classDBaseInt.html#a9">setValue</a>( iValue );
00509 }
00510 
<a name="l00511"></a><a class="code" href="classDBaseObject.html#b7">00511</a> <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a20">int16</a> <a class="code" href="classDBaseObject.html#b7">DBaseObject::getSmallInt</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field )<span class="keyword"> const</span>
00512 <span class="keyword"></span>{
00513    <a class="code" href="classDBaseSmallInt.html">DBaseSmallInt</a>* pSmallInt = NULL;
00514 
00515    <span class="keywordflow">if</span> ( field &lt; <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>.size() ) {
00516       pSmallInt = dynamic_cast&lt;DBaseSmallInt*&gt;( <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>[field] );
00517    }
00518 
00519    <span class="keywordflow">if</span>( pSmallInt != NULL )
00520       <span class="keywordflow">return</span> pSmallInt-&gt;<a class="code" href="classDBaseSmallInt.html#a11">getValue</a>();
00521    <span class="keywordflow">else</span>
00522       <span class="keywordflow">return</span> MAX_INT16;
00523 }
00524 
<a name="l00525"></a><a class="code" href="classDBaseObject.html#b8">00525</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseObject.html#b8">DBaseObject::setSmallInt</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field, int16 nValue )
00526 {
00527    <a class="code" href="classDBaseSmallInt.html">DBaseSmallInt</a>* pSmallInt = NULL;
00528 
00529    <span class="keywordflow">if</span> ( field &lt; <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>.size() ) {
00530       pSmallInt = dynamic_cast&lt;DBaseSmallInt*&gt;( <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>[field] );
00531    }
00532 
00533    <span class="keywordflow">if</span>( pSmallInt != NULL )
00534       pSmallInt-&gt;<a class="code" href="classDBaseSmallInt.html#a9">setValue</a>( nValue );
00535 }
00536 
<a name="l00537"></a><a class="code" href="classDBaseObject.html#b9">00537</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseObject.html#b9">DBaseObject::getBool</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field )<span class="keyword"> const</span>
00538 <span class="keyword"></span>{
00539    <a class="code" href="classDBaseBool.html">DBaseBool</a>* pBool = NULL;
00540    
00541    <span class="keywordflow">if</span> ( field &lt; <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>.size() ) {
00542       pBool = dynamic_cast&lt;DBaseBool*&gt;( <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>[field] );
00543    }
00544 
00545    <span class="keywordflow">if</span>( pBool != NULL )
00546       <span class="keywordflow">return</span> pBool-&gt;<a class="code" href="classDBaseBool.html#a11">getValue</a>();
00547    <span class="keywordflow">else</span>
00548       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00549 }
00550 
<a name="l00551"></a><a class="code" href="classDBaseObject.html#b10">00551</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseObject.html#b10">DBaseObject::setBool</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field, <span class="keywordtype">bool</span> bValue )
00552 {
00553    <a class="code" href="classDBaseBool.html">DBaseBool</a>* pBool = NULL;
00554 
00555    <span class="keywordflow">if</span> ( field &lt; <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>.size() ) {
00556       pBool = dynamic_cast&lt;DBaseBool*&gt;( <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>[field] );
00557    }
00558 
00559    <span class="keywordflow">if</span>( pBool != NULL )
00560       pBool-&gt;<a class="code" href="classDBaseBool.html#a9">setValue</a>( bValue );
00561 }
00562 
<a name="l00563"></a><a class="code" href="classDBaseObject.html#b11">00563</a> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classDBaseObject.html#b11">DBaseObject::getString</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field )<span class="keyword"> const</span>
00564 <span class="keyword"></span>{
00565    <a class="code" href="classDBaseString.html">DBaseString</a>* pStr = NULL;
00566 
00567    <span class="keywordflow">if</span> ( field &lt; <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>.size() ) {
00568       pStr = dynamic_cast&lt;DBaseString*&gt;( <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>[field] );
00569    }
00570 
00571    <span class="keywordflow">if</span>( pStr != NULL )
00572       <span class="keywordflow">return</span> pStr-&gt;<a class="code" href="classDBaseString.html#a12">getValue</a>();
00573    <span class="keywordflow">else</span>
00574       <span class="keywordflow">return</span> NULL;
00575 }
00576 
<a name="l00577"></a><a class="code" href="classDBaseObject.html#b12">00577</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseObject.html#b12">DBaseObject::setString</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> field, <span class="keyword">const</span> <span class="keywordtype">char</span>* pszValue )
00578 {
00579    <a class="code" href="classDBaseString.html">DBaseString</a>* pStr = NULL;
00580 
00581    <span class="keywordflow">if</span> ( field &lt; <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>.size() ) {
00582       pStr = dynamic_cast&lt;DBaseString*&gt;( <a class="code" href="classDBaseObject.html#p0">m_dBaseElm</a>[field] );
00583    }
00584 
00585    <span class="keywordflow">if</span>( pStr != NULL )
00586       pStr-&gt;<a class="code" href="classDBaseString.html#a10">setValue</a>( pszValue );
00587 }
00588 
<a name="l00589"></a><a class="code" href="classDBaseInt.html#a10">00589</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseInt.html#a9">DBaseInt::setValue</a>( <span class="keywordtype">int</span> iValue )
00590 {
00591    <a class="code" href="classDBaseInt.html#p0">m_iValue</a> = iValue;
00592    m_changed = <span class="keyword">true</span>;
00593 }
00594 
<a name="l00595"></a><a class="code" href="classDBaseInt.html#a11">00595</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classDBaseInt.html#a11">DBaseInt::getValue</a>()<span class="keyword"> const</span>
00596 <span class="keyword"></span>{
00597    <span class="keywordflow">return</span> m_iValue;
00598 }
00599 
<a name="l00600"></a><a class="code" href="classDBaseSmallInt.html#a10">00600</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseSmallInt.html#a9">DBaseSmallInt::setValue</a>( int16 nValue )
00601 {
00602    <a class="code" href="classDBaseSmallInt.html#p0">m_nValue</a> = nValue;
00603    m_changed = <span class="keyword">true</span>;
00604 }
00605 
<a name="l00606"></a><a class="code" href="classDBaseSmallInt.html#a11">00606</a> <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a20">int16</a> <a class="code" href="classDBaseSmallInt.html#a11">DBaseSmallInt::getValue</a>()<span class="keyword"> const</span>
00607 <span class="keyword"></span>{
00608    <span class="keywordflow">return</span> m_nValue;
00609 }
00610 
<a name="l00611"></a><a class="code" href="classDBaseBool.html#a10">00611</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseBool.html#a9">DBaseBool::setValue</a>( <span class="keywordtype">bool</span> bValue )
00612 {
00613    <a class="code" href="classDBaseBool.html#p0">m_bValue</a> = bValue;
00614    m_changed = <span class="keyword">true</span>;
00615 }
00616 
<a name="l00617"></a><a class="code" href="classDBaseBool.html#a11">00617</a> <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classDBaseBool.html#a11">DBaseBool::getValue</a>()<span class="keyword"> const</span>
00618 <span class="keyword"></span>{
00619    <span class="keywordflow">return</span> m_bValue;
00620 }
00621 
<a name="l00622"></a><a class="code" href="classDBaseString.html#a11">00622</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classDBaseString.html#a10">DBaseString::setValue</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* pszStr )
00623 {
00624    <span class="keyword">delete</span> m_pszValue;
00625    <a class="code" href="classDBaseString.html#p0">m_pszValue</a> = <a class="code" href="classStringUtility.html#e22">StringUtility::newStrDup</a>( pszStr );
00626    m_changed = <span class="keyword">true</span>;
00627 }
00628 
<a name="l00629"></a><a class="code" href="classDBaseString.html#a12">00629</a> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classDBaseString.html#a12">DBaseString::getValue</a>()<span class="keyword"> const</span>
00630 <span class="keyword"></span>{
00631    <span class="keywordflow">return</span> m_pszValue;
00632 }
00633 
00634 <span class="preprocessor">#endif //DBASEOBJECT_H</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:46 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
