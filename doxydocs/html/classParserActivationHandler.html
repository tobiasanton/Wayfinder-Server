<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: ParserActivationHandler Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>ParserActivationHandler Class Reference</h1>Class handling activation codes.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="ParserActivationHandler_8h-source.html">ParserActivationHandler.h</a>&gt;</code>
<p>
Inheritance diagram for ParserActivationHandler:<p><center><img src="classParserActivationHandler__inherit__graph.png" border="0" usemap="#ParserActivationHandler__inherit__map" alt="Inheritance graph"></center>
<map name="ParserActivationHandler__inherit__map">
<area href="classParserHandler.html" shape="rect" coords="35,5,141,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for ParserActivationHandler:<p><center><img src="classParserActivationHandler__coll__graph.png" border="0" usemap="#ParserActivationHandler__coll__map" alt="Collaboration graph"></center>
<map name="ParserActivationHandler__coll__map">
<area href="classParserHandler.html" shape="rect" coords="75,96,181,123" alt="">
<area href="classParserThread.html" shape="rect" coords="5,5,107,32" alt="">
<area href="classParserThreadGroup.html" shape="rect" coords="131,5,269,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classParserActivationHandler-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classParserActivationHandler.html#a0">ParserActivationHandler</a> (<a class="el" href="classParserThread.html">ParserThread</a> *thread, <a class="el" href="classParserThreadGroup.html">ParserThreadGroup</a> *group)
<dl class="el"><dd class="mdescRight">Constructor.  <a href="#a0"></a><br></dl><li>virtual <a class="el" href="classParserActivationHandler.html#a1">~ParserActivationHandler</a> ()
<dl class="el"><dd class="mdescRight">Destructor.  <a href="#a1"></a><br></dl><li>int <a class="el" href="classParserActivationHandler.html#a2">activateUser</a> (<a class="el" href="classUserUser.html">UserUser</a> *user, const <a class="el" href="classClientSetting.html">ClientSetting</a> *clientSetting, const char *activationCode, const char *phoneNumber, <a class="el" href="Types_8h.html#a21">uint32</a> topRegionID, <a class="el" href="Types_8h.html#a21">uint32</a> ip, const char *userAgent, const char *userInput, const char *cellularModel, <a class="el" href="Types_8h.html#a21">uint32</a> &amp;ownerUIN, <a class="el" href="classMC2String.html">MC2String</a> &amp;serverStr, bool allowSpecialCodes=false)
<dl class="el"><dd class="mdescRight">Handles activation for a user.  <a href="#a2"></a><br></dl><li>int <a class="el" href="classParserActivationHandler.html#a3">getActivationData</a> (const char *activationCode, <a class="el" href="classMC2String.html">MC2String</a> &amp;rights, <a class="el" href="Types_8h.html#a21">uint32</a> &amp;ownerUIN, <a class="el" href="classMC2String.html">MC2String</a> &amp;server, bool wholeServerStr=false)
<dl class="el"><dd class="mdescRight">Gets activation data for an activation.  <a href="#a3"></a><br></dl><li>bool <a class="el" href="classParserActivationHandler.html#a4">isSpecialActivationCode</a> (const <a class="el" href="classMC2String.html">MC2String</a> &amp;ac) const 
<dl class="el"><dd class="mdescRight">Checks if an activation code is a special code.  <a href="#a4"></a><br></dl><li>int <a class="el" href="classParserActivationHandler.html#a5">addUserRights</a> (<a class="el" href="classUserUser.html">UserUser</a> *user, const char *phoneNumber, const char *cellularModel, <a class="el" href="Types_8h.html#a21">uint32</a> topRegionID, const <a class="el" href="classMC2String.html">MC2String</a> &amp;rightStr, const <a class="el" href="classMC2String.html">MC2String</a> &amp;activationCode, <a class="el" href="Types_8h.html#a21">uint32</a> now, <a class="el" href="Types_8h.html#a21">uint32</a> newWriteId=0)
<dl class="el"><dd class="mdescRight">Add users rights to user determined by activationCode and rightStr.  <a href="#a5"></a><br></dl></ul>
<h2>Private Member Functions</h2>
<ul>
<li>int <a class="el" href="classParserActivationHandler.html#d0">sendActivation</a> (<a class="el" href="classUserUser.html">UserUser</a> *user, const <a class="el" href="classMC2String.html">MC2String</a> &amp;ac, <a class="el" href="Types_8h.html#a21">uint32</a> ip, const char *userAgent, const char *userInput)
<dl class="el"><dd class="mdescRight">sends activation packet  <a href="#d0"></a><br></dl><li>int <a class="el" href="classParserActivationHandler.html#d1">getActivationCode</a> (<a class="el" href="classUserUser.html">UserUser</a> *user, const <a class="el" href="classClientSetting.html">ClientSetting</a> *clientSetting, const char *activationCode, <a class="el" href="Types_8h.html#a21">uint32</a> ip, const char *userAgent, const char *userInput, <a class="el" href="Types_8h.html#a21">uint32</a> &amp;ownerUIN, <a class="el" href="classMC2String.html">MC2String</a> &amp;serverStr, bool allowSpecialCodes, <a class="el" href="Types_8h.html#a21">uint32</a> now, <a class="el" href="classMC2String.html">MC2String</a> &amp;ac, <a class="el" href="classMC2String.html">MC2String</a> &amp;rightStr)
<dl class="el"><dd class="mdescRight">Gets activation code.  <a href="#d1"></a><br></dl></ul>
<h2>Private Attributes</h2>
<ul>
<li>auto_ptr&lt; RightStrToRightContImpl &gt; <a class="el" href="classParserActivationHandler.html#r0">m_rightStrToRightCont</a>
<dl class="el"><dd class="mdescRight">The <a class="el" href="classMap.html">Map</a> of string to user right.  <a href="#r0"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class handling activation codes. 
<p>

<p>
Definition at line <a class="el" href="ParserActivationHandler_8h-source.html#l00029">29</a> of file <a class="el" href="ParserActivationHandler_8h-source.html">ParserActivationHandler.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="ParserActivationHandler::ParserActivationHandler"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ParserActivationHandler::ParserActivationHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classParserThread.html">ParserThread</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>thread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classParserThreadGroup.html">ParserThreadGroup</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>group</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ParserActivationHandler::~ParserActivationHandler"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual ParserActivationHandler::~<a class="el" href="classParserActivationHandler.html">ParserActivationHandler</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor. 
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a2" doxytag="ParserActivationHandler::activateUser"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ParserActivationHandler::activateUser           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classUserUser.html">UserUser</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classClientSetting.html">ClientSetting</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>clientSetting</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>activationCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>phoneNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>topRegionID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>userAgent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>userInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cellularModel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ownerUIN</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>serverStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>allowSpecialCodes</em> = <code>false</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handles activation for a user. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user</em>&nbsp;</td><td>The user to activate for. Will be updated if ok. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clientSetting</em>&nbsp;</td><td>The client being used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>activationCode</em>&nbsp;</td><td>The activation code. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>phoneNumber</em>&nbsp;</td><td>The phone number. If empty string then phoneNumber is ignored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>topRegionID</em>&nbsp;</td><td>The selected top region id. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ip</em>&nbsp;</td><td>The ip of the requester. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>userAgent</em>&nbsp;</td><td>The userAgent of the requester. For logging. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>userInput</em>&nbsp;</td><td>The userInput of the requester. For logging. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cellularModel</em>&nbsp;</td><td>The cellularModel of the requester. Updates or sets model for phoneNumber. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ownerUIN</em>&nbsp;</td><td>Set to the owner of the AC if return value is -4. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serverStr</em>&nbsp;</td><td>Set to the server to redirect to if return value is -8. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>allowSpecialCodes</em>&nbsp;</td><td>If allows special activation codes. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if ok, -1 on error, -2 on timeout, -3 Wrong phone nbr, -4 Used activation code, -5 Bad activation code, -6 Extension not allowed, -7 Creation not allowed(Right already exists), -8 redirect needed, -9 if code is valid but may not be used in this type of client. -10 if user must choose region before using ac. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ParserActivationHandler::addUserRights"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ParserActivationHandler::addUserRights           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classUserUser.html">UserUser</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>phoneNumber</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cellularModel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>topRegionID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>rightStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>activationCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>now</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>newWriteId</em> = <code>0</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add users rights to user determined by activationCode and rightStr. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>phoneNumber</em>&nbsp;</td><td>the phones number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cellularModel</em>&nbsp;</td><td>the cellular model </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>topRegionID</em>&nbsp;</td><td>The selected top region id. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rightStr</em>&nbsp;</td><td>user rights string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>activationCode</em>&nbsp;</td><td>activaction code </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>now</em>&nbsp;</td><td>time "now", start of processing </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newWriteId</em>&nbsp;</td><td>For adding rights to DB or not. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, negative on failure </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="ParserActivationHandler::getActivationCode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ParserActivationHandler::getActivationCode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classUserUser.html">UserUser</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classClientSetting.html">ClientSetting</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>clientSetting</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>activationCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>userAgent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>userInput</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ownerUIN</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>serverStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>allowSpecialCodes</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>now</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ac</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>rightStr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets activation code. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>clientSettings</em>&nbsp;</td><td>the client settings </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>activation</em>&nbsp;</td><td>code the activation code to send </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, negative on failure. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ParserActivationHandler::getActivationData"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ParserActivationHandler::getActivationData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>activationCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>rights</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ownerUIN</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>server</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>wholeServerStr</em> = <code>false</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets activation data for an activation. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>activationCode</em>&nbsp;</td><td>The activation code. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rights</em>&nbsp;</td><td>Set to the rights as string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ownerUIN</em>&nbsp;</td><td>Set to the UIN of the user that owns the activation code, 0 if not used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>server</em>&nbsp;</td><td>Set to the server the other instance this code belongs to, empty means this instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wholeServerStr</em>&nbsp;</td><td>If to return the whole server string not just the server part. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if ok, -1 on error, -2 on timeout, -5 Bad activation code. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ParserActivationHandler::isSpecialActivationCode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool ParserActivationHandler::isSpecialActivationCode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ac</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks if an activation code is a special code. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="ParserActivationHandler::sendActivation"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ParserActivationHandler::sendActivation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classUserUser.html">UserUser</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>ac</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>userAgent</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>userInput</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
sends activation packet 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user</em>&nbsp;</td><td>the user </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ac</em>&nbsp;</td><td>Activation code </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ip</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>userAgent</em>&nbsp;</td><td>the user agent string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>userInput</em>&nbsp;</td><td>user input string </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success, negative on failure. </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="ParserActivationHandler::m_rightStrToRightCont"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">auto_ptr&lt;RightStrToRightContImpl&gt; <a class="el" href="classParserActivationHandler.html#r0">ParserActivationHandler::m_rightStrToRightCont</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The <a class="el" href="classMap.html">Map</a> of string to user right. 
<p>

<p>
Definition at line <a class="el" href="ParserActivationHandler_8h-source.html#l00171">171</a> of file <a class="el" href="ParserActivationHandler_8h-source.html">ParserActivationHandler.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ParserActivationHandler_8h-source.html">ParserActivationHandler.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:26:22 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
