<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: Request.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">Servers</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">include</a></div>
<h1>Request.h</h1><a href="Request_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef REQUEST_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define REQUEST_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include &lt;map&gt;</span>
00019 <span class="preprocessor">#include "<a class="code" href="PacketContainerTree_8h.html">PacketContainerTree.h</a>"</span>
00020 <span class="preprocessor">#include "<a class="code" href="CCSet_8h.html">CCSet.h</a>"</span>
00021 <span class="preprocessor">#include "<a class="code" href="StringTable_8h.html">StringTable.h</a>"</span>
00022 <span class="preprocessor">#include "<a class="code" href="RequestData_8h.html">RequestData.h</a>"</span>
00023 
00024 <span class="keyword">class </span><a class="code" href="classPacketContainer.html">PacketContainer</a>;
00025 <span class="keyword">class </span><a class="code" href="classRequestWithStatus.html">RequestWithStatus</a>;
00026 <span class="keyword">class </span><a class="code" href="classRequestPacket.html">RequestPacket</a>;
00027 
<a name="l00036"></a><a class="code" href="classRequest.html">00036</a> <span class="keyword">class </span><a class="code" href="classRequest.html">Request</a> : <span class="keyword">public</span> <a class="code" href="classLink.html">Link</a> {
00037   <span class="keyword">public</span>:
00038 
<a name="l00039"></a><a class="code" href="classRequest.html#w0">00039</a>    <span class="keyword">typedef</span> <a class="code" href="classvector.html">vector&lt;uint32&gt;</a> <a class="code" href="classvector.html">RequestTime</a>;
00040 
00044       <span class="keyword">virtual</span> <a class="code" href="classRequest.html#a0">~Request</a>();
00045 
00049       <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classRequest.html#a1">getName</a>() <span class="keyword">const</span>;
00050       
00054       <span class="keyword">const</span> <a class="code" href="classUserUser.html">UserUser</a>* <a class="code" href="classRequest.html#a2">getUser</a>() <span class="keyword">const</span>;
00055    
00060       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classRequest.html#a3">getID</a>() <span class="keyword">const</span>;
00061 
00066       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classRequest.html#a4">getTimestamp</a>() <span class="keyword">const</span>;
00067 
00072       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classRequest.html#a5">getOriginator</a>() <span class="keyword">const</span>;
00073 
00078       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a6">setOriginator</a>(uint16 originator);
00079 
00084       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classRequest.html#a7">getNextPacketID</a>();
00085       
00095       <span class="keyword">virtual</span> <a class="code" href="classPacketContainer.html">PacketContainer</a>* <a class="code" href="classRequest.html#a8">getNextPacket</a>();
00096 
00102       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a9">processPacket</a>( <a class="code" href="classPacketContainer.html">PacketContainer</a>* pack ) = 0;
00103 
00110       <span class="keywordtype">bool</span> <span class="keyword">virtual</span> <a class="code" href="classRequest.html#a10">requestDone</a>();
00111 
00119       <span class="keyword">virtual</span> <a class="code" href="classPacketContainer.html">PacketContainer</a>* <a class="code" href="classRequest.html#a11">getAnswer</a>();
00120 
00127       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a12">setParentRequest</a>( <a class="code" href="classRequest.html">Request</a>* parent );
00128 
00134       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a13">incNbrSentPackets</a>();
00135 
00142       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a14">getNbrSentPackets</a>() <span class="keyword">const</span>;
00143 
00150       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a15">incNbrResentPackets</a>( <span class="keywordtype">int</span> number );
00151 
00157       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a16">getNbrResentPackets</a>() <span class="keyword">const</span>;
00158 
00164       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a17">setProcessingTime</a>( uint32 time );
00165 
00171       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classRequest.html#a18">getProcessingTime</a>() <span class="keyword">const</span>;
00172 
00178    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a19">setTime</a>( uint32 requestType, uint32 timeMs );
00184    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a20">addTime</a>( uint32 requestType, uint32 timeMs );
00186    <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classvector.html">RequestTime</a>&amp; <a class="code" href="classRequest.html#a21">getTimes</a>() <span class="keyword">const</span>;
00188    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a22">addTotalResentNbr</a>( uint32 more );
00190    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classRequest.html#a23">getTotalResendNbr</a>() <span class="keyword">const</span>;
00191 
00196       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a24">addProcessingTime</a>( moduletype_t type,
00197                                      uint32 time );
00198 
00203       <span class="keyword">inline</span> <a class="code" href="classmap.html">map&lt;moduletype_t, uint32&gt;</a> 
00204          <a class="code" href="classRequest.html#a25">getProcessingTimePerModuleType</a>() <span class="keyword">const</span>;
00205 
00211       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a26">incNbrReceivedPackets</a>();
00212 
00218       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a27">getNbrReceivedPackets</a>() <span class="keyword">const</span>;
00219 
00227       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a28">addNbrReceivedBytes</a>( uint32 bytes );
00228 
00235       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a29">getNbrReceivedBytes</a>() <span class="keyword">const</span>;
00236 
00243       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a30">getNbrOutstandingPackets</a>() <span class="keyword">const</span>;
00244 
00249       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a31">enqueuePacketContainer</a>(<a class="code" href="classPacketContainer.html">PacketContainer</a>* pack);
00250 
00256       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#a32">enqueuePacket</a>(<a class="code" href="classPacket.html">Packet</a>* pack, moduletype_t moduleType);
00257 
00264       <span class="keywordtype">int</span> <a class="code" href="classRequest.html#a33">enqueuePacketsFromRequest</a>(<a class="code" href="classRequest.html">Request</a>* req);
00265 
00276       <span class="keywordtype">bool</span> <a class="code" href="classRequest.html#a34">processSubRequestPacket</a>(<a class="code" href="classRequestWithStatus.html">RequestWithStatus</a>* req,
00277                                    <a class="code" href="classPacketContainer.html">PacketContainer</a>* pack,
00278                                    StringTable::stringCode&amp; status);
00279 
00280 
00288       <a class="code" href="classRequestPacket.html">RequestPacket</a>* <a class="code" href="classRequest.html#a35">updateIDs</a>( <a class="code" href="classRequestPacket.html">RequestPacket</a>* packet );
00289          
00297       <a class="code" href="classPacket.html">Packet</a>* <a class="code" href="classRequest.html#a35">updateIDs</a>( <a class="code" href="classPacket.html">Packet</a>* packet );
00298       
00306       <a class="code" href="classPacketContainer.html">PacketContainer</a>* <a class="code" href="classRequest.html#a35">updateIDs</a>( <a class="code" href="classPacketContainer.html">PacketContainer</a>* pc );
00307          
00308    <span class="keyword">protected</span>:
00314       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequest.html#b0">setDone</a>( <span class="keywordtype">bool</span> done );
00315 
<a name="l00319"></a><a class="code" href="classRequest.html#p0">00319</a>       <span class="keywordtype">bool</span> m_done; 
00320 
<a name="l00325"></a><a class="code" href="classRequest.html#p1">00325</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_packetID;
00326 
<a name="l00330"></a><a class="code" href="classRequest.html#p2">00330</a>       <a class="code" href="classRequest.html">Request</a>* m_parent;
00331    <span class="keyword">private</span>:
<a name="l00333"></a><a class="code" href="classRequest.html#r0">00333</a>       <span class="keywordtype">int</span> m_nbrSentPackets;
00334 
<a name="l00336"></a><a class="code" href="classRequest.html#r1">00336</a>       <span class="keywordtype">int</span> m_nbrReceivedPackets;
00337 
<a name="l00339"></a><a class="code" href="classRequest.html#r2">00339</a>       <span class="keywordtype">int</span> m_nbrReceivedBytes;
00340 
<a name="l00342"></a><a class="code" href="classRequest.html#r3">00342</a>       <span class="keywordtype">int</span> m_nbrResentPackets;
00343 
<a name="l00345"></a><a class="code" href="classRequest.html#r4">00345</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_moduleProcessingTime;
00346 
<a name="l00348"></a><a class="code" href="classRequest.html#r5">00348</a>       <a class="code" href="classmap.html">map&lt;moduletype_t, uint32&gt;</a> m_moduleTypeProcessingTime;
00349 
00350    <span class="keyword">protected</span>:
<a name="l00355"></a><a class="code" href="classRequest.html#p3">00355</a>       <a class="code" href="classPacketContainerTree.html">PacketContainerTree</a> m_packetsReadyToSend;
00356       
<a name="l00358"></a><a class="code" href="classRequest.html#n0">00358</a>       <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classServer.html">Server</a>;
00359 
<a name="l00361"></a><a class="code" href="classRequest.html#n1">00361</a>       <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequestList.html">RequestList</a>;
00362 
00363 <span class="keyword">private</span>:
<a name="l00365"></a><a class="code" href="classRequest.html#n2">00365</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequestWithStatus.html">RequestWithStatus</a>;
00366 
<a name="l00368"></a><a class="code" href="classRequest.html#n3">00368</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classAllUserRequest.html">AllUserRequest</a>;
00369 
<a name="l00371"></a><a class="code" href="classRequest.html#n4">00371</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n4">CallerInfoRequest</a>;
00372 
<a name="l00374"></a><a class="code" href="classRequest.html#n5">00374</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classCoordinateOnItemRequest.html">CoordinateOnItemRequest</a>;
00375    
<a name="l00377"></a><a class="code" href="classRequest.html#n6">00377</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classDATEXRequest.html">DATEXRequest</a>;
00378 
<a name="l00380"></a><a class="code" href="classRequest.html#n7">00380</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classExpandRouteRequest.html">ExpandRouteRequest</a>;
00381 
<a name="l00383"></a><a class="code" href="classRequest.html#n8">00383</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n8">GetNavDestRequest</a>;
00384 
<a name="l00386"></a><a class="code" href="classRequest.html#n9">00386</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n9">GfxRouteRequest</a>;
00387 
<a name="l00389"></a><a class="code" href="classRequest.html#n10">00389</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classItemInfoRequest.html">ItemInfoRequest</a>;
00390 
<a name="l00392"></a><a class="code" href="classRequest.html#n11">00392</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classLocalMapMessageRequest.html">LocalMapMessageRequest</a>;
00393 
<a name="l00395"></a><a class="code" href="classRequest.html#n12">00395</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classMapRequest.html">MapRequest</a>;
00396 
<a name="l00398"></a><a class="code" href="classRequest.html#n13">00398</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n13">MapUpdateRequest</a>;
00399 
<a name="l00401"></a><a class="code" href="classRequest.html#n14">00401</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classMultiplePacketsRequest.html">MultiplePacketsRequest</a>;
00402 
<a name="l00404"></a><a class="code" href="classRequest.html#n15">00404</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classMC2BoundingBoxRequest.html">MC2BoundingBoxRequest</a>;
00405 
<a name="l00407"></a><a class="code" href="classRequest.html#n16">00407</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n16">PositionUserRequest</a>;
00408 
<a name="l00410"></a><a class="code" href="classRequest.html#n17">00410</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRouteMessageRequest.html">RouteMessageRequest</a>;
00411 
<a name="l00413"></a><a class="code" href="classRequest.html#n18">00413</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n18">SetNavDestRequest</a>;
00414 
<a name="l00416"></a><a class="code" href="classRequest.html#n19">00416</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classSinglePacketRequest.html">SinglePacketRequest</a>;
00417 
<a name="l00419"></a><a class="code" href="classRequest.html#n20">00419</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classSMSSendRequest.html">SMSSendRequest</a>;
00420 
<a name="l00422"></a><a class="code" href="classRequest.html#n21">00422</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n21">SMSListenRequest</a>;
00423 
<a name="l00425"></a><a class="code" href="classRequest.html#n22">00425</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n22">SlimMapRequest</a>;
00426    
<a name="l00428"></a><a class="code" href="classRequest.html#n23">00428</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classRequest.html#n23">SlimMapRouteRequest</a>;
00429 
<a name="l00431"></a><a class="code" href="classRequest.html#n24">00431</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classSortDistRequest.html">SortDistRequest</a>;
00432 
<a name="l00434"></a><a class="code" href="classRequest.html#n25">00434</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classStringTableRequest.html">StringTableRequest</a>;
00435    
00436   <span class="keyword">protected</span>:
<a name="l00438"></a><a class="code" href="classRequest.html#p4">00438</a>    <a class="code" href="classRequestData.html">RequestData</a> m_requestData;
00439    
<a name="l00444"></a><a class="code" href="classRequest.html#p5">00444</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_timestamp;
00445 
<a name="l00450"></a><a class="code" href="classRequest.html#p6">00450</a>    <a class="code" href="Types_8h.html#a19">uint16</a> m_originator;
00451    
00456    <a class="code" href="classRequest.html#b1">Request</a>( <span class="keyword">const</span> <a class="code" href="classRequestPtrOrRequestID.html">RequestPtrOrRequestID</a>&amp; requestOrID );
00457 
00462    <a class="code" href="classRequest.html#b1">Request</a>( <span class="keyword">const</span> <a class="code" href="classRequestData.html">RequestData</a>&amp; requestData );
00463 
00464 
00465 <span class="keyword">private</span>:
00466 
<a name="l00467"></a><a class="code" href="classRequest.html#r6">00467</a>    <a class="code" href="classvector.html">RequestTime</a> m_timeVector; <span class="comment">//&lt; vector with time values of functions</span>
<a name="l00468"></a><a class="code" href="classRequest.html#r7">00468</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_totalResendNbr; <span class="comment">//&lt; accumulated nbr of resends for all packages</span>
00469 };
00470 
00471 
<a name="l00486"></a><a class="code" href="classRequestWithStatus.html">00486</a> <span class="keyword">class </span><a class="code" href="classRequestWithStatus.html">RequestWithStatus</a> : <span class="keyword">public</span> <a class="code" href="classRequest.html">Request</a> {
00487 <span class="keyword">public</span>:
00488    
<a name="l00494"></a><a class="code" href="classRequestWithStatus.html#a0">00494</a>    <a class="code" href="classRequestWithStatus.html#a0">RequestWithStatus</a>(
00495       <span class="keyword">const</span> <a class="code" href="classRequestData.html">RequestData</a>&amp; requestOrID ) : 
00496             <a class="code" href="classRequest.html">Request</a>(requestOrID), <a class="code" href="classRequestWithStatus.html#p0">m_isCacheable</a>(true) {}
00497 
<a name="l00501"></a><a class="code" href="classRequestWithStatus.html#a1">00501</a>    <a class="code" href="classRequestWithStatus.html#a0">RequestWithStatus</a>( <a class="code" href="classRequest.html">Request</a>* request )
00502       : <a class="code" href="classRequest.html">Request</a>( <a class="code" href="classRequestData.html">RequestData</a>(request) ), <a class="code" href="classRequestWithStatus.html#p0">m_isCacheable</a>( true ) {}
00503 
00504    
<a name="l00508"></a><a class="code" href="classRequestWithStatus.html#a2">00508</a>    <span class="keyword">virtual</span> <a class="code" href="classRequestWithStatus.html#a2">~RequestWithStatus</a>() {}
00509    
00514    <span class="keyword">virtual</span> StringTable::stringCode <a class="code" href="classRequestWithStatus.html#a3">getStatus</a>() <span class="keyword">const </span>= 0;
00515 
00520    <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classRequestWithStatus.html#a4">isCacheable</a>() <span class="keyword">const</span>;
00521    
<a name="l00527"></a><a class="code" href="classRequestWithStatus.html#a5">00527</a>    <a class="code" href="classRequestWithStatus.html#a0">RequestWithStatus</a>(
00528       <span class="keyword">const</span> <a class="code" href="classRequestPtrOrRequestID.html">RequestPtrOrRequestID</a>&amp; requestOrID ) : 
00529             <a class="code" href="classRequest.html">Request</a>(requestOrID), <a class="code" href="classRequestWithStatus.html#p0">m_isCacheable</a>(true) {}
00530    
00531 
00532 <span class="keyword">protected</span>:
<a name="l00534"></a><a class="code" href="classRequestWithStatus.html#p0">00534</a>    <span class="keywordtype">bool</span> m_isCacheable;
00535 };
00536 
00537 <span class="comment">//**********************************************************************</span>
00538 <span class="comment">// Inlines</span>
00539 <span class="comment">//**********************************************************************</span>
00540 
00541 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00542"></a><a class="code" href="classRequest.html#a7">00542</a> <a class="code" href="classRequest.html#a7">Request::getNextPacketID</a>()
00543 {
00544    <span class="keywordflow">if</span> ( <a class="code" href="classRequest.html#p2">m_parent</a> == NULL ) {
00545       <span class="keywordflow">return</span> <a class="code" href="classRequest.html#p1">m_packetID</a>++;
00546    } <span class="keywordflow">else</span> {
00547       <span class="keywordflow">return</span> <a class="code" href="classRequest.html#p2">m_parent</a>-&gt;<a class="code" href="classRequest.html#a7">getNextPacketID</a>();
00548    }
00549 }
00550 
00551 
00552 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> 
<a name="l00553"></a><a class="code" href="classRequest.html#a3">00553</a> <a class="code" href="classRequest.html#a3">Request::getID</a>()<span class="keyword"> const</span>
00554 <span class="keyword"></span>{
00555    <span class="keywordflow">if</span> ( <a class="code" href="classRequest.html#p2">m_parent</a> == NULL ) {
00556       <span class="keywordflow">return</span> <a class="code" href="classRequest.html#p4">m_requestData</a>.<a class="code" href="classRequestPtrOrRequestID.html#a3">getID</a>();
00557    } <span class="keywordflow">else</span> {
00558       <span class="keywordflow">return</span> <a class="code" href="classRequest.html#p2">m_parent</a>-&gt;<a class="code" href="classRequest.html#a3">getID</a>();
00559    }
00560 }
00561 
00562 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00563"></a><a class="code" href="classRequest.html#a4">00563</a> <a class="code" href="classRequest.html#a4">Request::getTimestamp</a>()<span class="keyword"> const</span>
00564 <span class="keyword"></span>{
00565    <span class="keywordflow">if</span> ( <a class="code" href="classRequest.html#p2">m_parent</a> == NULL ) {
00566       <span class="keywordflow">return</span> m_timestamp;
00567    } <span class="keywordflow">else</span> {
00568       <span class="keywordflow">return</span> <a class="code" href="classRequest.html#p2">m_parent</a>-&gt;<a class="code" href="classRequest.html#a4">getTimestamp</a>();
00569    }
00570 }
00571 
00572 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> 
<a name="l00573"></a><a class="code" href="classRequest.html#a5">00573</a> <a class="code" href="classRequest.html#a5">Request::getOriginator</a>()<span class="keyword"> const</span>
00574 <span class="keyword"></span>{
00575    <span class="keywordflow">if</span> ( <a class="code" href="classRequest.html#p2">m_parent</a> == NULL ) {
00576       <span class="keywordflow">return</span> m_originator;
00577    } <span class="keywordflow">else</span> {
00578       <span class="keywordflow">return</span> <a class="code" href="classRequest.html#p2">m_parent</a>-&gt;<a class="code" href="classRequest.html#a5">getOriginator</a>();
00579    }
00580 }
00581 
00582 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00583"></a><a class="code" href="classRequest.html#a6">00583</a> <a class="code" href="classRequest.html#a6">Request::setOriginator</a>(uint16 originator)
00584 {
00585    <span class="keywordflow">if</span> ( <a class="code" href="classRequest.html#p2">m_parent</a> == NULL )
00586       <a class="code" href="classRequest.html#p6">m_originator</a> = originator;
00587 }
00588 
00589 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00590"></a><a class="code" href="classRequest.html#b0">00590</a> <a class="code" href="classRequest.html#b0">Request::setDone</a>( <span class="keywordtype">bool</span> done ) {
00591    <a class="code" href="classRequest.html#p0">m_done</a> = done;
00592 }
00593 
00594 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00595"></a><a class="code" href="classRequest.html#a12">00595</a> <a class="code" href="classRequest.html#a12">Request::setParentRequest</a>( <a class="code" href="classRequest.html">Request</a>* parent ) {
00596    <a class="code" href="classRequest.html#p2">m_parent</a> = parent;
00597 }
00598 
00599 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00600"></a><a class="code" href="classRequest.html#a13">00600</a> <a class="code" href="classRequest.html#a13">Request::incNbrSentPackets</a>()
00601 {
00602    <span class="keywordflow">return</span> ++m_nbrSentPackets;
00603 }
00604 
00605 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00606"></a><a class="code" href="classRequest.html#a14">00606</a> <a class="code" href="classRequest.html#a14">Request::getNbrSentPackets</a>()<span class="keyword"> const</span>
00607 <span class="keyword"></span>{
00608    <span class="keywordflow">return</span> m_nbrSentPackets;
00609 }
00610 
00611 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00612"></a><a class="code" href="classRequest.html#a26">00612</a> <a class="code" href="classRequest.html#a26">Request::incNbrReceivedPackets</a>()
00613 {
00614    <span class="keywordflow">return</span> ++m_nbrReceivedPackets;
00615 }
00616 
00617 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00618"></a><a class="code" href="classRequest.html#a27">00618</a> <a class="code" href="classRequest.html#a27">Request::getNbrReceivedPackets</a>()<span class="keyword"> const</span>
00619 <span class="keyword"></span>{
00620    <span class="keywordflow">return</span> m_nbrReceivedPackets;
00621 }
00622 
00623 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00624"></a><a class="code" href="classRequest.html#a28">00624</a> <a class="code" href="classRequest.html#a28">Request::addNbrReceivedBytes</a>( uint32 bytes ) {
00625    <span class="keywordflow">return</span> (<a class="code" href="classRequest.html#r2">m_nbrReceivedBytes</a> += bytes);
00626 }
00627 
00628 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00629"></a><a class="code" href="classRequest.html#a29">00629</a> <a class="code" href="classRequest.html#a29">Request::getNbrReceivedBytes</a>()<span class="keyword"> const</span>
00630 <span class="keyword"></span>{
00631    <span class="keywordflow">return</span> m_nbrReceivedBytes;
00632 }
00633 
00634 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00635"></a><a class="code" href="classRequest.html#a15">00635</a> <a class="code" href="classRequest.html#a15">Request::incNbrResentPackets</a>( <span class="keywordtype">int</span> number )
00636 {
00637    <a class="code" href="classRequest.html#r3">m_nbrResentPackets</a> += number;
00638    <span class="keywordflow">return</span> m_nbrResentPackets;
00639 }
00640 
00641 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00642"></a><a class="code" href="classRequest.html#a16">00642</a> <a class="code" href="classRequest.html#a16">Request::getNbrResentPackets</a>()<span class="keyword"> const</span>
00643 <span class="keyword"></span>{
00644    <span class="keywordflow">return</span> m_nbrResentPackets;
00645 }
00646 
00647 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00648"></a><a class="code" href="classRequest.html#a17">00648</a> <a class="code" href="classRequest.html#a17">Request::setProcessingTime</a>( uint32 time )
00649 {
00650    <a class="code" href="classRequest.html#r4">m_moduleProcessingTime</a> = time;
00651 }
00652 
00653 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00654"></a><a class="code" href="classRequest.html#a18">00654</a> <a class="code" href="classRequest.html#a18">Request::getProcessingTime</a>()<span class="keyword"> const</span>
00655 <span class="keyword"></span>{
00656    <span class="keywordflow">return</span> m_moduleProcessingTime;
00657 }
00658 
00659 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00660"></a><a class="code" href="classRequest.html#a24">00660</a> <a class="code" href="classRequest.html#a24">Request::addProcessingTime</a>( moduletype_t type,
00661                             uint32 time )
00662 {
00663    <a class="code" href="classRequest.html#r5">m_moduleTypeProcessingTime</a>[type] += time;
00664 }
00665 
00666 <span class="keyword">inline</span> <a class="code" href="classmap.html">map&lt;moduletype_t, uint32&gt;</a>
<a name="l00667"></a><a class="code" href="classRequest.html#a25">00667</a> <a class="code" href="classRequest.html#a25">Request::getProcessingTimePerModuleType</a>()<span class="keyword"> const</span>
00668 <span class="keyword"></span>{
00669    <span class="keywordflow">return</span> m_moduleTypeProcessingTime;
00670 }
00671 
00672 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l00673"></a><a class="code" href="classRequest.html#a30">00673</a> <a class="code" href="classRequest.html#a30">Request::getNbrOutstandingPackets</a>()<span class="keyword"> const</span>
00674 <span class="keyword"></span>{
00675    <span class="keywordtype">int</span> nbr;
00676    nbr = (<a class="code" href="classRequest.html#p3">m_packetsReadyToSend</a>.<a class="code" href="classPacketContainerTree.html#a6">getCardinal</a>() + <a class="code" href="classRequest.html#a14">getNbrSentPackets</a>())
00677              - <a class="code" href="classRequest.html#a27">getNbrReceivedPackets</a>();
00678    <span class="keywordflow">if</span> (<a class="code" href="classRequest.html#p2">m_parent</a> != NULL)
00679       nbr += <a class="code" href="classRequest.html#p2">m_parent</a>-&gt;<a class="code" href="classRequest.html#a30">getNbrOutstandingPackets</a>();
00680    <span class="keywordflow">return</span> nbr;
00681 }
00682 
00683 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00684"></a><a class="code" href="classRequest.html#a31">00684</a> <a class="code" href="classRequest.html#a31">Request::enqueuePacketContainer</a>(<a class="code" href="classPacketContainer.html">PacketContainer</a>* pack)
00685 {
00686    <a class="code" href="classRequest.html#p3">m_packetsReadyToSend</a>.<a class="code" href="classPacketContainerTree.html#a1">add</a>(pack);
00687 }
00688 
00689 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00690"></a><a class="code" href="classRequest.html#a32">00690</a> <a class="code" href="classRequest.html#a32">Request::enqueuePacket</a>(<a class="code" href="classPacket.html">Packet</a>* pack,
00691                        moduletype_t moduleType)
00692 {
00693    <a class="code" href="classRequest.html#a31">enqueuePacketContainer</a>(<span class="keyword">new</span> <a class="code" href="classPacketContainer.html">PacketContainer</a>(pack,
00694                                               0,
00695                                               0,
00696                                               moduleType));
00697 }
00698 
00699 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00700"></a><a class="code" href="classRequest.html#a19">00700</a> <a class="code" href="classRequest.html#a19">Request::setTime</a>( uint32 type, uint32 timeMs ) 
00701 {
00702    <span class="keywordflow">if</span> ( type &gt;= <a class="code" href="classRequest.html#r6">m_timeVector</a>.size() ) {
00703       <a class="code" href="classRequest.html#r6">m_timeVector</a>.resize( type + 1 );
00704    }
00705 
00706    <a class="code" href="classRequest.html#r6">m_timeVector</a>[ type ] = timeMs;
00707 }
00708 
00709 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00710"></a><a class="code" href="classRequest.html#a20">00710</a> <a class="code" href="classRequest.html#a20">Request::addTime</a>( uint32 type, uint32 timeMs ) 
00711 {
00712    <span class="keywordflow">if</span> ( type &gt;= <a class="code" href="classRequest.html#r6">m_timeVector</a>.size() ) {
00713       <a class="code" href="classRequest.html#r6">m_timeVector</a>.resize( type + 1 );
00714    }
00715 
00716    <a class="code" href="classRequest.html#r6">m_timeVector</a>[ type ] += timeMs;
00717 
00718 }
00719 
00720 <span class="keyword">inline</span> <span class="keyword">const</span> std::vector&lt; uint32 &gt;&amp;
<a name="l00721"></a><a class="code" href="classRequest.html#a21">00721</a> <a class="code" href="classRequest.html#a21">Request::getTimes</a>()<span class="keyword"> const </span>{
00722    <span class="keywordflow">return</span> m_timeVector;
00723 }
00724 
00725 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00726"></a><a class="code" href="classRequest.html#a22">00726</a> <a class="code" href="classRequest.html#a22">Request::addTotalResentNbr</a>( uint32 more ) {
00727    <a class="code" href="classRequest.html#r7">m_totalResendNbr</a> += more;
00728 }
00729 
00730 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00731"></a><a class="code" href="classRequest.html#a23">00731</a> <a class="code" href="classRequest.html#a23">Request::getTotalResendNbr</a>()<span class="keyword"> const </span>{
00732    <span class="keywordflow">return</span> m_totalResendNbr;
00733 }
00734 
00735 <span class="preprocessor">#endif // REQUEST_H</span>
00736 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:49 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
