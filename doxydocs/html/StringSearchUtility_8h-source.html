<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: StringSearchUtility.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>StringSearchUtility.h</h1><a href="StringSearchUtility_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef STRINGSEARCHUTILITY_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define STRINGSEARCHUTILITY_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="comment">// Includes</span>
00018 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00019 
00020 <span class="preprocessor">#include &lt;vector&gt;</span>
00021 <span class="preprocessor">#include &lt;set&gt;</span>
00022 
00023 <span class="preprocessor">#include "<a class="code" href="Types_8h.html">Types.h</a>"</span>
00024 <span class="preprocessor">#include "<a class="code" href="ItemTypes_8h.html">ItemTypes.h</a>"</span>
00025 <span class="preprocessor">#include "<a class="code" href="StringUtility_8h.html">StringUtility.h</a>"</span>
00026 <span class="preprocessor">#include "<a class="code" href="TextConversionTables_8h.html">TextConversionTables.h</a>"</span>
00027 <span class="preprocessor">#include "<a class="code" href="TextIterator_8h.html">TextIterator.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="UTF8Util_8h.html">UTF8Util.h</a>"</span>
00029 
00030 <span class="keyword">class </span>LangType;
00031 
<a name="l00036"></a><a class="code" href="classStringSearchUtility.html">00036</a> <span class="keyword">class </span><a class="code" href="classStringSearchUtility.html">StringSearchUtility</a> {
00037 <span class="keyword">public</span>:
<a name="l00042"></a><a class="code" href="classStringSearchUtility_1_1DescendingStringLength.html">00042</a>    <span class="keyword">class </span><a class="code" href="classStringSearchUtility_1_1DescendingStringLength.html">DescendingStringLength</a> {
00043    <span class="keyword">public</span>:
<a name="l00044"></a><a class="code" href="classStringSearchUtility_1_1DescendingStringLength.html#a0">00044</a>       <span class="keyword">inline</span> <span class="keywordtype">bool</span> operator()(<span class="keyword">const</span> <span class="keywordtype">char</span>* a,
00045                              <span class="keyword">const</span> <span class="keywordtype">char</span>* b) {
00046          <span class="keywordflow">return</span> strlen(a) &gt; strlen(b);
00047       }
00048    };
00049    
00059    <span class="keyword">static</span> <span class="keywordtype">int</span> getSoundexString(<span class="keywordtype">char</span>* buffer, <span class="keywordtype">int</span> buffSize,
00060                                <span class="keyword">const</span> <span class="keywordtype">char</span>* source,
00061                                <span class="keyword">const</span> LangType&amp; language,
00062                                uint32&amp; resultLen);
00063 
00073    <span class="keyword">static</span> <span class="keywordtype">bool</span> compareSoundexString(<span class="keywordtype">char</span>* buffer, <span class="keywordtype">int</span> buffSize,
00074                                     <span class="keyword">const</span> <span class="keywordtype">char</span>* s1,
00075                                     <span class="keyword">const</span> <span class="keywordtype">char</span>* soundexBuffer,
00076                                     uint32 soundexStrLen,
00077                                     <span class="keyword">const</span> LangType&amp; language);
00078 
00079 
00085    <span class="keyword">static</span> <a class="code" href="classMC2String.html">MC2String</a> removeUKPostalCodeGroup( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; code );
00086 
00092    <span class="keyword">static</span> <a class="code" href="Types_8h.html#a21">uint32</a> getUKPostalCodeNbrGroups( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; code );
00093 
00103    <span class="keyword">static</span> <span class="keywordtype">int</span> calculateEditDistance(<span class="keyword">const</span> <span class="keywordtype">char</span>* a,
00104                                     <span class="keyword">const</span> <span class="keywordtype">char</span>* b,
00105                                     uint32 maxDistance);
00106    
00113    <span class="keyword">static</span> <a class="code" href="Types_8h.html#a21">uint32</a> sameLanguageGroup(uint32 requestedLanguage,
00114                                    uint32 language);
00115    
00123    <span class="keyword">static</span> <a class="code" href="Types_8h.html#a21">uint32</a> getStringTypeScore(uint32 language,
00124                                     uint32 requestedLanguage,
00125                                     uint32 strType);
00126 
00131    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> isWordSeparator(uint32 ucs);
00132    
00139    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a> convertIdentToExact( <span class="keyword">const</span> <a class="code" href="classutf8TextIterator.html">mc2TextIterator</a>&amp; name );
00140    
00149    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a> convertIdentToClose( <a class="code" href="classutf8TextIterator.html">mc2TextIterator</a> name,
00150                                                 <span class="keywordtype">bool</span> keepWordSeps = <span class="keyword">false</span>);
00159    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a> stripStrangeChars(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; allChars,
00160                                              <span class="keywordtype">bool</span> keepWordSeps = <span class="keyword">false</span>);
00161    
00166    <span class="keyword">static</span> <span class="keywordtype">bool</span> isFrontStreetNumber(<span class="keyword">const</span> <span class="keywordtype">char</span>* word);
00167    
00171    <span class="keyword">static</span> <span class="keywordtype">bool</span> isBackStreetNumber(<span class="keyword">const</span> <span class="keywordtype">char</span>* word);
00172    
00173    
00181    <span class="keyword">static</span> <span class="keywordtype">void</span> getStreetNumberAndSearchString(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; searchString,
00182                                               <span class="keywordtype">int</span>&amp; streetNumber,
00183                                               <a class="code" href="classMC2String.html">MC2String</a>&amp; strippedSearchString);
00184 
00192    <span class="keyword">static</span> <span class="keywordtype">bool</span> isSimpleHouseNumber( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; str, <span class="keywordtype">int</span>&amp; number );
00193 
00205    <span class="keyword">static</span> <span class="keywordtype">void</span> simpleGetStreetNumberAndName( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; searchString,
00206                                              <span class="keywordtype">int</span>&amp; streetNumber,
00207                                              <a class="code" href="classMC2String.html">MC2String</a>&amp; streetName );
00208 
00215    <span class="keyword">static</span> <span class="keywordtype">void</span> splitIntoWords(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; words,
00216                               <a class="code" href="classutf8TextIterator.html">mc2TextIterator</a> str );
00217    
00228    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a> stripSearchString( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; searchString );
00229 
00238    <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a> copyUpper2( <a class="code" href="classutf8TextIterator.html">mc2TextIterator</a> it );
00239 
00255    <span class="keyword">static</span> <span class="keywordtype">int</span> getLevDist(<span class="keyword">const</span> <span class="keywordtype">char</span>* a, <span class="keyword">const</span> <span class="keywordtype">char</span>* b, uint16 maxDist);
00256    
00262    <span class="keyword">static</span> <span class="keywordtype">int</span> getLevDist(<span class="keyword">const</span> <span class="keywordtype">char</span>* a, <span class="keywordtype">int</span> alen,
00263                          <span class="keyword">const</span> <span class="keywordtype">char</span>* b, <span class="keywordtype">int</span> blen,
00264                          uint16 maxDist);
00265    
00271    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> allWordsMatch(<span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;char*&gt;</a>&amp; words,
00272                                     <span class="keyword">const</span> <span class="keywordtype">char</span>* itemName);
00273 
00283    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> anyWordMatch( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; firstName,
00284                                     <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; secondName );
00285 
00286    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* wordMatches( <span class="keyword">const</span> <span class="keywordtype">char</span>* word,
00287                                           <span class="keyword">const</span> <span class="keywordtype">char</span>* itemName,
00288                                           set&lt;const char*&gt;&amp; positions );
00289 
00297    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> wholeWordMatchOneWord( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; word,
00298                                              <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; itemName);
00299                                              
00300 
00309    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span> wordsCorrectOrder(<span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;const char*&gt;</a> words,
00310                                         <span class="keyword">const</span> <span class="keywordtype">char</span>* itemName,
00311                                         <span class="keywordtype">bool</span>* firstWordBegins = NULL);
00312       
00313   <span class="keyword">private</span>:
00317    <a class="code" href="classStringSearchUtility.html">StringSearchUtility</a>();
00318 };
00319 
00320 
00321 <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a>
<a name="l00322"></a><a class="code" href="classStringSearchUtility.html#e18">00322</a> <a class="code" href="classStringSearchUtility.html#e18">StringSearchUtility::copyUpper2</a>( <a class="code" href="classutf8TextIterator.html">mc2TextIterator</a> it )
00323 {
00324    <a class="code" href="classMC2String.html">MC2String</a> retVal;
00325    <span class="keywordflow">while</span>( *it != 0 ) {
00326       <a class="code" href="Types_8h.html#a21">uint32</a> ucs = *it;
00327       <a class="code" href="structTextConversionTables_1_1convTableFindRes.html">TextConversionTables::convTableFindRes</a> result =
00328          <a class="code" href="classTextConversionTables.html#e0">TextConversionTables::findInTable</a>(TextConversionTables::c_upperTable,
00329                                            ucs);
00330       <span class="keywordflow">if</span>( result.<a class="code" href="structTextConversionTables_1_1convTableFindRes.html#o0">resString</a> != 0 ) {
00331          retVal += <a class="code" href="classUTF8Util.html#e12">UTF8Util::utf8ToMc2</a>(<a class="code" href="classMC2String.html">MC2String</a>(result.<a class="code" href="structTextConversionTables_1_1convTableFindRes.html#o0">resString</a>));
00332       } <span class="keywordflow">else</span> {
00333          retVal += <a class="code" href="classUTF8Util.html#e16">UTF8Util::ucsToMc2</a>(ucs);
00334       }
00335       ++it;
00336    }
00337    <span class="keywordflow">return</span> retVal;
00338 }
00339 
00340 <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a>
<a name="l00341"></a><a class="code" href="classStringSearchUtility.html#e8">00341</a> <a class="code" href="classStringSearchUtility.html#e8">StringSearchUtility::convertIdentToExact</a>( <span class="keyword">const</span> <a class="code" href="classutf8TextIterator.html">mc2TextIterator</a>&amp; it )
00342 {
00343    <span class="keywordflow">return</span> <a class="code" href="classStringSearchUtility.html#e18">copyUpper2</a>( it );
00344 }
00345 
00346 
00347 <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a>
<a name="l00348"></a><a class="code" href="classStringSearchUtility.html#e9">00348</a> <a class="code" href="classStringSearchUtility.html#e9">StringSearchUtility::convertIdentToClose</a>( <a class="code" href="classutf8TextIterator.html">mc2TextIterator</a> it,
00349                                           <span class="keywordtype">bool</span> keepWordSeps )
00350 {
00351    <a class="code" href="classMC2String.html">MC2String</a> exact = <a class="code" href="classStringSearchUtility.html#e8">convertIdentToExact</a>( it );
00352    <span class="keywordflow">return</span> <a class="code" href="classStringSearchUtility.html#e10">stripStrangeChars</a>( exact, keepWordSeps );
00353 }
00354 
00355          
00356 <span class="keyword">inline</span> <a class="code" href="classMC2String.html">MC2String</a>
<a name="l00357"></a><a class="code" href="classStringSearchUtility.html#e10">00357</a> <a class="code" href="classStringSearchUtility.html#e10">StringSearchUtility::stripStrangeChars</a>(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; allChars, 
00358                                        <span class="keywordtype">bool</span> keepWordSeps)
00359 {
00360    <a class="code" href="classMC2String.html">MC2String</a> retVal;
00361    <a class="code" href="classutf8TextIterator.html">mc2TextIterator</a> it(allChars.<a class="code" href="classMC2String.html#a11">c_str</a>());
00362    <span class="keywordflow">while</span>( *it != 0 ) {
00363       <a class="code" href="Types_8h.html#a21">uint32</a> ucs = *it;
00364       <span class="keywordflow">if</span>( keepWordSeps || !<a class="code" href="classStringSearchUtility.html#e7">isWordSeparator</a>(ucs) ) {
00365          <a class="code" href="structTextConversionTables_1_1convTableFindRes.html">TextConversionTables::convTableFindRes</a> result =
00366             <a class="code" href="classTextConversionTables.html#e0">TextConversionTables::findInTable</a>(
00367                                        TextConversionTables::c_removeStrange,
00368                                        ucs);
00369          <span class="keywordflow">if</span>( result.<a class="code" href="structTextConversionTables_1_1convTableFindRes.html#o0">resString</a> != NULL ) {
00370             retVal += <a class="code" href="classUTF8Util.html#e12">UTF8Util::utf8ToMc2</a>(<a class="code" href="classMC2String.html">MC2String</a>(result.<a class="code" href="structTextConversionTables_1_1convTableFindRes.html#o0">resString</a>));
00371          } <span class="keywordflow">else</span> {
00372             retVal += <a class="code" href="classUTF8Util.html#e16">UTF8Util::ucsToMc2</a>(ucs);
00373          }
00374       }
00375       ++it;
00376    }
00377    <span class="keywordflow">return</span> retVal;
00378 }
00379 
00380 
00381 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00382"></a><a class="code" href="classStringSearchUtility.html#e7">00382</a> <a class="code" href="classStringSearchUtility.html#e7">StringSearchUtility::isWordSeparator</a>(uint32 ucs)
00383 {
00384    <span class="keywordflow">return</span> (!<a class="code" href="classStringUtility.html#e32">StringUtility::isAlNum</a>(ucs));
00385 }
00386 
00387 <a class="code" href="classMC2String.html">MC2String</a>
<a name="l00388"></a><a class="code" href="classStringSearchUtility.html#e17">00388</a> <a class="code" href="classStringSearchUtility.html#e17">StringSearchUtility::stripSearchString</a>( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; searchString )
00389 {
00390    <span class="keywordtype">int</span> streetNumber;
00391    <a class="code" href="classMC2String.html">MC2String</a> strippedSearchString;
00392    <a class="code" href="classStringSearchUtility.html#e13">StringSearchUtility::getStreetNumberAndSearchString</a>(searchString,
00393                                                        streetNumber,
00394                                                        strippedSearchString);
00395 
00396    <span class="keywordflow">return</span> strippedSearchString;
00397 }
00398 
00399 <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l00400"></a><a class="code" href="classStringSearchUtility.html#e23">00400</a> <a class="code" href="classStringSearchUtility.html#e23">StringSearchUtility::wordMatches</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* word,
00401                                   <span class="keyword">const</span> <span class="keywordtype">char</span>* itemName,
00402                                   set&lt;const char*&gt;&amp; positions )
00403 {
00404    <span class="keyword">const</span> <span class="keywordtype">char</span>* res = itemName;
00405    <span class="keywordflow">while</span> ( res != NULL ) {
00406       res = strstr(res, word);
00407       <span class="keywordflow">if</span> ( res == NULL ) {
00408          <span class="comment">// We can return here, since the words cannot</span>
00409          <span class="comment">// be found.</span>
00410          <span class="keywordflow">return</span> NULL;
00411       }
00412       <span class="comment">// Check if found before.</span>
00413       <span class="keywordflow">if</span> ( positions.find(res) == positions.end() ) {
00414          <span class="comment">// Possible wordmatch candidate.</span>
00415          <span class="keyword">const</span> <span class="keywordtype">bool</span> wordMatch =
00416             ( res == itemName ) || <span class="comment">// First letter</span>
00417             ( <a class="code" href="classStringSearchUtility.html#e7">StringSearchUtility::isWordSeparator</a>( *( res - 1) ) ); <span class="comment">// A word</span>
00418          <span class="keywordflow">if</span> ( ! wordMatch ) {
00419             <span class="comment">// Nothing</span>
00420          } <span class="keywordflow">else</span> {
00421             <span class="comment">// New wordmatch that hasn't been found before.</span>
00422             positions.<a class="code" href="classMC2String.html#a16">insert</a>(res);
00423             <span class="keywordflow">return</span> res;
00424          }
00425       }
00426       <span class="comment">// Next letter.</span>
00427       ++res;
00428    }
00429    <span class="keywordflow">return</span> NULL;
00430 }
00431 
00432 
00433 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00434"></a><a class="code" href="classStringSearchUtility.html#e21">00434</a> <a class="code" href="classStringSearchUtility.html#e21">StringSearchUtility::allWordsMatch</a>(<span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;char*&gt;</a>&amp; words,
00435                                    <span class="keyword">const</span> <span class="keywordtype">char</span>* itemName)
00436 {
00437    <span class="comment">// Note that the words must be sorted with descending length...</span>
00438    <span class="comment">// The words must also be cluc.</span>
00439    <span class="keywordtype">int</span> nbrWords = words.size();
00440    <span class="comment">// Should work with pointers since they point into the same string.</span>
00441    set&lt;const char*&gt; positions;
00442    
00443    <span class="comment">// Check the words</span>
00444    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; nbrWords; ++i ) {
00445       <span class="keywordflow">if</span> ( <a class="code" href="classStringSearchUtility.html#e23">wordMatches</a>( words[i], itemName, positions) == NULL ) {
00446          <span class="keywordflow">return</span> <span class="keyword">false</span>;
00447       }
00448    }
00449    <span class="keywordflow">return</span> <span class="keyword">true</span>;
00450 }
00451 
00452 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00453"></a><a class="code" href="classStringSearchUtility.html#e25">00453</a> <a class="code" href="classStringSearchUtility.html#e25">StringSearchUtility::wordsCorrectOrder</a>(<span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;const char*&gt;</a> words,
00454                                        <span class="keyword">const</span> <span class="keywordtype">char</span>* itemName,
00455                                        <span class="keywordtype">bool</span>* firstWordBegins)
00456 {
00457    <span class="keywordflow">return</span> <span class="keyword">true</span>;
00458    
00459    <span class="keywordflow">if</span> ( firstWordBegins != NULL ) {
00460       *firstWordBegins = <span class="keyword">false</span>;
00461    }
00462    
00463    <a class="code" href="classMC2String.html">MC2String</a> closeItemName = 
00464       <a class="code" href="classStringSearchUtility.html#e9">StringSearchUtility::convertIdentToClose</a>(itemName);
00465    <span class="keywordtype">char</span>* closeItemNameCopy = 
00466       <a class="code" href="classStringUtility.html#e22">StringUtility::newStrDup</a>(closeItemName.<a class="code" href="classMC2String.html#a11">c_str</a>());
00467    
00468    <span class="keywordtype">char</span>* lastPos = closeItemNameCopy - 1;
00469    <span class="keywordflow">for</span>( <a class="code" href="classvector.html">vector&lt;const char*&gt;</a>::const_iterator it = words.begin();
00470         it != words.end();
00471         ++it ) {
00472       <span class="keywordtype">char</span>* foundPos = strstr(closeItemNameCopy, *it);
00473       <span class="keywordflow">if</span> ( foundPos &lt; lastPos ) {
00474          <span class="comment">// Wrong direction return false</span>
00475          <span class="keyword">delete</span> [] closeItemNameCopy;
00476          <span class="keywordflow">return</span> <span class="keyword">false</span>;
00477       } <span class="keywordflow">else</span> {
00478          <span class="comment">// Check if the first word found is first in the string.</span>
00479          <span class="keywordflow">if</span> ( firstWordBegins != NULL &amp;&amp;
00480               it == words.begin() &amp;&amp; foundPos == closeItemName ) {
00481             *firstWordBegins = <span class="keyword">true</span>;
00482          }
00483       } 
00484       lastPos = foundPos;
00485    }
00486    <span class="keyword">delete</span> [] closeItemNameCopy;
00487    
00488    <span class="keywordflow">return</span> <span class="keyword">true</span>;   
00489 }
00490 
00491 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00492"></a><a class="code" href="classStringSearchUtility.html#e24">00492</a> <a class="code" href="classStringSearchUtility.html#e24">StringSearchUtility::wholeWordMatchOneWord</a>( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; word,
00493                                             <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; itemName)
00494 {
00495    <a class="code" href="classvector.html">vector&lt;MC2String&gt;</a> words;
00496    <a class="code" href="classStringSearchUtility.html#e16">splitIntoWords</a>( words, itemName );
00497    
00498    <a class="code" href="Types_8h.html#a21">uint32</a> i=0;
00499    <span class="keywordtype">bool</span> match=<span class="keyword">false</span>;
00500    <span class="keywordflow">while</span> ( (i&lt; words.size()) &amp;&amp; !match ){
00501       match = 
00502          (<a class="code" href="classStringUtility.html#e5">StringUtility::strcmp</a>( words[i].c_str(), word.<a class="code" href="classMC2String.html#a11">c_str</a>() ) == 0 );
00503       i++;
00504    }
00505    <span class="keywordflow">return</span> match;
00506 }
00507 
00508 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00509"></a><a class="code" href="classStringSearchUtility.html#e22">00509</a> <a class="code" href="classStringSearchUtility.html#e22">StringSearchUtility::anyWordMatch</a>( <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; firstName,
00510                                    <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; secondName )
00511 {
00512    <a class="code" href="classvector.html">vector&lt;MC2String&gt;</a> words1;
00513    <a class="code" href="classStringSearchUtility.html#e16">splitIntoWords</a>( words1, firstName );
00514    
00515    <a class="code" href="Types_8h.html#a21">uint32</a> i=0;
00516    <span class="keywordtype">bool</span> match=<span class="keyword">false</span>;
00517    <span class="keywordflow">while</span> ( (i&lt; words1.size()) &amp;&amp; !match ){   
00518       match = <a class="code" href="classStringSearchUtility.html#e24">wholeWordMatchOneWord</a>(words1[i], secondName);
00519       i++;
00520    }
00521 
00522    <a class="code" href="classvector.html">vector&lt;MC2String&gt;</a> words2;
00523    <a class="code" href="classStringSearchUtility.html#e16">splitIntoWords</a>( words2, secondName );
00524 
00525    i=0;
00526    <span class="keywordflow">while</span> ( (i&lt; words2.size()) &amp;&amp; !match ){   
00527       match = <a class="code" href="classStringSearchUtility.html#e24">wholeWordMatchOneWord</a>(words2[i], firstName);
00528       i++;
00529    }   
00530    <span class="keywordflow">return</span> match;
00531 }
00532 
00533 
00534 
00535 <span class="preprocessor">#endif // STRINGSEARCHUTULITY_H </span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:51 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
