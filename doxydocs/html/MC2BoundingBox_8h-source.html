<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: MC2BoundingBox.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>MC2BoundingBox.h</h1><a href="MC2BoundingBox_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef MC2BOUNDINGBOX_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define MC2BOUNDINGBOX_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 
00019 <span class="preprocessor">#include "<a class="code" href="MC2Coordinate_8h.html">MC2Coordinate.h</a>"</span>
00020 
00021 <span class="preprocessor">#include &lt;math.h&gt;</span>
00022 
<a name="l00023"></a><a class="code" href="MC2BoundingBox_8h.html#a0">00023</a> <span class="preprocessor">#define IMPOSSIBLE_COSINE 2.0</span>
00024 <span class="preprocessor"></span>
00025 <span class="preprocessor">#ifndef WIN32</span>
00026 <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structPOINT.html">POINT</a>;
00027 <span class="preprocessor">#endif</span>
00028 <span class="preprocessor"></span>
<a name="l00033"></a><a class="code" href="classMC2BoundingBox.html">00033</a> <span class="keyword">class </span><a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a> {
00034    <span class="keyword">public</span>:
<a name="l00038"></a><a class="code" href="classMC2BoundingBox.html#w11">00038</a>       <span class="keyword">enum</span> impossible_lat_enum {
00039         c_impossible_lat = <a class="code" href="Types_8h.html#a5">MAX_INT32</a> - 1
00040       };
00041    
00045       <span class="keyword">inline</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>();
00046 
00054       <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; center,
00055                       uint32 radiusMeters );
00056 
00062       <span class="keyword">inline</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord1,
00063                              <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord2 );
00064 
00068       <span class="keyword">inline</span> <span class="keyword">explicit</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>(<span class="keywordtype">bool</span> init);
00069 
<a name="l00075"></a><a class="code" href="classMC2BoundingBox.html#a4">00075</a>       <span class="keyword">inline</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>(<span class="keywordtype">bool</span> dummy1, <span class="keywordtype">bool</span> dummy2) {};
00076 
00080        <span class="keywordtype">bool</span> <a class="code" href="namespaceSTLUtility.html#a31">operator==</a>( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; bbox ) <span class="keyword">const</span>;
00081 
00089       <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>( int32 maxLat, int32 minLong, 
00090                       int32 minLat, int32 maxLong );
00091 
00104          <a class="code" href="Types_8h.html#a24">int64</a> squareDistTo(int32 lat_32, int32 lon_32, 
00105                             float64 cosLat = IMPOSSIBLE_COSINE) <span class="keyword">const</span>;
00106          
00112          <a class="code" href="Types_8h.html#a24">int64</a> squareMC2ScaleDistTo(int32 lat_32, int32 lon_32, 
00113                              float64 cosLat = IMPOSSIBLE_COSINE) <span class="keyword">const</span>;
00115 
00128          <a class="code" href="Types_8h.html#a24">int64</a> maxSquareDistTo(int32 lat_32, int32 lon_32, 
00129                                 float64 cosLat = IMPOSSIBLE_COSINE) <span class="keyword">const</span>;
00130 
00136          <a class="code" href="Types_8h.html#a24">int64</a> maxMC2ScaleSquareDistTo(int32 lat_32, int32 lon_32, 
00137                                        float64 cosLat = IMPOSSIBLE_COSINE)
00138             <span class="keyword">const</span>;
00140 
00146       <span class="keyword">inline</span> <span class="keywordtype">bool</span> contains(int32 lat, int32 lon) <span class="keyword">const</span>;
00147 
00153      <span class="keyword">inline</span> <span class="keywordtype">bool</span> contains(<span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord) <span class="keyword">const</span>;
00154    
00160       <span class="keyword">inline</span> <span class="keywordtype">bool</span> inside(int32 lat, int32 lon) <span class="keyword">const</span>;
00161       <span class="keyword">inline</span> <span class="keywordtype">bool</span> inside(<span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord) <span class="keyword">const</span>;
00162 
00166       <span class="keyword">inline</span> <span class="keywordtype">bool</span> inside( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; b ) <span class="keyword">const</span>;
00167 
00173       <span class="keyword">inline</span> <span class="keywordtype">bool</span> overlaps( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; b ) <span class="keyword">const</span>;
00174 
00180       <span class="keyword">inline</span> <span class="keywordtype">bool</span> overlaps( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>* b ) <span class="keyword">const</span>;
00181       
<a name="l00185"></a><a class="code" href="classMC2BoundingBox.html#w12">00185</a>       <span class="keyword">enum</span> corner_t {
00186          no_corner = -1,
00187          top_left = 0,
00188          top_right = 1,
00189          bottom_left = 2,
00190          bottom_right = 3
00191       };
00192       
00200       <span class="keyword">inline</span> corner_t getCorner( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord ) <span class="keyword">const</span>;
00201      
00208       <span class="keyword">inline</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a> getCorner( <span class="keyword">const</span> corner_t&amp; corner ) <span class="keyword">const</span>;
00209       
00214       <span class="keyword">inline</span> <span class="keywordtype">bool</span> onBorder( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord ) <span class="keyword">const</span>;
00215       
00222       <a class="code" href="Types_8h.html#a22">int32</a> getMinLongOffset( <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; b ) <span class="keyword">const</span>;
00223 
00228       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a22">int32</a> getWidth() <span class="keyword">const</span>;
00229 
00235       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a22">int32</a> getLonDiff() <span class="keyword">const</span>;
00236 
00241       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a22">int32</a> getHeight() <span class="keyword">const</span>;
00242       
00251       <span class="keywordtype">void</span> update( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; b, <span class="keywordtype">bool</span> alsoUpdateCosLat = <span class="keyword">true</span> );
00252 
00263       <span class="keyword">inline</span> <span class="keywordtype">void</span> update(int32 la, int32 lo, <span class="keywordtype">bool</span> alsoUpdateCosLat = <span class="keyword">true</span>);
00264 
00265       <span class="keyword">inline</span> <span class="keywordtype">void</span> update(<span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord,
00266                          <span class="keywordtype">bool</span> alsoUpdateCosLat = <span class="keyword">true</span>);
00267 
00268       <span class="keyword">inline</span> <span class="keywordtype">void</span> quickerUpdate( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; b );
00269 
00273       <span class="keyword">inline</span> <span class="keywordtype">void</span> updateCosLat();
00274 
00279       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a27">float64</a> getCosLat() <span class="keyword">const</span>;
00280 
00284       <span class="keyword">inline</span> <span class="keywordtype">void</span> reset();
00285 
00293       <span class="keyword">inline</span> <span class="keywordtype">void</span> setCosLat(float32 cosLat);
00294 
00303          <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> getMaxLat() <span class="keyword">const</span>;
00304 
00308          <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> getMinLat() <span class="keyword">const</span>;
00309 
00313          <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> getMaxLon() <span class="keyword">const</span>;
00314 
00318          <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> getMinLon() <span class="keyword">const</span>;
00320 
00330          <span class="keyword">inline</span> <span class="keywordtype">void</span> setMaxLat(int32 k);
00331 
00336          <span class="keyword">inline</span> <span class="keywordtype">void</span> setMinLat(int32 k);
00337 
00342          <span class="keyword">inline</span> <span class="keywordtype">void</span> setMaxLon(int32 k);
00343 
00348          <span class="keyword">inline</span> <span class="keywordtype">void</span> setMinLon(int32 k);
00350       
00356       <span class="keywordtype">void</span> dump(<span class="keywordtype">bool</span> compact = <span class="keyword">true</span>) <span class="keyword">const</span>;
00357 
00365       <span class="keywordtype">void</span> increaseFactor( <span class="keywordtype">double</span> percent );
00366 
00371       <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a> operator*(<span class="keywordtype">double</span> factor) <span class="keyword">const</span>;
00372 
00377       <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; operator*=(<span class="keywordtype">double</span> factor);
00378 
00383       <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; <a class="code" href="FixedSizeString_8h.html#a2">operator+=</a>(<span class="keywordtype">int</span> units);
00384       
00389       <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; operator-=(<span class="keywordtype">int</span> units);
00390 
00397        <span class="keywordtype">void</span> increaseMeters( uint32 meters );
00398 
00408        <span class="keywordtype">bool</span> getInterSection(<span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; bbox, 
00409                             <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; interSection ) <span class="keyword">const</span>;
00410 
00416        <span class="keyword">inline</span> <span class="keywordtype">bool</span> isValid() <span class="keyword">const</span>;
00417 
00425        <span class="keywordtype">bool</span> getCenter( int32&amp; lat, int32&amp; lon ) <span class="keyword">const</span>;
00426 
00431        <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a> getCenter() <span class="keyword">const</span>;
00432 
00453        <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getCohenSutherlandOutcode( int32 lat, int32 lon ) <span class="keyword">const</span>;
00454        
<a name="l00459"></a><a class="code" href="classMC2BoundingBox.html#z83_0">00459</a>        <span class="keyword">enum</span> cohen_sutherland_outcodes {
00461           INSIDE = 0,
00462        
00464           LEFT   = 1,
00465           
00467           RIGHT  = 2,
00468           
00470           BOTTOM = 4,
00471           
00473           TOP    = 8,
00474        };
00476 
00482       <a class="code" href="Types_8h.html#a24">int64</a> getArea() <span class="keyword">const</span>;
00483 <span class="preprocessor">#ifdef MC2_SYSTEM</span>
00484 <span class="preprocessor"></span>
00498       <span class="keywordtype">bool</span> intersects(int32 startLat, int32 startLon, 
00499                       int32 endLat, int32 endLon ) <span class="keyword">const</span>;
00500 
00518       <span class="keywordtype">bool</span> clipToFirstIntersectionWithEdge(int32 startLat, int32 startLon,
00519                                            int32 endLat, int32 endLon,
00520                                            int32&amp; clippedStartLat,
00521                                            int32&amp; clippedStartLon) <span class="keyword">const</span>;
00522 
00524       <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
00525       clipToFirstIntersectionWithEdge( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; start,
00526                                        <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; end,
00527                                        <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; clipped ) <span class="keyword">const</span>;
00528 
00529 <span class="preprocessor">#endif</span>
00530 <span class="preprocessor"></span>
00551       <span class="keywordtype">bool</span> <a class="code" href="namespaceGfxUtil.html#a6">getIntersection</a>( int32 lat1, int32 lon1,
00552                             int32 lat2, int32 lon2,
00553                             byte boundaryOutcode,
00554                             int32&amp; intersectLat,
00555                             int32&amp; intersectLon ) <span class="keyword">const</span>;
00556 
00557 <span class="preprocessor">#ifdef MC2_SYSTEM      </span>
00558 <span class="preprocessor"></span>
00563       <span class="keywordtype">void</span> update(<a class="code" href="structPOINT.html">POINT</a>* points, <span class="keywordtype">int</span> nbrPoints);
00564 <span class="preprocessor">#endif</span>
00565 <span class="preprocessor"></span>      
00566 <span class="preprocessor">#ifndef _MSC_VER</span>
00567 <span class="preprocessor"></span>
<a name="l00574"></a><a class="code" href="classMC2BoundingBox.html#n0">00574</a>       <span class="keyword">friend</span> ostream&amp; <a class="code" href="UserRightsItemTable_8h.html#a0">operator&lt;&lt; </a>( ostream&amp; stream,
00575                                    <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; bbox ) {
00576          <span class="keywordflow">return</span> stream &lt;&lt; <span class="stringliteral">"[("</span> &lt;&lt; bbox.<a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> &lt;&lt; <span class="charliteral">','</span> &lt;&lt; bbox.<a class="code" href="classMC2BoundingBox.html#p3">minLon</a> &lt;&lt; <span class="stringliteral">"),("</span>
00577                        &lt;&lt; bbox.<a class="code" href="classMC2BoundingBox.html#p2">minLat</a> &lt;&lt; <span class="charliteral">','</span> &lt;&lt; bbox.<a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> &lt;&lt; <span class="stringliteral">")]"</span>;
00578       }
00579 <span class="preprocessor">#endif</span>
00580 <span class="preprocessor"></span>                                   
00581 <span class="keyword">protected</span>:
00582 
<a name="l00586"></a><a class="code" href="classMC2BoundingBox.html#p3">00586</a>       <a class="code" href="Types_8h.html#a22">int32</a> maxLat, maxLon, minLat, minLon;
00587 
<a name="l00591"></a><a class="code" href="classMC2BoundingBox.html#p4">00591</a>       <a class="code" href="Types_8h.html#a26">float32</a> cos_lat;
00592       
00593 <span class="keyword">private</span>:
00594 
00600    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a24">int64</a> innerMaxMC2ScaleSquareDistTo(int32 lat_32, int32 lon_32,
00601                                              <span class="keywordtype">double</span> cosLat) <span class="keyword">const</span>;
00602    
00608    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a24">int64</a> innerSquareMC2ScaleDistTo(int32 lat_32, int32 lon_32,
00609                                           <span class="keywordtype">double</span> cosLat) <span class="keyword">const</span>;
00610 };
00611 
00612 <span class="comment">// -----------------------------------------------------------------------</span>
00613 <span class="comment">//                                       Implementation of inlined methods</span>
00614 
00615 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
00616 MC2BoundingBox::
00617 clipToFirstIntersectionWithEdge( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; start,
00618                                  <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; end,
00619                                  <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; clipped )<span class="keyword"> const </span>{
00620    <span class="keywordflow">return</span> clipToFirstIntersectionWithEdge( start.<a class="code" href="classMC2Coordinate.html#o0">lat</a>, start.<a class="code" href="classMC2Coordinate.html#o1">lon</a>,
00621                                            end.<a class="code" href="classMC2Coordinate.html#o0">lat</a>, end.<a class="code" href="classMC2Coordinate.html#o1">lon</a>,
00622                                            clipped.<a class="code" href="classMC2Coordinate.html#o0">lat</a>, clipped.<a class="code" href="classMC2Coordinate.html#o1">lon</a> );
00623 }
00624 
00625 <span class="keywordtype">void</span> 
<a name="l00626"></a><a class="code" href="classMC2BoundingBox.html#a27">00626</a> <a class="code" href="classMC2BoundingBox.html#a27">MC2BoundingBox::reset</a>()
00627 {
00628    <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> = <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> = c_impossible_lat;
00629    <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> = <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> = 0;
00630    <a class="code" href="classMC2BoundingBox.html#p4">cos_lat</a> = 0;
00631 }
00632 
00633 
00634 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a22">int32</a> 
<a name="l00635"></a><a class="code" href="classMC2BoundingBox.html#a18">00635</a> <a class="code" href="classMC2BoundingBox.html#a18">MC2BoundingBox::getWidth</a>()<span class="keyword"> const </span>{ 
00636    <span class="keywordflow">return</span> <a class="code" href="Types_8h.html#a22">int32</a>(<a class="code" href="classMC2BoundingBox.html#p4">cos_lat</a>*(<a class="code" href="classMC2BoundingBox.html#p1">maxLon</a>-<a class="code" href="classMC2BoundingBox.html#p3">minLon</a>)); 
00637 }
00638 
00639 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a22">int32</a> 
<a name="l00640"></a><a class="code" href="classMC2BoundingBox.html#a19">00640</a> <a class="code" href="classMC2BoundingBox.html#a19">MC2BoundingBox::getLonDiff</a>()<span class="keyword"> const </span>{ 
00641    <span class="keywordflow">return</span> <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a>-minLon; 
00642 }
00643 
00644 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a22">int32</a> 
<a name="l00645"></a><a class="code" href="classMC2BoundingBox.html#a20">00645</a> <a class="code" href="classMC2BoundingBox.html#a20">MC2BoundingBox::getHeight</a>()<span class="keyword"> const </span>{
00646    <span class="keywordflow">return</span> <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a>-minLat;
00647 }
00648 
00649 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a27">float64</a> 
<a name="l00650"></a><a class="code" href="classMC2BoundingBox.html#a26">00650</a> <a class="code" href="classMC2BoundingBox.html#a26">MC2BoundingBox::getCosLat</a>()<span class="keyword"> const </span>{ 
00651    <span class="keywordflow">return</span> (cos_lat); 
00652 }
00653 
00654 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00655"></a><a class="code" href="classMC2BoundingBox.html#a28">00655</a> <a class="code" href="classMC2BoundingBox.html#a28">MC2BoundingBox::setCosLat</a>(float32 cosLat) { 
00656    <a class="code" href="classMC2BoundingBox.html#p4">cos_lat</a> = cosLat; 
00657 }
00658 
00659 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> 
<a name="l00660"></a><a class="code" href="classMC2BoundingBox.html#z79_0">00660</a> <a class="code" href="classMC2BoundingBox.html#z79_0">MC2BoundingBox::getMaxLat</a>()<span class="keyword"> const </span>{
00661    <span class="keywordflow">return</span> (maxLat);
00662 }
00663 
00664 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> 
<a name="l00665"></a><a class="code" href="classMC2BoundingBox.html#z79_1">00665</a> <a class="code" href="classMC2BoundingBox.html#z79_1">MC2BoundingBox::getMinLat</a>()<span class="keyword"> const </span>{
00666    <span class="keywordflow">return</span> (minLat);
00667 }
00668 
00669 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a>
<a name="l00670"></a><a class="code" href="classMC2BoundingBox.html#z79_2">00670</a> <a class="code" href="classMC2BoundingBox.html#z79_2">MC2BoundingBox::getMaxLon</a>()<span class="keyword"> const </span>{
00671    <span class="keywordflow">return</span> (maxLon);
00672 }
00673 
00674 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> 
<a name="l00675"></a><a class="code" href="classMC2BoundingBox.html#z79_3">00675</a> <a class="code" href="classMC2BoundingBox.html#z79_3">MC2BoundingBox::getMinLon</a>()<span class="keyword"> const </span>{
00676    <span class="keywordflow">return</span> (minLon);
00677 }
00678 
00679 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00680"></a><a class="code" href="classMC2BoundingBox.html#z81_0">00680</a> <a class="code" href="classMC2BoundingBox.html#z81_0">MC2BoundingBox::setMaxLat</a>(int32 k) {
00681    <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> = k;
00682 }
00683 
00684 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00685"></a><a class="code" href="classMC2BoundingBox.html#z81_1">00685</a> <a class="code" href="classMC2BoundingBox.html#z81_1">MC2BoundingBox::setMinLat</a>(int32 k) {
00686    <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> = k;
00687 }
00688 
00689 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00690"></a><a class="code" href="classMC2BoundingBox.html#z81_2">00690</a> <a class="code" href="classMC2BoundingBox.html#z81_2">MC2BoundingBox::setMaxLon</a>(int32 k) {
00691    <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> = k;
00692 }
00693 
00694 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00695"></a><a class="code" href="classMC2BoundingBox.html#z81_3">00695</a> <a class="code" href="classMC2BoundingBox.html#z81_3">MC2BoundingBox::setMinLon</a>(int32 k) {
00696    <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> = k;
00697 }
00698 
00699 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00700"></a><a class="code" href="classMC2BoundingBox.html#a37">00700</a> <a class="code" href="classMC2BoundingBox.html#a37">MC2BoundingBox::isValid</a>()<span class="keyword"> const </span>{
00701    <span class="keywordflow">return</span> (<a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> != c_impossible_lat) &amp;&amp;
00702       ( <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> != c_impossible_lat );
00703 }
00704 
00705 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; 
<a name="l00706"></a><a class="code" href="classMC2BoundingBox.html#a33">00706</a> <a class="code" href="classMC2BoundingBox.html#a33">MC2BoundingBox::operator+=</a>(<span class="keywordtype">int</span> units)
00707 {
00708    <a class="code" href="classMC2BoundingBox.html#z81_0">setMaxLat</a>( <a class="code" href="classMC2BoundingBox.html#z79_0">getMaxLat</a>() + units );   
00709    <a class="code" href="classMC2BoundingBox.html#z81_1">setMinLat</a>( <a class="code" href="classMC2BoundingBox.html#z79_1">getMinLat</a>() - units );   
00710    <a class="code" href="classMC2BoundingBox.html#z81_2">setMaxLon</a>( <a class="code" href="classMC2BoundingBox.html#z79_2">getMaxLon</a>() + units );
00711    <a class="code" href="classMC2BoundingBox.html#z81_3">setMinLon</a>( <a class="code" href="classMC2BoundingBox.html#z79_3">getMinLon</a>() - units );
00712    <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00713 }
00714 
00715 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; 
<a name="l00716"></a><a class="code" href="classMC2BoundingBox.html#a34">00716</a> <a class="code" href="classMC2BoundingBox.html#a34">MC2BoundingBox::operator-=</a>(<span class="keywordtype">int</span> units)
00717 {
00718    <span class="keywordflow">return</span> (*this)+= (-units);
00719 }
00720       
00721 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00722"></a><a class="code" href="classMC2BoundingBox.html#a40">00722</a> <a class="code" href="classMC2BoundingBox.html#a40">MC2BoundingBox::getCohenSutherlandOutcode</a>( int32 lat, int32 lon )<span class="keyword"> const</span>
00723 <span class="keyword"></span>{  
00724    <a class="code" href="Types_8h.html#a21">uint32</a> outcode = 0;
00725    <span class="keywordflow">if</span> (lon - <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> &lt; 0) {
00726       outcode = 0x1;
00727    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lon - <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> &gt; 0) {
00728       outcode = 0x2;
00729 
00730    } 
00731    
00732    <span class="keywordflow">if</span> (lat &lt; minLat) {
00733       outcode |= 0x4;
00734 
00735    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lat &gt; maxLat) {
00736       outcode |= 0x8;
00737 
00738    }
00739    <span class="keywordflow">return</span> (outcode);
00740 }
00741 
<a name="l00742"></a><a class="code" href="MC2BoundingBox_8h.html#a1">00742</a> <span class="preprocessor">#define LESS_THAN( a,b ) ( ( ( (a) - (b) ) &lt;= 0 ) )</span>
<a name="l00743"></a><a class="code" href="MC2BoundingBox_8h.html#a2">00743</a> <span class="preprocessor"></span><span class="preprocessor">#define IN_RANGE(a,b,c) ( LESS_THAN(a,b) &amp;&amp; LESS_THAN(b,c) )</span>
00744 <span class="preprocessor"></span>
00745 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
<a name="l00746"></a><a class="code" href="classMC2BoundingBox.html#a12">00746</a> <a class="code" href="classMC2BoundingBox.html#a12">MC2BoundingBox::overlaps</a>( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; b )<span class="keyword"> const</span>
00747 <span class="keyword"></span>{
00748    <span class="keywordflow">return</span> (b.<a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> &gt;= minLat) &amp;&amp; (<a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> &gt;= b.<a class="code" href="classMC2BoundingBox.html#p2">minLat</a>) &amp;&amp;
00749 <span class="comment">//            ((b.maxLon - minLon) &gt;= 0) &amp;&amp; ((maxLon - b.minLon) &gt;= 0) );</span>
00750             ( <a class="code" href="MC2BoundingBox_8h.html#a2">IN_RANGE</a>( <a class="code" href="classMC2BoundingBox.html#p3">minLon</a>, b.<a class="code" href="classMC2BoundingBox.html#p3">minLon</a>, <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> ) ||
00751               <a class="code" href="MC2BoundingBox_8h.html#a2">IN_RANGE</a>( <a class="code" href="classMC2BoundingBox.html#p3">minLon</a>, b.<a class="code" href="classMC2BoundingBox.html#p1">maxLon</a>, <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> ) ||
00752               <a class="code" href="MC2BoundingBox_8h.html#a2">IN_RANGE</a>( b.<a class="code" href="classMC2BoundingBox.html#p3">minLon</a>, <a class="code" href="classMC2BoundingBox.html#p3">minLon</a>, b.<a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> ) ||
00753               <a class="code" href="MC2BoundingBox_8h.html#a2">IN_RANGE</a>( b.<a class="code" href="classMC2BoundingBox.html#p3">minLon</a>, <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a>, b.<a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> ) );
00754 }
00755 
00756 <span class="preprocessor">#undef IN_RANGE</span>
00757 <span class="preprocessor"></span><span class="preprocessor">#undef LESS_THAN</span>
00758 <span class="preprocessor"></span>
00759 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
<a name="l00760"></a><a class="code" href="classMC2BoundingBox.html#a13">00760</a> <a class="code" href="classMC2BoundingBox.html#a12">MC2BoundingBox::overlaps</a>( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>* b )<span class="keyword"> const</span>
00761 <span class="keyword"></span>{
00762    <span class="keywordflow">return</span> <a class="code" href="classMC2BoundingBox.html#a12">overlaps</a>( *b );
00763 }
00764 
00765 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00766"></a><a class="code" href="classMC2BoundingBox.html#a7">00766</a> <a class="code" href="classMC2BoundingBox.html#a7">MC2BoundingBox::contains</a>(int32 lat, int32 lon)<span class="keyword"> const</span>
00767 <span class="keyword"></span>{
00768    <span class="keywordflow">return</span> ( lat &gt;= <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> &amp;&amp;
00769             lat &lt;= <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> &amp;&amp; 
00770             (lon - maxLon)&lt;=0 &amp;&amp; 
00771             (lon - minLon)&gt;=0 );
00772 }
00773 
00774 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00775"></a><a class="code" href="classMC2BoundingBox.html#a8">00775</a> <a class="code" href="classMC2BoundingBox.html#a7">MC2BoundingBox::contains</a>(<span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord)<span class="keyword"> const</span>
00776 <span class="keyword"></span>{
00777    <span class="keywordflow">return</span> <a class="code" href="classMC2BoundingBox.html#a7">contains</a>(<a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o0">lat</a>, <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o1">lon</a>);
00778 }
00779 
00780 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00781"></a><a class="code" href="classMC2BoundingBox.html#a9">00781</a> <a class="code" href="classMC2BoundingBox.html#a9">MC2BoundingBox::inside</a>(int32 lat, int32 lon)<span class="keyword"> const</span>
00782 <span class="keyword"></span>{
00783    <span class="keywordflow">return</span> ( lat &gt; <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> &amp;&amp;
00784             lat &lt; <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> &amp;&amp; 
00785             (lon - maxLon)&lt;0 &amp;&amp; 
00786             (lon - minLon)&gt;0 );
00787 }
00788 
00789 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00790"></a><a class="code" href="classMC2BoundingBox.html#a10">00790</a> <a class="code" href="classMC2BoundingBox.html#a9">MC2BoundingBox::inside</a>(<span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord)<span class="keyword"> const</span>
00791 <span class="keyword"></span>{
00792    <span class="keywordflow">return</span> <a class="code" href="classMC2BoundingBox.html#a9">inside</a>( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o0">lat</a>, <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o1">lon</a> );
00793 }
00794 
00795 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
<a name="l00796"></a><a class="code" href="classMC2BoundingBox.html#a11">00796</a> <a class="code" href="classMC2BoundingBox.html#a9">MC2BoundingBox::inside</a>( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; b )<span class="keyword"> const</span>
00797 <span class="keyword"></span>{
00798   <span class="keywordflow">return</span> b.<a class="code" href="classMC2BoundingBox.html#a7">contains</a>( <a class="code" href="classMC2BoundingBox.html#p2">minLat</a>, <a class="code" href="classMC2BoundingBox.html#p3">minLon</a>) &amp;&amp; b.<a class="code" href="classMC2BoundingBox.html#a7">contains</a>( <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a>, <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a>);
00799 }
00800 
00801 <span class="keyword">inline</span>
<a name="l00802"></a><a class="code" href="classMC2BoundingBox.html#a3">00802</a> <a class="code" href="classMC2BoundingBox.html#a0">MC2BoundingBox::MC2BoundingBox</a>(<span class="keywordtype">bool</span> init) {
00803    <span class="comment">// init ignored. just makes it different from default constr.</span>
00804    <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> = -<a class="code" href="Types_8h.html#a5">MAX_INT32</a><span class="comment">/*-1*/</span>; <span class="comment">// something like that.</span>
00805    <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> = MAX_INT32;
00806    <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> = -<a class="code" href="Types_8h.html#a5">MAX_INT32</a>/2<span class="comment">/*-1*/</span>;
00807    <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> = <a class="code" href="Types_8h.html#a5">MAX_INT32</a>/2;
00808    <span class="comment">// coslat not initiated</span>
00809 }
00810 
00811 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00812"></a><a class="code" href="classMC2BoundingBox.html#a24">00812</a> <a class="code" href="classMC2BoundingBox.html#a24">MC2BoundingBox::quickerUpdate</a>( <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; b )
00813 {
00814    <span class="comment">// doesn't update coslat.</span>
00815    <span class="comment">// assumes values are initiated.</span>
00816    <span class="keywordflow">if</span> (b.<a class="code" href="classMC2BoundingBox.html#z79_1">getMinLat</a>() &lt; minLat) {
00817       <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> = b.<a class="code" href="classMC2BoundingBox.html#z79_1">getMinLat</a>();
00818    }
00819    <span class="keywordflow">if</span> (b.<a class="code" href="classMC2BoundingBox.html#z79_0">getMaxLat</a>() &gt; maxLat) {
00820       <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> = b.<a class="code" href="classMC2BoundingBox.html#z79_0">getMaxLat</a>();
00821    }
00822    <span class="keywordflow">if</span> (int(b.<a class="code" href="classMC2BoundingBox.html#z79_3">getMinLon</a>() - minLon) &lt; 0) {
00823       <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> = b.<a class="code" href="classMC2BoundingBox.html#z79_3">getMinLon</a>();
00824    }
00825    <span class="keywordflow">if</span> (int(b.<a class="code" href="classMC2BoundingBox.html#z79_2">getMaxLon</a>() - maxLon) &gt; 0) {
00826       <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> = b.<a class="code" href="classMC2BoundingBox.html#z79_2">getMaxLon</a>();
00827    }
00828 }
00829 
00830 <span class="keywordtype">void</span>
<a name="l00831"></a><a class="code" href="classMC2BoundingBox.html#a22">00831</a> <a class="code" href="classMC2BoundingBox.html#a21">MC2BoundingBox::update</a>(int32 la, int32 lo, <span class="keywordtype">bool</span> alsoUpdateCosLat)
00832 {
00833    <a class="code" href="config_8h.html#a6">DEBUG4</a>(  <span class="keywordflow">if</span> (la == <a class="code" href="classMC2BoundingBox.html#w11w0">c_impossible_lat</a>)
00834             cerr &lt;&lt; <span class="stringliteral">"  MC2BoundingBox::update() la == IMPOSSIBLE"</span>;
00835             );
00836 
00837    <span class="comment">// This assumes that all initializations are being done to new zero.</span>
00838    <span class="keywordflow">if</span> (  (<a class="code" href="classMC2BoundingBox.html#p2">minLat</a> == c_impossible_lat)<span class="comment">/* &amp;&amp;</span>
00839 <span class="comment">         (maxLat == c_impossible_lat) &amp;&amp;</span>
00840 <span class="comment">         (minLon == 0) &amp;&amp; (maxLon == 0)*/</span>) {
00841       <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> = la;
00842       <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> = la;
00843       <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> = lo;
00844       <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> = lo;
00845       <span class="keywordflow">if</span>(alsoUpdateCosLat)
00846          <a class="code" href="classMC2BoundingBox.html#a25">updateCosLat</a>();
00847    } <span class="keywordflow">else</span> {
00848       <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;
00849       <span class="comment">// Test on latitude !      </span>
00850       <span class="keywordflow">if</span> (la &gt; maxLat) {
00851          <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a> = la;
00852          changed = <span class="keyword">true</span>;
00853       }
00854       <span class="keywordflow">if</span> (la &lt; minLat) {
00855          <a class="code" href="classMC2BoundingBox.html#p2">minLat</a> = la;
00856          changed = <span class="keyword">true</span>;
00857       }
00858 
00859       <span class="comment">// Test on longitude !      </span>
00860       <span class="keywordflow">if</span> ( ((int32) (lo - maxLon) ) &gt; 0 ) {
00861          <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> = lo;
00862          changed = <span class="keyword">true</span>;
00863       }
00864       <span class="keywordflow">if</span> ( ((int32) (lo - minLon) ) &lt; 0 ) {  <span class="comment">// Test on longitude !</span>
00865          <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> = lo;
00866          changed = <span class="keyword">true</span>;
00867       }
00868       <span class="keywordflow">if</span> ((changed) &amp;&amp; (alsoUpdateCosLat))
00869          <a class="code" href="classMC2BoundingBox.html#a25">updateCosLat</a>();
00870    }
00871 }
00872 
00873 <span class="keyword">inline</span>
<a name="l00874"></a><a class="code" href="classMC2BoundingBox.html#a0">00874</a> <a class="code" href="classMC2BoundingBox.html#a0">MC2BoundingBox::MC2BoundingBox</a>()
00875 {
00876    <a class="code" href="classMC2BoundingBox.html#a27">reset</a>();
00877 }
00878 
00879 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00880"></a><a class="code" href="classMC2BoundingBox.html#a23">00880</a> <a class="code" href="classMC2BoundingBox.html#a21">MC2BoundingBox::update</a>(<span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord, <span class="keywordtype">bool</span> alsoUpdateCosLat)
00881 {
00882    <a class="code" href="classMC2BoundingBox.html#a21">update</a>(<a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o0">lat</a>, <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o1">lon</a>, alsoUpdateCosLat);
00883 }
00884 
00885 <span class="keyword">inline</span>
<a name="l00886"></a><a class="code" href="classMC2BoundingBox.html#a2">00886</a> <a class="code" href="classMC2BoundingBox.html#a0">MC2BoundingBox::MC2BoundingBox</a>( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord1,
00887                                 <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord2 )
00888 {
00889    <a class="code" href="classMC2BoundingBox.html#a27">reset</a>();
00890    <a class="code" href="classMC2BoundingBox.html#a21">update</a>(coord1, <span class="keyword">false</span>);
00891    <a class="code" href="classMC2BoundingBox.html#a21">update</a>(coord2, <span class="keyword">true</span>);
00892 }
00893 
00894 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00895"></a><a class="code" href="classMC2BoundingBox.html#a25">00895</a> <a class="code" href="classMC2BoundingBox.html#a25">MC2BoundingBox::updateCosLat</a>()
00896 {
00897    <a class="code" href="classMC2BoundingBox.html#p4">cos_lat</a> = <a class="code" href="Types_8h.html#a26">float32</a>(cos( (2*M_PI/ (4294967296.0) *
00898                            ((<a class="code" href="classMC2BoundingBox.html#p0">maxLat</a>/2)+(<a class="code" href="classMC2BoundingBox.html#p2">minLat</a>/2)))));
00899 }
00900 
00901 <span class="keyword">inline</span> MC2BoundingBox::corner_t 
<a name="l00902"></a><a class="code" href="classMC2BoundingBox.html#a14">00902</a> <a class="code" href="classMC2BoundingBox.html#a14">MC2BoundingBox::getCorner</a>( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord )<span class="keyword"> const</span>
00903 <span class="keyword"></span>{
00904    <span class="keywordflow">if</span> ( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o0">lat</a> == minLat ) {
00905       <span class="keywordflow">if</span> ( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o1">lon</a> == minLon ) {
00906          <span class="keywordflow">return</span> bottom_left;
00907       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o1">lon</a> == maxLon ) {
00908          <span class="keywordflow">return</span> bottom_right;
00909       }
00910    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o0">lat</a> == maxLat ) {
00911       <span class="keywordflow">if</span> ( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o1">lon</a> == minLon ) {
00912          <span class="keywordflow">return</span> top_left;
00913       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a>.<a class="code" href="classMC2Coordinate.html#o1">lon</a> == maxLon ) {
00914          <span class="keywordflow">return</span> top_right;
00915       }
00916    }
00917    <span class="keywordflow">return</span> no_corner;
00918 }
00919 
00920 <span class="keyword">inline</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a> 
<a name="l00921"></a><a class="code" href="classMC2BoundingBox.html#a15">00921</a> <a class="code" href="classMC2BoundingBox.html#a14">MC2BoundingBox::getCorner</a>( <span class="keyword">const</span> MC2BoundingBox::corner_t&amp; corner )<span class="keyword"> const</span>
00922 <span class="keyword"></span>{
00923    <span class="keywordflow">switch</span> ( corner ) {
00924       <span class="keywordflow">case</span> ( bottom_left ):
00925          <span class="keywordflow">return</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>( <a class="code" href="classMC2BoundingBox.html#p2">minLat</a>, <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> );
00926       <span class="keywordflow">case</span> ( bottom_right ):
00927          <span class="keywordflow">return</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>( <a class="code" href="classMC2BoundingBox.html#p2">minLat</a>, <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> );
00928       <span class="keywordflow">case</span> ( top_left ):
00929          <span class="keywordflow">return</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>( <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a>, <a class="code" href="classMC2BoundingBox.html#p3">minLon</a> );
00930       <span class="keywordflow">case</span> ( top_right ):
00931          <span class="keywordflow">return</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>( <a class="code" href="classMC2BoundingBox.html#p0">maxLat</a>, <a class="code" href="classMC2BoundingBox.html#p1">maxLon</a> );
00932       <span class="keywordflow">default</span>:
00933          <span class="keywordflow">return</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>(); <span class="comment">// Invalid coordinate.</span>
00934    }
00935 }
00936 
00937 
00938 
00939 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
<a name="l00940"></a><a class="code" href="classMC2BoundingBox.html#a16">00940</a> <a class="code" href="classMC2BoundingBox.html#a16">MC2BoundingBox::onBorder</a>( <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; coord )<span class="keyword"> const</span>
00941 <span class="keyword"></span>{
00942    <span class="comment">// Not optimized.</span>
00943    <span class="keywordflow">return</span> <a class="code" href="classMC2BoundingBox.html#a7">contains</a>( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a> ) &amp;&amp; !<a class="code" href="classMC2BoundingBox.html#a9">inside</a>( <a class="code" href="RouteRequestData_8h.html#a3a0">coord</a> );
00944 }
00945 
00946 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:47 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
