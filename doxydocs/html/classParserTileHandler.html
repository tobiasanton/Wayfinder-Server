<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: ParserTileHandler Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>ParserTileHandler Class Reference</h1><code>#include &lt;<a class="el" href="ParserTileHandler_8h-source.html">ParserTileHandler.h</a>&gt;</code>
<p>
Inheritance diagram for ParserTileHandler:<p><center><img src="classParserTileHandler__inherit__graph.png" border="0" usemap="#ParserTileHandler__inherit__map" alt="Inheritance graph"></center>
<map name="ParserTileHandler__inherit__map">
<area href="classParserHandler.html" shape="rect" coords="5,5,112,32" alt="">
<area href="classNotCopyable.html" shape="rect" coords="136,5,235,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for ParserTileHandler:<p><center><img src="classParserTileHandler__coll__graph.png" border="0" usemap="#ParserTileHandler__coll__map" alt="Collaboration graph"></center>
<map name="ParserTileHandler__coll__map">
<area href="classParserHandler.html" shape="rect" coords="165,173,272,200" alt="">
<area href="classParserThread.html" shape="rect" coords="220,83,321,109" alt="">
<area href="classParserThreadGroup.html" shape="rect" coords="57,83,196,109" alt="">
<area href="classNotCopyable.html" shape="rect" coords="5,5,104,32" alt="">
<area href="classParserThreadFileDBufRequester.html" shape="rect" coords="329,173,543,200" alt="">
<area href="classFileDBufRequester.html" shape="rect" coords="551,83,684,109" alt="">
<area href="classServerTileMapFormatDesc.html" shape="rect" coords="345,83,527,109" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classParserTileHandler-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classParserTileHandler.html#a0">ParserTileHandler</a> (<a class="el" href="classParserThread.html">ParserThread</a> *thread, <a class="el" href="classParserThreadGroup.html">ParserThreadGroup</a> *group)
<li><a class="el" href="classParserTileHandler.html#a1">~ParserTileHandler</a> ()
<dl class="el"><dd class="mdescRight">Destructor.  <a href="#a1"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#a2">getTileMaps</a> (<a class="el" href="classTileMapQuery.html">TileMapQuery</a> &amp;query)
<dl class="el"><dd class="mdescRight">Gets the tilemaps that the query wants.  <a href="#a2"></a><br></dl><li><a class="el" href="classDataBuffer.html">DataBuffer</a> * <a class="el" href="classParserTileHandler.html#a3">getTileMaps</a> (const <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &gt; &amp;params, <a class="el" href="Types_8h.html#a21">uint32</a> startOffset, <a class="el" href="Types_8h.html#a21">uint32</a> maxBytes)
<dl class="el"><dd class="mdescRight">Gets many tilemaps on the format: &lt;br /&gt; Zero-terminated string with params.&lt;br /&gt; 4 bytes big endian length &lt;br /&gt; length bytes of data &lt;br /&gt; &lt;br /&gt;.  <a href="#a3"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#a4">precacheClientTileMaps</a> (bool singleFile, bool debug, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;outBuf, const <a class="el" href="classMC2BoundingBox.html">MC2BoundingBox</a> &amp;bbox, <a class="el" href="Types_8h.html#a21">uint32</a> scale, <a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a> lang, const set&lt; int &gt; &amp;layers, const char *cacheName, <a class="el" href="Types_8h.html#a21">uint32</a> cacheMaxSize, bool useGzip=true)
<dl class="el"><dd class="mdescRight">Precaches all tilemaps in the boundingbox down to the specified scalelevel.  <a href="#a4"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#a5">getRouteTileMapCache</a> (<a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;outBuf, const <a class="el" href="classExpandedRoute.html">ExpandedRoute</a> *expRoute, const <a class="el" href="classRouteID.html">RouteID</a> &amp;routeID, <a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a> lang, const set&lt; int &gt; &amp;layerIDs, const char *cacheName, <a class="el" href="Types_8h.html#a21">uint32</a> cacheMaxSize, bool useGzip)
<dl class="el"><dd class="mdescRight">Precaches the tilemaps along the route.  <a href="#a5"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#a6">getRouteTileMapCache</a> (<a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;outBuf, const <a class="el" href="classRouteID.html">RouteID</a> &amp;routeID, <a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a> lang, const set&lt; int &gt; &amp;layerIDs, const char *cacheName, <a class="el" href="Types_8h.html#a21">uint32</a> cacheMaxSize, bool useGzip)
<dl class="el"><dd class="mdescRight">Precaches the tilemaps along the route.  <a href="#a6"></a><br></dl></ul>
<h2>Private Types</h2>
<ul>
<li>typedef std::set&lt; <a class="el" href="structParserTileHandler_1_1ImageSize.html">ImageSize</a> &gt; <a class="el" href="classParserTileHandler.html#y0">ImageSizes</a>
</ul>
<h2>Private Member Functions</h2>
<ul>
<li><a class="el" href="classBitBuffer.html">BitBuffer</a> * <a class="el" href="classParserTileHandler.html#d0">getRealBitMap</a> (const char *paramStr, int xFactor)
<dl class="el"><dd class="mdescRight">The internal version of getBitMap that is called after getBitMap has updated the paramStr.  <a href="#d0"></a><br></dl><li><a class="el" href="classSTMFDParams.html">STMFDParams</a> <a class="el" href="classParserTileHandler.html#d1">getDefaultSTMFDParams</a> (const char *paramString=NULL) const 
<dl class="el"><dd class="mdescRight">Returns a server tilemap format desc, determined by the current user.  <a href="#d1"></a><br></dl><li><a class="el" href="classBitBuffer.html">BitBuffer</a> * <a class="el" href="classParserTileHandler.html#d2">requestCache</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;param, std::vector&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;retVector)
<dl class="el"><dd class="mdescRight">Requests cache, this one checks the ACP params too.  <a href="#d2"></a><br></dl><li><a class="el" href="classBitBuffer.html">BitBuffer</a> * <a class="el" href="classParserTileHandler.html#d3">requestCacheDirect</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;inParam, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;retVector)
<dl class="el"><dd class="mdescRight">Requests cache without checking for ACP params.  <a href="#d3"></a><br></dl><li>bool <a class="el" href="classParserTileHandler.html#d4">storeCache</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;param, const std::vector&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;tileMapBuffers)
<dl class="el"><dd class="mdescRight">Stores parameter to cache on disc.  <a href="#d4"></a><br></dl><li>bool <a class="el" href="classParserTileHandler.html#d5">storeCache</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;param, const <a class="el" href="classTileMapRequest.html">TileMapRequest</a> *request)
<dl class="el"><dd class="mdescRight">Stores parameter to cache on disc, same as the function above but with request as the parameter.  <a href="#d5"></a><br></dl><li><a class="el" href="classBitBuffer.html">BitBuffer</a> * <a class="el" href="classParserTileHandler.html#d6">getNonTileMap</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;paramStr)
<dl class="el"><dd class="mdescRight">Gets a non-tileMap, currently desc, desc CRC and bitmap.  <a href="#d6"></a><br></dl><li><a class="el" href="classBitBuffer.html">BitBuffer</a> * <a class="el" href="classParserTileHandler.html#d7">getNonTileMap</a> (const char *paramStr)
<dl class="el"><dd class="mdescRight">Gets a non-tileMap, currently desc, desc CRC and bitmap.  <a href="#d7"></a><br></dl><li><a class="el" href="classBitBuffer.html">BitBuffer</a> * <a class="el" href="classParserTileHandler.html#d8">getBitMap</a> (const char *paramStr)
<dl class="el"><dd class="mdescRight">Gets a bitmap.  <a href="#d8"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#d9">precacheClientTileMaps</a> (<a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;outBuf, const <a class="el" href="classSharedBuffer.html">SharedBuffer</a> &amp;allParams, <a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a> lang, const char *cacheName, <a class="el" href="Types_8h.html#a21">uint32</a> cacheMaxSize, bool useGzip=true, const <a class="el" href="classRouteID.html">RouteID</a> *routeID=NULL)
<dl class="el"><dd class="mdescRight">Precaches all the tilemaps present in allParams.  <a href="#d9"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#d10">precacheClientTileMapsSFD</a> (<a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;outBuf, const char *cacheName, bool debug, const <a class="el" href="classMC2BoundingBox.html">MC2BoundingBox</a> &amp;bbox, const set&lt; int &gt; &amp;layers, const set&lt; <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &gt; &amp;extraParams, bool useGzip, <a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a> lang, <a class="el" href="Types_8h.html#a21">uint32</a> scale)
<dl class="el"><dd class="mdescRight">Precaches tilemaps for a single file cache.  <a href="#d10"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#d11">getRouteTileMapParams</a> (const <a class="el" href="classExpandedRoute.html">ExpandedRoute</a> *expRoute, const <a class="el" href="classRouteID.html">RouteID</a> &amp;routeID, <a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a> lang, const set&lt; int &gt; &amp;layerIDs, set&lt; <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &gt; &amp;routeParams)
<dl class="el"><dd class="mdescRight">Will calculate all the tilemap params that are along the specified route.  <a href="#d11"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#d12">eraseMapsFromCache</a> (<a class="el" href="classTileMapParams.html">TileMapParams</a> params)
<dl class="el"><dd class="mdescRight">Erases all string and data maps for this param.  <a href="#d12"></a><br></dl><li><a class="el" href="classDataBuffer.html">DataBuffer</a> * <a class="el" href="classParserTileHandler.html#d13">getRouteTileMaps</a> (const <a class="el" href="classExpandedRoute.html">ExpandedRoute</a> *expRoute, const <a class="el" href="classRouteID.html">RouteID</a> &amp;routeID, <a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a> lang, const set&lt; int &gt; &amp;layerIDs, <a class="el" href="Types_8h.html#a21">uint32</a> startOffset, <a class="el" href="Types_8h.html#a21">uint32</a> maxBytes)
<dl class="el"><dd class="mdescRight">Get route tilemaps.  <a href="#d13"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#d14">removeTileMapBUffer</a> (const char *paramStr)
<dl class="el"><dd class="mdescRight">Remove a <a class="el" href="classTileMap.html">TileMap</a> from the tile cache.  <a href="#d14"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#d15">correctCRCsAndPutInCache</a> (const <a class="el" href="classTileMapRequest.html">TileMapRequest</a> *request)
<dl class="el"><dd class="mdescRight">Checks and possibly corrects the tile map CRCs.  <a href="#d15"></a><br></dl><li>bool <a class="el" href="classParserTileHandler.html#d16">correctCRCsAndPutInCache</a> (const <a class="el" href="classTileMapRequest.html">TileMapRequest</a> *request, bool shouldAssert)
<dl class="el"><dd class="mdescRight">Same as function above, this one does all the work.  <a href="#d16"></a><br></dl><li><a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> <a class="el" href="classParserTileHandler.html#d17">checkServerPrefixAndReplace</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;param)
<dl class="el"><dd class="mdescRight">Replaces the string with a DXXX if the server prefix is wrong.  <a href="#d17"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#d18">assertCachedCRC</a> (const char *param, const std::vector&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;crcBuffers, const <a class="el" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> *desc)
<dl class="el"><dd class="mdescRight">Will MC2_ASSERT that the cached tile maps have correct CRC.  <a href="#d18"></a><br></dl><li>int <a class="el" href="classParserTileHandler.html#d19">requestTiles</a> (<a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classRequestWithStatus.html">RequestWithStatus</a> * &gt; &amp;reqs, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classTileMapRequest.html">TileMapRequest</a> * &gt; &amp;tilereqs, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classRouteReplyPacket.html">RouteReplyPacket</a> * &gt; &amp;routePackets, <a class="el" href="classTileMapQuery.html">TileMapQuery</a> &amp;query)
<dl class="el"><dd class="mdescRight">Sends tile map requests.  <a href="#d19"></a><br></dl><li>void <a class="el" href="classParserTileHandler.html#d20">createEmptyMaps</a> (const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;inParam, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;retVector, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &gt; &amp;params, const <a class="el" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> &amp;tmfd)
<dl class="el"><dd class="mdescRight">Will create empty TileMapBufferHolders for the param(s).  <a href="#d20"></a><br></dl><li><a class="el" href="classTileMapRequest.html">TileMapRequest</a> * <a class="el" href="classParserTileHandler.html#d21">createTileMapRequest</a> (const <a class="el" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> &amp;mapDesc, const <a class="el" href="classTileMapParams.html">TileMapParams</a> &amp;params, const <a class="el" href="classRouteReplyPacket.html">RouteReplyPacket</a> *routeReplyPack)
<li>bool <a class="el" href="classParserTileHandler.html#d22">getACPTileRequests</a> (const <a class="el" href="classvector.html">ACPTileMapRequest::CacheStrings</a> &amp;cacheStrings, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classBitBuffer.html">BitBuffer</a> * &gt; &amp;cacheBuffers, <a class="el" href="classvector.html">ACPTileMapRequest::RequestInfoVector</a> &amp;tilereqs, <a class="el" href="classvector.html">ACPTileMapRequest::RightsVector</a> &amp;rights)
<dl class="el"><dd class="mdescRight">Fetches ACP tile map data and stores them in tilereqs.  <a href="#d22"></a><br></dl><li><a class="el" href="classBitBuffer.html">BitBuffer</a> * <a class="el" href="classParserTileHandler.html#d23">composeACP</a> (const <a class="el" href="classTileMapParams.html">TileMapParams</a> &amp;param, <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;buffers)
<dl class="el"><dd class="mdescRight">Compose ACP tilemap from cache.  <a href="#d23"></a><br></dl><li>bool <a class="el" href="classParserTileHandler.html#d24">isValidUserImageSize</a> (const <a class="el" href="classMC2String.html">MC2String</a> &amp;str)
<dl class="el"><dd class="mdescRight">Determins whether the image size is correct.  <a href="#d24"></a><br></dl></ul>
<h2>Private Attributes</h2>
<ul>
<li><a class="el" href="classParserThreadFileDBufRequester.html">ParserThreadFileDBufRequester</a> * <a class="el" href="classParserTileHandler.html#r0">m_tileMapCache</a>
<dl class="el"><dd class="mdescRight"><a class="el" href="classCache.html">Cache</a> of tilemaps and other tile-stuff.  <a href="#r0"></a><br></dl><li>bool <a class="el" href="classParserTileHandler.html#r1">m_acpMode</a>
<dl class="el"><dd class="mdescRight">Whether we are in acp mode or not.  <a href="#r1"></a><br></dl><li><a class="el" href="classParserTileHandler.html#y0">ImageSizes</a> <a class="el" href="classParserTileHandler.html#r2">m_validImageSizes</a>
<dl class="el"><dd class="mdescRight">Contains all valid image sizes.  <a href="#r2"></a><br></dl></ul>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="y0" doxytag="ParserTileHandler::ImageSizes"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::set&lt; <a class="el" href="structParserTileHandler_1_1ImageSize.html">ImageSize</a> &gt; <a class="el" href="classParserTileHandler.html#y0">ParserTileHandler::ImageSizes</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="ParserTileHandler_8h-source.html#l00451">451</a> of file <a class="el" href="ParserTileHandler_8h-source.html">ParserTileHandler.h</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="ParserTileHandler::ParserTileHandler"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ParserTileHandler::ParserTileHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classParserThread.html">ParserThread</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>thread</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classParserThreadGroup.html">ParserThreadGroup</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>group</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ParserTileHandler::~ParserTileHandler"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ParserTileHandler::~<a class="el" href="classParserTileHandler.html">ParserTileHandler</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor. 
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="d18" doxytag="ParserTileHandler::assertCachedCRC"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::assertCachedCRC           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>param</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const std::vector&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>crcBuffers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>desc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Will MC2_ASSERT that the cached tile maps have correct CRC. 
<p>
This method should not be called in the production cluster.     </td>
  </tr>
</table>
<a class="anchor" name="d17" doxytag="ParserTileHandler::checkServerPrefixAndReplace"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> ParserTileHandler::checkServerPrefixAndReplace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>param</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Replaces the string with a DXXX if the server prefix is wrong. 
<p>
Shouldn't happen very often, since we have concluded that it isn't a very good idea to change server prefix.     </td>
  </tr>
</table>
<a class="anchor" name="d23" doxytag="ParserTileHandler::composeACP"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBitBuffer.html">BitBuffer</a>* ParserTileHandler::composeACP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classTileMapParams.html">TileMapParams</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>param</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>buffers</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Compose ACP tilemap from cache. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>the tilemap param to compose ACP buffer from </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>a composed bit buffer or NULL if there is no cache to compose from or tile map request. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d16" doxytag="ParserTileHandler::correctCRCsAndPutInCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool ParserTileHandler::correctCRCsAndPutInCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classTileMapRequest.html">TileMapRequest</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>request</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>shouldAssert</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Same as function above, this one does all the work. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classParserTileHandler.html#d15">correctCRCsAndPutInCache</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>shouldAssert</em>&nbsp;</td><td>true if the function should assert if crc could not be corrected </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if crc was ok or it were successfully recovered </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d15" doxytag="ParserTileHandler::correctCRCsAndPutInCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::correctCRCsAndPutInCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classTileMapRequest.html">TileMapRequest</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>request</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks and possibly corrects the tile map CRCs. 
<p>
&lt;br /&gt; If a string tilemap has a different CRC than its corresponding tilemap, it is probably because of the fact that the maps are created using Swedish strings and thus the concatenation of streets with the same name can be different from other languages. It will then try to exchange the text map to one created with Swedish as language. &lt;br /&gt; If the CRC still differs, it can be because the database has been down while creating one of the maps. In this case all the maps in all languages are deleted. &lt;br /&gt; Will also put correct buffers into the cache, <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffers</em>&nbsp;</td><td>Buffers to check and correct. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d20" doxytag="ParserTileHandler::createEmptyMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::createEmptyMaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>inParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>retVector</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tmfd</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Will create empty TileMapBufferHolders for the param(s). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>params</em>&nbsp;</td><td>Must be saved since the strings in retVector point into them </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d21" doxytag="ParserTileHandler::createTileMapRequest"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classTileMapRequest.html">TileMapRequest</a>* ParserTileHandler::createTileMapRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>mapDesc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classTileMapParams.html">TileMapParams</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classRouteReplyPacket.html">RouteReplyPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>routeReplyPack</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d12" doxytag="ParserTileHandler::eraseMapsFromCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::eraseMapsFromCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTileMapParams.html">TileMapParams</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>params</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Erases all string and data maps for this param. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d22" doxytag="ParserTileHandler::getACPTileRequests"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool ParserTileHandler::getACPTileRequests           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classvector.html">ACPTileMapRequest::CacheStrings</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheStrings</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classBitBuffer.html">BitBuffer</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheBuffers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">ACPTileMapRequest::RequestInfoVector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tilereqs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">ACPTileMapRequest::RightsVector</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>rights</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Fetches ACP tile map data and stores them in tilereqs. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cacheStrings</em>&nbsp;</td><td>the names of the data to fetch </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheBuffers</em>&nbsp;</td><td>buffers from cache, must be deleted </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tilereqs</em>&nbsp;</td><td>the return requests to be used with <a class="el" href="classACPTileMapRequest.html">ACPTileMapRequest</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rights</em>&nbsp;</td><td>the rights for each request in tilereqs </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true on success, else false </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d8" doxytag="ParserTileHandler::getBitMap"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBitBuffer.html">BitBuffer</a>* ParserTileHandler::getBitMap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>paramStr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets a bitmap. 
<p>
Converts it to the correct format if necessary. <dl compact><dt><b>Returns:</b></dt><dd>NULL if impossible. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="ParserTileHandler::getDefaultSTMFDParams"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSTMFDParams.html">STMFDParams</a> ParserTileHandler::getDefaultSTMFDParams           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>paramString</em> = <code>NULL</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a server tilemap format desc, determined by the current user. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>paramString</em>&nbsp;</td><td>a param string. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d7" doxytag="ParserTileHandler::getNonTileMap"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBitBuffer.html">BitBuffer</a>* ParserTileHandler::getNonTileMap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>paramStr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets a non-tileMap, currently desc, desc CRC and bitmap. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d6" doxytag="ParserTileHandler::getNonTileMap"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBitBuffer.html">BitBuffer</a>* ParserTileHandler::getNonTileMap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>paramStr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets a non-tileMap, currently desc, desc CRC and bitmap. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="ParserTileHandler::getRealBitMap"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBitBuffer.html">BitBuffer</a>* ParserTileHandler::getRealBitMap           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>paramStr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>xFactor</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The internal version of getBitMap that is called after getBitMap has updated the paramStr. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>paramStr</em>&nbsp;</td><td>The bitmap tile param. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xFactor</em>&nbsp;</td><td>The scale factor for the bitmap. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ParserTileHandler::getRouteTileMapCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::getRouteTileMapCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>outBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classRouteID.html">RouteID</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>routeID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const set&lt; int &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>layerIDs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheMaxSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>useGzip</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Precaches the tilemaps along the route. 
<p>
This version will fetch the route from the database and perform the route expansion.<p>
Will look at the speedlimit of the different streets in the route to select an appropriate detaillevel. The cache can then be used by the clients. The cache is tar:ed and written into the supplied vector&lt;byte&gt;.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>outBuf</em>&nbsp;</td><td>[OUT] Vector of bytes that will be filled with the tar-file containing the resulting cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>routeID</em>&nbsp;</td><td>The route id. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lang</em>&nbsp;</td><td>The language. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>layers</em>&nbsp;</td><td>The ids of the layers to cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheName</em>&nbsp;</td><td>The suffix of the resulting cache dir. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheMaxSize</em>&nbsp;</td><td>The max size in bytes of the cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>useGzip</em>&nbsp;</td><td>Whether to use gzip or not. Default true. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ParserTileHandler::getRouteTileMapCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::getRouteTileMapCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>outBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classExpandedRoute.html">ExpandedRoute</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>expRoute</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classRouteID.html">RouteID</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>routeID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const set&lt; int &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>layerIDs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheMaxSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>useGzip</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Precaches the tilemaps along the route. 
<p>
Will look at the speedlimit of the different streets in the route to select an appropriate detaillevel. The cache can then be used by the clients. The cache is tar:ed and written into the supplied vector&lt;byte&gt;.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>outBuf</em>&nbsp;</td><td>[OUT] Vector of bytes that will be filled with the tar-file containing the resulting cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>expRoute</em>&nbsp;</td><td>The expanded route. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>routeID</em>&nbsp;</td><td>The route id. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lang</em>&nbsp;</td><td>The language. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>layers</em>&nbsp;</td><td>The ids of the layers to cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheName</em>&nbsp;</td><td>The suffix of the resulting cache dir. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheMaxSize</em>&nbsp;</td><td>The max size in bytes of the cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>useGzip</em>&nbsp;</td><td>Whether to use gzip or not. Default true. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d11" doxytag="ParserTileHandler::getRouteTileMapParams"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::getRouteTileMapParams           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classExpandedRoute.html">ExpandedRoute</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>expRoute</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classRouteID.html">RouteID</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>routeID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const set&lt; int &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>layerIDs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>set&lt; <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>routeParams</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Will calculate all the tilemap params that are along the specified route. 
<p>
XXX: This method is VERY slow.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>expRoute</em>&nbsp;</td><td>The expanded route. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>routeID</em>&nbsp;</td><td>The route id. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lang</em>&nbsp;</td><td>The language. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>layerIDs</em>&nbsp;</td><td>The ids of the layers to include along the route. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>routeParams</em>&nbsp;</td><td>[OUT] Will be filled with the tilemap params along the route. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d13" doxytag="ParserTileHandler::getRouteTileMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classDataBuffer.html">DataBuffer</a>* ParserTileHandler::getRouteTileMaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classExpandedRoute.html">ExpandedRoute</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>expRoute</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classRouteID.html">RouteID</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>routeID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const set&lt; int &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>layerIDs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>startOffset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>maxBytes</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get route tilemaps. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ParserTileHandler::getTileMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classDataBuffer.html">DataBuffer</a>* ParserTileHandler::getTileMaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>params</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>startOffset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>maxBytes</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets many tilemaps on the format: &lt;br /&gt; Zero-terminated string with params.&lt;br /&gt; 4 bytes big endian length &lt;br /&gt; length bytes of data &lt;br /&gt; &lt;br /&gt;. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>params</em>&nbsp;</td><td>A vector of parameters. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>startOffset</em>&nbsp;</td><td>The start offset in bytes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxBytes</em>&nbsp;</td><td>The approx maximum number of bytes to send. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ParserTileHandler::getTileMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::getTileMaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTileMapQuery.html">TileMapQuery</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>query</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets the tilemaps that the query wants. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>query</em>&nbsp;</td><td>Query to fill in. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d24" doxytag="ParserTileHandler::isValidUserImageSize"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool ParserTileHandler::isValidUserImageSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>str</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determins whether the image size is correct. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>Determin image size from this string </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the image size is ok. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d9" doxytag="ParserTileHandler::precacheClientTileMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::precacheClientTileMaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>outBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classSharedBuffer.html">SharedBuffer</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>allParams</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheMaxSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>useGzip</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classRouteID.html">RouteID</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>routeID</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Precaches all the tilemaps present in allParams. 
<p>
The cache can then be used by the clients. The cache is tar:ed and written into the supplied vector&lt;byte&gt;.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>outBuf</em>&nbsp;</td><td>[OUT] Vector of bytes that will be filled with the tar-file containing the resulting cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>allParams</em>&nbsp;</td><td>All the params of the tilemap to include in the cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lang</em>&nbsp;</td><td>The language. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>layers</em>&nbsp;</td><td>The layers to cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheName</em>&nbsp;</td><td>The suffix of the resulting cache dir. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheMaxSize</em>&nbsp;</td><td>The max size in bytes of the cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>useGzip</em>&nbsp;</td><td>Whether to use gzip or not. Default true. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>routeID</em>&nbsp;</td><td>[Optional] Set to the route id in case route tilemaps are included. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ParserTileHandler::precacheClientTileMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::precacheClientTileMaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname" nowrap> <em>singleFile</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>debug</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>outBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2BoundingBox.html">MC2BoundingBox</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>bbox</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>scale</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const set&lt; int &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>layers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheMaxSize</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>useGzip</em> = <code>true</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Precaches all tilemaps in the boundingbox down to the specified scalelevel. 
<p>
The cache can then be used by the clients. The cache is tar:ed and written into the supplied vector&lt;byte&gt;.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>singleFile</em>&nbsp;</td><td>True if an .sfd cache is desired, else tar. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>debug</em>&nbsp;</td><td>True if a debug version of .sfd cache is wanted. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bbox</em>&nbsp;</td><td>The boundingbox for the area to cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scale</em>&nbsp;</td><td>The minimum scale to cache down to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lang</em>&nbsp;</td><td>The language. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>layers</em>&nbsp;</td><td>The layers to cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheName</em>&nbsp;</td><td>The suffix of the resulting cache dir. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cacheMaxSize</em>&nbsp;</td><td>The max size in bytes of the cache. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>useGzip</em>&nbsp;</td><td>Whether to use gzip or not. Default true. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d10" doxytag="ParserTileHandler::precacheClientTileMapsSFD"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::precacheClientTileMapsSFD           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>outBuf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cacheName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>debug</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2BoundingBox.html">MC2BoundingBox</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>bbox</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const set&lt; int &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>layers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const set&lt; <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>extraParams</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>useGzip</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classLangTypes.html#w99">LangTypes::language_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lang</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>scale</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Precaches tilemaps for a single file cache. 
<p>
[OUT] Vector of bytes that will be <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cacheName</em>&nbsp;</td><td>the cache name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>debug</em>&nbsp;</td><td>If to include debug strings in SFD data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bbox</em>&nbsp;</td><td>bounding box for the area </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>layers</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>extraParams</em>&nbsp;</td><td>extra parameters </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>useGzip</em>&nbsp;</td><td>if the data should be packed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lang</em>&nbsp;</td><td>The language. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>scale</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d14" doxytag="ParserTileHandler::removeTileMapBUffer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void ParserTileHandler::removeTileMapBUffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>paramStr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove a <a class="el" href="classTileMap.html">TileMap</a> from the tile cache. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>paramStr</em>&nbsp;</td><td>The paramstring to be removed. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="ParserTileHandler::requestCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBitBuffer.html">BitBuffer</a>* ParserTileHandler::requestCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>param</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>std::vector&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>retVector</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Requests cache, this one checks the ACP params too. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>the cache key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>retVector</em>&nbsp;</td><td>return vector that contains all small buffers in cache </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>pointer to cache buffer </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="ParserTileHandler::requestCacheDirect"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBitBuffer.html">BitBuffer</a>* ParserTileHandler::requestCacheDirect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>inParam</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>retVector</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Requests cache without checking for ACP params. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>the cache key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>retVector</em>&nbsp;</td><td>return vector that contains all small buffers in cache </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>pointer to cache buffer </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d19" doxytag="ParserTileHandler::requestTiles"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int ParserTileHandler::requestTiles           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classRequestWithStatus.html">RequestWithStatus</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>reqs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classTileMapRequest.html">TileMapRequest</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tilereqs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classRouteReplyPacket.html">RouteReplyPacket</a> * &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>routePackets</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classTileMapQuery.html">TileMapQuery</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>query</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends tile map requests. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>reqs</em>&nbsp;</td><td><a class="el" href="classRequestWithStatus.html">RequestWithStatus</a> vector, this will be destroyed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tilereqs</em>&nbsp;</td><td>TileMapRequests vector, this will be destroyed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>routePackets</em>&nbsp;</td><td>will be destroyed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query</em>&nbsp;</td><td>the <a class="el" href="classTileMapQuery.html">TileMapQuery</a> to add buffers to. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>number of buffers added to query </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="ParserTileHandler::storeCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool ParserTileHandler::storeCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>param</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classTileMapRequest.html">TileMapRequest</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>request</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores parameter to cache on disc, same as the function above but with request as the parameter. 
<p>
This function might store more than one buffer to disc. For example ACP tile maps. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>the tile map param string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tileMapBuffers</em>&nbsp;</td><td>tile map data </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the cache was written to disc </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="ParserTileHandler::storeCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool ParserTileHandler::storeCache           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2SimpleString.html">MC2SimpleString</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>param</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const std::vector&lt; <a class="el" href="structTileMapBufferHolder.html">TileMapBufferHolder</a> &gt; &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>tileMapBuffers</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores parameter to cache on disc. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>param</em>&nbsp;</td><td>the tile map param string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tileMapBuffers</em>&nbsp;</td><td>tile map data </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the cache was written to disc </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r1" doxytag="ParserTileHandler::m_acpMode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="classParserTileHandler.html#r1">ParserTileHandler::m_acpMode</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Whether we are in acp mode or not. 
<p>

<p>
Definition at line <a class="el" href="ParserTileHandler_8h-source.html#l00427">427</a> of file <a class="el" href="ParserTileHandler_8h-source.html">ParserTileHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="ParserTileHandler::m_tileMapCache"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classParserThreadFileDBufRequester.html">ParserThreadFileDBufRequester</a>* <a class="el" href="classParserTileHandler.html#r0">ParserTileHandler::m_tileMapCache</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="classCache.html">Cache</a> of tilemaps and other tile-stuff. 
<p>

<p>
Definition at line <a class="el" href="ParserTileHandler_8h-source.html#l00422">422</a> of file <a class="el" href="ParserTileHandler_8h-source.html">ParserTileHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="ParserTileHandler::m_validImageSizes"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classParserTileHandler.html#y0">ImageSizes</a> <a class="el" href="classParserTileHandler.html#r2">ParserTileHandler::m_validImageSizes</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Contains all valid image sizes. 
<p>

<p>
Definition at line <a class="el" href="ParserTileHandler_8h-source.html#l00454">454</a> of file <a class="el" href="ParserTileHandler_8h-source.html">ParserTileHandler.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="ParserTileHandler_8h-source.html">ParserTileHandler.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:26:29 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
