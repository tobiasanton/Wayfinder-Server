<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: Balancer Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>Balancer Class Reference</h1>Basic class for load balancing among modules.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="Balancer_8h-source.html">Balancer.h</a>&gt;</code>
<p>
Inheritance diagram for Balancer:<p><center><img src="classBalancer__inherit__graph.png" border="0" usemap="#Balancer__inherit__map" alt="Inheritance graph"></center>
<map name="Balancer__inherit__map">
<area href="classSimpleBalancer.html" shape="rect" coords="132,80,247,107" alt="">
<area href="classInfoModuleSimpleBalancer.html" shape="rect" coords="5,155,187,181" alt="">
<area href="classSMSSimpleBalancer.html" shape="rect" coords="211,155,355,181" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classBalancer-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li>virtual <a class="el" href="classBalancer.html#a0">~Balancer</a> ()
<dl class="el"><dd class="mdescRight">Destructoir.  <a href="#a0"></a><br></dl><li>virtual bool <a class="el" href="classBalancer.html#a1">updateStats</a> (<a class="el" href="classStatisticsPacket.html">StatisticsPacket</a> *packet, <a class="el" href="classvector.html">PacketSendList</a> &amp;packetList)=0
<dl class="el"><dd class="mdescRight">Updates the statistics.  <a href="#a1"></a><br></dl><li>virtual int <a class="el" href="classBalancer.html#a2">getNbrModules</a> () const =0
<dl class="el"><dd class="mdescRight">Returns the number of known modules.  <a href="#a2"></a><br></dl><li>virtual void <a class="el" href="classBalancer.html#a3">becomeLeader</a> ()=0
<dl class="el"><dd class="mdescRight">Tells the Balancer that the module has become leader.  <a href="#a3"></a><br></dl><li>virtual void <a class="el" href="classBalancer.html#a4">becomeAvailable</a> ()=0
<dl class="el"><dd class="mdescRight">Tells the Balancer that the module has become available.  <a href="#a4"></a><br></dl><li>virtual int <a class="el" href="classBalancer.html#a5">timeout</a> (<a class="el" href="classStatisticsPacket.html">StatisticsPacket</a> *ownStatistics, <a class="el" href="classvector.html">PacketSendList</a> &amp;packets)=0
<dl class="el"><dd class="mdescRight">Remove any modules that we haven't heard from for a while.  <a href="#a5"></a><br></dl><li>virtual bool <a class="el" href="classBalancer.html#a6">getModulePackets</a> (<a class="el" href="classvector.html">PacketSendList</a> &amp;packets, <a class="el" href="classRequestPacket.html">RequestPacket</a> *req)=0
<dl class="el"><dd class="mdescRight">Get packets with destination module to send for a certain <a class="el" href="classRequestPacket.html">RequestPacket</a>.  <a href="#a6"></a><br></dl><li>virtual bool <a class="el" href="classBalancer.html#a7">usesMaps</a> () const =0
<dl class="el"><dd class="mdescRight">Does the module use maps?  <a href="#a7"></a><br></dl><li>virtual void <a class="el" href="classBalancer.html#a8">setAllMaps</a> (const set&lt; <a class="el" href="MapBits_8h.html#a5">MapID</a> &gt; &amp;allMaps)=0
<dl class="el"><dd class="mdescRight">For modules using maps this function is used to let the balancer know which maps are available.  <a href="#a8"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Basic class for load balancing among modules. 
<p>
Can be used directly for testing, but should not be used for any other purposes. Use only derived classes, eg LRUBalancer.or xxx instead. 
<p>

<p>
Definition at line <a class="el" href="Balancer_8h-source.html#l00033">33</a> of file <a class="el" href="Balancer_8h-source.html">Balancer.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="Balancer::~Balancer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual Balancer::~<a class="el" href="classBalancer.html">Balancer</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructoir. 
<p>

<p>
Definition at line <a class="el" href="Balancer_8h-source.html#l00039">39</a> of file <a class="el" href="Balancer_8h-source.html">Balancer.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4" doxytag="Balancer::becomeAvailable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void Balancer::becomeAvailable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Tells the Balancer that the module has become available. 
<p>

<p>
Implemented in <a class="el" href="classSimpleBalancer.html#a7">SimpleBalancer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="Balancer::becomeLeader"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void Balancer::becomeLeader           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Tells the Balancer that the module has become leader. 
<p>

<p>
Implemented in <a class="el" href="classSimpleBalancer.html#a6">SimpleBalancer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="Balancer::getModulePackets"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual bool Balancer::getModulePackets           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classvector.html">PacketSendList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>packets</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classRequestPacket.html">RequestPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>req</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get packets with destination module to send for a certain <a class="el" href="classRequestPacket.html">RequestPacket</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packetList</em>&nbsp;</td><td>The list of packets. On return it contains the packets to send together with their destinations. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>The request packet. Do not use it after calling the function. </td></tr>
  </table>
</dl>

<p>
Implemented in <a class="el" href="classSimpleBalancer.html#a5">SimpleBalancer</a>, and <a class="el" href="classSMSSimpleBalancer.html#a2">SMSSimpleBalancer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="Balancer::getNbrModules"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual int Balancer::getNbrModules           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the number of known modules. 
<p>
Used in HeartBeatPackets. 
<p>
Implemented in <a class="el" href="classSimpleBalancer.html#a3">SimpleBalancer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="Balancer::setAllMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void Balancer::setAllMaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const set&lt; <a class="el" href="MapBits_8h.html#a5">MapID</a> &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>allMaps</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
For modules using maps this function is used to let the balancer know which maps are available. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>allMaps</em>&nbsp;</td><td>A set of all maps. </td></tr>
  </table>
</dl>

<p>
Implemented in <a class="el" href="classSimpleBalancer.html#a10">SimpleBalancer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="Balancer::timeout"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual int Balancer::timeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classStatisticsPacket.html">StatisticsPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ownStatistics</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">PacketSendList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>packets</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove any modules that we haven't heard from for a while. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ownStatistics</em>&nbsp;</td><td>Statistics packet for this module, shall be deleted by this function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>packets</em>&nbsp;</td><td>Will be filled with packets to send. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Milliseconds until next wanted timeout? </dd></dl>

<p>
Implemented in <a class="el" href="classSimpleBalancer.html#a4">SimpleBalancer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="Balancer::updateStats"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual bool Balancer::updateStats           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classStatisticsPacket.html">StatisticsPacket</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classvector.html">PacketSendList</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>packetList</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Updates the statistics. 
<p>
Currently also deletes the packet. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>packet</em>&nbsp;</td><td>A pointer to a <a class="el" href="classStatisticsPacket.html">StatisticsPacket</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>packetList</em>&nbsp;</td><td>Can be filled with packets to send in response to the statistics packet, such as deleting maps if duplicates are noticed. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if the statistics were used, false if ignored </dd></dl>

<p>
Implemented in <a class="el" href="classSimpleBalancer.html#a2">SimpleBalancer</a>, and <a class="el" href="classSMSSimpleBalancer.html#a1">SMSSimpleBalancer</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="Balancer::usesMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual bool Balancer::usesMaps           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Does the module use maps? 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>Whether the module uses maps. </dd></dl>

<p>
Implemented in <a class="el" href="classSimpleBalancer.html#a9">SimpleBalancer</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="Balancer_8h-source.html">Balancer.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:23:07 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
