<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: CommandlineOptionHandler.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>CommandlineOptionHandler.h</h1><a href="CommandlineOptionHandler_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef COMMANDLINEOPTIONHANDLER_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define COMMANDLINEOPTIONHANDLER_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 
00019 <span class="preprocessor">#include &lt;vector&gt;</span>
00020 <span class="preprocessor">#include &lt;map&gt;</span>
00021 <span class="preprocessor">#include &lt;memory&gt;</span>
00022 <span class="preprocessor">#include "<a class="code" href="MC2String_8h.html">MC2String.h</a>"</span>
00023 
<a name="l00091"></a><a class="code" href="classCommandlineOptionHandler.html">00091</a> <span class="keyword">class </span><a class="code" href="classCommandlineOptionHandler.html">CommandlineOptionHandler</a> {
00092    <span class="keyword">public</span> :
00103       <a class="code" href="classCommandlineOptionHandler.html">CommandlineOptionHandler</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv,
00104                                <span class="keywordtype">int</span> minTailLength = 0,
00105                                <span class="keywordtype">bool</span> lazyMode = <span class="keyword">false</span>);
00106 
00110       <span class="keyword">virtual</span> ~<a class="code" href="classCommandlineOptionHandler.html">CommandlineOptionHandler</a>();
00111 
00116       <span class="keywordtype">void</span> deleteTheStrings();
00117 
<a name="l00121"></a><a class="code" href="classCommandlineOptionHandler.html#w7">00121</a>       <span class="keyword">enum</span> value_t {
00126          characterVal,
00127 
00132          stringVal,
00133 
00140          presentVal,
00141 
00146          integerVal,
00147 
00152          uint32Val,
00153 
00158          floatVal,
00159 
00164          singleChoiceVal,
00165       };
00166 
00174       <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">char</span> getValueChar(<span class="keyword">enum</span> value_t valueType);
00175 
00181       <span class="keyword">inline</span> <span class="keywordtype">void</span> setSummary(<span class="keyword">const</span> <span class="keywordtype">char</span>* summary);
00182 
00189       <span class="keyword">inline</span> <span class="keywordtype">void</span> setTailHelp(<span class="keyword">const</span> <span class="keywordtype">char</span>* tailHelp);
00190 
00216       <span class="keywordtype">void</span> addOption(<span class="keyword">const</span> <span class="keywordtype">char</span>* shortName, <span class="keyword">const</span> <span class="keywordtype">char</span>* longName, 
00217                      value_t valueType, uint32 nbrValues,
00218                      <span class="keywordtype">void</span>* optionValue, <span class="keyword">const</span> <span class="keywordtype">char</span>* defaultValue,
00219                      <span class="keyword">const</span> <span class="keywordtype">char</span>* helpText);
00220 
00225       <span class="keywordtype">void</span> addUINT32Option(<span class="keyword">const</span> <span class="keywordtype">char</span>* shortName,
00226                            <span class="keyword">const</span> <span class="keywordtype">char</span>* longName, 
00227                            uint32 nbrValues,
00228                            uint32* optionValue,
00229                            uint32 defaultValue,
00230                            <span class="keyword">const</span> <span class="keywordtype">char</span>* helpText);
00231 
00251       <span class="keyword">template</span>&lt;<span class="keyword">class</span> InIt&gt;
00252       <span class="keywordtype">void</span> addSingleChoiceOption(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; shortName, 
00253                                  InIt firstLongName, InIt lastLongName, 
00254                                  uint32* optionValue, uint32 defaultValue,
00255                                  <span class="keyword">const</span> <span class="keywordtype">char</span>* helpText);
00265       <span class="keywordtype">bool</span> parse(<span class="keywordtype">bool</span> handleErrors = <span class="keyword">true</span>);
00266 
00276          <span class="keyword">virtual</span> <span class="keywordtype">void</span> printHelp(ostream&amp; os) <span class="keyword">const</span>;
00277 
00283          <span class="keyword">virtual</span> <span class="keywordtype">void</span> printSummary(ostream&amp; os) <span class="keyword">const</span>;
00284 
00292          <span class="keyword">virtual</span> <span class="keywordtype">void</span> printUsage(ostream&amp; os) <span class="keyword">const</span>;
00293 
00300          <span class="keyword">virtual</span> <span class="keywordtype">void</span> printVersion(ostream&amp; os) <span class="keyword">const</span>;
00302 
00309       <span class="keyword">inline</span> <span class="keywordtype">char</span>* getPropertyFileName() <span class="keyword">const</span>;
00310 
00316       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> getTailLength() <span class="keyword">const</span>;
00317 
00326       <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* getTail(uint16 index) <span class="keyword">const</span>;
00327 
00328    <span class="keyword">private</span> :
<a name="l00332"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html">00332</a>       <span class="keyword">struct </span><a class="code" href="structCommandlineOptionHandler_1_1Option.html">Option</a> {
00347             <a class="code" href="structCommandlineOptionHandler_1_1Option.html">Option</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* shortName, <span class="keyword">const</span> <span class="keywordtype">char</span>* longName, 
00348                    value_t valueType, <a class="code" href="Types_8h.html#a21">uint32</a> nbrValues,
00349                    <span class="keywordtype">void</span>* optionValue, <span class="keyword">const</span> <span class="keywordtype">char</span>* defaultValue,
00350                    <span class="keyword">const</span> <span class="keywordtype">char</span>* helpText);
00351 
00360             <span class="keyword">virtual</span> ~<a class="code" href="structCommandlineOptionHandler_1_1Option.html">Option</a>();
00361 
00381                <span class="keyword">virtual</span> <span class="keywordtype">bool</span> setValue(<span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> index,
00382                                      <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; newVal,
00383                                      <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; option);
00384 
00389                <span class="keyword">inline</span> <span class="keywordtype">bool</span> setDefaultValue();
00391             
00397             <span class="keyword">virtual</span> <span class="keywordtype">void</span> printHelpText(ostream&amp; os) <span class="keyword">const</span>;
00398 
00406             <span class="keyword">virtual</span> <span class="keywordtype">bool</span> hasValue(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; option) <span class="keyword">const</span>;
00407 
<a name="l00411"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#o0">00411</a>             <a class="code" href="classMC2String.html">MC2String</a> shortName;
00412 
<a name="l00416"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#o1">00416</a>             <a class="code" href="classMC2String.html">MC2String</a> longName;
00417 
<a name="l00422"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#o2">00422</a>             value_t valueType;
00423 
<a name="l00427"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#o3">00427</a>             <span class="keywordtype">void</span>* optionValue;
00428 
<a name="l00434"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#o4">00434</a>             <a class="code" href="classMC2String.html">MC2String</a> defaultValue;
00435 
<a name="l00440"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#o5">00440</a>             <a class="code" href="classMC2String.html">MC2String</a> helpText;
00441 
<a name="l00447"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#o6">00447</a>             <a class="code" href="Types_8h.html#a21">uint32</a> nbrValues;
00448       };
00449 
<a name="l00453"></a><a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html">00453</a>        <span class="keyword">class </span><a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html">SingleChoiceOption</a> : <span class="keyword">public</span> <a class="code" href="structCommandlineOptionHandler_1_1Option.html">Option</a> {
00454        <span class="keyword">public</span>:
00470           <span class="keyword">template</span>&lt;<span class="keyword">typename</span> InIt&gt;
<a name="l00471"></a><a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html#a0">00471</a>           <a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html">SingleChoiceOption</a>(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; shortName,
00472                              InIt firstLongName, InIt lastLongName, 
00473                              uint32* optionValue, uint32 defaultValue, 
00474                              <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; helpText) : 
00475              <a class="code" href="structCommandlineOptionHandler_1_1Option.html">Option</a>(shortName.c_str(), <span class="stringliteral">""</span>, singleChoiceVal, 1, 
00476                     optionValue, <span class="stringliteral">""</span>, helpText.c_str()), 
00477              m_longOptions(firstLongName, lastLongName), 
00478              m_defaultValue(defaultValue)
00479           {}
<a name="l00481"></a><a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html#a1">00481</a>           <span class="keyword">virtual</span> ~<a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html">SingleChoiceOption</a>()
00482           {}
00487           <span class="keyword">virtual</span> <span class="keywordtype">void</span> printHelpText(ostream&amp; os) <span class="keyword">const</span>;
00495           <span class="keyword">virtual</span> <span class="keywordtype">bool</span> setValue(<span class="keyword">const</span> uint32 index, <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; val, 
00496                                 <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; option);
00504           <span class="keyword">virtual</span> <span class="keywordtype">bool</span> hasValue(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; option) <span class="keyword">const</span>;
00505           
00506        <span class="keyword">private</span>:
<a name="l00508"></a><a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html#y0">00508</a>           <span class="keyword">typedef</span> <a class="code" href="classvector.html">vector&lt;pair&lt;MC2String,MC2String&gt;</a> &gt; <a class="code" href="classvector.html">optionPairs_t</a>;
<a name="l00510"></a><a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html#r0">00510</a>           <a class="code" href="classvector.html">optionPairs_t</a> m_longOptions;
<a name="l00512"></a><a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html#r1">00512</a>           <a class="code" href="Types_8h.html#a21">uint32</a> m_defaultValue;
00513        };
00514 
<a name="l00519"></a><a class="code" href="classCommandlineOptionHandler.html#r0">00519</a>       <a class="code" href="classvector.html">vector&lt;Option *&gt;</a> m_options;
00520 
<a name="l00525"></a><a class="code" href="classCommandlineOptionHandler.html#r1">00525</a>       <a class="code" href="classmap.html">map&lt;MC2String, vector&lt;Option *&gt;</a>::size_type&gt; m_optmap;
00526 
<a name="l00530"></a><a class="code" href="classCommandlineOptionHandler.html#r2">00530</a>       <a class="code" href="classvector.html">vector&lt;MC2String&gt;</a> m_tail;
00531 
<a name="l00535"></a><a class="code" href="classCommandlineOptionHandler.html#r3">00535</a>       <span class="keywordtype">int</span> m_minTailLength;
00536 
<a name="l00540"></a><a class="code" href="classCommandlineOptionHandler.html#r4">00540</a>       <span class="keywordtype">bool</span> m_lazyMode;
00541 
<a name="l00545"></a><a class="code" href="classCommandlineOptionHandler.html#r5">00545</a>       <a class="code" href="classMC2String.html">MC2String</a> m_summary;
00546 
<a name="l00550"></a><a class="code" href="classCommandlineOptionHandler.html#r6">00550</a>       <a class="code" href="classMC2String.html">MC2String</a> m_tailHelp;
00551 
<a name="l00555"></a><a class="code" href="classCommandlineOptionHandler.html#r7">00555</a>       <a class="code" href="classMC2String.html">MC2String</a> m_programName;
00556 
<a name="l00565"></a><a class="code" href="classCommandlineOptionHandler.html#z28_0">00565</a>          <span class="keywordtype">int</span> m_argc;
00566 
<a name="l00570"></a><a class="code" href="classCommandlineOptionHandler.html#z28_1">00570</a>          <a class="code" href="classvector.html">vector&lt;MC2String&gt;</a> m_argv;
00572 
<a name="l00581"></a><a class="code" href="classCommandlineOptionHandler.html#z30_0">00581</a>          <span class="keywordtype">char</span>* m_propertyFileName[1];
00582 
<a name="l00586"></a><a class="code" href="classCommandlineOptionHandler.html#z30_1">00586</a>          <span class="keywordtype">bool</span> m_showHelp;
00587 
<a name="l00591"></a><a class="code" href="classCommandlineOptionHandler.html#z30_2">00591</a>          <span class="keywordtype">bool</span> m_showVersion;
00592 
<a name="l00596"></a><a class="code" href="classCommandlineOptionHandler.html#z30_3">00596</a>          <span class="keywordtype">bool</span> m_debugFlag;
00597 
<a name="l00601"></a><a class="code" href="classCommandlineOptionHandler.html#z30_4">00601</a>          <span class="keywordtype">char</span>* m_properties;
00603 
<a name="l00607"></a><a class="code" href="classCommandlineOptionHandler.html#d0">00607</a>       <a class="code" href="classCommandlineOptionHandler.html">CommandlineOptionHandler</a>() {}
00608 
00612       <span class="keywordtype">void</span> setDefaultValues();
00613 
00626          <span class="keyword">inline</span> Option* findOption(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; s) <span class="keyword">const</span>;
00628 };
00629 
00630 <span class="comment">//--------------------------------------------------------------------------</span>
00631 <span class="comment">//---------------------------------------------------- [ I N L I N E S ] ---</span>
00632 <span class="comment">//--------------------------------------------------------------------------</span>
00633 
00634 <span class="keyword">inline</span> <span class="keywordtype">char</span> 
<a name="l00635"></a><a class="code" href="classCommandlineOptionHandler.html#e0">00635</a> <a class="code" href="classCommandlineOptionHandler.html#e0">CommandlineOptionHandler::getValueChar</a>(<span class="keyword">enum</span> CommandlineOptionHandler::value_t valueType)
00636 {
00637    <span class="keyword">static</span> <span class="keywordtype">char</span> valueChar[] = <span class="stringliteral">"cs iufu"</span>;
00638    <span class="keywordflow">return</span> valueChar[valueType];
00639 }
00640 
00641 
00642 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00643"></a><a class="code" href="classCommandlineOptionHandler.html#a3">00643</a> <a class="code" href="classCommandlineOptionHandler.html#a3">CommandlineOptionHandler::setSummary</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* summary)
00644 {
00645    <a class="code" href="classCommandlineOptionHandler.html#r5">m_summary</a> = summary;
00646 }
00647 
00648 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00649"></a><a class="code" href="classCommandlineOptionHandler.html#a4">00649</a> <a class="code" href="classCommandlineOptionHandler.html#a4">CommandlineOptionHandler::setTailHelp</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* tailHelp)
00650 {
00651    <a class="code" href="classCommandlineOptionHandler.html#r6">m_tailHelp</a> = tailHelp;
00652 }
00653 
00654 <span class="keyword">inline</span> <span class="keywordtype">char</span>*
<a name="l00655"></a><a class="code" href="classCommandlineOptionHandler.html#a9">00655</a> <a class="code" href="classCommandlineOptionHandler.html#a9">CommandlineOptionHandler::getPropertyFileName</a>()<span class="keyword"> const</span>
00656 <span class="keyword"></span>{
00657    <span class="keywordflow">return</span> <a class="code" href="classCommandlineOptionHandler.html#z30_0">m_propertyFileName</a>[0];
00658 }
00659 
00660 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a>
<a name="l00661"></a><a class="code" href="classCommandlineOptionHandler.html#a10">00661</a> <a class="code" href="classCommandlineOptionHandler.html#a10">CommandlineOptionHandler::getTailLength</a>()<span class="keyword"> const</span>
00662 <span class="keyword"></span>{
00663    <span class="keywordflow">return</span> (uint16)<a class="code" href="classCommandlineOptionHandler.html#r2">m_tail</a>.<a class="code" href="classMC2String.html#a7">size</a>();
00664 }
00665 
00666 <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l00667"></a><a class="code" href="classCommandlineOptionHandler.html#a11">00667</a> <a class="code" href="classCommandlineOptionHandler.html#a11">CommandlineOptionHandler::getTail</a>(uint16 index)<span class="keyword"> const</span>
00668 <span class="keyword"></span>{
00669    <span class="keyword">typedef</span> <a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>::size_type st;
00670    st _index = (st)index;
00671    <span class="keywordflow">return</span> (_index &lt; <a class="code" href="classCommandlineOptionHandler.html#r2">m_tail</a>.size()) ? <a class="code" href="classCommandlineOptionHandler.html#r2">m_tail</a>[_index].c_str() : 0;
00672 }
00673 
00674 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00675"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#z34_1">00675</a> <a class="code" href="structCommandlineOptionHandler_1_1Option.html#z34_1">CommandlineOptionHandler::Option::setDefaultValue</a>()
00676 {
00677    <span class="keywordflow">return</span> <a class="code" href="structCommandlineOptionHandler_1_1Option.html#z34_0">setValue</a>(0, <a class="code" href="structCommandlineOptionHandler_1_1Option.html#o4">defaultValue</a>, 
00678                    (<a class="code" href="structCommandlineOptionHandler_1_1Option.html#o0">shortName</a>.<a class="code" href="classMC2String.html#a9">empty</a>() ? <a class="code" href="structCommandlineOptionHandler_1_1Option.html#o1">longName</a> : shortName));
00679 }
00680 
00681 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00682"></a><a class="code" href="structCommandlineOptionHandler_1_1Option.html#a3">00682</a> <a class="code" href="structCommandlineOptionHandler_1_1Option.html#a3">CommandlineOptionHandler::Option::hasValue</a>(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp;)<span class="keyword"> const</span>
00683 <span class="keyword"></span>{
00684    <span class="keywordflow">return</span> (<a class="code" href="structCommandlineOptionHandler_1_1Option.html#o2">valueType</a> != presentVal);
00685 }
00686 
00687 <span class="keyword">inline</span> <a class="code" href="structCommandlineOptionHandler_1_1Option.html">CommandlineOptionHandler::Option</a>*
<a name="l00688"></a><a class="code" href="classCommandlineOptionHandler.html#z32_0">00688</a> <a class="code" href="classCommandlineOptionHandler.html#z32_0">CommandlineOptionHandler::findOption</a>(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; s)<span class="keyword"> const</span>
00689 <span class="keyword"></span>{
00690    <span class="keyword">typedef</span> <a class="code" href="classmap.html">map&lt;MC2String, vector&lt;Option *&gt;</a>::size_type&gt;::const_iterator ci;
00691 
00692    ci i = <a class="code" href="classCommandlineOptionHandler.html#r1">m_optmap</a>.find(s);
00693    <span class="keywordflow">return</span> (i != <a class="code" href="classCommandlineOptionHandler.html#r1">m_optmap</a>.end()) ? <a class="code" href="classCommandlineOptionHandler.html#r0">m_options</a>[i-&gt;second] : 0;
00694 }
00695 
00696 
00697 <span class="keyword">template</span>&lt;<span class="keyword">class</span> InIt&gt;
<a name="l00698"></a><a class="code" href="classCommandlineOptionHandler.html#a7">00698</a> <span class="keywordtype">void</span> <a class="code" href="classCommandlineOptionHandler.html#a7">CommandlineOptionHandler::addSingleChoiceOption</a>(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; shortName, 
00699                                                      InIt firstLongName, 
00700                                                      InIt lastLongName, 
00701                                                      uint32* optionValue, 
00702                                                      uint32 defaultValue,
00703                                                      <span class="keyword">const</span> <span class="keywordtype">char</span>* helpText)
00704 {
00705    <span class="keywordflow">for</span>(InIt i = firstLongName; i != lastLongName; ++i){
00706       <span class="keywordflow">if</span>(<a class="code" href="classCommandlineOptionHandler.html#r1">m_optmap</a>.end() != <a class="code" href="classCommandlineOptionHandler.html#r1">m_optmap</a>.find( <a class="code" href="classMC2String.html">MC2String</a>( i-&gt;first ))){
00707          cerr &lt;&lt; <span class="stringliteral">"Option "</span> &lt;&lt; i-&gt;first 
00708               &lt;&lt; <span class="stringliteral">" doubled in CommandlineOptionHandler!"</span> &lt;&lt; endl;
00709       }
00710    }
00711    <span class="keywordflow">if</span>(!shortName.<a class="code" href="classMC2String.html#a9">empty</a>() &amp;&amp; 
00712       <a class="code" href="classCommandlineOptionHandler.html#r1">m_optmap</a>.end() != <a class="code" href="classCommandlineOptionHandler.html#r1">m_optmap</a>.<a class="code" href="classMC2String.html#d1">find</a>( <a class="code" href="classMC2String.html">MC2String</a>( shortName ))){
00713       cerr &lt;&lt; <span class="stringliteral">"Option "</span> &lt;&lt; shortName
00714            &lt;&lt; <span class="stringliteral">" doubled in CommandlineOptionHandler!"</span> &lt;&lt; endl;
00715    }
00716    auto_ptr&lt;SingleChoiceOption&gt; sco(
00717       <span class="keyword">new</span> <a class="code" href="classCommandlineOptionHandler_1_1SingleChoiceOption.html">SingleChoiceOption</a>(shortName,
00718                              firstLongName, lastLongName, 
00719                              optionValue, defaultValue, helpText) );
00720    <a class="code" href="classCommandlineOptionHandler.html#r0">m_options</a>.push_back(sco.get());
00721    sco.release();
00722    <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;Option*&gt;</a>::size_type index = <a class="code" href="classCommandlineOptionHandler.html#r0">m_options</a>.<a class="code" href="classMC2String.html#a7">size</a>() - 1;
00723    <span class="keywordflow">if</span>( !shortName.empty() ){
00724       <a class="code" href="classCommandlineOptionHandler.html#r1">m_optmap</a>[shortName] = index;
00725    }
00726    <span class="keywordflow">for</span>(InIt i = firstLongName; i != lastLongName; ++i){
00727       <a class="code" href="classCommandlineOptionHandler.html#r1">m_optmap</a>[<a class="code" href="classMC2String.html">MC2String</a>(i-&gt;first)] = index;   
00728    }
00729 }
00730 
00731 
00732 <span class="preprocessor">#endif</span>
00733 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:45 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
