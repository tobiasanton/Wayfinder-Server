<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: VectorTemplates.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>VectorTemplates.cc</h1><a href="VectorTemplates_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="comment">/*</span>
00015 <span class="comment">  compile with -fno-default-inline if possible</span>
00016 <span class="comment">  </span>
00017 <span class="comment"> */</span>
00018 
00019 <span class="preprocessor">#include "<a class="code" href="VectorElement_8h.html">VectorElement.h</a>"</span>
00020 
<a name="l00021"></a><a class="code" href="VectorTemplates_8cc.html#a0">00021</a> <span class="preprocessor">#define MAX_SAFE_VECTORSIZE 1024</span>
00022 <span class="preprocessor"></span>
<a name="l00028"></a><a class="code" href="classTemplateVector.html">00028</a> <span class="keyword">class </span><a class="code" href="classTemplateVector.html">TemplateVector</a>
00029 {
00030 <span class="keyword">public</span>:
<a name="l00032"></a><a class="code" href="classTemplateVector.html#w0">00032</a>       <span class="keyword">typedef</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>* iterator;
00033    
<a name="l00035"></a><a class="code" href="classTemplateVector.html#w1">00035</a>       <span class="keyword">typedef</span> <span class="keyword">const</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>* const_iterator;
<a name="l00036"></a><a class="code" href="classTemplateVector.html#w2">00036</a>       <span class="keyword">typedef</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> value_type;
00040       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a3">TemplateVector</a>();
00041          
00049       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a3">TemplateVector</a>(uint32 nbrItems);
00050          
00060       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a3">TemplateVector</a>(uint32 nbrItems, uint32 increaseSize);
00061 
00066       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a3">TemplateVector</a>( <span class="keyword">const</span> <a class="code" href="classTemplateVector.html">TemplateVector</a>&amp; v );
00067          
00073       <span class="keyword">inline</span> <span class="keyword">virtual</span> ~<a class="code" href="classTemplateVector.html">TemplateVector</a>();
00074 
00081       <span class="keyword">inline</span> <span class="keywordtype">void</span> setAllocSize(uint32 newNbrItems);
00082          
00088       <span class="keyword">inline</span> <span class="keywordtype">int</span> trimToSize();
00089          
00096       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> addLast(ElementType elm);
00097 
00102       <span class="keyword">inline</span> <span class="keywordtype">void</span> push_back(ElementType elm);
00103    
00114       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> addLastIfUnique(ElementType elm, <span class="keywordtype">bool</span> print = <span class="keyword">false</span>);
00115 
00121       <span class="keyword">inline</span> <span class="keywordtype">bool</span> remove(ElementType elm);
00122 
00127       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> removeInvalidElements();
00128 
00133       <span class="keyword">inline</span> <span class="keywordtype">void</span> removeDoubles();
00134 
00141       <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>* getBuffer() <span class="keyword">const</span>;
00142      
00147       <span class="keyword">inline</span> <span class="keywordtype">void</span> reset();
00148 
00153       <span class="keyword">inline</span> <span class="keywordtype">void</span> clear();
00154 
00159       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getSize() <span class="keyword">const</span>;
00160 
00165       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> size() <span class="keyword">const</span>;
00166 
00171       <span class="keyword">inline</span> <span class="keywordtype">bool</span> empty() <span class="keyword">const</span>;
00172    
00177       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getAllocSize() <span class="keyword">const</span>;
00178 
00184       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> operator[](uint32 pos) <span class="keyword">const</span>;
00185          
00191       <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classTemplateVector.html">TemplateVector</a>&amp; operator=( <span class="keyword">const</span> <a class="code" href="classTemplateVector.html">TemplateVector</a>&amp; v );
00192 
00198       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> &amp;operator[](uint32 pos);
00199 
00206       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>&amp; getUsedElementAt(uint32 pos) <span class="keyword">const</span>;
00207         
00214       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> getElementAt( uint32 pos ) <span class="keyword">const</span>;
00215 
00223       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> getSafeElementAt(uint32 pos) <span class="keyword">const</span>;
00224 
00230       <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> getLast() <span class="keyword">const</span>;
00231 
00242       <span class="keyword">inline</span> <span class="keywordtype">void</span> setElementAt( uint32 pos, ElementType elm);
00243 
00254      <span class="keyword">inline</span> <span class="keywordtype">void</span> setUsedElementAt( uint32 pos, ElementType elm);
00255    
00264       <span class="keyword">inline</span> <span class="keywordtype">bool</span> setSafeElementAt(uint32 pos, ElementType elm);
00265 
00271    <span class="keyword">inline</span> <span class="keywordtype">void</span> insertElementSorted(ElementType value);
00272    
00281       <span class="keyword">inline</span> <span class="keywordtype">void</span> insertElementAt(uint32 idx, ElementType value);
00282 
00291       <span class="keyword">inline</span> <span class="keywordtype">bool</span> removeElementAt(uint32 idx);
00292 
00297       <span class="keyword">inline</span> iterator erase(iterator it);
00298    
00306       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> linearSearch(<span class="keyword">const</span> ElementType keyElm) <span class="keyword">const</span>;
00307 
00315    <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> linearGet(<span class="keyword">const</span> ElementType keyElm) <span class="keyword">const</span>;
00316 
00317 <span class="comment">//   #ifndef UINT32</span>
00322 <span class="comment"></span>   <span class="keyword">inline</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> binaryGet(<span class="keyword">const</span> ElementType KEY,
00323                                 uint32 start = 0,
00324                                 uint32 stop  = MAX_UINT32) <span class="keyword">const</span>;
00325 <span class="comment">//   #endif</span>
00326    
00343       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> binarySearch(<span class="keyword">const</span> ElementType keyElm, 
00344                                  uint32 start = 0,
00345                                  uint32 stop  = MAX_UINT32) <span class="keyword">const</span>;
00346 
00361 <span class="comment">/*      inline ElementType binarySearch(uint32&amp; index, </span>
00362 <span class="comment">                                      ElementType keyElm,</span>
00363 <span class="comment">                                      uint32 start = 0,</span>
00364 <span class="comment">                                      uint32 stop = MAX_UINT32);</span>
00365 <span class="comment">*/</span>
00366 
00374       <span class="keyword">inline</span> <span class="keywordtype">bool</span> sort();
00375 
00382       <span class="keyword">inline</span> <span class="keywordtype">void</span> sortSmallest( int32 start, int32 stop, uint32 count );
00383 
00387       <span class="keyword">inline</span> <span class="keywordtype">void</span> reverse();
00388 
00393       <span class="keyword">inline</span> <span class="keywordtype">void</span> debugPrintVector();
00394 
00402       <span class="keyword">inline</span> <span class="keywordtype">void</span> deleteAllObjs();
00403 
00408       <span class="keyword">inline</span> <span class="keyword">virtual</span> <a class="code" href="Types_8h.html#a21">uint32</a> getMemoryUsage() <span class="keyword">const</span>;
00409 
00419       <span class="keyword">inline</span> <span class="keywordtype">void</span> dump(<span class="keywordtype">bool</span> singleLine = <span class="keyword">false</span>) <span class="keyword">const</span>;
00420 
00424      <span class="keyword">inline</span> iterator begin() <span class="keyword">const</span>;
00425 
00429      <span class="keyword">inline</span> iterator end() <span class="keyword">const</span>;
00430    
00431    <span class="keyword">protected</span>:
<a name="l00435"></a><a class="code" href="classTemplateVector.html#p0">00435</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_allocSize;
00436 
<a name="l00440"></a><a class="code" href="classTemplateVector.html#p1">00440</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_indexToUse;
00441 
<a name="l00447"></a><a class="code" href="classTemplateVector.html#p2">00447</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_increaseSize;
00448 
<a name="l00452"></a><a class="code" href="classTemplateVector.html#p3">00452</a>       <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> *m_buf;
00453 
00454    <span class="keyword">private</span>:
00458       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespaceArrayTool.html#a0">reallocate</a>();
00459          
00466       <span class="keyword">inline</span> <span class="keywordtype">void</span> quickSort(uint32 start, uint32 stop);
00467 
00473       <span class="keyword">inline</span> <span class="keywordtype">void</span> nonRecursiveQuickSort();
00474 
00481       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> partition( uint32 start, uint32 stop );
00482 
00491       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> randomizedPartition( uint32 start, uint32 stop );
00492 
00501       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> randomizedSelect( uint32 start, uint32 stop, uint32 rank );
00502             
00516          <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="beginSearchAlphaSort_8cc.html#a2">COMP</a>(uint32 a, uint32 b) <span class="keyword">const</span>;
00517 
00526          <span class="keyword">inline</span> <span class="keywordtype">int</span> SEARCH_COMP(<span class="keyword">const</span> ElementType key, uint32 pos) <span class="keyword">const</span>;
00527 
00534          <span class="keyword">inline</span> <span class="keywordtype">void</span> SWAP(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b);
00535 
00537 };
00538 
00539 
00540 <span class="comment">/*</span>
00541 <span class="comment"> *         \\ \\</span>
00542 <span class="comment"> *       - // //</span>
00543 <span class="comment"> *     -- //_//__     INLINES</span>
00544 <span class="comment"> *   --- /____)__)          </span>
00545 <span class="comment"> * ......00000000.............</span>
00546 <span class="comment"> */</span>
00547 
00548 
<a name="l00549"></a><a class="code" href="classTemplateVector.html#a0">00549</a> <a class="code" href="classTemplateVector.html#a0">TemplateVector::TemplateVector</a>()
00550 {
00551    <a class="code" href="classTemplateVector.html#p3">m_buf</a> = NULL;
00552    <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = 0;
00553    <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = 0;
00554    <a class="code" href="classTemplateVector.html#p2">m_increaseSize</a> = 0; <span class="comment">// double for each resize</span>
00555 }
00556 
<a name="l00557"></a><a class="code" href="classTemplateVector.html#a1">00557</a> <a class="code" href="classTemplateVector.html#a0">TemplateVector::TemplateVector</a>(uint32 nbrItems)
00558 {
00559    <span class="keywordflow">if</span> (nbrItems == 0) {
00560       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = NULL;
00561    } <span class="keywordflow">else</span> {
00562       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = <span class="keyword">new</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>[nbrItems];
00563    }
00564    <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = nbrItems;
00565    <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = 0;
00566    <a class="code" href="classTemplateVector.html#p2">m_increaseSize</a> = 0; <span class="comment">// double for each resize</span>
00567 }
00568 
<a name="l00569"></a><a class="code" href="classTemplateVector.html#a2">00569</a> <a class="code" href="classTemplateVector.html#a0">TemplateVector::TemplateVector</a>(uint32 nbrItems, uint32 increase)
00570 {
00571    <span class="keywordflow">if</span> (nbrItems == 0) {
00572       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = NULL;
00573    } <span class="keywordflow">else</span> {
00574       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = <span class="keyword">new</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>[nbrItems];
00575    }
00576    <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = nbrItems;
00577    <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = 0;
00578    this-&gt;<a class="code" href="classTemplateVector.html#p2">m_increaseSize</a> = increase;
00579 }
00580 
<a name="l00581"></a><a class="code" href="classTemplateVector.html#a4">00581</a> <a class="code" href="classTemplateVector.html#a4">TemplateVector::~TemplateVector</a>()
00582 {
00583 <span class="comment">/*</span>
00584 <span class="comment">   // check for inefficient uses of vector</span>
00585 <span class="comment">   if ((m_indexToUse &gt; 1) &amp;&amp; (m_allocSize &gt; (m_indexToUse*10))) {</span>
00586 <span class="comment">      // might have allocated too much</span>
00587 <span class="comment">      almostAssert(false);</span>
00588 <span class="comment">   }*/</span>
00589    <span class="keyword">delete</span> [] (<a class="code" href="VectorIncl_8h.html#a5">ElementType</a>*)m_buf;
00590 }
00591 
<a name="l00592"></a><a class="code" href="classTemplateVector.html#a3">00592</a> <a class="code" href="classTemplateVector.html#a0">TemplateVector::TemplateVector</a>( <span class="keyword">const</span> <a class="code" href="classTemplateVector.html">TemplateVector</a>&amp; v )
00593 {
00594    <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = v.<a class="code" href="classTemplateVector.html#p0">m_allocSize</a>;
00595    <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = v.<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>;
00596    <a class="code" href="classTemplateVector.html#p2">m_increaseSize</a> = v.<a class="code" href="classTemplateVector.html#p2">m_increaseSize</a>;
00597    <span class="keywordflow">if</span> (v.<a class="code" href="classTemplateVector.html#p0">m_allocSize</a> &gt; 0) {
00598       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = <span class="keyword">new</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>[v.<a class="code" href="classTemplateVector.html#p0">m_allocSize</a>];
00599       <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i = 0; i &lt; m_indexToUse; i++) {
00600          <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i] = v.<a class="code" href="classTemplateVector.html#p3">m_buf</a>[i];
00601       }
00602    }
00603    <span class="keywordflow">else</span> {
00604       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = NULL;
00605    }
00606 }
00607 
<a name="l00608"></a><a class="code" href="classTemplateVector.html#a21">00608</a> <span class="keyword">const</span> <a class="code" href="classTemplateVector.html">TemplateVector</a>&amp; <a class="code" href="classTemplateVector.html#a21">TemplateVector::operator=</a>( <span class="keyword">const</span> <a class="code" href="classTemplateVector.html">TemplateVector</a>&amp; v )
00609 {
00610    <span class="keywordflow">if</span>( &amp;v != this ) {
00611       <span class="keyword">delete</span> [] m_buf;
00612 
00613       <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = v.<a class="code" href="classTemplateVector.html#p0">m_allocSize</a>;
00614       <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = v.<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>;
00615       <a class="code" href="classTemplateVector.html#p2">m_increaseSize</a> = v.<a class="code" href="classTemplateVector.html#p2">m_increaseSize</a>;
00616       <span class="keywordflow">if</span> (v.<a class="code" href="classTemplateVector.html#p0">m_allocSize</a> &gt; 0) {
00617          <a class="code" href="classTemplateVector.html#p3">m_buf</a> = <span class="keyword">new</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>[v.<a class="code" href="classTemplateVector.html#p0">m_allocSize</a>];
00618          <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i = 0; i &lt; m_indexToUse; i++) {
00619             <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i] = v.<a class="code" href="classTemplateVector.html#p3">m_buf</a>[i];
00620          }
00621       } <span class="keywordflow">else</span> {
00622          <a class="code" href="classTemplateVector.html#p3">m_buf</a> = NULL;
00623       }
00624    }
00625    <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00626 }
00627 
00628 <span class="keyword">const</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>* 
<a name="l00629"></a><a class="code" href="classTemplateVector.html#a13">00629</a> <a class="code" href="classTemplateVector.html#a13">TemplateVector::getBuffer</a>()<span class="keyword"> const </span>
00630 <span class="keyword"></span>{
00631    <span class="keywordflow">return</span> const_cast&lt;const ElementType*&gt;(m_buf);
00632 }
00633      
00634 <span class="keywordtype">void</span> 
<a name="l00635"></a><a class="code" href="classTemplateVector.html#a14">00635</a> <a class="code" href="classTemplateVector.html#a14">TemplateVector::reset</a>() 
00636 { 
00637    <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = 0; 
00638 }
00639 
00640 <span class="keywordtype">void</span>
<a name="l00641"></a><a class="code" href="classTemplateVector.html#a15">00641</a> <a class="code" href="classTemplateVector.html#a15">TemplateVector::clear</a>()
00642 {
00643    <a class="code" href="classTemplateVector.html#a14">reset</a>();
00644 }
00645 
00646 <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00647"></a><a class="code" href="classTemplateVector.html#a16">00647</a> <a class="code" href="classTemplateVector.html#a16">TemplateVector::getSize</a>()<span class="keyword"> const </span>{
00648    <span class="keywordflow">return</span> m_indexToUse;
00649 }
00650 
00651 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00652"></a><a class="code" href="classTemplateVector.html#a17">00652</a> <a class="code" href="classTemplateVector.html#a17">TemplateVector::size</a>()<span class="keyword"> const</span>
00653 <span class="keyword"></span>{
00654    <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#a16">getSize</a>();
00655 }
00656 
00657 <span class="keywordtype">bool</span>
<a name="l00658"></a><a class="code" href="classTemplateVector.html#a18">00658</a> <a class="code" href="classTemplateVector.html#a18">TemplateVector::empty</a>()<span class="keyword"> const</span>
00659 <span class="keyword"></span>{
00660    <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#a16">getSize</a>() == 0;
00661 }
00662 
00663 <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00664"></a><a class="code" href="classTemplateVector.html#a19">00664</a> <a class="code" href="classTemplateVector.html#a19">TemplateVector::getAllocSize</a>()<span class="keyword"> const </span>
00665 <span class="keyword"></span>{
00666    <span class="keywordflow">return</span> m_allocSize;
00667 }
00668 
00669          
00670 <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>&amp;
<a name="l00671"></a><a class="code" href="classTemplateVector.html#a22">00671</a> <a class="code" href="classTemplateVector.html#a20">TemplateVector::operator[]</a>(uint32 pos) 
00672 {
00673    <a class="code" href="config_8h.html#a8">DEBUG1</a>( <span class="keywordflow">if</span> (pos &gt;= <a class="code" href="classTemplateVector.html#p0">m_allocSize</a>) 
00674    {
00675       <a class="code" href="config_8h.html#a13">MC2ERROR</a>( <span class="stringliteral">"operator[] panic"</span> );      
00676       <a class="code" href="config_8h.html#a1">PANIC</a>(<span class="stringliteral">"Panic in operator[]: "</span>
00677             <span class="stringliteral">"Fatal error in "</span> &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a> &lt;&lt; <span class="stringliteral">"-vector operator[]"</span>, 
00678             <span class="stringliteral">" pos:"</span> &lt;&lt; pos &lt;&lt; <span class="stringliteral">" &gt;= allocSize:"</span> &lt;&lt; m_allocSize &lt;&lt; <span class="stringliteral">" "</span> );
00679    } );
00680    <span class="keywordflow">if</span> (pos &gt;= m_indexToUse) {
00681       <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = <a class="code" href="Utility_8h.html#a1">MIN</a>(m_allocSize, pos+1);
00682    }
00683    <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#p3">m_buf</a>[pos];
00684 }
00685 
00686 <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>&amp;
<a name="l00687"></a><a class="code" href="classTemplateVector.html#a23">00687</a> <a class="code" href="classTemplateVector.html#a23">TemplateVector::getUsedElementAt</a>(uint32 pos)<span class="keyword"> const</span>
00688 <span class="keyword"></span>{
00689    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>(pos &lt; <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>);
00690    <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#p3">m_buf</a>[pos];
00691 }
00692          
00693 <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> 
<a name="l00694"></a><a class="code" href="classTemplateVector.html#a24">00694</a> <a class="code" href="classTemplateVector.html#a24">TemplateVector::getElementAt</a>( uint32 pos )<span class="keyword"> const </span>
00695 <span class="keyword"></span>{
00696    <a class="code" href="config_8h.html#a8">DEBUG1</a>(
00697       <span class="keywordflow">if</span> (pos &gt;= <a class="code" href="classTemplateVector.html#p0">m_allocSize</a>) {
00698          <a class="code" href="config_8h.html#a16">MC2ERROR2</a>( <span class="stringliteral">""</span>,
00699             cerr &lt;&lt; <span class="stringliteral">"pos="</span> &lt;&lt; pos &lt;&lt; <span class="stringliteral">", allocSize="</span> &lt;&lt; m_allocSize 
00700             &lt;&lt; endl;
00701             cerr &lt;&lt; <span class="stringliteral">"Error in "</span> &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a>
00702             &lt;&lt; <span class="stringliteral">"[] "</span> &lt;&lt; pos &lt;&lt; <span class="stringliteral">" &gt;= "</span> &lt;&lt; m_allocSize &lt;&lt; endl
00703             &lt;&lt; <span class="stringliteral">"ElementType operator[](uint32 pos) const "</span>
00704             &lt;&lt; endl; );
00705          <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>(<span class="keyword">false</span>);
00706       } );
00707    <span class="keywordflow">if</span> (pos &gt;= m_indexToUse) {
00708       <a class="code" href="config_8h.html#a17">MC2WARNING2</a>( <span class="stringliteral">""</span>, {
00709          cerr &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a> &lt;&lt; <span class="stringliteral">"-vector::getElementAt, "</span>
00710               &lt;&lt; <span class="stringliteral">"warning: pos &gt;= indexToUse, pos = "</span> &lt;&lt; pos
00711               &lt;&lt; <span class="stringliteral">", indexToUse = "</span> &lt;&lt; <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> &lt;&lt; endl
00712               &lt;&lt; <span class="stringliteral">"Warning: Trying to access uninitialized element."</span> &lt;&lt; endl;
00713       });
00714       <span class="keywordflow">return</span> InvalidElement;
00715    } <span class="keywordflow">else</span> {
00716       <span class="keywordflow">return</span> (<a class="code" href="classTemplateVector.html#p3">m_buf</a>[pos]);
00717    }
00718 }
00719 
00720 <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> 
<a name="l00721"></a><a class="code" href="classTemplateVector.html#a20">00721</a> <a class="code" href="classTemplateVector.html#a20">TemplateVector::operator[]</a>(uint32 pos)<span class="keyword"> const </span>
00722 <span class="keyword"></span>{
00723    <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#a24">getElementAt</a>(pos);
00724 }
00725 
00726 
00727 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00728"></a><a class="code" href="classTemplateVector.html#a7">00728</a> <a class="code" href="classTemplateVector.html#a7">TemplateVector::addLast</a>( ElementType elm)
00729 {
00730    <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> &gt;= m_allocSize) {
00731       <a class="code" href="classTemplateVector.html#d0">reallocate</a>();
00732    }
00733    <a class="code" href="classTemplateVector.html#p3">m_buf</a>[m_indexToUse] = elm;
00734    <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>++;
00735    <span class="keywordflow">return</span> (<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> - 1);
00736 }
00737 
00738 <span class="keywordtype">void</span>
<a name="l00739"></a><a class="code" href="classTemplateVector.html#a8">00739</a> <a class="code" href="classTemplateVector.html#a8">TemplateVector::push_back</a>( ElementType elm )
00740 {
00741    <a class="code" href="classTemplateVector.html#a7">addLast</a>(elm);
00742 }
00743 
00744 
00745 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00746"></a><a class="code" href="classTemplateVector.html#a9">00746</a> <a class="code" href="classTemplateVector.html#a9">TemplateVector::addLastIfUnique</a>(ElementType elm, <span class="keywordtype">bool</span> print)
00747 {
00748    <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#a34">linearSearch</a>(elm) == MAX_UINT32) {
00749       <span class="keywordflow">return</span> (<a class="code" href="classTemplateVector.html#a7">addLast</a>(elm));
00750    } <span class="keywordflow">else</span> {
00751       <a class="code" href="config_8h.html#a7">DEBUG2</a>({ <span class="keywordflow">if</span> (print) {
00752          <a class="code" href="config_8h.html#a18">MC2INFO2</a>( <span class="stringliteral">""</span>, {
00753             cerr &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a>
00754                  &lt;&lt; <span class="stringliteral">"-Vector: addLastIfUnique :: "</span>
00755                  &lt;&lt; <span class="stringliteral">"Not added, element already present"</span> 
00756                  &lt;&lt; endl; 
00757          });
00758       }});
00759       <span class="keywordflow">return</span> (MAX_UINT32);
00760    }
00761 }
00762 
00763 <span class="keywordtype">void</span>
<a name="l00764"></a><a class="code" href="classTemplateVector.html#a30">00764</a> <a class="code" href="classTemplateVector.html#a30">TemplateVector::insertElementSorted</a>(ElementType value)
00765 {
00766    <a class="code" href="classTemplateVector.html#a7">addLast</a>(value); <span class="comment">// O(1)</span>
00767    <a class="code" href="classTemplateVector.html#a38">sort</a>();         <span class="comment">// O(n log n)</span>
00768 
00769    <span class="comment">// can be changed to O(n + log n) if needed</span>
00770 }
00771 
00772 <span class="keywordtype">void</span>
<a name="l00773"></a><a class="code" href="classTemplateVector.html#a31">00773</a> <a class="code" href="classTemplateVector.html#a31">TemplateVector::insertElementAt</a>( uint32 idx, ElementType value)
00774 {
00775    <span class="comment">// XXX: inefficient to first realloc the _entire_ array and then move</span>
00776    <span class="comment">//      (on average) half of the data to insert the new element.</span>
00777    <span class="keywordflow">if</span> ( (idx &gt;= m_allocSize) || (<a class="code" href="classTemplateVector.html#a16">getSize</a>() &gt;= m_allocSize) ){
00778       <a class="code" href="classTemplateVector.html#d0">reallocate</a>();
00779    }
00780    <span class="keywordflow">if</span>( idx &lt; <a class="code" href="classTemplateVector.html#a16">getSize</a>() ){
00781       <span class="comment">// move the elements with higher index</span>
00782       <span class="keywordflow">for</span>(<a class="code" href="Types_8h.html#a21">uint32</a> i = <a class="code" href="classTemplateVector.html#a16">getSize</a>(); i &gt; idx; i-- )
00783          <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i] = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i-1];
00784       <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>++;
00785    }
00786 
00787    <a class="code" href="classTemplateVector.html#p3">m_buf</a>[idx] = value;
00788    <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = <a class="code" href="Utility_8h.html#a2">MAX</a>(idx + 1, <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>);
00789 }
00790 
00791 <span class="keywordtype">bool</span>
<a name="l00792"></a><a class="code" href="classTemplateVector.html#a32">00792</a> <a class="code" href="classTemplateVector.html#a32">TemplateVector::removeElementAt</a>(uint32 idx)
00793 {
00794    <span class="keywordflow">if</span> ( idx &lt; <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>-1 ) {
00795       memmove(&amp;<a class="code" href="classTemplateVector.html#p3">m_buf</a>[idx], &amp;<a class="code" href="classTemplateVector.html#p3">m_buf</a>[idx+1],
00796               (<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> - 1 - idx)*<span class="keyword">sizeof</span>(<a class="code" href="VectorIncl_8h.html#a5">ElementType</a>));
00797       <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>--;
00798       <span class="keywordflow">return</span> (<span class="keyword">true</span>);
00799    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (idx == <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>-1) { <span class="comment">// Last element</span>
00800       <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>--;
00801       <span class="keywordflow">return</span> (<span class="keyword">true</span>);
00802    } <span class="keywordflow">else</span> {
00803       <span class="keywordflow">return</span> (<span class="keyword">false</span>);
00804    }
00805 }
00806 
00807 TemplateVector::iterator
<a name="l00808"></a><a class="code" href="classTemplateVector.html#a33">00808</a> <a class="code" href="classTemplateVector.html#a33">TemplateVector::erase</a>(TemplateVector::iterator it)
00809 {
00810    <a class="code" href="Types_8h.html#a21">uint32</a> idx = (it - <a class="code" href="classTemplateVector.html#a45">begin</a>());
00811    <a class="code" href="classTemplateVector.html#a32">removeElementAt</a>(idx);
00812    <span class="keywordflow">return</span> it;
00813 }
00814 
00815 <span class="keywordtype">void</span>
<a name="l00816"></a><a class="code" href="classTemplateVector.html#a42">00816</a> <a class="code" href="classTemplateVector.html#a42">TemplateVector::deleteAllObjs</a>()
00817 {
00818 <span class="comment">/*</span>
00819 <span class="comment">   // check for inefficient uses of vector</span>
00820 <span class="comment">   if ((m_indexToUse &gt; 0) &amp;&amp; (m_allocSize &gt; (m_indexToUse*10))) {</span>
00821 <span class="comment">      // might have allocated too much</span>
00822 <span class="comment">      almostAssert(false);</span>
00823 <span class="comment">   }</span>
00824 <span class="comment">   */</span>
00825 <span class="preprocessor">#ifndef UINT32 // Can't delete UINT32:s</span>
00826 <span class="preprocessor"></span>   <span class="comment">// in reverse order</span>
00827    <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a22">int32</a> i = <a class="code" href="classTemplateVector.html#a16">getSize</a>()-1; i &gt;= 0; i--) {
00828 <span class="preprocessor">#ifndef VectorReallyIsVoidVector</span>
00829 <span class="preprocessor"></span><span class="preprocessor">#ifdef DELETE_ARRAY</span>
00830 <span class="preprocessor"></span>      <span class="keyword">delete</span> [] ((*this)[i]);
00831 <span class="preprocessor">#else </span>
00832 <span class="preprocessor"></span>      <span class="keyword">delete</span> ((*this)[i]);
00833 <span class="preprocessor">#endif // TemplateVector == StringVectorClass</span>
00834 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00835 <span class="preprocessor"></span>      <span class="comment">// VoidVector cannot delete void*, this may</span>
00836       <span class="comment">// cause trouble.</span>
00837       <span class="keyword">delete</span> (<a class="code" href="Types_8h.html#a25">byte</a>*)((*this)[i]);
00838 <span class="preprocessor">#endif</span>
00839 <span class="preprocessor"></span>   }
00840 <span class="preprocessor">#endif</span>
00841 <span class="preprocessor"></span>   <a class="code" href="classTemplateVector.html#a14">reset</a>();
00842 }
00843 
00844 
00845 <span class="keywordtype">void</span>
<a name="l00846"></a><a class="code" href="classTemplateVector.html#a5">00846</a> <a class="code" href="classTemplateVector.html#a5">TemplateVector::setAllocSize</a>(uint32 newNbrItems)
00847 {
00848    <span class="keywordflow">if</span> (newNbrItems &gt; m_allocSize) {
00849       <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>* tmpBuf = <span class="keyword">new</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> [newNbrItems];
00850       <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#p3">m_buf</a> != NULL) {
00851          memcpy(tmpBuf, <a class="code" href="classTemplateVector.html#p3">m_buf</a>, <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> * <span class="keyword">sizeof</span>(<a class="code" href="VectorIncl_8h.html#a5">ElementType</a>) );
00852          <span class="keyword">delete</span> [] m_buf;
00853       }
00854       <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = newNbrItems;
00855       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = tmpBuf;
00856    }
00857 }
00858 
00859 
00860 <span class="keywordtype">int</span>
<a name="l00861"></a><a class="code" href="classTemplateVector.html#a6">00861</a> <a class="code" href="classTemplateVector.html#a6">TemplateVector::trimToSize</a>()
00862 {
00863    <span class="keywordtype">int</span> before = m_allocSize;
00864    <span class="keywordflow">if</span> ( <a class="code" href="classTemplateVector.html#a16">getSize</a>() &lt; <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> &amp;&amp; <a class="code" href="classTemplateVector.html#a16">getSize</a>() != 0 ) { <span class="comment">// Do nothing if equal</span>
00865       <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>* tmpBuf = <span class="keyword">new</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>[<a class="code" href="classTemplateVector.html#a16">getSize</a>()];
00866       <span class="keywordflow">if</span> ( <a class="code" href="classTemplateVector.html#p3">m_buf</a> != NULL ) {
00867          memcpy( tmpBuf, <a class="code" href="classTemplateVector.html#p3">m_buf</a>, <a class="code" href="classTemplateVector.html#a16">getSize</a>() * <span class="keyword">sizeof</span>(<a class="code" href="VectorIncl_8h.html#a5">ElementType</a>) );
00868          <span class="keyword">delete</span> [] m_buf;
00869       }
00870       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = tmpBuf;
00871       <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = <a class="code" href="classTemplateVector.html#a16">getSize</a>();
00872    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="classTemplateVector.html#a16">getSize</a>() == 0 ) {
00873       <span class="comment">// Remove the buffer. No copy needed.</span>
00874       <span class="keyword">delete</span> [] m_buf;
00875       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = NULL;
00876       <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = 0;
00877    }
00878    <span class="keywordflow">return</span> before - m_allocSize;
00879 }
00880 
00881 <span class="keywordtype">void</span>
<a name="l00882"></a><a class="code" href="classTemplateVector.html#d0">00882</a> <a class="code" href="classTemplateVector.html#d0">TemplateVector::reallocate</a>()
00883 {
00884    <a class="code" href="Types_8h.html#a21">uint32</a> newSize;
00885 
00886    <span class="comment">// check for inefficient uses of vector</span>
00887    <span class="keywordflow">if</span> ( ((<a class="code" href="classTemplateVector.html#p2">m_increaseSize</a> &gt; 0) &amp;&amp; (<a class="code" href="classTemplateVector.html#p0">m_allocSize</a> &gt; (<a class="code" href="classTemplateVector.html#p2">m_increaseSize</a>*30))) <span class="comment">/*|| (m_allocSize &gt; 1024)*/</span> ) {
00888       <a class="code" href="config_8h.html#a37">almostAssert</a>(<span class="keyword">false</span>); <span class="comment">// inefficient if this happens often.</span>
00889    }
00890 
00891    <span class="keywordflow">if</span> ( <a class="code" href="classTemplateVector.html#p2">m_increaseSize</a> &gt; 0 ) {
00892       newSize = <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> + m_increaseSize;
00893    } <span class="keywordflow">else</span> {
00894       newSize = <a class="code" href="Utility_8h.html#a2">MAX</a>(1, <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> * 2);
00895    }
00896    <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>* tmpBuf = <span class="keyword">new</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>[ newSize ];
00897    <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#p3">m_buf</a> != NULL) {
00898       memcpy( tmpBuf, <a class="code" href="classTemplateVector.html#p3">m_buf</a>, <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> * <span class="keyword">sizeof</span>(<a class="code" href="VectorIncl_8h.html#a5">ElementType</a>) );
00899       <span class="keyword">delete</span> [] m_buf;
00900    }
00901    <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> = newSize;
00902    <a class="code" href="classTemplateVector.html#p3">m_buf</a> = tmpBuf;
00903 }
00904 
00905 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00906"></a><a class="code" href="classTemplateVector.html#a11">00906</a> <a class="code" href="classTemplateVector.html#a11">TemplateVector::removeInvalidElements</a>()
00907 {
00908    <a class="code" href="Types_8h.html#a21">uint32</a> nbrRemoved = 0;
00909    <span class="comment">// reallocate, copy valid elements to the new vector, delete the old one.</span>
00910    <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#p0">m_allocSize</a> &gt; 0) {
00911       <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>* newBuf = <span class="keyword">new</span> <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>[m_allocSize];
00912       <a class="code" href="Types_8h.html#a21">uint32</a> newIndexToUse = 0;
00913       <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i = 0; i &lt; m_indexToUse; i++) {
00914          <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> curr = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i];
00915          <span class="keywordflow">if</span> (curr != InvalidElement) {
00916             <span class="comment">// copy it</span>
00917             newBuf[newIndexToUse++] = curr;
00918          } <span class="keywordflow">else</span> {
00919             nbrRemoved++;
00920          }
00921       }
00922       <span class="keyword">delete</span> [] m_buf;
00923       <a class="code" href="classTemplateVector.html#p3">m_buf</a> = newBuf;
00924       m_indexToUse = newIndexToUse;
00925    }
00926    <span class="keywordflow">return</span> nbrRemoved;
00927 }
00928 
00929 <span class="keywordtype">void</span>
<a name="l00930"></a><a class="code" href="classTemplateVector.html#a12">00930</a> <a class="code" href="classTemplateVector.html#a12">TemplateVector::removeDoubles</a>()
00931 {
00932    <span class="comment">// Make sure that the array constains at least two elements</span>
00933    <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> &lt; 2)
00934       <span class="keywordflow">return</span>;
00935 
00936    <span class="comment">// Sort the array</span>
00937    <a class="code" href="classTemplateVector.html#a38">sort</a>();
00938 
00939    <span class="comment">// Loop through all the elements</span>
00940    <a class="code" href="Types_8h.html#a21">uint32</a> writePos = 0;
00941    <a class="code" href="Types_8h.html#a21">uint32</a> checkPos = 1;
00942    <span class="keywordflow">while</span> (checkPos &lt; m_indexToUse) {
00943       <span class="keywordflow">if</span> (<a class="code" href="VectorIncl_8h.html#a9">Deref</a>(<a class="code" href="classTemplateVector.html#p3">m_buf</a>[writePos]) != <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(<a class="code" href="classTemplateVector.html#p3">m_buf</a>[checkPos])) { <span class="comment">// ZZZ char*??</span>
00944          writePos++;
00945          <a class="code" href="classTemplateVector.html#p3">m_buf</a>[writePos] = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[checkPos];
00946       } <span class="keywordflow">else</span> {
00947 <span class="preprocessor">#ifndef UINT32</span>
00948 <span class="preprocessor"></span><span class="preprocessor">#ifndef VectorReallyIsVoidVector</span>
00949 <span class="preprocessor"></span>         <span class="keyword">delete</span> <a class="code" href="classTemplateVector.html#p3">m_buf</a>[checkPos];
00950 <span class="preprocessor">#else</span>
00951 <span class="preprocessor"></span>         <span class="keyword">delete</span> (<a class="code" href="Types_8h.html#a25">byte</a>*)<a class="code" href="classTemplateVector.html#p3">m_buf</a>[checkPos];
00952 <span class="preprocessor">#endif</span>
00953 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00954 <span class="preprocessor"></span>      }
00955       checkPos++;
00956    }
00957    <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = writePos + 1;
00958 }
00959 
00960 <span class="keywordtype">void</span>
<a name="l00961"></a><a class="code" href="classTemplateVector.html#a44">00961</a> <a class="code" href="classTemplateVector.html#a44">TemplateVector::dump</a>(<span class="keywordtype">bool</span> singleLine )<span class="keyword"> const</span>
00962 <span class="keyword"></span>{
00963 <span class="preprocessor">   #ifndef _WIN32</span>
00964 <span class="preprocessor"></span>      <span class="keywordflow">if</span> ((singleLine) &amp;&amp; (<a class="code" href="classTemplateVector.html#a16">getSize</a>() &gt; 0)) {
00965          <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i=0; i&lt;<a class="code" href="classTemplateVector.html#a16">getSize</a>()-1; i++)
00966             cout &lt;&lt; <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i] &lt;&lt; <span class="stringliteral">", "</span>;
00967          cout &lt;&lt; m_buf[<a class="code" href="classTemplateVector.html#a16">getSize</a>()-1] &lt;&lt; endl;
00968       } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#a16">getSize</a>() &gt; 0) {
00969          <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i=0; i&lt;<a class="code" href="classTemplateVector.html#a16">getSize</a>(); i++)
00970             cout &lt;&lt; <span class="stringliteral">"   ["</span> &lt;&lt; i &lt;&lt; <span class="stringliteral">"] = "</span> &lt;&lt; <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i] &lt;&lt; endl;
00971       } <span class="keywordflow">else</span> {
00972          cout &lt;&lt; <span class="stringliteral">"   "</span> &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a> &lt;&lt; <span class="stringliteral">" empty"</span> &lt;&lt; endl;
00973       }
00974 <span class="preprocessor">   #endif</span>
00975 <span class="preprocessor"></span>}
00976 
00977 <span class="keywordtype">bool</span> 
<a name="l00978"></a><a class="code" href="classTemplateVector.html#a10">00978</a> <a class="code" href="classTemplateVector.html#a10">TemplateVector::remove</a>(ElementType elm) {
00979    <span class="comment">// Find elm in the vector</span>
00980    <span class="keywordflow">if</span> ((elm == InvalidElement) || (<a class="code" href="VectorIncl_8h.html#a9">Deref</a>(elm) != <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(elm))) { <span class="comment">// ZZZ char*?</span>
00981       <span class="keywordflow">if</span> (elm==InvalidElement) {
00982          <a class="code" href="config_8h.html#a8">DEBUG1</a>( <a class="code" href="config_8h.html#a17">MC2WARNING2</a>( <span class="stringliteral">""</span>,
00983             cerr &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a>
00984             &lt;&lt; <span class="stringliteral">"-Vector::remove(ElementType) Can't remove, "</span>
00985             &lt;&lt; <span class="stringliteral">"elm is NULL."</span> &lt;&lt; endl; ); );
00986       }
00987       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="VectorIncl_8h.html#a9">Deref</a>(elm) != <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(elm)) { <span class="comment">// ZZZ char*?</span>
00988          <a class="code" href="config_8h.html#a8">DEBUG1</a>( <a class="code" href="config_8h.html#a16">MC2ERROR2</a>( <span class="stringliteral">""</span>,
00989             cerr &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a> &lt;&lt; <span class="stringliteral">"-Vector::remove(ElementType) "</span>
00990             &lt;&lt; <span class="stringliteral">"!= returns true for"</span>
00991             &lt;&lt; <span class="stringliteral">" same object. Can't remove, use removeElementAt"</span>
00992             &lt;&lt; <span class="stringliteral">"(uint32 index)."</span> 
00993             &lt;&lt; endl; ); );
00994          <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>(<span class="keyword">false</span>);
00995       }
00996       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00997    }
00998    <a class="code" href="Types_8h.html#a21">uint32</a> i = <a class="code" href="classTemplateVector.html#a34">linearSearch</a>(elm);
00999    <span class="keywordflow">if</span> (i == MAX_UINT32) {
01000       <span class="keywordflow">return</span> <span class="keyword">false</span>;
01001    } <span class="keywordflow">else</span> { 
01002       <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#a32">removeElementAt</a>(i);
01003    }
01004 }
01005 
01006 <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>
<a name="l01007"></a><a class="code" href="classTemplateVector.html#a35">01007</a> <a class="code" href="classTemplateVector.html#a35">TemplateVector::linearGet</a>(<span class="keyword">const</span> ElementType keyElm)<span class="keyword"> const</span>
01008 <span class="keyword"></span>{
01009    <a class="code" href="Types_8h.html#a21">uint32</a> idx = <a class="code" href="classTemplateVector.html#a34">linearSearch</a>(keyElm);
01010    <span class="keywordflow">if</span> (idx == MAX_UINT32) {
01011       <span class="keywordflow">return</span> InvalidElement;
01012    }
01013    <span class="keywordflow">else</span> {
01014       <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#a24">getElementAt</a>(idx);
01015    }
01016 }
01017 
01018 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l01019"></a><a class="code" href="classTemplateVector.html#a34">01019</a> <a class="code" href="classTemplateVector.html#a34">TemplateVector::linearSearch</a>(<span class="keyword">const</span> ElementType keyElm)<span class="keyword"> const</span>
01020 <span class="keyword"></span>{
01021 <span class="comment">/*   if (Deref(keyElm) != Deref(keyElm)) { // ZZZ char*?</span>
01022 <span class="comment">      DEBUG1( MC2ERROR2( "",</span>
01023 <span class="comment">         cerr &lt;&lt; debugString</span>
01024 <span class="comment">         &lt;&lt; "-Vector::linearSearch  != returns true even if same object. "</span>
01025 <span class="comment">         &lt;&lt; "Performs NO SEARCH!" &lt;&lt; endl;</span>
01026 <span class="comment">         ); );</span>
01027 <span class="comment">      return MAX_UINT32;</span>
01028 <span class="comment">   } else {</span>
01029 <span class="comment">*/</span>
01030    <a class="code" href="Types_8h.html#a21">uint32</a> i = 0;
01031    <span class="keywordflow">while</span> ( (i &lt; m_indexToUse) &amp;&amp;
01032            (<a class="code" href="VectorIncl_8h.html#a12">ElementTypeLINEAR_SEARCH_COMP</a>(keyElm, i)) ) { <span class="comment">// xxx slow for objects. implement ElementTypeLINEAR_SEARCH_COMP using just operator !=.</span>
01033 <span class="comment">//              ( Deref(buf[i]) != Deref(keyElm))) { // ZZZ char*?</span>
01034       i++;
01035    }
01036    <span class="keywordflow">if</span> (i == m_indexToUse) {
01037       <span class="keywordflow">return</span> MAX_UINT32;
01038    } <span class="keywordflow">else</span> {
01039       <span class="keywordflow">return</span> i;
01040    }
01041 <span class="comment">//}</span>
01042 }
01043 
01044 <span class="comment">//#ifndef UINT32</span>
01045 <a class="code" href="VectorIncl_8h.html#a5">ElementType</a>
<a name="l01046"></a><a class="code" href="classTemplateVector.html#a36">01046</a> <a class="code" href="classTemplateVector.html#a36">TemplateVector::binaryGet</a>(<span class="keyword">const</span> ElementType KEY,
01047                           uint32 start, uint32 stop)<span class="keyword"> const</span>
01048 <span class="keyword"></span>{
01049    <a class="code" href="Types_8h.html#a21">uint32</a> idx = <a class="code" href="classTemplateVector.html#a37">binarySearch</a>(KEY, start, stop);
01050    <span class="keywordflow">if</span> (idx == MAX_UINT32) {
01051       <span class="keywordflow">return</span> InvalidElement;
01052    } <span class="keywordflow">else</span> {
01053       <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#a24">getElementAt</a>(idx);
01054    }
01055 }
01056 <span class="comment">//#endif</span>
01057 
01058 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l01059"></a><a class="code" href="classTemplateVector.html#a37">01059</a> <a class="code" href="classTemplateVector.html#a37">TemplateVector::binarySearch</a>(<span class="keyword">const</span> ElementType KEY,
01060                              uint32 start, uint32 stop)<span class="keyword"> const</span>
01061 <span class="keyword"></span>{
01062    <span class="comment">// Initiate the lower limit of the intervall to search</span>
01063    <span class="keywordtype">int</span> SEARCH_START_INDEX;
01064    <span class="keywordflow">if</span> (start &lt; m_indexToUse)
01065       SEARCH_START_INDEX = start;
01066    <span class="keywordflow">else</span> {
01067       <span class="keywordflow">if</span> (start &gt; 0) {
01068             <span class="comment">// Start index greater than the number of elements, error</span>
01069          <a class="code" href="config_8h.html#a8">DEBUG1</a>( <a class="code" href="config_8h.html#a17">MC2WARNING2</a>( <span class="stringliteral">""</span>,
01070             cerr &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a>
01071             &lt;&lt; <span class="stringliteral">"-Vector::binarySearch: start &gt;= indexToUse ("</span> 
01072             &lt;&lt; start &lt;&lt; <span class="stringliteral">" &gt;= "</span> &lt;&lt; <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>
01073             &lt;&lt; <span class="stringliteral">". No search performed."</span> &lt;&lt; endl; ); );
01074       }
01075       <span class="keywordflow">return</span> MAX_UINT32;
01076    }
01077 
01078    <span class="comment">// Initiate the higher limit of the intervall to search</span>
01079    <span class="keywordtype">int</span> SEARCH_STOP_INDEX;
01080    <span class="keywordflow">if</span> (stop &lt; m_indexToUse)
01081       SEARCH_STOP_INDEX = stop;
01082    <span class="keywordflow">else</span> {
01083       <span class="comment">// Stop index greater/equal than the number of elements,</span>
01084       <span class="comment">// using default value, less 1!!!!</span>
01085       SEARCH_STOP_INDEX = <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>-1;
01086    }
01087 
01088 <span class="preprocessor">   #include "binarysearch.src"</span>
01089 
01090    <span class="keywordflow">if</span> (RESULT_INDEX &lt; 0)
01091       <span class="keywordflow">return</span> MAX_UINT32;
01092    <span class="keywordflow">else</span>
01093       <span class="keywordflow">return</span> (RESULT_INDEX);
01094 }
01095 
01096 <span class="keywordtype">bool</span>
<a name="l01097"></a><a class="code" href="classTemplateVector.html#a38">01097</a> <a class="code" href="classTemplateVector.html#a38">TemplateVector::sort</a>()
01098 {
01099    <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> &lt; 2) {            <span class="comment">// Just one element or empty vector</span>
01100       <span class="keywordflow">return</span> (<span class="keyword">true</span>);
01101    } <span class="keywordflow">else</span> {
01102       <span class="keywordflow">if</span> ( <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(<a class="code" href="classTemplateVector.html#p3">m_buf</a>[0]) != <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(<a class="code" href="classTemplateVector.html#p3">m_buf</a>[0])) {
01103          <span class="comment">// ZZZ char*?</span>
01104          <span class="comment">// The != is not implemented</span>
01105          <a class="code" href="config_8h.html#a8">DEBUG1</a>( <a class="code" href="config_8h.html#a16">MC2ERROR2</a>( <span class="stringliteral">""</span>,
01106             cerr &lt;&lt; <a class="code" href="VectorIncl_8h.html#a6">debugString</a> &lt;&lt; <span class="stringliteral">"-Vector::sort returning false"</span>
01107             &lt;&lt; <span class="stringliteral">" because operator!= returns true for same element."</span>
01108             &lt;&lt; endl; ); );
01109          <span class="keywordflow">return</span> (<span class="keyword">false</span>);
01110       } <span class="keywordflow">else</span> {
01111          <span class="comment">//quickSort(0, indexToUse-1);</span>
01112          <a class="code" href="config_8h.html#a5">DEBUG8</a>(cerr &lt;&lt; <span class="stringliteral">"Using nonRecursiveQuickSort()"</span> &lt;&lt; endl);
01113          <a class="code" href="classTemplateVector.html#d2">nonRecursiveQuickSort</a>();
01114          <span class="keywordflow">return</span> (<span class="keyword">true</span>);
01115       }
01116    }
01117 }
01118 
01119 
01120 <span class="comment">// This is the _private_ method that performes the actual search.</span>
01121 <span class="keywordtype">void</span> 
<a name="l01122"></a><a class="code" href="classTemplateVector.html#d1">01122</a> <a class="code" href="classTemplateVector.html#d1">TemplateVector::quickSort</a>(uint32 start, uint32 stop)
01123 {
01124    <span class="comment">// Might want to use some other search method when </span>
01125    <span class="comment">// (stop-start) &lt; "small number"...</span>
01126    <span class="keywordflow">if</span>(start &lt; stop) {
01127       <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> x = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[start];
01128       <a class="code" href="Types_8h.html#a21">uint32</a> i = start - 1;
01129       <a class="code" href="Types_8h.html#a21">uint32</a> j = stop + 1;
01130 
01131       <span class="keywordtype">bool</span> done = <span class="keyword">false</span>;
01132       <span class="keywordflow">while</span>(!done) {
01133          <span class="keywordflow">while</span>( (j &gt; start) &amp;&amp; (<a class="code" href="VectorIncl_8h.html#a9">Deref</a>(<a class="code" href="classTemplateVector.html#p3">m_buf</a>[--j]) &gt; <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(x))) { <span class="comment">// ZZZ char*?</span>
01134          }
01135          <span class="keywordflow">while</span>( <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(<a class="code" href="classTemplateVector.html#p3">m_buf</a>[++i]) &lt; <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(x)) { <span class="comment">// ZZZ char*?</span>
01136          }
01137          <span class="keywordflow">if</span>(i &lt; j) {
01138             <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> temp = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i];
01139             <a class="code" href="classTemplateVector.html#p3">m_buf</a>[i] = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[j];
01140             <a class="code" href="classTemplateVector.html#p3">m_buf</a>[j] = temp;
01141          } <span class="keywordflow">else</span> {
01142             done = <span class="keyword">true</span>;
01143          }
01144       }
01145       <a class="code" href="classTemplateVector.html#d1">quickSort</a>(start, j);
01146       <a class="code" href="classTemplateVector.html#d1">quickSort</a>(j + 1, stop);
01147    }
01148 }
01149 
01150 
01151 <span class="keywordtype">void</span>
<a name="l01152"></a><a class="code" href="classTemplateVector.html#d2">01152</a> <a class="code" href="classTemplateVector.html#d2">TemplateVector::nonRecursiveQuickSort</a>()
01153 {
01154    <span class="keyword">const</span> <span class="keywordtype">int</span> SORTING_END = <a class="code" href="classTemplateVector.html#a16">getSize</a>();
01155 
01156 <span class="preprocessor">   #include "nonrecursivequicksort.src"</span>
01157 }
01158 
01159 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l01160"></a><a class="code" href="classTemplateVector.html#d3">01160</a> <a class="code" href="classTemplateVector.html#d3">TemplateVector::partition</a>( uint32 start, uint32 stop )
01161 {
01162    <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> base = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[start];
01163    <a class="code" href="Types_8h.html#a21">uint32</a> i = start-1;
01164    <a class="code" href="Types_8h.html#a21">uint32</a> j = stop+1;
01165    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {
01166       <span class="keywordflow">do</span> {
01167          j--;
01168       } <span class="keywordflow">while</span> (<a class="code" href="VectorIncl_8h.html#a9">Deref</a>(<a class="code" href="classTemplateVector.html#p3">m_buf</a>[j]) &gt; <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(base)); <span class="comment">// ZZZ char*?</span>
01169       <span class="keywordflow">do</span> {
01170          i++;
01171       } <span class="keywordflow">while</span> (<a class="code" href="VectorIncl_8h.html#a9">Deref</a>(<a class="code" href="classTemplateVector.html#p3">m_buf</a>[i]) &lt; <a class="code" href="VectorIncl_8h.html#a9">Deref</a>(base)); <span class="comment">// ZZZ char*?</span>
01172       <span class="keywordflow">if</span> (i &lt; j) {
01173          <a class="code" href="classTemplateVector.html#z95_2">SWAP</a>( i, j );
01174       } <span class="keywordflow">else</span> {
01175          <span class="keywordflow">return</span> j;
01176       }
01177    }
01178 }
01179 
01180 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l01181"></a><a class="code" href="classTemplateVector.html#d4">01181</a> <a class="code" href="classTemplateVector.html#d4">TemplateVector::randomizedPartition</a>( uint32 start, uint32 stop )
01182 {
01183    <a class="code" href="Types_8h.html#a21">uint32</a> newPivot =
01184       <a class="code" href="Types_8h.html#a21">uint32</a> ( <span class="keywordtype">double</span> (stop - start) * rand()/(RAND_MAX+1.0) + start );
01185    <a class="code" href="config_8h.html#a5">DEBUG8</a>( cerr &lt;&lt; <span class="stringliteral">" random element : "</span> &lt;&lt; newPivot
01186            &lt;&lt; <span class="stringliteral">" from interval ["</span> &lt;&lt; start &lt;&lt; <span class="stringliteral">", "</span> &lt;&lt; stop &lt;&lt; <span class="stringliteral">"]."</span> &lt;&lt; endl);
01187    <a class="code" href="classTemplateVector.html#z95_2">SWAP</a>( start, newPivot );
01188    <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#d3">partition</a>( start, stop );
01189 }
01190 
01191 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l01192"></a><a class="code" href="classTemplateVector.html#d5">01192</a> <a class="code" href="classTemplateVector.html#d5">TemplateVector::randomizedSelect</a>( uint32 start, uint32 stop, uint32 rank )
01193 {
01194    <span class="keywordflow">if</span> ( start == stop ) {
01195       <span class="keywordflow">return</span> start;
01196    } <span class="keywordflow">else</span> {
01197       <a class="code" href="Types_8h.html#a21">uint32</a> inside = <a class="code" href="classTemplateVector.html#d4">randomizedPartition</a>( start, stop );
01198       <a class="code" href="Types_8h.html#a21">uint32</a> offset = inside - start + 1;
01199       <span class="keywordflow">if</span> (rank &lt;= offset) {
01200          <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#d5">randomizedSelect</a>( start, inside, rank );
01201       } <span class="keywordflow">else</span> {
01202          <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#d5">randomizedSelect</a>( inside+1, stop, rank - offset );
01203       }
01204    }
01205 }
01206 
01207 <span class="keywordtype">void</span>
<a name="l01208"></a><a class="code" href="classTemplateVector.html#a39">01208</a> <a class="code" href="classTemplateVector.html#a39">TemplateVector::sortSmallest</a>( int32 start, int32 stop, uint32 count )
01209 {
01210    <span class="keywordflow">if</span> (stop &gt; start) {
01211       <span class="keyword">const</span> <span class="keywordtype">int</span> SORTING_END = <a class="code" href="classTemplateVector.html#d5">randomizedSelect</a>( start, stop, count );
01212       <a class="code" href="config_8h.html#a5">DEBUG8</a>( cerr &lt;&lt; <span class="stringliteral">"sorting end: "</span> &lt;&lt; SORTING_END &lt;&lt;
01213               <span class="stringliteral">" count: "</span> &lt;&lt; count &lt;&lt; endl );
01214 <span class="preprocessor">      #include "nonrecursivequicksort.src"</span>
01215    }
01216 }
01217 
01218 <span class="keywordtype">void</span>
<a name="l01219"></a><a class="code" href="classTemplateVector.html#a40">01219</a> <a class="code" href="classTemplateVector.html#a40">TemplateVector::reverse</a>() 
01220 {
01221    <a class="code" href="Types_8h.html#a21">uint32</a> middlePos = <a class="code" href="classTemplateVector.html#a16">getSize</a>() / 2;
01222    <a class="code" href="Types_8h.html#a21">uint32</a> lastPos = <a class="code" href="classTemplateVector.html#a16">getSize</a>() - 1;
01223    <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i = 0; i &lt; middlePos; i++)
01224       <a class="code" href="classTemplateVector.html#z95_2">SWAP</a>(i, lastPos - i);
01225 }
01226 
01227 <span class="keywordtype">void</span>
<a name="l01228"></a><a class="code" href="classTemplateVector.html#a41">01228</a> <a class="code" href="classTemplateVector.html#a41">TemplateVector::debugPrintVector</a>()
01229 {
01230 <span class="preprocessor">   #ifdef DEFAULT_PRINT</span>
01231 <span class="preprocessor"></span>   <a class="code" href="config_8h.html#a8">DEBUG1</a>(
01232       <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i = 0; i &lt; <a class="code" href="classTemplateVector.html#a16">getSize</a>(); i++ ) {
01233          cerr &lt;&lt; i &lt;&lt; <span class="stringliteral">" "</span> &lt;&lt; (*<span class="keyword">this</span>)[i] &lt;&lt; endl;
01234       } );
01235 <span class="preprocessor">   #else</span>
01236 <span class="preprocessor"></span><span class="preprocessor">   #ifdef VectorInclVOID</span>
01237 <span class="preprocessor"></span>   <a class="code" href="config_8h.html#a8">DEBUG1</a>(
01238       <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i = 0; i &lt; <a class="code" href="classTemplateVector.html#a16">getSize</a>(); i++) {
01239          cerr &lt;&lt; i &lt;&lt; <span class="stringliteral">" (void element)"</span> &lt;&lt; endl;
01240       } );
01241 <span class="preprocessor">   #else</span>
01242 <span class="preprocessor"></span>   <a class="code" href="config_8h.html#a8">DEBUG1</a>(
01243       <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i = 0; i &lt; <a class="code" href="classTemplateVector.html#a16">getSize</a>(); i++ ) {
01244          <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> tmpe = (*<span class="keyword">this</span>)[i];
01245          <span class="keywordflow">if</span> (tmpe != NULL) {
01246             <span class="keyword">const</span> <span class="keywordtype">char</span> *tmp = (*<span class="keyword">this</span>)[i]-&gt;<a class="code" href="namespaceRequestTime.html#a4">toString</a>();
01247             cerr &lt;&lt; i &lt;&lt; tmp &lt;&lt; endl;
01248             <span class="keyword">delete</span> [] tmp;
01249          } <span class="keywordflow">else</span> {
01250             cerr &lt;&lt; i &lt;&lt; <span class="stringliteral">"&lt;element is NULL&gt;"</span> &lt;&lt; endl;
01251          }
01252       } );
01253 <span class="preprocessor">   #endif</span>
01254 <span class="preprocessor"></span><span class="preprocessor">   #endif</span>
01255 <span class="preprocessor"></span>}
01256 
01257 
01258 
01259 <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> 
<a name="l01260"></a><a class="code" href="classTemplateVector.html#a25">01260</a> <a class="code" href="classTemplateVector.html#a25">TemplateVector::getSafeElementAt</a>( uint32 pos )<span class="keyword"> const</span>
01261 <span class="keyword"></span>{
01262    <span class="keywordflow">if</span>(pos &gt;= m_allocSize)    <span class="comment">// Not necessary if indexToUse is correct.</span>
01263       <span class="keywordflow">return</span> InvalidElement;
01264    <span class="keywordflow">if</span> (pos &gt;= m_indexToUse)  <span class="comment">// To avoid the mc2error of getElementAt()</span>
01265       <span class="keywordflow">return</span> InvalidElement;
01266    <span class="keywordflow">else</span>
01267       <span class="keywordflow">return</span> <a class="code" href="classTemplateVector.html#a24">getElementAt</a>(pos);
01268 }
01269 
01270 
01271 <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> 
<a name="l01272"></a><a class="code" href="classTemplateVector.html#a26">01272</a> <a class="code" href="classTemplateVector.html#a26">TemplateVector::getLast</a>()<span class="keyword"> const</span>
01273 <span class="keyword"></span>{
01274    <span class="keywordflow">if</span> (<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> &gt; 0) {
01275       <span class="comment">// OK, the array is not empty</span>
01276       <span class="keywordflow">return</span> (<a class="code" href="classTemplateVector.html#p3">m_buf</a>[<a class="code" href="classTemplateVector.html#p1">m_indexToUse</a>-1]);
01277    } <span class="keywordflow">else</span> {
01278       <span class="comment">// The Vector is empty</span>
01279       <span class="keywordflow">return</span> (InvalidElement);
01280    }
01281 }
01282 
01283 <span class="keywordtype">void</span> 
<a name="l01284"></a><a class="code" href="classTemplateVector.html#a28">01284</a> <a class="code" href="classTemplateVector.html#a28">TemplateVector::setUsedElementAt</a>( uint32 pos, ElementType elm)
01285 {
01286    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>(pos &lt; <a class="code" href="classTemplateVector.html#p0">m_allocSize</a>);
01287    (*this).<a class="code" href="classTemplateVector.html#p3">m_buf</a>[pos] = elm;
01288 }
01289       
01290 <span class="keywordtype">void</span> 
<a name="l01291"></a><a class="code" href="classTemplateVector.html#a27">01291</a> <a class="code" href="classTemplateVector.html#a27">TemplateVector::setElementAt</a>( uint32 pos, ElementType elm)
01292 {
01293    <span class="comment">// now calls operator[].</span>
01294    (*this)[pos] = elm;
01295 }
01296 
01297 <span class="keywordtype">bool</span> 
<a name="l01298"></a><a class="code" href="classTemplateVector.html#a29">01298</a> <a class="code" href="classTemplateVector.html#a29">TemplateVector::setSafeElementAt</a>(uint32 pos, ElementType elm)
01299 {
01300    <span class="keywordflow">if</span>(pos &lt; MAX_SAFE_VECTORSIZE)
01301    {
01302       <span class="keywordflow">if</span>(pos &gt;= m_allocSize)
01303       {
01304          <a class="code" href="classTemplateVector.html#a5">setAllocSize</a>(pos + 1);
01305       }
01306       <span class="keywordflow">if</span>(pos &gt;= m_indexToUse)
01307       {
01308          <span class="keywordflow">for</span>(<a class="code" href="Types_8h.html#a21">uint32</a> i = m_indexToUse; i &lt; pos ; i++)
01309             (*this)[i] = InvalidElement; <span class="comment">// all unused elements defaulted.</span>
01310          <a class="code" href="classTemplateVector.html#p1">m_indexToUse</a> = pos+1;
01311       }
01312       (*this)[pos] = elm;
01313       <span class="keywordflow">return</span> <span class="keyword">true</span>;
01314    }
01315    <span class="keywordflow">return</span> <span class="keyword">false</span>;
01316 }
01317 
01318 <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l01319"></a><a class="code" href="classTemplateVector.html#a43">01319</a> <a class="code" href="classTemplateVector.html#a43">TemplateVector::getMemoryUsage</a>()<span class="keyword"> const </span>
01320 <span class="keyword"></span>{
01321    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(<a class="code" href="classTemplateVector.html">TemplateVector</a>) + <a class="code" href="classTemplateVector.html#p0">m_allocSize</a> * <span class="keyword">sizeof</span>(ElementType);
01322 }
01323 
01324 <span class="keywordtype">int</span> 
<a name="l01325"></a><a class="code" href="classTemplateVector.html#z95_0">01325</a> <a class="code" href="classTemplateVector.html#z95_0">TemplateVector::COMP</a>(uint32 a, uint32 b)<span class="keyword"> const </span>
01326 <span class="keyword"></span>{
01327    <span class="keywordflow">return</span> <a class="code" href="VectorIncl_8h.html#a11">ElementTypeCOMP</a>(a, b);
01328 <span class="comment">/*   if (Deref(buf[a]) &lt; Deref(buf[b]))</span>
01329 <span class="comment">      return (-1);</span>
01330 <span class="comment">   else if (Deref(buf[a]) &gt; Deref(buf[b]))</span>
01331 <span class="comment">      return (1);</span>
01332 <span class="comment">   else</span>
01333 <span class="comment">   return (0);*/</span>
01334 }
01335 
01336 <span class="keywordtype">int</span> 
<a name="l01337"></a><a class="code" href="classTemplateVector.html#z95_1">01337</a> <a class="code" href="classTemplateVector.html#z95_1">TemplateVector::SEARCH_COMP</a>(<span class="keyword">const</span> ElementType key, uint32 pos)<span class="keyword"> const </span>
01338 <span class="keyword"></span>{
01339    <span class="keywordflow">return</span> <a class="code" href="VectorIncl_8h.html#a10">ElementTypeSEARCH_COMP</a>(key, pos);
01340 <span class="comment">/*   if (Deref(key) &lt; Deref(buf[pos]))</span>
01341 <span class="comment">      return (-1);</span>
01342 <span class="comment">   else if (Deref(key) &gt; Deref(buf[pos]))</span>
01343 <span class="comment">      return (1);</span>
01344 <span class="comment">   else</span>
01345 <span class="comment">   return (0);*/</span>
01346 }
01347 
01348 <span class="keywordtype">void</span> 
<a name="l01349"></a><a class="code" href="classTemplateVector.html#z95_2">01349</a> <a class="code" href="classTemplateVector.html#z95_2">TemplateVector::SWAP</a>(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b) 
01350 {
01351    <a class="code" href="VectorIncl_8h.html#a5">ElementType</a> foo = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[a]; 
01352    <a class="code" href="classTemplateVector.html#p3">m_buf</a>[a] = <a class="code" href="classTemplateVector.html#p3">m_buf</a>[b]; 
01353    <a class="code" href="classTemplateVector.html#p3">m_buf</a>[b] = foo;
01354 }
01355 
01356 TemplateVector::iterator
<a name="l01357"></a><a class="code" href="classTemplateVector.html#a45">01357</a> <a class="code" href="classTemplateVector.html#a45">TemplateVector::begin</a>()<span class="keyword"> const</span>
01358 <span class="keyword"></span>{
01359    <span class="keywordflow">return</span> m_buf;
01360 }
01361 
01362 TemplateVector::iterator
<a name="l01363"></a><a class="code" href="classTemplateVector.html#a46">01363</a> <a class="code" href="classTemplateVector.html#a46">TemplateVector::end</a>()<span class="keyword"> const</span>
01364 <span class="keyword"></span>{
01365    <span class="keywordflow">if</span> ( <a class="code" href="classTemplateVector.html#p3">m_buf</a> == NULL ) {
01366       <span class="keywordflow">return</span> NULL;
01367    } <span class="keywordflow">else</span> {
01368       <span class="keywordflow">return</span> &amp;<a class="code" href="classTemplateVector.html#p3">m_buf</a>[m_indexToUse];
01369    }
01370 }
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:52 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
