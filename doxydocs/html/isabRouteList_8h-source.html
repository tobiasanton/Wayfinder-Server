<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: isabRouteList.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">Servers</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">include</a></div>
<h1>isabRouteList.h</h1><a href="isabRouteList_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef ISABROUTELIST_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define ISABROUTELIST_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include &lt;vector&gt;</span>
00019 <span class="preprocessor">#include "<a class="code" href="GDRGB_8h.html">GDRGB.h</a>"</span>
00020 
00021 
00022 <span class="comment">// forward</span>
00023 <span class="keyword">class </span><a class="code" href="classIsabRouteElement.html">IsabRouteElement</a>;
00024 <span class="keyword">class </span><a class="code" href="classisabBoxSession.html">isabBoxSession</a>;
00025 <span class="keyword">class </span><a class="code" href="classNavStringTable.html">NavStringTable</a>;
00026 <span class="keyword">class </span><a class="code" href="classNavSession.html">NavSession</a>;
00027 <span class="keyword">class </span><a class="code" href="classRouteList.html">RouteList</a>;
00028 <span class="keyword">class </span><a class="code" href="classWPTorTPTElement.html">WPTorTPTElement</a>;
00029 <span class="keyword">class </span><a class="code" href="classWPTElement.html">WPTElement</a>;
00030 <span class="keyword">class </span><a class="code" href="classRouteElement.html">RouteElement</a>;
00031 <span class="keyword">class </span><a class="code" href="classLandmarkPTElement.html">LandmarkPTElement</a>;
00032 
00033 
<a name="l00037"></a><a class="code" href="classIsabRouteList.html">00037</a> <span class="keyword">class </span><a class="code" href="classIsabRouteList.html">IsabRouteList</a> {
00038 <span class="keyword">public</span>:
<a name="l00039"></a><a class="code" href="classIsabRouteList.html#w0">00039</a>    <span class="keyword">typedef</span> <a class="code" href="classvector.html">vector&lt; GDUtils::Color::RGB &gt;</a> <a class="code" href="classvector.html">colorTable_t</a>;
00040 
00049    <a class="code" href="classIsabRouteList.html">IsabRouteList</a>( <span class="keywordtype">int</span> protoVer,
00050                   <a class="code" href="classRouteList.html">RouteList</a>* routeList,
00051                   <a class="code" href="classNavStringTable.html">NavStringTable</a>* navStringTable,
00052                   <a class="code" href="classNavSession.html">NavSession</a>* session,
00053                   uint8 reqVer = 0,
00054                   colorTable_t* colorTable = NULL );
00055              
00059    <span class="keyword">virtual</span> ~<a class="code" href="classIsabRouteList.html">IsabRouteList</a>();
00060 
00064    <span class="keywordtype">bool</span> fillList();
00065 
00069    <span class="keywordtype">int</span> getSize() <span class="keyword">const</span>;
00070    <span class="keywordtype">int</span> getSizeAdditional() <span class="keyword">const</span>;
00071 
00075    <span class="keywordtype">int</span> getNbrStringsUsed() <span class="keyword">const</span>;
00076 
00082    <span class="keyword">const</span> <a class="code" href="classIsabRouteElement.html">IsabRouteElement</a>* isabRouteElementAt(<span class="keywordtype">int</span> idx) <span class="keyword">const</span>;
00083    <span class="keyword">const</span> <a class="code" href="classIsabRouteElement.html">IsabRouteElement</a>* isabAdditionalRouteElementAt(<span class="keywordtype">int</span> idx) <span class="keyword">const</span>;
00084 
00085    <span class="keywordtype">bool</span> hasAdditionalRouteData() <span class="keyword">const</span>;
<a name="l00086"></a><a class="code" href="classIsabRouteList.html#a9">00086</a>    <span class="keywordtype">bool</span> isValid(<span class="keywordtype">void</span>) { <span class="keywordflow">return</span> m_valid; }
00087 
<a name="l00093"></a><a class="code" href="classIsabRouteList.html#a10">00093</a>    <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classIsabRouteElement.html">IsabRouteElement</a>* operator[](uint32 pos)<span class="keyword"> const </span>{
00094       <span class="keywordflow">return</span> isabRouteElementAt(pos);
00095    }
00096 
00097 
00101    <span class="keywordtype">bool</span> isTruncated() <span class="keyword">const</span>;
00102 
00103 
00109    <span class="keywordtype">int</span> getTruncatedDist() <span class="keyword">const</span>;
00110 
00111 
00115    <a class="code" href="Types_8h.html#a21">uint32</a> getTruncatedWPTNbr() <span class="keyword">const</span>;
00116 
00117 
00123    <a class="code" href="Types_8h.html#a21">uint32</a> getDist2nextWPTFromTrunk() <span class="keyword">const</span>;
00124    
00125   <span class="keyword">private</span>:
00126 
<a name="l00127"></a><a class="code" href="classIsabRouteList_1_1historyPoint.html">00127</a>    <span class="keyword">class </span><a class="code" href="classIsabRouteList_1_1historyPoint.html">historyPoint</a> {
00128       <span class="keyword">public</span>:
<a name="l00129"></a><a class="code" href="classIsabRouteList_1_1historyPoint.html#a0">00129</a>          <a class="code" href="classIsabRouteList_1_1historyPoint.html">historyPoint</a>( float32 axDiff, float32 ayDiff, uint8 aspeed,
00130                        float64 adistLastWptTptToCurr )
00131             : xDiff( axDiff ), yDiff( ayDiff ), speed( aspeed ),
00132             distLastWptTptToCurr( adistLastWptTptToCurr )
00133          {}
00134 
<a name="l00135"></a><a class="code" href="classIsabRouteList_1_1historyPoint.html#o0">00135</a>          <a class="code" href="Types_8h.html#a26">float32</a> xDiff;
<a name="l00136"></a><a class="code" href="classIsabRouteList_1_1historyPoint.html#o1">00136</a>          <a class="code" href="Types_8h.html#a26">float32</a> yDiff;
<a name="l00137"></a><a class="code" href="classIsabRouteList_1_1historyPoint.html#o2">00137</a>          <a class="code" href="Types_8h.html#a17">uint8</a>   speed;
<a name="l00138"></a><a class="code" href="classIsabRouteList_1_1historyPoint.html#o3">00138</a>          <a class="code" href="Types_8h.html#a27">float64</a> distLastWptTptToCurr;
00139    };
00140 
<a name="l00141"></a><a class="code" href="classIsabRouteList.html#y0">00141</a>    <span class="keyword">typedef</span> std::vector&lt; IsabRouteElement* &gt; IsabRouteElementVector;
00142 
00147    <span class="keyword">static</span> <span class="keywordtype">void</span> checkTimeDistLeft( float64&amp; distLeft,
00148                                   IsabRouteElementVector&amp; isabRouteVector, <span class="keywordtype">int</span>&amp; i, <span class="keywordtype">int</span>&amp; j,
00149                                   <span class="keyword">const</span> <a class="code" href="classRouteElement.html">RouteElement</a>* re, 
00150                                   <span class="keyword">const</span> <a class="code" href="classRouteElement.html">RouteElement</a>* preRe, 
00151                                   <span class="keywordtype">int</span>&amp; lastTimeDistLeftPointIndex,
00152                                   uint32&amp; totSize, uint8&amp; currentSpeed );
00153 
00158    <span class="keyword">static</span> <span class="keywordtype">void</span> convertRouteList( <a class="code" href="classRouteList.html">RouteList</a>* routeList, <span class="keywordtype">int</span>&amp; i, <span class="keywordtype">int</span>&amp; j,
00159                                  uint32 maxSize, uint32 maxDist,
00160                                  uint8 protoVer,
00161                                  <span class="keywordtype">bool</span> addTDP,
00162                                  float64&amp; radLon, float32&amp; scaleX, 
00163                                  float32&amp; origoX, 
00164                                  float64&amp; radLat, float32&amp; scaleY, 
00165                                  float32&amp; origoY, 
00166                                  float32&amp; xDiff, float32&amp; yDiff,
00167                                  int32&amp; lastMc2Lat, int32&amp; lastMc2Lon,
00168                                  float64&amp; lastRadLat, float64&amp; lastRadLon,
00169                                  <a class="code" href="classWPTorTPTElement.html">WPTorTPTElement</a>*&amp; lastWptOtTpt,
00170                                  float64&amp; distLastWptTptToCurr,
00171                                  <span class="keywordtype">int</span>&amp; nbrStringsUsed,
00172                                  <span class="keywordtype">bool</span>&amp; truncated,
00173                                  uint32&amp; truncatedWPTNbr,
00174                                  uint32&amp; dist2nextWPTFromTrunk,
00175                                  <a class="code" href="classWPTElement.html">WPTElement</a>*&amp; trunkated_end_element,
00176                                  uint32&amp; totSize, float64&amp; dist,
00177                                  float64&amp; distLeft,
00178                                  <a class="code" href="classisabBoxSession.html">isabBoxSession</a>* session,
00179                                  IsabRouteElementVector&amp; isabRouteVector, 
00180                                  <a class="code" href="classNavStringTable.html">NavStringTable</a>* stringTable,
00181                                  <span class="keywordtype">int</span>&amp; lastTimeDistLeftPointIndex,
00182                                  uint8&amp; currentSpeed );
00183 
00184 
00188    <span class="keywordtype">bool</span> fillList7p();
00189 
00190 
00211    <span class="keywordtype">void</span> coordCache( <a class="code" href="classvector.html">vector&lt; historyPoint &gt;</a>&amp; history,
00212                     int16&amp; lastXDiff, int16&amp; lastYDiff, uint8&amp; lastSpeed,
00213                     uint32&amp; totSize, IsabRouteElementVector&amp; isabRouteVector,
00214                     float32 xDiff, float32 yDiff, uint8 speed,
00215                     uint8 flag, <a class="code" href="classWPTorTPTElement.html">WPTorTPTElement</a>*&amp; lastWptOtTpt,
00216                     float64&amp; distLastWptTptToCurr,
00217                     uint16 nameIndex,
00218                     <span class="keywordtype">bool</span> forceClean = <span class="keyword">false</span> );
00219 
00220 
00237    <span class="keywordtype">void</span> addNewOrigoScale( float64 radLat, float64 radLon,
00238                           float64 lastRadLat, float64 lastRadLon,
00239                           float32&amp; xDiff, float32&amp; yDiff,
00240                           float32&amp; scaleX, float32&amp; scaleY,
00241                           float32&amp; origoX, float32&amp; origoY,
00242                           uint32&amp; totSize,
00243                           <a class="code" href="classvector.html">vector&lt; IsabRouteElement* &gt;</a>&amp; addElem );
00244 
00245 
00254    <span class="keywordtype">void</span> perturbLastWptToAvoidDivideByZero();
00255 
<a name="l00256"></a><a class="code" href="classIsabRouteList.html#y1">00256</a>    <span class="keyword">typedef</span> <a class="code" href="classmap.html">map&lt;uint32, LandmarkPTElement*&gt;</a> <a class="code" href="classmap.html">activeLMMap</a>;
00257 
00263    <span class="keywordtype">void</span> addLandmark( <span class="keyword">const</span> <a class="code" href="classRouteElement.html">RouteElement</a>* re, 
00264                      <a class="code" href="classNavStringTable.html">NavStringTable</a>* stringTable,
00265                      <span class="keyword">const</span> <a class="code" href="classmap.html">map&lt; uint32, MC2String &gt;</a>&amp; landmarkStrings, 
00266                      uint16&amp; landmarkID,
00267                      activeLMMap&amp; activeLM, uint32&amp; totSize, 
00268                      int32&amp; maxSize, <span class="keywordtype">int</span>&amp; nbrStringsUsed,
00269                      <a class="code" href="classvector.html">vector&lt; IsabRouteElement* &gt;</a>&amp; addElem ) <span class="keyword">const</span>;
00270 
00276    <span class="keywordtype">void</span> addLanesAndSignPosts( <span class="keyword">const</span> <a class="code" href="classRouteElement.html">RouteElement</a>* re, 
00277                               <a class="code" href="classNavStringTable.html">NavStringTable</a>* stringTable,
00278                               uint32&amp; totSize, int32&amp; maxSize, 
00279                               <span class="keywordtype">int</span>&amp; nbrStringsUsed,
00280                               <a class="code" href="classvector.html">vector&lt; IsabRouteElement* &gt;</a>&amp; addElem,
00281                               colorTable_t* colorTable,
00282                               <span class="keywordtype">bool</span> reminder,
00283                               StringTable::languageCode lang ) <span class="keyword">const</span>;
00284 
00285 
00286    <span class="comment">/* The Vector that contains the isabRouteElements */</span>
<a name="l00287"></a><a class="code" href="classIsabRouteList.html#r0">00287</a>    IsabRouteElementVector m_isabRouteVector;
<a name="l00288"></a><a class="code" href="classIsabRouteList.html#r1">00288</a>    IsabRouteElementVector m_isabAdditionalRouteVector;
00289 
<a name="l00290"></a><a class="code" href="classIsabRouteList.html#r2">00290</a>    <a class="code" href="classRouteList.html">RouteList</a>* m_routeList;
00291 
<a name="l00292"></a><a class="code" href="classIsabRouteList.html#r3">00292</a>    <span class="keywordtype">int</span> m_nbrStringsUsed;
00293 
00294 
<a name="l00296"></a><a class="code" href="classIsabRouteList.html#r4">00296</a>       <span class="keywordtype">bool</span> m_truncated;
00297 
00298 
<a name="l00300"></a><a class="code" href="classIsabRouteList.html#r5">00300</a>       <span class="keywordtype">int</span> m_truncatedDist;
00301 
00302 
<a name="l00304"></a><a class="code" href="classIsabRouteList.html#r6">00304</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_truncatedWPTNbr;
00305 
00306 
<a name="l00310"></a><a class="code" href="classIsabRouteList.html#r7">00310</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_dist2nextWPTFromTrunk;
00311    
<a name="l00312"></a><a class="code" href="classIsabRouteList.html#r8">00312</a>    <span class="keywordtype">bool</span> m_additionalRouteData;
00313 
00314    <span class="comment">// If the route is valid or not.</span>
<a name="l00315"></a><a class="code" href="classIsabRouteList.html#r9">00315</a>    <span class="keywordtype">bool</span> m_valid;
00316    
<a name="l00317"></a><a class="code" href="classIsabRouteList.html#r10">00317</a>    <a class="code" href="classNavStringTable.html">NavStringTable</a>* m_stringTable;
00318 
00319    <span class="comment">// Protocol version to be used in the reply</span>
<a name="l00320"></a><a class="code" href="classIsabRouteList.html#r11">00320</a>    <span class="keywordtype">int</span> m_protoVer;
00321 
<a name="l00325"></a><a class="code" href="classIsabRouteList.html#r12">00325</a>    <a class="code" href="Types_8h.html#a17">uint8</a> m_reqVer;
00326 
<a name="l00330"></a><a class="code" href="classIsabRouteList.html#r13">00330</a>    colorTable_t* m_colorTable;
00331 
<a name="l00336"></a><a class="code" href="classIsabRouteList.html#r14">00336</a>    <a class="code" href="classisabBoxSession.html">isabBoxSession</a>* m_session;
00337 };
00338 
00339 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:47 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
