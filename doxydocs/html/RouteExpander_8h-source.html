<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: RouteExpander.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">Servers</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">include</a></div>
<h1>RouteExpander.h</h1><a href="RouteExpander_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef ROUTEEXPANDER_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define ROUTEEXPANDER_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include "<a class="code" href="Request_8h.html">Request.h</a>"</span>
00019 <span class="preprocessor">#include "<a class="code" href="PacketContainer_8h.html">PacketContainer.h</a>"</span>
00020 <span class="preprocessor">#include "<a class="code" href="StringTable_8h.html">StringTable.h</a>"</span>
00021 <span class="preprocessor">#include "<a class="code" href="TopRegionMatch_8h.html">TopRegionMatch.h</a>"</span>
00022 
00023 <span class="keyword">class </span>ExpandRouteConcatenator; <span class="comment">// forward decl</span>
00024 <span class="keyword">class </span><a class="code" href="classExpandRouteRequestPacket.html">ExpandRouteRequestPacket</a>; <span class="comment">// forward decl</span>
00025 <span class="keyword">class </span><a class="code" href="classExpandRouteReplyPacket.html">ExpandRouteReplyPacket</a>; <span class="comment">// forward decl</span>
00026 <span class="keyword">class </span><a class="code" href="classRouteReplyPacket.html">RouteReplyPacket</a>; <span class="comment">// forward decl</span>
00027 <span class="keyword">class </span><a class="code" href="classSubRouteVector.html">SubRouteVector</a>;   <span class="comment">// forward decl</span>
00028 <span class="keyword">class </span><a class="code" href="classIDTranslationReplyPacket.html">IDTranslationReplyPacket</a>;
00029 <span class="keyword">class </span><a class="code" href="classTopRegionReplyPacket.html">TopRegionReplyPacket</a>;
00030 <span class="keyword">class </span><a class="code" href="classLandmarkHead.html">LandmarkHead</a>;
00031 <span class="keyword">class </span><a class="code" href="classDisturbanceDescription.html">DisturbanceDescription</a>;
00032 
<a name="l00039"></a><a class="code" href="classRouteExpander.html">00039</a> <span class="keyword">class </span><a class="code" href="classRouteExpander.html">RouteExpander</a> {
00040    <span class="keyword">public</span>:  
00055       <a class="code" href="classRouteExpander.html">RouteExpander</a>(<a class="code" href="classRequest.html">Request</a>* request,
00056                     <a class="code" href="classRouteReplyPacket.html">RouteReplyPacket</a>* routeReply,
00057                     <a class="code" href="Types_8h.html#a21">uint32</a> expandRouteType,
00058                     <span class="keywordtype">bool</span> uTurn,
00059                     <span class="keywordtype">bool</span> noConcatinate,
00060                     <a class="code" href="Types_8h.html#a21">uint32</a> passedRoads,
00061                     StringTable::languageCode language = StringTable::ENGLISH,
00062                     <span class="keywordtype">bool</span> abbreviate = <span class="keyword">true</span>,
00063                     <span class="keywordtype">bool</span> landmarks = <span class="keyword">false</span>,
00064                     <span class="keywordtype">bool</span> removeAhead = <span class="keyword">false</span>,
00065                     <span class="keywordtype">bool</span> nameChangeWP = <span class="keyword">false</span>);
00066       
00083       <a class="code" href="classRouteExpander.html">RouteExpander</a>(<a class="code" href="classRequest.html">Request</a>* request,
00084                     <span class="keyword">const</span> <a class="code" href="classSubRouteVector.html">SubRouteVector</a>* srVect,
00085                     <a class="code" href="Types_8h.html#a21">uint32</a> expandRouteType,
00086                     <span class="keywordtype">bool</span> uTurn,
00087                     <span class="keywordtype">bool</span> noConcatinate,
00088                     <a class="code" href="Types_8h.html#a21">uint32</a> passedRoads,
00089                     StringTable::languageCode language = StringTable::ENGLISH,
00090                     <span class="keywordtype">bool</span> abbreviate = <span class="keyword">true</span>,
00091                     <span class="keywordtype">bool</span> landmarks = <span class="keyword">false</span>,
00092                     <span class="keywordtype">bool</span> removeAhead = <span class="keyword">false</span>,
00093                     <span class="keywordtype">bool</span> nameChangeWP = <span class="keyword">false</span>);
00094       
00098       ~<a class="code" href="classRouteExpander.html">RouteExpander</a>();
00099 
00108       <span class="keywordtype">void</span> packetReceived( <span class="keyword">const</span> <a class="code" href="classPacketContainer.html">PacketContainer</a>* cont );
00109 
00117       <a class="code" href="classPacketContainer.html">PacketContainer</a>* getNextRequest();
00118 
00123       <span class="keywordtype">bool</span> getDone();
00124 
00132       <a class="code" href="classPacketContainer.html">PacketContainer</a>* createAnswer();
00133 
00146          <span class="keyword">inline</span> ItemTypes::routedir_nbr_t getStartDirectionHousenumber();
00147 
00154          <span class="keyword">inline</span> ItemTypes::routedir_oddeven_t getStartDirectionOddEven();
00156 
00157          <span class="keywordtype">void</span> addDisturbanceInfo(<span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;DisturbanceDescription&gt;</a>&amp; dists);
00158 
00159          <span class="keywordtype">void</span> setUseAddCost(<span class="keywordtype">bool</span> useAddCosts);
00160          
00161          
00162          
00163    <span class="keyword">private</span>:
00168       <a class="code" href="classExpandRouteReplyPacket.html">ExpandRouteReplyPacket</a>* concatenateExpandRoute();
00169 
00180       <span class="keywordtype">void</span> selectLandmarks(<a class="code" href="classLandmarkHead.html">LandmarkHead</a>* landmarks, <a class="code" href="Types_8h.html#a21">uint32</a> routeLinkDist);
00181       
<a name="l00185"></a><a class="code" href="classRouteExpander.html#y5">00185</a>       <span class="keyword">enum</span> state {
00187          IDTRANS,
00188 
00190          TOP_REGION,
00191 
00193          EXPAND,
00194 
00196          DONE,
00197 
00202          ERROR
00203       } m_state;
00204 
00205 
00219       state createIDTransPackets( 
00220          <a class="code" href="classRouteReplyPacket.html">RouteReplyPacket</a>* routeReply,
00221          <a class="code" href="classPacketContainerTree.html">PacketContainerTree</a>&amp; packetsReadyToSend );
00222 
00236       state createIDTransPackets( 
00237          <span class="keyword">const</span> <a class="code" href="classSubRouteVector.html">SubRouteVector</a>* srVect,
00238          <a class="code" href="classPacketContainerTree.html">PacketContainerTree</a>&amp; packetsReadyToSend );
00239 
00248       state createTopRegionPackets( 
00249          <a class="code" href="classPacketContainerTree.html">PacketContainerTree</a>&amp; packetsReadyToSend ) <span class="keyword">const</span>;
00250 
00269       state createExpandRoutePackets( 
00270          <a class="code" href="classRouteReplyPacket.html">RouteReplyPacket</a>* routeReply, 
00271          <a class="code" href="classIDTranslationReplyPacket.html">IDTranslationReplyPacket</a>** idtransReplyPackets, 
00272          uint32 nbrIDTransPackets, <a class="code" href="classTopRegionReplyPacket.html">TopRegionReplyPacket</a>* topregionPacket,
00273          byte expandRouteType, uint16&amp; startOffset, 
00274          uint16&amp; endOffset, <span class="keywordtype">bool</span>&amp; startDir, <span class="keywordtype">bool</span>&amp; endDir, 
00275          <a class="code" href="classPacketContainerTree.html">PacketContainerTree</a>&amp; addTree );
00276 
00296       state createExpandRoutePackets( 
00297          <span class="keyword">const</span> <a class="code" href="classSubRouteVector.html">SubRouteVector</a>* srVect, 
00298          <a class="code" href="classIDTranslationReplyPacket.html">IDTranslationReplyPacket</a>** idtransReplyPackets, 
00299          uint32 nbrIDTransPackets, <a class="code" href="classTopRegionReplyPacket.html">TopRegionReplyPacket</a>* topregionPacket,
00300          byte expandRouteType, uint16&amp; startOffset, 
00301          uint16&amp; endOffset, <span class="keywordtype">bool</span>&amp; startDir, <span class="keywordtype">bool</span>&amp; endDir, 
00302          <a class="code" href="classPacketContainerTree.html">PacketContainerTree</a>&amp; addTree );
00303 
00310       state handleIDTransPack( <span class="keyword">const</span> <a class="code" href="classPacketContainer.html">PacketContainer</a>* cont );
00311 
00318       state handleTopRegionPack( <span class="keyword">const</span> <a class="code" href="classPacketContainer.html">PacketContainer</a>* cont );
00319 
00329       <a class="code" href="Types_8h.html#a21">uint32</a> getCountryID( uint32 countryMapID, 
00330                            <a class="code" href="classvector.html">TopRegionMatchesVector</a>&amp; topRegions ) <span class="keyword">const</span>;
00331 
<a name="l00335"></a><a class="code" href="classRouteExpander.html#r1">00335</a>       <a class="code" href="classRequest.html">Request</a>* m_request;
00336 
<a name="l00340"></a><a class="code" href="classRouteExpander.html#r2">00340</a>       <span class="keywordtype">bool</span> m_done;
00341 
<a name="l00345"></a><a class="code" href="classRouteExpander.html#r3">00345</a>       <a class="code" href="classPacketContainer.html">PacketContainer</a>* m_answer;
00346       
<a name="l00350"></a><a class="code" href="classRouteExpander.html#r4">00350</a>       <a class="code" href="classPacketContainerTree.html">PacketContainerTree</a> m_packetsReadyToSend;
00351 
<a name="l00356"></a><a class="code" href="classRouteExpander.html#r5">00356</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrExpandRoutePackets;
00357 
<a name="l00361"></a><a class="code" href="classRouteExpander.html#r6">00361</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrReceivedExpandPackets;
00362 
<a name="l00366"></a><a class="code" href="classRouteExpander.html#r7">00366</a>       <a class="code" href="classExpandRouteReplyPacket.html">ExpandRouteReplyPacket</a>** m_expandRouteReplyPackets;
00367 
<a name="l00371"></a><a class="code" href="classRouteExpander.html#r8">00371</a>       <a class="code" href="classRouteReplyPacket.html">RouteReplyPacket</a>* m_routeReply;
00372 
<a name="l00376"></a><a class="code" href="classRouteExpander.html#r9">00376</a>       <span class="keyword">const</span> <a class="code" href="classSubRouteVector.html">SubRouteVector</a>* m_srVect;
00377 
<a name="l00382"></a><a class="code" href="classRouteExpander.html#r10">00382</a>       ItemTypes::routedir_nbr_t m_startDirectionHousenumber;
00383 
<a name="l00388"></a><a class="code" href="classRouteExpander.html#r11">00388</a>       ItemTypes::routedir_oddeven_t m_startDirectionOddEven;
00389 
<a name="l00393"></a><a class="code" href="classRouteExpander.html#r12">00393</a>       <a class="code" href="Types_8h.html#a25">byte</a> m_expandRouteType;
00394 
<a name="l00398"></a><a class="code" href="classRouteExpander.html#r13">00398</a>       <span class="keywordtype">bool</span> m_uTurn;
00399 
<a name="l00403"></a><a class="code" href="classRouteExpander.html#r14">00403</a>       <span class="keywordtype">bool</span> m_noConcatinate;
00404 
<a name="l00408"></a><a class="code" href="classRouteExpander.html#r15">00408</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_passedRoads;
00409 
<a name="l00413"></a><a class="code" href="classRouteExpander.html#r16">00413</a>       <span class="keywordtype">bool</span> m_removeNameChangeAhead;
00414 
<a name="l00416"></a><a class="code" href="classRouteExpander.html#r17">00416</a>       <span class="keywordtype">bool</span> m_nameChangeAsWP;
00417 
<a name="l00421"></a><a class="code" href="classRouteExpander.html#r18">00421</a>       StringTable::languageCode m_language;
00422 
<a name="l00426"></a><a class="code" href="classRouteExpander.html#r19">00426</a>       <span class="keywordtype">bool</span> m_abbreviate;
00427 
<a name="l00431"></a><a class="code" href="classRouteExpander.html#r20">00431</a>       <span class="keywordtype">bool</span> m_landmarks;
00432 
<a name="l00436"></a><a class="code" href="classRouteExpander.html#r21">00436</a>       <a class="code" href="Types_8h.html#a19">uint16</a> m_startOffset;
00437 
<a name="l00441"></a><a class="code" href="classRouteExpander.html#r22">00441</a>       <a class="code" href="Types_8h.html#a19">uint16</a> m_endOffset;
00442 
<a name="l00446"></a><a class="code" href="classRouteExpander.html#r23">00446</a>       <span class="keywordtype">bool</span> m_startDir;
00447 
<a name="l00451"></a><a class="code" href="classRouteExpander.html#r24">00451</a>       <span class="keywordtype">bool</span> m_endDir;
00452 
<a name="l00456"></a><a class="code" href="classRouteExpander.html#r25">00456</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrIDTransPackets;
00457 
<a name="l00461"></a><a class="code" href="classRouteExpander.html#r26">00461</a>       <a class="code" href="classIDTranslationReplyPacket.html">IDTranslationReplyPacket</a>** m_idtransReplyPackets;
00462 
<a name="l00466"></a><a class="code" href="classRouteExpander.html#r27">00466</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrReceivedIDTransPackets;
00467 
<a name="l00471"></a><a class="code" href="classRouteExpander.html#r28">00471</a>       <a class="code" href="classTopRegionReplyPacket.html">TopRegionReplyPacket</a>* m_topregionPacket;
00472 
<a name="l00474"></a><a class="code" href="classRouteExpander.html#r29">00474</a>       <a class="code" href="classvector.html">vector&lt;DisturbanceDescription&gt;</a> m_disturbanceInfo;
00475 
<a name="l00477"></a><a class="code" href="classRouteExpander.html#r30">00477</a>       <span class="keywordtype">bool</span> m_useAddCost;
00478 };
00479 
00480 
00481 <span class="comment">// ========================================================================</span>
00482 <span class="comment">//                                  Implementation of the inlined methods =</span>
00483 
00484 <span class="keyword">inline</span> ItemTypes::routedir_nbr_t 
<a name="l00485"></a><a class="code" href="classRouteExpander.html#z445_0">00485</a> <a class="code" href="classRouteExpander.html#z445_0">RouteExpander::getStartDirectionHousenumber</a>()
00486 {
00487    <span class="keywordflow">return</span> m_startDirectionHousenumber;
00488 }
00489 
00490 <span class="keyword">inline</span> ItemTypes::routedir_oddeven_t 
<a name="l00491"></a><a class="code" href="classRouteExpander.html#z445_1">00491</a> <a class="code" href="classRouteExpander.html#z445_1">RouteExpander::getStartDirectionOddEven</a>()
00492 {
00493    <span class="keywordflow">return</span> m_startDirectionOddEven;
00494 }
00495 
00496 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:49 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
