<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: SearchPacket.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000006.html">include</a></div>
<h1>SearchPacket.h</h1><a href="SearchPacket_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="comment">/*</span>
00015 <span class="comment">todo:</span>
00016 <span class="comment"></span>
00017 <span class="comment">implement fuzzysearch</span>
00018 <span class="comment">remove some mapID.</span>
00019 <span class="comment">use or remove zipcode and cityname</span>
00020 <span class="comment"></span>
00021 <span class="comment"> */</span>
00022 
00023 
00024 <span class="preprocessor">#ifndef SEARCHPACKET_H</span>
00025 <span class="preprocessor"></span><span class="preprocessor">#define SEARCHPACKET_H</span>
00026 <span class="preprocessor"></span>
00027 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="Types_8h.html">Types.h</a>"</span>
00029 <span class="preprocessor">#include "<a class="code" href="Packet_8h.html">Packet.h</a>"</span>
00030 <span class="preprocessor">#include "<a class="code" href="SearchParams_8h.html">SearchParams.h</a>"</span>
00031 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00032 <span class="preprocessor">#include &lt;typeinfo&gt;</span>
00033 <span class="preprocessor">#include "<a class="code" href="SearchTypes_8h.html">SearchTypes.h</a>"</span>
00034 <span class="preprocessor">#include "<a class="code" href="SearchReplyPacket_8h.html">SearchReplyPacket.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="SearchRequestPacket_8h.html">SearchRequestPacket.h</a>"</span>
00036 <span class="preprocessor">#include "<a class="code" href="LangTypes_8h.html">LangTypes.h</a>"</span>
00037 <span class="preprocessor">#include &lt;vector&gt;</span>
00038 
00039 <span class="keyword">class </span><a class="code" href="classVanillaMatch.html">VanillaMatch</a>; <span class="comment">// forward</span>
00040 <span class="keyword">class </span><a class="code" href="classMatchLink.html">MatchLink</a>; <span class="comment">// forward</span>
00041 <span class="keyword">class </span><a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>;
00042 
<a name="l00056"></a><a class="code" href="classVanillaSearchRequestPacket.html">00056</a> <span class="keyword">class </span><a class="code" href="classVanillaSearchRequestPacket.html">VanillaSearchRequestPacket</a> : <span class="keyword">public</span> <a class="code" href="classOldSearchRequestPacket.html">OldSearchRequestPacket</a> {
00057    <span class="keyword">public</span>:
00061       <a class="code" href="classVanillaSearchRequestPacket.html#a0">VanillaSearchRequestPacket</a>(); 
00062 
00068       <a class="code" href="classVanillaSearchRequestPacket.html#a0">VanillaSearchRequestPacket</a>( <a class="code" href="Types_8h.html#a19">uint16</a> packetID,
00069                                   <a class="code" href="Types_8h.html#a19">uint16</a> reqID );
00070 
<a name="l00074"></a><a class="code" href="classVanillaSearchRequestPacket.html#a2">00074</a>       <span class="keyword">virtual</span> <a class="code" href="classVanillaSearchRequestPacket.html#a2">~VanillaSearchRequestPacket</a>() {};
00075       
00104       <span class="keywordtype">void</span> <a class="code" href="classVanillaSearchRequestPacket.html#a3">encodeRequest</a>( uint32  numMapID,
00105                           <span class="keyword">const</span> uint32* mapID,
00106                           <span class="keyword">const</span> <span class="keywordtype">char</span>*   zipCode,
00107                           uint32 nbrLocations,
00108                           <span class="keyword">const</span> <span class="keywordtype">char</span>** locations,
00109                           uint32 locationType,
00110                           uint32 nbrCategories,
00111                           <span class="keyword">const</span> uint32* categories,
00112                           uint32 nbrMasks,
00113                           <span class="keyword">const</span> uint32* masks,
00114                           <span class="keyword">const</span> uint32* maskItemIDs,
00115                           <span class="keyword">const</span> <span class="keywordtype">char</span>** maskNames,
00116                           uint8 dbMask,
00117                           <span class="keyword">const</span> <span class="keywordtype">char</span>*   searchString,                    
00118                           uint8   nbrHits,
00119                           SearchTypes::StringMatching matchType,
00120                           SearchTypes::StringPart stringPart,
00121                           SearchTypes::SearchSorting sortingType,
00122                           uint16 categoryType,
00123                           uint16 requestedLanguage,
00124                           uint32 regionsInMatches,
00125                           StringTable::countryCode topRegion );
00126 
00145       <span class="keywordtype">void</span> <a class="code" href="classVanillaSearchRequestPacket.html#a4">decodeRequest</a>( <span class="keywordtype">char</span>*&amp; zipCode,
00146                           uint32&amp; nbrLocations,
00147                           <span class="keywordtype">char</span>**&amp; locations,
00148                           uint32&amp; locationType,
00149                           uint32&amp; nbrCategories,
00150                           uint32*&amp; categories,
00151                           uint32&amp; nbrMasks,
00152                           uint32*&amp; masks,
00153                           uint32*&amp; maskItemIDs,
00154                           <span class="keywordtype">char</span>**&amp; maskNames,
00155                           uint8&amp; dbMask,
00156                           <span class="keywordtype">char</span>*&amp; searchString,
00157                           uint8&amp; nbrHits,
00158                           SearchTypes::StringMatching&amp; matchType,
00159                           SearchTypes::StringPart&amp; stringPart,
00160                           SearchTypes::SearchSorting&amp; sortingType,
00161                           uint16&amp; categoryType,
00162                           uint16&amp; requestedLanguage,
00163                           uint32&amp; regionsInMatches,
00164                           StringTable::countryCode&amp; topRegion ) <span class="keyword">const</span>;
00165 
00166 };
00167 
<a name="l00174"></a><a class="code" href="classSearchSelectionReportPacket.html">00174</a> <span class="keyword">class </span><a class="code" href="classSearchSelectionReportPacket.html">SearchSelectionReportPacket</a> : <span class="keyword">public</span> <a class="code" href="classRequestPacket.html">RequestPacket</a> {
00175    <span class="keyword">public</span>:
00179       <a class="code" href="classSearchSelectionReportPacket.html#a0">SearchSelectionReportPacket</a>();
00180 
<a name="l00184"></a><a class="code" href="classSearchSelectionReportPacket.html#a1">00184</a>       <span class="keyword">virtual</span> <a class="code" href="classSearchSelectionReportPacket.html#a1">~SearchSelectionReportPacket</a>() {};
00185 
00190       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classSearchSelectionReportPacket.html#a2">getNbrSelections</a>();
00191 
00197       <span class="keywordtype">void</span> <a class="code" href="classSearchSelectionReportPacket.html#a3">addSelection</a>(uint32 mapID, uint32 itemID);
00198 
00205       <span class="keywordtype">void</span> <a class="code" href="classSearchSelectionReportPacket.html#a4">getSelection</a>(uint32 index, uint32 &amp;mapID, uint32 &amp;itemID);
00206 };
00207 
<a name="l00219"></a><a class="code" href="classUserSearchRequestPacket.html">00219</a> <span class="keyword">class </span><a class="code" href="classUserSearchRequestPacket.html">UserSearchRequestPacket</a> : <span class="keyword">public</span> <a class="code" href="classOldSearchRequestPacket.html">OldSearchRequestPacket</a> {
00220 <span class="keyword">public</span>:
<a name="l00221"></a><a class="code" href="classUserSearchRequestPacket.html#w0">00221</a>    <span class="keyword">typedef</span> <a class="code" href="Types_8h.html#a19">uint16</a> CategoryID;
<a name="l00222"></a><a class="code" href="classUserSearchRequestPacket.html#w1">00222</a>    <span class="keyword">typedef</span> set&lt;CategoryID&gt; Categories;
00226       <a class="code" href="classUserSearchRequestPacket.html#a0">UserSearchRequestPacket</a>();
00227 
00235       <a class="code" href="classUserSearchRequestPacket.html#a0">UserSearchRequestPacket</a>( uint16 packetID,
00236                                uint16 reqID );
00237 
<a name="l00241"></a><a class="code" href="classUserSearchRequestPacket.html#a2">00241</a>       <span class="keyword">virtual</span> <a class="code" href="classUserSearchRequestPacket.html#a2">~UserSearchRequestPacket</a>() {};
00242       
00285       <span class="keywordtype">void</span> <a class="code" href="classUserSearchRequestPacket.html#a3">encodeRequest</a>( uint32  numMapID,
00286                           <span class="keyword">const</span> uint32* mapID,
00287                           <span class="keyword">const</span> <span class="keywordtype">char</span>* zipCode,
00288                           uint32 nbrLocations,
00289                           <span class="keyword">const</span> const_char_p* locations,
00290                           uint32 locationType,
00291                           uint32 nbrCategories,
00292                           <span class="keyword">const</span> uint32* categories,
00293                           uint32 nbrMasks,
00294                           <span class="keyword">const</span> uint32* masks,
00295                           <span class="keyword">const</span> uint32* maskItemIDs,
00296                           <span class="keyword">const</span> const_char_p* maskNames,
00297                           uint8 dbMask,
00298                           <span class="keyword">const</span> <span class="keywordtype">char</span>* searchString,
00299                           uint8 nbrHits,
00300                           SearchTypes::StringMatching matchType,
00301                           SearchTypes::StringPart stringPart,
00302                           SearchTypes::SearchSorting sortingType,
00303                           uint16 categoryType,
00304                           LangTypes::language_t requestedLanguage,
00305                           uint8  nbrSortedHits,
00306                           uint16 editDistanceCutoff,
00307                           uint32 regionsInMatches,
00308                           <span class="keyword">const</span> Categories&amp; realCategories,
00309                           StringTable::countryCode topRegion,
00310                           <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;MC2BoundingBox&gt;</a>&amp; bboxes =
00311                           <a class="code" href="classvector.html">vector&lt;MC2BoundingBox&gt;</a>());
00312 
00324       <span class="keywordtype">void</span> <a class="code" href="classUserSearchRequestPacket.html#a4">decodeRequest</a>( <span class="keywordtype">char</span>*&amp; zipCode,
00325                           uint32&amp; nbrLocations,
00326                           <span class="keywordtype">char</span>**&amp; locations,
00327                           uint32&amp; locationType,
00328                           uint32&amp; nbrCategories,
00329                           uint32*&amp; categories,
00330                           uint32&amp; nbrMasks,
00331                           uint32*&amp; masks,
00332                           uint32*&amp; maskItemIDs,
00333                           <span class="keywordtype">char</span>**&amp; maskNames,
00334                           uint8&amp; dbMask,
00335                           <span class="keywordtype">char</span>*&amp; searchString,
00336                           uint8 &amp;nbrHits,
00337                           SearchTypes::StringMatching&amp; matchType,
00338                           SearchTypes::StringPart&amp; stringPart,
00339                           SearchTypes::SearchSorting&amp; sortingType,
00340                           uint16 &amp;categoryType,
00341                           uint16 &amp;requestedLanguage,
00342                           uint8 &amp;nbrSortedHits,
00343                           uint16&amp; editDistanceCutoff,
00344                           uint32&amp; regionsInMatches,
00345                           Categories&amp; realCategories,
00346                           StringTable::countryCode&amp; topRegion,
00347                           <a class="code" href="classvector.html">vector&lt;MC2BoundingBox&gt;</a>&amp; bboxes) <span class="keyword">const</span>;
00348 
00349 
00356       <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classUserSearchRequestPacket.html#a5">getSearchString</a>() <span class="keyword">const</span>;
00357 };
00358 
00359 
<a name="l00364"></a><a class="code" href="classExpandCategory2SearchRequestPacket.html">00364</a> <span class="keyword">class </span><a class="code" href="classExpandCategory2SearchRequestPacket.html">ExpandCategory2SearchRequestPacket</a> : <span class="keyword">public</span> <a class="code" href="classOldSearchRequestPacket.html">OldSearchRequestPacket</a> {
00365    <span class="keyword">public</span>:
00369    <a class="code" href="classExpandCategory2SearchRequestPacket.html#a0">ExpandCategory2SearchRequestPacket</a>();
00370 
00376    <a class="code" href="classExpandCategory2SearchRequestPacket.html#a0">ExpandCategory2SearchRequestPacket</a>( <a class="code" href="Types_8h.html#a19">uint16</a> packetID, <a class="code" href="Types_8h.html#a19">uint16</a> reqID );
00377 
<a name="l00381"></a><a class="code" href="classExpandCategory2SearchRequestPacket.html#a2">00381</a>    <span class="keyword">virtual</span> <a class="code" href="classExpandCategory2SearchRequestPacket.html#a2">~ExpandCategory2SearchRequestPacket</a>() {};
00382    
00394    <span class="keywordtype">void</span> <a class="code" href="classExpandCategory2SearchRequestPacket.html#a3">encodeRequest</a>( uint32  numMapID,
00395                        <span class="keyword">const</span> uint32* mapID,
00396                        <span class="keyword">const</span> <span class="keywordtype">char</span>* zipCode,
00397                        uint32 nbrLocations,
00398                        <span class="keyword">const</span> <span class="keywordtype">char</span>** locations,
00399                        uint32 locationType,
00400                        uint32 nbrCategories,
00401                        <span class="keyword">const</span> uint32* categories,
00402                        uint32 nbrMasks,
00403                        <span class="keyword">const</span> uint32* masks,
00404                        <span class="keyword">const</span> uint32* maskItemIDs,
00405                        <span class="keyword">const</span> <span class="keywordtype">char</span>** maskNames,
00406                        uint8 dbMask,
00407                        <span class="keyword">const</span> <span class="keywordtype">char</span>* searchString,
00408                        uint8 nbrHits,
00409                        SearchTypes::StringMatching matchType,
00410                        SearchTypes::StringPart stringPart,
00411                        SearchTypes::SearchSorting sortingType,
00412                        uint16 categoryType,
00413                        uint16 requestedLanguage,
00414                        uint8  nbrSortedHits,
00415                        uint32 regionsInMatches,
00416                        StringTable::countryCode topRegion );
00417 
00418 
00425    <span class="keywordtype">void</span> <a class="code" href="classExpandCategory2SearchRequestPacket.html#a4">decodeRequest</a>( <span class="keywordtype">char</span>*&amp; zipCode,
00426                        uint32&amp; nbrLocations,
00427                        <span class="keywordtype">char</span>**&amp; locations,
00428                        uint32&amp; locationType,
00429                        uint32&amp; nbrCategories,
00430                        uint32*&amp; categories,
00431                        uint32&amp; nbrMasks,
00432                        uint32*&amp; masks,
00433                        uint32*&amp; maskItemIDs,
00434                        <span class="keywordtype">char</span>**&amp; maskNames,
00435                        uint8&amp; dbMask,
00436                        <span class="keywordtype">char</span>*&amp; searchString,
00437                        uint8 &amp;nbrHits,
00438                        SearchTypes::StringMatching&amp; matchType,
00439                        SearchTypes::StringPart&amp; stringPart,
00440                        SearchTypes::SearchSorting&amp; sortingType,
00441                        uint16 &amp;categoryType,
00442                        uint16 &amp;requestedLanguage,
00443                        uint8 &amp;nbrSortedHits,
00444                        uint32&amp; regionsInMatches,
00445                        StringTable::countryCode&amp; topRegion ) <span class="keyword">const</span>;
00446 };
00447 
00448 <span class="preprocessor">#endif</span>
00449 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:50 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
