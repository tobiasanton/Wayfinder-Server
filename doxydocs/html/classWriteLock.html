<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: WriteLock Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>WriteLock Class Reference</h1>Class allowing several threads to read-access a resource, but protecting the resource while a thread writes to the resource.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>&gt;</code>
<p>
Collaboration diagram for WriteLock:<p><center><img src="classWriteLock__coll__graph.png" border="0" usemap="#WriteLock__coll__map" alt="Collaboration graph"></center>
<map name="WriteLock__coll__map">
<area href="classISABMonitor.html" shape="rect" coords="5,5,101,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classWriteLock-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classWriteLock.html#a0">WriteLock</a> ()
<dl class="el"><dd class="mdescRight">Constructs a new WriteLock without any Readers, Writers or Deleters.  <a href="#a0"></a><br></dl><li><a class="el" href="classWriteLock.html#a1">~WriteLock</a> ()
<dl class="el"><dd class="mdescRight">Destructor.  <a href="#a1"></a><br></dl><li>bool <a class="el" href="classWriteLock.html#a2">requestRead</a> ()
<dl class="el"><dd class="mdescRight">Adds a reader to the WriteLock.  <a href="#a2"></a><br></dl><li>void <a class="el" href="classWriteLock.html#a3">finishRead</a> ()
<dl class="el"><dd class="mdescRight">Reduces the number of readers in the WriteLock by one.  <a href="#a3"></a><br></dl><li>bool <a class="el" href="classWriteLock.html#a4">requestWrite</a> ()
<dl class="el"><dd class="mdescRight">waits for all Writers to leave the resource  <a href="#a4"></a><br></dl><li>void <a class="el" href="classWriteLock.html#a5">finishWrite</a> ()
<dl class="el"><dd class="mdescRight">Reduces the number of writers in the WriteLock by one.  <a href="#a5"></a><br></dl><li>bool <a class="el" href="classWriteLock.html#a6">requestDelete</a> ()
</ul>
<h2>Private Attributes</h2>
<ul>
<li><a class="el" href="classISABMonitor.html">ISABMonitor</a> <a class="el" href="classWriteLock.html#r0">m_monitor</a>
<dl class="el"><dd class="mdescRight">The monitor used by the lock.  <a href="#r0"></a><br></dl><li><a class="el" href="Types_8h.html#a21">uint32</a> <a class="el" href="classWriteLock.html#r1">m_nbrOfReaders</a>
<dl class="el"><dd class="mdescRight">The number of threads that are reading from the resource.  <a href="#r1"></a><br></dl><li><a class="el" href="Types_8h.html#a21">uint32</a> <a class="el" href="classWriteLock.html#r2">m_nbrOfWriters</a>
<dl class="el"><dd class="mdescRight">The number of threads that are writing to the resource.  <a href="#r2"></a><br></dl><li>bool <a class="el" href="classWriteLock.html#r3">m_writing</a>
<dl class="el"><dd class="mdescRight">True if a thread is writing to the resource.  <a href="#r3"></a><br></dl><li>bool <a class="el" href="classWriteLock.html#r4">m_deleting</a>
<dl class="el"><dd class="mdescRight">True if the resource is about to be deleted.  <a href="#r4"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class allowing several threads to read-access a resource, but protecting the resource while a thread writes to the resource. 
<p>
Threads can Read, Write or Delete with this lock Readers, blocks Writers and Deleters, but not other Readers. Writers blocks all other threads. Deleters removes the access to the lock causing alll new Read/Write/Delete atempts to fail. 
<p>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00026">26</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="WriteLock::WriteLock"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">WriteLock::WriteLock           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructs a new WriteLock without any Readers, Writers or Deleters. 
<p>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00099">99</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
References <a class="el" href="WriteLock_8h-source.html#l00091">m_deleting</a>, <a class="el" href="WriteLock_8h-source.html#l00079">m_nbrOfReaders</a>, and <a class="el" href="WriteLock_8h-source.html#l00085">m_nbrOfWriters</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="WriteLock::~WriteLock"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">WriteLock::~<a class="el" href="classWriteLock.html">WriteLock</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor. 
<p>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00037">37</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a3" doxytag="WriteLock::finishRead"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void WriteLock::finishRead           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reduces the number of readers in the WriteLock by one. 
<p>
If none remains all sleepers (writers and deleters) are notified. 
<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00118">118</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
References <a class="el" href="WriteLock_8h-source.html#l00074">m_monitor</a>, <a class="el" href="WriteLock_8h-source.html#l00079">m_nbrOfReaders</a>, and <a class="el" href="ISABThread_8h-source.html#l00522">ISABMonitor::notifyAll()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="WriteLock::finishWrite"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void WriteLock::finishWrite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reduces the number of writers in the WriteLock by one. 
<p>
If none remains all sleepers (writers and deleters) are notified. 
<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00148">148</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
References <a class="el" href="WriteLock_8h-source.html#l00074">m_monitor</a>, <a class="el" href="WriteLock_8h-source.html#l00085">m_nbrOfWriters</a>, <a class="el" href="WriteLock_8h-source.html#l00088">m_writing</a>, and <a class="el" href="ISABThread_8h-source.html#l00522">ISABMonitor::notifyAll()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="WriteLock::requestDelete"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool WriteLock::requestDelete           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>False if a delete was already requested. </dd></dl>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00158">158</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
References <a class="el" href="WriteLock_8h-source.html#l00091">m_deleting</a>, <a class="el" href="WriteLock_8h-source.html#l00074">m_monitor</a>, <a class="el" href="WriteLock_8h-source.html#l00079">m_nbrOfReaders</a>, <a class="el" href="WriteLock_8h-source.html#l00085">m_nbrOfWriters</a>, <a class="el" href="MC2Logging_8h-source.html#l00180">mc2dbg4</a>, <a class="el" href="MC2Logging_8h-source.html#l00154">mc2log</a>, <a class="el" href="ISABThread_8h-source.html#l00485">ISABMonitor::wait()</a>, and <a class="el" href="MC2Logging_8h.html#a15">warn()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="WriteLock::requestRead"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool WriteLock::requestRead           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds a reader to the WriteLock. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>False if a delete is pending. </dd></dl>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00108">108</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
References <a class="el" href="WriteLock_8h-source.html#l00079">m_nbrOfReaders</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="WriteLock::requestWrite"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool WriteLock::requestWrite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
waits for all Writers to leave the resource 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>False if a delete is pending. </dd></dl>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00129">129</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
References <a class="el" href="WriteLock_8h-source.html#l00074">m_monitor</a>, <a class="el" href="WriteLock_8h-source.html#l00079">m_nbrOfReaders</a>, <a class="el" href="WriteLock_8h-source.html#l00085">m_nbrOfWriters</a>, <a class="el" href="WriteLock_8h-source.html#l00088">m_writing</a>, <a class="el" href="MC2Logging_8h-source.html#l00154">mc2log</a>, <a class="el" href="ISABThread_8h-source.html#l00485">ISABMonitor::wait()</a>, and <a class="el" href="MC2Logging_8h.html#a15">warn()</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r4" doxytag="WriteLock::m_deleting"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="classWriteLock.html#r4">WriteLock::m_deleting</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
True if the resource is about to be deleted. 
<p>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00091">91</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
Referenced by <a class="el" href="WriteLock_8h-source.html#l00158">requestDelete()</a>, and <a class="el" href="WriteLock_8h-source.html#l00099">WriteLock()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="WriteLock::m_monitor"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classISABMonitor.html">ISABMonitor</a> <a class="el" href="classWriteLock.html#r0">WriteLock::m_monitor</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The monitor used by the lock. 
<p>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00074">74</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
Referenced by <a class="el" href="WriteLock_8h-source.html#l00118">finishRead()</a>, <a class="el" href="WriteLock_8h-source.html#l00148">finishWrite()</a>, <a class="el" href="WriteLock_8h-source.html#l00158">requestDelete()</a>, and <a class="el" href="WriteLock_8h-source.html#l00129">requestWrite()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="WriteLock::m_nbrOfReaders"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a> <a class="el" href="classWriteLock.html#r1">WriteLock::m_nbrOfReaders</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The number of threads that are reading from the resource. 
<p>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00079">79</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
Referenced by <a class="el" href="WriteLock_8h-source.html#l00118">finishRead()</a>, <a class="el" href="WriteLock_8h-source.html#l00158">requestDelete()</a>, <a class="el" href="WriteLock_8h-source.html#l00108">requestRead()</a>, <a class="el" href="WriteLock_8h-source.html#l00129">requestWrite()</a>, and <a class="el" href="WriteLock_8h-source.html#l00099">WriteLock()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="WriteLock::m_nbrOfWriters"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a> <a class="el" href="classWriteLock.html#r2">WriteLock::m_nbrOfWriters</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The number of threads that are writing to the resource. 
<p>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00085">85</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
Referenced by <a class="el" href="WriteLock_8h-source.html#l00148">finishWrite()</a>, <a class="el" href="WriteLock_8h-source.html#l00158">requestDelete()</a>, <a class="el" href="WriteLock_8h-source.html#l00129">requestWrite()</a>, and <a class="el" href="WriteLock_8h-source.html#l00099">WriteLock()</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="WriteLock::m_writing"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="classWriteLock.html#r3">WriteLock::m_writing</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
True if a thread is writing to the resource. 
<p>

<p>
Definition at line <a class="el" href="WriteLock_8h-source.html#l00088">88</a> of file <a class="el" href="WriteLock_8h-source.html">WriteLock.h</a>.
<p>
Referenced by <a class="el" href="WriteLock_8h-source.html#l00148">finishWrite()</a>, and <a class="el" href="WriteLock_8h-source.html#l00129">requestWrite()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="WriteLock_8h-source.html">WriteLock.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:28:24 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
