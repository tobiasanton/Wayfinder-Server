<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: InfoMapGenerator Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>InfoMapGenerator Class Reference</h1>Class for sending maps to the <code>InfoModule</code>.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="InfoMapGenerator_8h-source.html">InfoMapGenerator.h</a>&gt;</code>
<p>
Inheritance diagram for InfoMapGenerator:<p><center><img src="classInfoMapGenerator__inherit__graph.png" border="0" usemap="#InfoMapGenerator__inherit__map" alt="Inheritance graph"></center>
<map name="InfoMapGenerator__inherit__map">
<area href="classMapGenerator.html" shape="rect" coords="17,80,124,107" alt="">
<area href="classISABThread.html" shape="rect" coords="24,5,117,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for InfoMapGenerator:<p><center><img src="classInfoMapGenerator__coll__graph.png" border="0" usemap="#InfoMapGenerator__coll__map" alt="Collaboration graph"></center>
<map name="InfoMapGenerator__coll__map">
<area href="classMapGenerator.html" shape="rect" coords="224,277,331,304" alt="">
<area href="classISABThread.html" shape="rect" coords="55,187,148,213" alt="">
<area href="classISABThreadGroup.html" shape="rect" coords="5,96,136,123" alt="">
<area href="classMapHandler.html" shape="rect" coords="192,187,285,213" alt="">
<area href="classTCPSocket.html" shape="rect" coords="309,187,397,213" alt="">
<area href="classSocket.html" shape="rect" coords="169,96,231,123" alt="">
<area href="classWriteable.html" shape="rect" coords="255,96,332,123" alt="">
<area href="classReadable.html" shape="rect" coords="356,96,433,123" alt="">
<area href="classStepLogger.html" shape="rect" coords="457,96,548,123" alt="">
<area href="classMapProcessor.html" shape="rect" coords="589,277,696,304" alt="">
<area href="classMapHandlingProcessor.html" shape="rect" coords="563,187,723,213" alt="">
<area href="classProcessor.html" shape="rect" coords="712,96,795,123" alt="">
<area href="classMapSafeVector.html" shape="rect" coords="589,5,701,32" alt="">
<area href="classGetAdditionalPOIInfo.html" shape="rect" coords="779,187,925,213" alt="">
<area href="classCharEncSQLConn.html" shape="rect" coords="819,96,949,123" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classInfoMapGenerator-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classInfoMapGenerator.html#a0">InfoMapGenerator</a> (<a class="el" href="classMapHandler.html">MapHandler</a> *mh, <a class="el" href="Types_8h.html#a21">uint32</a> *mapID, int <a class="el" href="classMapGenerator.html#p2">nbrMaps</a>, <a class="el" href="Types_8h.html#a21">uint32</a> <a class="el" href="classMapGenerator.html#p3">port</a>, <a class="el" href="classMapProcessor.html">MapProcessor</a> *mapProc)
<dl class="el"><dd class="mdescRight">Creates a InfoMapGenerator, du.  <a href="#a0"></a><br></dl><li>virtual <a class="el" href="classInfoMapGenerator.html#a1">~InfoMapGenerator</a> ()
<dl class="el"><dd class="mdescRight">Delete this map generator.  <a href="#a1"></a><br></dl><li>virtual void <a class="el" href="classInfoMapGenerator.html#a2">run</a> ()
<dl class="el"><dd class="mdescRight">Performs the actual generation of the map.  <a href="#a2"></a><br></dl></ul>
<h2>Protected Member Functions</h2>
<ul>
<li><a class="el" href="classTCPSocket.html">TCPSocket</a> * <a class="el" href="classInfoMapGenerator.html#b0">waitForConnection</a> (char *handshake, int maxHandshake)
<dl class="el"><dd class="mdescRight">Waits for a connection to write the map to.  <a href="#b0"></a><br></dl></ul>
<h2>Private Attributes</h2>
<ul>
<li><a class="el" href="classMapProcessor.html">MapProcessor</a> * <a class="el" href="classInfoMapGenerator.html#r0">m_mapProcessor</a>
<dl class="el"><dd class="mdescRight"><a class="el" href="classMapProcessor.html">MapProcessor</a> is used for some functions.  <a href="#r0"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class for sending maps to the <code>InfoModule</code>. 
<p>
The loading procedure starts with a handshake terminated by ''. After the handshake the InfoModule sends the MapID. The InfoMapGenerator responds with the boundingbox for the map. After this the InfoModule gets the disturbances in the database which are inside the bbox and sends the coordinates and angles of the disturbances to the InfoMapGenerator. The InfoMapGenerator responds with the itemID for the best <a class="el" href="classStreetSegmentItem.html">StreetSegmentItem</a>. It also sends the distance from the received coordinate. 
<p>

<p>
Definition at line <a class="el" href="InfoMapGenerator_8h-source.html#l00033">33</a> of file <a class="el" href="InfoMapGenerator_8h-source.html">InfoMapGenerator.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="InfoMapGenerator::InfoMapGenerator"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">InfoMapGenerator::InfoMapGenerator           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classMapHandler.html">MapHandler</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mh</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mapID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>nbrMaps</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMapProcessor.html">MapProcessor</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mapProc</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a InfoMapGenerator, du. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mh</em>&nbsp;</td><td><a class="el" href="classMapHandler.html">MapHandler</a> for getting the maps. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mapID</em>&nbsp;</td><td>The mapIDs to send. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>nbrMaps</em>&nbsp;</td><td>The number of mapID:s. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>The port to try to listen to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mapProc</em>&nbsp;</td><td>Pointer to the <a class="el" href="classMapProcessor.html">MapProcessor</a>. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="InfoMapGenerator::~InfoMapGenerator"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual InfoMapGenerator::~<a class="el" href="classInfoMapGenerator.html">InfoMapGenerator</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete this map generator. 
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a2" doxytag="InfoMapGenerator::run"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void InfoMapGenerator::run           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Performs the actual generation of the map. 
<p>

<p>
Reimplemented from <a class="el" href="classMapGenerator.html#a4">MapGenerator</a>.    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="InfoMapGenerator::waitForConnection"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classTCPSocket.html">TCPSocket</a>* InfoMapGenerator::waitForConnection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>handshake</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>maxHandshake</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Waits for a connection to write the map to. 
<p>
Waits <code>MAX_WAIT_TIME_FOR_CONNECTION</code> for a connection and if there is one in time, the function will read data from the socket until a zero occurs. This function is different from the waitForConnection in <a class="el" href="classMapGenerator.html">MapGenerator</a>, since we must know exactly when the handshake ends, since data is sent from the module on the same socket as the handshake. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handshake</em>&nbsp;</td><td>A string to put the handshake into. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxHandshake</em>&nbsp;</td><td>Maximum number of characters to put into the handshake string. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A socket if connected. NULL if failure. </dd></dl>

<p>
Reimplemented from <a class="el" href="classMapGenerator.html#b0">MapGenerator</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="InfoMapGenerator::m_mapProcessor"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMapProcessor.html">MapProcessor</a>* <a class="el" href="classInfoMapGenerator.html#r0">InfoMapGenerator::m_mapProcessor</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="classMapProcessor.html">MapProcessor</a> is used for some functions. 
<p>

<p>
Definition at line <a class="el" href="InfoMapGenerator_8h-source.html#l00082">82</a> of file <a class="el" href="InfoMapGenerator_8h-source.html">InfoMapGenerator.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="InfoMapGenerator_8h-source.html">InfoMapGenerator.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:24:45 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
