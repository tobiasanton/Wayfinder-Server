<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: ExtraDataReader.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000007.html">MapGen</a>&nbsp;/&nbsp;<a class="el" href="dir_000008.html">MapGenerator</a>&nbsp;/&nbsp;<a class="el" href="dir_000009.html">include</a></div>
<h1>ExtraDataReader.h</h1><a href="ExtraDataReader_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef EXTRADATAREADER_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define EXTRADATAREADER_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include "<a class="code" href="ItemTypes_8h.html">ItemTypes.h</a>"</span>
00019 <span class="preprocessor">#include "<a class="code" href="OldItem_8h.html">OldItem.h</a>"</span>
00020 <span class="preprocessor">#include &lt;map&gt;</span>
00021 <span class="preprocessor">#include "<a class="code" href="CoordinateTransformer_8h.html">CoordinateTransformer.h</a>"</span>
00022 <span class="preprocessor">#include &lt;vector&gt;</span>
00023 <span class="preprocessor">#include "<a class="code" href="GMSMap_8h.html">GMSMap.h</a>"</span>
00024 <span class="preprocessor">#include "<a class="code" href="STLStrComp_8h.html">STLStrComp.h</a>"</span>
00025 <span class="preprocessor">#include "<a class="code" href="OldExtraDataUtility_8h.html">OldExtraDataUtility.h</a>"</span>
00026 
00027 
00028 <span class="keyword">class </span><a class="code" href="classOldNode.html">OldNode</a>;
00029 <span class="keyword">class </span><a class="code" href="classOldConnection.html">OldConnection</a>;
00030 
00031 
<a name="l00039"></a><a class="code" href="classExtraDataReader.html">00039</a> <span class="keyword">class </span><a class="code" href="classExtraDataReader.html">ExtraDataReader</a> {
00040    <span class="keyword">public</span>:
00051       <a class="code" href="classExtraDataReader.html">ExtraDataReader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* filePath = NULL);
00052 
00057       <span class="keyword">virtual</span> ~<a class="code" href="classExtraDataReader.html">ExtraDataReader</a>();
00058 
00064       <span class="keywordtype">void</span> setFilePath(<span class="keyword">const</span> <span class="keywordtype">char</span>* filePath);
00065 
00075       <span class="keywordtype">bool</span> parseInto(<a class="code" href="classGMSMap.html">GMSMap</a>* theMap, <span class="keywordtype">bool</span> parseOnly=<span class="keyword">false</span>);
00076 
00110       <span class="keywordtype">bool</span> initCheckTable();
00111 
00132       <span class="keywordtype">bool</span> printCheckTable();
00133 
00140       <span class="keywordtype">void</span> initMergedMaps();
00141 
00146       <span class="keyword">inline</span> multimap&lt;uint32, uint32&gt; getItemsAffectedInUVMaps();
00147 
00152       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getNbrRecordsAdded();
00153 
00159       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getNbrRecordsInEDFile();
00160 
00165       <span class="keyword">inline</span> <a class="code" href="classvector.html">vector&lt;int&gt;</a> getRecordsAddedToMaps();
00166 
00167    <span class="keyword">private</span>:
00168 
<a name="l00169"></a><a class="code" href="classExtraDataReader.html#y0">00169</a>       <span class="keyword">typedef</span> CoordinateTransformer::format_t format_t;
00170 
<a name="l00174"></a><a class="code" href="classExtraDataReader.html#r0">00174</a>       <span class="keyword">const</span> <span class="keywordtype">char</span>* m_path;
00175  
<a name="l00182"></a><a class="code" href="classExtraDataReader.html#r1">00182</a>       <a class="code" href="classmap.html">map&lt;MC2String, ItemTypes::itemType, strNoCaseCompareLess&gt;</a> m_itemTypes;
00183 
<a name="l00187"></a><a class="code" href="classExtraDataReader.html#r2">00187</a>       <a class="code" href="classmap.html">map&lt;MC2String, ItemTypes::name_t, strNoCaseCompareLess&gt;</a> m_nameTypes;
00188 
<a name="l00192"></a><a class="code" href="classExtraDataReader.html#r3">00192</a>       <a class="code" href="classmap.html">map&lt;MC2String, LangTypes::language_t, strNoCaseCompareLess&gt;</a> m_languages;
00193       
00197       <a class="code" href="classmap.html">map&lt;MC2String, ItemTypes::pointOfInterest_t, strNoCaseCompareLess&gt;</a> 
<a name="l00198"></a><a class="code" href="classExtraDataReader.html#r4">00198</a>          m_POITypes;
00199 
<a name="l00204"></a><a class="code" href="classExtraDataReader.html#v0">00204</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> NBRS_OF_CHECK_COORD_INSIDE_BUA;
00205 
00219       <span class="keywordtype">int</span> setTurndirection(<a class="code" href="classOldNode.html">OldNode</a>* fromNode, <a class="code" href="classOldNode.html">OldNode</a>* toNode,
00220                            ItemTypes::turndirection_t turnDir,
00221                            <span class="keywordtype">bool</span> checkRecord);
00222 
00240       ItemTypes::itemType getItemType(<a class="code" href="classMC2String.html">MC2String</a>&amp; str) <span class="keyword">const</span>;
00241         
00253       ItemTypes::name_t getNameType(<a class="code" href="classMC2String.html">MC2String</a>&amp; str) <span class="keyword">const</span>;
00254 
00255       LangTypes::language_t getLanguage(<a class="code" href="classMC2String.html">MC2String</a>&amp; str) <span class="keyword">const</span>;
00256 
00257 
00280       ItemTypes::pointOfInterest_t getPOIType(<a class="code" href="classMC2String.html">MC2String</a>&amp; s) <span class="keyword">const</span>;
00281 
00285       <a class="code" href="Types_8h.html#a21">uint32</a> getUint32(<a class="code" href="classMC2String.html">MC2String</a>&amp; str) <span class="keyword">const</span>;
00286       
00291       <span class="keywordtype">int</span> getNumber(<a class="code" href="classMC2String.html">MC2String</a>&amp; str) <span class="keyword">const</span>;
00292 
00297       <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* getStringFromBool(<span class="keywordtype">bool</span> boolVal) <span class="keyword">const</span>;
00298       
00307       <a class="code" href="classOldConnection.html">OldConnection</a>* getConnection(<a class="code" href="classOldNode.html">OldNode</a>* fromNode, <a class="code" href="classOldNode.html">OldNode</a>* toNode);
00308 
00314       <a class="code" href="Types_8h.html#a21">uint32</a> lookupStringIndex(<a class="code" href="classGMSMap.html">GMSMap</a>* theMap,
00315                                <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; str) <span class="keyword">const</span>;
00316 
00356          <span class="keywordtype">bool</span> handleCommentRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; recStr, <span class="keywordtype">bool</span> parseOnly);
00357          
00370          <span class="keywordtype">bool</span> handleUpdateNameRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; recStr,
00371                                      <span class="keywordtype">bool</span> parseOnly);
00372 
00384          <span class="keywordtype">bool</span> handleRemoveNameFromItemRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; recStr, 
00385                                              <span class="keywordtype">bool</span> parseOnly);
00386 
00401          <span class="keywordtype">bool</span> handleAddNameToItemRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00402                                         <span class="keywordtype">bool</span> parseOnly);
00403 
00415          <span class="keywordtype">bool</span> handleAddCitypartRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec, <span class="keywordtype">bool</span> parseOnly);
00416 
00428          <span class="keywordtype">bool</span> handleSetVehicleRestrictionsRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec, 
00429                                                  <span class="keywordtype">bool</span> parseOnly);
00430 
00446          <span class="keywordtype">bool</span> handleAddLandmarkRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00447                                       <span class="keywordtype">bool</span> parseOnly);
00467          <span class="keywordtype">bool</span> handleAddSingleLandmarkRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00468                                             <span class="keywordtype">bool</span> parseOnly);
00469 
00482          <span class="keywordtype">bool</span> handleSingleBooleanRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00483                                         <span class="keywordtype">bool</span> parseOnly);
00484 
00494          <span class="keywordtype">bool</span> handleRemoveItemRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; recStr,
00495                                      <span class="keywordtype">bool</span> parseOnly);
00496 
00509          <span class="keywordtype">bool</span> handleAddSignpostRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00510                                       <span class="keywordtype">bool</span> parseOnly);
00511 
00525          <span class="keywordtype">bool</span> handleRemoveSignpostRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00526                                          <span class="keywordtype">bool</span> parseOnly);
00527          
00540          <span class="keywordtype">bool</span> handleSetHousenumberRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00541                                          <span class="keywordtype">bool</span> parseOnly);
00542 
00551          <span class="keywordtype">bool</span> handleSetEntryRestrictionsRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00552                                          <span class="keywordtype">bool</span> parseOnly);
00553 
00562          <span class="keywordtype">bool</span> handleSetSpeedLimitRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00563                                         <span class="keywordtype">bool</span> parseOnly);
00564 
00573          <span class="keywordtype">bool</span> handleSetTollRoadRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00574                                       <span class="keywordtype">bool</span> parseOnly);
00575 
00584          <span class="keywordtype">bool</span> handleSetLevelRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec, <span class="keywordtype">bool</span> parseOnly);
00585 
00597          <span class="keywordtype">bool</span> handleSetTurndirectionRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00598                                          <span class="keywordtype">bool</span> parseOnly);
00599 
00612          <span class="keywordtype">bool</span> handleSetWaterTypeRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec,
00613                                        <span class="keywordtype">bool</span> parseOnly);
00615      
00630       <span class="keywordtype">int</span> addSignpost(<a class="code" href="classOldNode.html">OldNode</a>* fromNode, <a class="code" href="classOldNode.html">OldNode</a>* toNode,
00631                       <a class="code" href="classMC2String.html">MC2String</a>&amp; text, LangTypes::language_t lang,
00632                       ItemTypes::name_t type, <span class="keywordtype">bool</span> checkRecord);
00633 
00634       
00635       <span class="comment">/*</span>
00636 <span class="comment">       *    Print one record to mc2log.</span>
00637 <span class="comment">       *    @param rec  The vector with the strings that represent this </span>
00638 <span class="comment">       *                record.</span>
00639 <span class="comment">       */</span>
00640       <span class="keywordtype">void</span> printRecord(<a class="code" href="classvector.html">vector&lt;MC2String&gt;</a>&amp; rec);
00641 
<a name="l00645"></a><a class="code" href="classExtraDataReader.html#r5">00645</a>       <a class="code" href="classGMSMap.html">GMSMap</a>* m_map;
00646       
<a name="l00651"></a><a class="code" href="classExtraDataReader.html#r6">00651</a>       <span class="keywordtype">bool</span> m_updateCityPartLocation;
00652 
<a name="l00658"></a><a class="code" href="classExtraDataReader.html#r7">00658</a>       <span class="keywordtype">int</span> m_curLineNumber;
00659 
<a name="l00664"></a><a class="code" href="classExtraDataReader.html#r8">00664</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrRecordsAdded;
00665 
<a name="l00670"></a><a class="code" href="classExtraDataReader.html#r9">00670</a>       <a class="code" href="classvector.html">vector&lt;int&gt;</a> m_recordsAddedToMaps;
00671 
<a name="l00678"></a><a class="code" href="classExtraDataReader.html#r10">00678</a>       <a class="code" href="classMC2String.html">MC2String</a> m_mapEDdate;
00679 
<a name="l00693"></a><a class="code" href="classExtraDataReader.html#z297_0">00693</a>          <a class="code" href="Types_8h.html#a21">uint32</a> m_recordId;
00694 
<a name="l00701"></a><a class="code" href="classExtraDataReader.html#z297_1">00701</a>          <a class="code" href="classMC2String.html">MC2String</a> m_originalValStr;
00702 
<a name="l00709"></a><a class="code" href="classExtraDataReader.html#z297_2">00709</a>          <a class="code" href="classMC2String.html">MC2String</a> m_edInsertType;
00710 
<a name="l00718"></a><a class="code" href="classExtraDataReader.html#z297_3">00718</a>          <a class="code" href="classMC2String.html">MC2String</a> m_recordEDdate;
00720 
<a name="l00726"></a><a class="code" href="classExtraDataReader.html#r11">00726</a>       <span class="keywordtype">bool</span> m_checkRecords;
00727 
<a name="l00732"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html">00732</a>       <span class="keyword">struct </span><a class="code" href="structExtraDataReader_1_1recordnotices__t.html">recordnotices_t</a> {
<a name="l00733"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o0">00733</a>          <a class="code" href="Types_8h.html#a21">uint32</a> recordId;
<a name="l00734"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o1">00734</a>          <a class="code" href="classMC2String.html">MC2String</a> record;
<a name="l00735"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o2">00735</a>          <a class="code" href="classvector.html">vector&lt;uint32&gt;</a> mapIds;  <span class="comment">// fixme: set would be better, to avoid duplicates</span>
<a name="l00736"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o3">00736</a>          <a class="code" href="classvector.html">vector&lt;uint32&gt;</a> mapIdCandidates;
<a name="l00737"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o4">00737</a>          <span class="keywordtype">bool</span> recordChecked;
<a name="l00738"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o5">00738</a>          <span class="keywordtype">bool</span> recordFound;
<a name="l00739"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o6">00739</a>          <span class="keywordtype">bool</span> recordNeeded;
<a name="l00740"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o7">00740</a>          <span class="keywordtype">bool</span> recordMapChanged;
<a name="l00741"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o8">00741</a>          <a class="code" href="classvector.html">vector&lt;MC2String&gt;</a> comment;
<a name="l00742"></a><a class="code" href="structExtraDataReader_1_1recordnotices__t.html#o9">00742</a>          OldExtraDataUtility::record_t recType;
00743       };
00744 
<a name="l00745"></a><a class="code" href="classExtraDataReader.html#y1">00745</a>       <span class="keyword">typedef</span> <a class="code" href="classvector.html">vector&lt;recordnotices_t&gt;</a>::iterator recordNoticeIt;
00746 
<a name="l00752"></a><a class="code" href="classExtraDataReader.html#r12">00752</a>       vector &lt;recordnotices_t&gt; m_checkRecordTable;
00753       
00765          <a class="code" href="structExtraDataReader_1_1recordnotices__t.html">recordnotices_t</a>* getRecordWithId(uint32 recordId);
00766 
00772          <span class="keywordtype">bool</span> setRecordChecked(<span class="keywordtype">bool</span> checked, uint32 recId);
00773          
00781          <span class="keywordtype">bool</span> setRecordFoundAndAddMapid(<span class="keywordtype">bool</span> found, uint32 recId);
00782          
00788          <span class="keywordtype">bool</span> setRecordMapChanged(<span class="keywordtype">bool</span> changed, uint32 recId);
00789          
00795          <span class="keywordtype">bool</span> setRecordNeeded(<span class="keywordtype">bool</span> needed, uint32 recId);
00796          
00803          <span class="keywordtype">bool</span> addMapId(uint32 mapId, uint32 recId, <span class="keywordtype">bool</span> addToCandidatesVector);
00804 
00812          <span class="keywordtype">void</span> checkAndAddMapCandidate(ItemTypes::itemType it,
00813                               int32 lat, int32 lon, uint32 recId);
00815 
<a name="l00829"></a><a class="code" href="classExtraDataReader.html#r13">00829</a>       <span class="keywordtype">bool</span> m_applyOnMergedMaps;
00830 
<a name="l00843"></a><a class="code" href="classExtraDataReader.html#z301_0">00843</a>          <a class="code" href="classvector.html">vector&lt;uint32&gt;</a> m_affectsTurnDescr;
<a name="l00849"></a><a class="code" href="classExtraDataReader.html#z301_1">00849</a>          <a class="code" href="classvector.html">vector&lt;uint32&gt;</a> m_affectsStreets;
<a name="l00854"></a><a class="code" href="classExtraDataReader.html#z301_2">00854</a>          <a class="code" href="classvector.html">vector&lt;uint32&gt;</a> m_affectsMap;
00856 
00864       <span class="keywordtype">bool</span> turndirAndStreetsInMergedUnderviewMaps();
00865 
<a name="l00871"></a><a class="code" href="structExtraDataReader_1_1connInfo__t.html">00871</a>       <span class="keyword">struct </span><a class="code" href="structExtraDataReader_1_1connInfo__t.html">connInfo_t</a> {
<a name="l00872"></a><a class="code" href="structExtraDataReader_1_1connInfo__t.html#o0">00872</a>          <a class="code" href="Types_8h.html#a21">uint32</a> toNodeId;
<a name="l00873"></a><a class="code" href="structExtraDataReader_1_1connInfo__t.html#o1">00873</a>          ItemTypes::turndirection_t turndir;
<a name="l00874"></a><a class="code" href="structExtraDataReader_1_1connInfo__t.html#o2">00874</a>          ItemTypes::crossingkind_t crossing;
00875       };
00876       
<a name="l00881"></a><a class="code" href="classExtraDataReader.html#r14">00881</a>       <a class="code" href="classmap.html">map&lt;OldConnection*, connInfo_t&gt;</a> m_connectionInfo;
00882       
00887       <span class="keyword">inline</span> <span class="keywordtype">void</span> fillConnectionInfo();
00888 
<a name="l00895"></a><a class="code" href="classExtraDataReader.html#r15">00895</a>       <a class="code" href="classmap.html">map&lt;OldConnection*, connInfo_t&gt;</a> m_addedTurnDescrRecords;
00896       
<a name="l00901"></a><a class="code" href="classExtraDataReader.html#r16">00901</a>       multimap&lt;uint32, uint32&gt; m_itemsAffectedInUVMaps;
00902 
00910       <span class="keyword">inline</span> <span class="keywordtype">bool</span> addItemAsAffected(uint32 itemId);
00911 
00921       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> addItemsAsAffected(<a class="code" href="classvector.html">vector&lt;uint32&gt;</a> affectVector,
00922                                        <span class="keywordtype">bool</span> itemids = <span class="keyword">true</span>); <span class="comment">// else node ids</span>
00923 
00930       <span class="keyword">inline</span> <span class="keywordtype">bool</span> itemAffected(uint32 itemId);
00931 
00945          <span class="keywordtype">bool</span> getExtradataTimeForMap();
00946 
00956          <span class="keywordtype">bool</span> getExtradataRecordTime(<span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; commentDateAndTime);
00957 
00968          <span class="keywordtype">bool</span> applyCurrentRecordDynamic();
00970 };
00971 
00972 
00973 <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l00974"></a><a class="code" href="classExtraDataReader.html#d7">00974</a> <a class="code" href="classExtraDataReader.html#d7">ExtraDataReader::getStringFromBool</a>(<span class="keywordtype">bool</span> boolVal)<span class="keyword"> const</span>
00975 <span class="keyword"></span>{
00976    <span class="keywordflow">if</span> (boolVal)
00977       <span class="keywordflow">return</span> <span class="stringliteral">"true"</span>;
00978    
00979    <span class="keywordflow">return</span> <span class="stringliteral">"false"</span>;
00980 }
00981 
00982 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00983"></a><a class="code" href="classExtraDataReader.html#a9">00983</a> <a class="code" href="classExtraDataReader.html#a9">ExtraDataReader::getNbrRecordsInEDFile</a>()
00984 {
00985    <span class="keywordflow">return</span> m_curLineNumber;
00986 }
00987 
00988 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00989"></a><a class="code" href="classExtraDataReader.html#a8">00989</a> <a class="code" href="classExtraDataReader.html#a8">ExtraDataReader::getNbrRecordsAdded</a>()
00990 {
00991    <span class="keywordflow">return</span> m_nbrRecordsAdded;
00992 }
00993 
00994 <a class="code" href="classvector.html">vector&lt;int&gt;</a>
<a name="l00995"></a><a class="code" href="classExtraDataReader.html#a10">00995</a> <a class="code" href="classExtraDataReader.html#a10">ExtraDataReader::getRecordsAddedToMaps</a>()
00996 {
00997    <span class="keywordflow">return</span> m_recordsAddedToMaps;
00998 }
00999 
01000 multimap&lt;uint32, uint32&gt;
<a name="l01001"></a><a class="code" href="classExtraDataReader.html#a7">01001</a> <a class="code" href="classExtraDataReader.html#a7">ExtraDataReader::getItemsAffectedInUVMaps</a>()
01002 {
01003    <span class="keywordflow">return</span> m_itemsAffectedInUVMaps;
01004 }
01005 
01006 <span class="keywordtype">bool</span>
<a name="l01007"></a><a class="code" href="classExtraDataReader.html#d14">01007</a> <a class="code" href="classExtraDataReader.html#d14">ExtraDataReader::addItemAsAffected</a>(uint32 itemId)
01008 {
01009    <span class="keywordflow">if</span> (!<a class="code" href="classExtraDataReader.html#d16">itemAffected</a>(itemId)) {
01010       <a class="code" href="classExtraDataReader.html#r16">m_itemsAffectedInUVMaps</a>.insert(make_pair(<a class="code" href="classExtraDataReader.html#r5">m_map</a>-&gt;<a class="code" href="classOldGenericMapHeader.html#a5">getMapID</a>(), itemId));
01011       <span class="keywordflow">return</span> <span class="keyword">true</span>;
01012    }
01013    <span class="keywordflow">return</span> <span class="keyword">false</span>;
01014 }
01015 
01016 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l01017"></a><a class="code" href="classExtraDataReader.html#d15">01017</a> <a class="code" href="classExtraDataReader.html#d15">ExtraDataReader::addItemsAsAffected</a>(<a class="code" href="classvector.html">vector&lt;uint32&gt;</a> affectVector,
01018                                    <span class="keywordtype">bool</span> itemids)
01019 {
01020    <a class="code" href="Types_8h.html#a21">uint32</a> nbrAdded = 0;
01021    <span class="keywordflow">for</span> (<a class="code" href="classvector.html">vector&lt;uint32&gt;</a>::const_iterator it = affectVector.begin();
01022         it != affectVector.end(); it++) {
01023 
01024       <span class="comment">// add to m_itemsAffectedInUVMaps</span>
01025       <a class="code" href="Types_8h.html#a21">uint32</a> <span class="keywordtype">id</span> = (*it);
01026       <span class="keywordflow">if</span> (!itemids)
01027          <span class="keywordtype">id</span> &amp;= 0x7fffffff;
01028       <span class="keywordflow">if</span> (<a class="code" href="classExtraDataReader.html#d14">addItemAsAffected</a>(<span class="keywordtype">id</span>))
01029          nbrAdded++;
01030    }
01031 
01032    <span class="keywordflow">return</span> nbrAdded;
01033 }
01034 
01035 <span class="keywordtype">bool</span>
<a name="l01036"></a><a class="code" href="classExtraDataReader.html#d16">01036</a> <a class="code" href="classExtraDataReader.html#d16">ExtraDataReader::itemAffected</a>(uint32 itemId)
01037 {
01038    <span class="keywordtype">bool</span> <a class="code" href="classExtraDataReader.html#d16">itemAffected</a> = <span class="keyword">false</span>;
01039 
01040    <a class="code" href="Types_8h.html#a21">uint32</a> mapId = <a class="code" href="classExtraDataReader.html#r5">m_map</a>-&gt;<a class="code" href="classOldGenericMapHeader.html#a5">getMapID</a>();
01041    <span class="keywordflow">if</span> (<a class="code" href="classExtraDataReader.html#r16">m_itemsAffectedInUVMaps</a>.count(mapId) == 0)
01042       <span class="keywordflow">return</span> <span class="keyword">false</span>;
01043    
01044    <span class="comment">// Loop the m_itemsAffectedInUVMaps mmap and check if itemid </span>
01045    <span class="comment">// is already present in this map.</span>
01046    <span class="keywordtype">bool</span> cont = <span class="keyword">true</span>;
01047    multimap&lt;uint32, uint32&gt;::const_iterator it = 
01048                               <a class="code" href="classExtraDataReader.html#r16">m_itemsAffectedInUVMaps</a>.lower_bound(mapId);
01049    <span class="keywordflow">while</span> (cont &amp;&amp; !itemAffected &amp;&amp;
01050           (it != <a class="code" href="classExtraDataReader.html#r16">m_itemsAffectedInUVMaps</a>.upper_bound(mapId))) {
01051       <span class="keywordflow">if</span> (it-&gt;first != mapId)
01052          cont = <span class="keyword">false</span>;
01053       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it-&gt;second == itemId)
01054          itemAffected = <span class="keyword">true</span>;
01055       <span class="keywordflow">else</span>
01056          it++;
01057    }
01058 
01059    <span class="keywordflow">return</span> itemAffected;
01060 }
01061 
01062 <span class="preprocessor">#endif // EXTRADATAREADER_H</span>
01063 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:46 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
