<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: RoutingMap.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000010.html">Modules</a>&nbsp;/&nbsp;<a class="el" href="dir_000022.html">RouteModule</a>&nbsp;/&nbsp;<a class="el" href="dir_000023.html">include</a></div>
<h1>RoutingMap.h</h1><a href="RoutingMap_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef ROUTINGMAP_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define ROUTINGMAP_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include &lt;iostream&gt;</span>
00019 <span class="preprocessor">#include&lt;set&gt;</span>
00020 <span class="preprocessor">#include&lt;map&gt;</span>
00021 <span class="preprocessor">#include&lt;vector&gt;</span>
00022 <span class="preprocessor">#if defined (__GNUC__) &amp;&amp; __GNUC__ &gt; 2</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#include &lt;ext/algorithm&gt;</span>
00024 <span class="keyword">using</span> <span class="keyword">namespace </span>__gnu_cxx;
00025 <span class="preprocessor">#else</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#include &lt;algorithm&gt;</span>
00027 <span class="keyword">using</span> <span class="keyword">namespace </span>std;
00028 <span class="preprocessor">#endif</span>
00029 <span class="preprocessor"></span>
00030 <span class="comment">// There are some more includes below the class.</span>
00031 
00032 <span class="preprocessor">#include "<a class="code" href="IDPairVector_8h.html">IDPairVector.h</a>"</span>
00033 <span class="preprocessor">#include "<a class="code" href="IDTranslationTable_8h.html">IDTranslationTable.h</a>"</span>
00034 <span class="preprocessor">#include "<a class="code" href="RouteConstants_8h.html">RouteConstants.h</a>"</span>
00035 <span class="preprocessor">#include "<a class="code" href="RMTypes_8h.html">RMTypes.h</a>"</span>
00036 
00037 <span class="keyword">class </span><a class="code" href="classMapSafeVector.html">MapSafeVector</a>;
00038 <span class="keyword">class </span><a class="code" href="classDataBuffer.html">DataBuffer</a>;
00039 <span class="keyword">class </span><a class="code" href="classReadable.html">Readable</a>;
00040 <span class="keyword">class </span><a class="code" href="classTimeTableContainer.html">TimeTableContainer</a>;
00041 <span class="keyword">class </span><a class="code" href="classRoutingNode.html">RoutingNode</a>;
00042 <span class="keyword">class </span><a class="code" href="classOrigDestNode.html">OrigDestNode</a>;
00043 
00044 <span class="keyword">class </span><a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>;
00045 <span class="keyword">class </span><a class="code" href="classDisturbanceVector.html">DisturbanceVector</a>;
00046 <span class="keyword">class </span><a class="code" href="classRoutingConnection.html">RoutingConnection</a>;
00047 <span class="keyword">class </span><a class="code" href="classRoutingConnectionData.html">RoutingConnectionData</a>;
00048 <span class="keyword">class </span>RoutingConnectionAndDataPair;
00049 <span class="keyword">class </span><a class="code" href="classExternalRoutingConnection.html">ExternalRoutingConnection</a>;
00050 
00051 <span class="keyword">class </span><a class="code" href="classDisturbanceStorage.html">DisturbanceStorage</a>;
00052 
<a name="l00068"></a><a class="code" href="classRoutingMap.html">00068</a> <span class="keyword">class </span><a class="code" href="classRoutingMap.html">RoutingMap</a> 
00069 {
00070 <span class="keyword">public</span>:
00071    
00076    <a class="code" href="classRoutingMap.html">RoutingMap</a>( <a class="code" href="Types_8h.html#a21">uint32</a> mapID );
00077    
00081    ~<a class="code" href="classRoutingMap.html">RoutingMap</a>();
00082 
00086    <a class="code" href="classRoutingNode.html">RoutingNode</a>* createDestNodes( <span class="keywordtype">int</span> nbr );
00087    
00102    <span class="keywordtype">bool</span> <a class="code" href="namespaceTileFeatureScaleRange.html#a4">load</a>( <a class="code" href="Types_8h.html#a21">uint32</a>&amp; mapSize, <a class="code" href="classMapSafeVector.html">MapSafeVector</a>* loadedMaps);
00103    
00108    <span class="keywordtype">void</span> reset();
00109    
00114    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getMapID() <span class="keyword">const</span>;
00115    
00119    <span class="keyword">inline</span> <span class="keyword">const</span> set&lt;uint32&gt;* getNeighbourMapIDs() <span class="keyword">const</span>;
00120 
00128    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getMapAtLevel(<a class="code" href="Types_8h.html#a21">uint32</a> level) <span class="keyword">const</span>;
00129    
00135    <span class="keyword">inline</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* getNode(<a class="code" href="Types_8h.html#a21">uint32</a> index);
00136    
00143    <a class="code" href="classRoutingNode.html">RoutingNode</a>* getNodeFromTrueNodeNumber(<a class="code" href="Types_8h.html#a21">uint32</a> nodeID);
00144    
00150    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getNbrNodes() <span class="keyword">const</span>;
00151    
00156    <span class="keyword">inline</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* getExternalNodes();
00157    
00162    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getNumExternalNodes();
00163    
00169    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> binarySearch( <a class="code" href="Types_8h.html#a21">uint32</a> itemID );
00170    
00175    <span class="keyword">inline</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>* getMC2BoundingBox();
00176 
00177 <span class="keyword">public</span>:
00185    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> translateToHigher(<a class="code" href="Types_8h.html#a21">uint32</a> mapID,
00186                                    <a class="code" href="Types_8h.html#a21">uint32</a> nodeID);
00187 
00194    <span class="keyword">inline</span> <a class="code" href="classIDPair__t.html">IDPair_t</a> translateToHigher(<span class="keyword">const</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>&amp; lowerPair);
00195    
00203    <span class="keyword">inline</span> <a class="code" href="classIDPair__t.html">IDPair_t</a> translateToLower(<a class="code" href="Types_8h.html#a21">uint32</a> nodeID);
00204 
00213    <span class="keyword">inline</span> <a class="code" href="classIDPair__t.html">IDPair_t</a> translateToLower(<span class="keyword">const</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>&amp; higherPair);
00214 
00215 
00216    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getEstCost(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node) <span class="keyword">const</span>;
00217 
00218    <span class="keyword">inline</span> <span class="keywordtype">void</span> setEstCost(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, <a class="code" href="Types_8h.html#a21">uint32</a> cost);
00219    
00220    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getRealCost(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node) <span class="keyword">const</span>;
00221 
00222    <span class="keyword">inline</span> <span class="keywordtype">void</span> setRealCost(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, <a class="code" href="Types_8h.html#a21">uint32</a> cost);
00223 
00224    <span class="keyword">inline</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* getGradient(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node) <span class="keyword">const</span>;
00225 
00226    <span class="keyword">inline</span> <span class="keywordtype">void</span> setGradient(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, <a class="code" href="classRoutingNode.html">RoutingNode</a>* gradient);
00227    
00228    <span class="keyword">inline</span> <span class="keywordtype">bool</span> isDest(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node) <span class="keyword">const</span>;
00229 
00230    <span class="keyword">inline</span> <span class="keywordtype">void</span> setDest(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, <span class="keywordtype">bool</span> isDest);
00231 
00232    <span class="keyword">inline</span> <span class="keywordtype">bool</span> isVisited(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node) <span class="keyword">const</span>;
00233 
00234    <span class="keyword">inline</span> <span class="keywordtype">void</span> setVisited(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, <span class="keywordtype">bool</span> visited);
00235 
00239    <span class="keywordtype">void</span> dump();
00240    
00244    <span class="keywordtype">void</span> dumpExternal();
00245    
00251    <span class="keywordtype">void</span> dumpAllRouteCosts(ofstream&amp; outfile);
00252    
00258    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getRandomItemID();
00259    
00268    <a class="code" href="Types_8h.html#a21">uint32</a> getNextDepartureTime( <a class="code" href="Types_8h.html#a19">uint16</a> lineID, <a class="code" href="Types_8h.html#a21">uint32</a> nodeID, <a class="code" href="Types_8h.html#a21">uint32</a> time );
00269 
00273    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a17">uint8</a> getInfinity() <span class="keyword">const</span>;
00274 
00279    <a class="code" href="classOrigDestNode.html">OrigDestNode</a>* newOrigDestNode(<a class="code" href="Types_8h.html#a21">uint32</a> index,
00280                                  <a class="code" href="Types_8h.html#a21">uint32</a> mapID,
00281                                  <a class="code" href="Types_8h.html#a19">uint16</a> offset,
00282                                  <a class="code" href="Types_8h.html#a21">uint32</a> lat,
00283                                  <a class="code" href="Types_8h.html#a21">uint32</a> lon,
00284                                  <a class="code" href="Types_8h.html#a21">uint32</a> cost,
00285                                  <a class="code" href="Types_8h.html#a21">uint32</a> estCost,
00286                                  <a class="code" href="Types_8h.html#a21">uint32</a> costASum,
00287                                  <a class="code" href="Types_8h.html#a21">uint32</a> costBSum,
00288                                  <a class="code" href="Types_8h.html#a21">uint32</a> costCSum);
00289 
00294    <a class="code" href="classOrigDestNode.html">OrigDestNode</a>* newOrigDestNode( <span class="keyword">const</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>&amp; <span class="keywordtype">id</span>,
00295                                   <a class="code" href="Types_8h.html#a19">uint16</a> offset );
00296 
00297    
00298 <span class="comment">//-----------------------------------------------------------------------</span>
00299 <span class="comment">// "Map editing"-functions start here</span>
00300 <span class="comment">//-----------------------------------------------------------------------   </span>
00301 
00302 
00309    <span class="keywordtype">int</span> rollBack(<span class="keywordtype">bool</span> temporary);
00310 
00322    <span class="keywordtype">void</span> changeConnectionCosts( <a class="code" href="classRoutingNode.html">RoutingNode</a>* node,
00323                                <a class="code" href="classRoutingConnection.html">RoutingConnection</a>* conn,
00324                                <a class="code" href="classDisturbanceStorage.html">DisturbanceStorage</a>* rollBackStack,
00325                                <a class="code" href="Types_8h.html#a21">uint32</a> costA,
00326                                <a class="code" href="Types_8h.html#a21">uint32</a> costB,
00327                                <a class="code" href="Types_8h.html#a21">uint32</a> costC,
00328                                <a class="code" href="Types_8h.html#a21">uint32</a> vehicleRestrictions);
00329 
00342    <span class="keywordtype">void</span> changeConnectionCosts( <a class="code" href="classRoutingNode.html">RoutingNode</a>* node,
00343                                <a class="code" href="classRoutingConnection.html">RoutingConnection</a>* conn,
00344                                <span class="keywordtype">bool</span> temporary,
00345                                <a class="code" href="Types_8h.html#a21">uint32</a> costA,
00346                                <a class="code" href="Types_8h.html#a21">uint32</a> costB,
00347                                <a class="code" href="Types_8h.html#a21">uint32</a> costC,
00348                                <a class="code" href="Types_8h.html#a21">uint32</a> vehicleRestrictions);
00349    
00356    <a class="code" href="Types_8h.html#a21">uint32</a> changeNodeCost( <a class="code" href="classRoutingNode.html">RoutingNode</a>* node,
00357                           <span class="keywordtype">float</span> factor,
00358                           <a class="code" href="classDisturbanceStorage.html">DisturbanceStorage</a>* rollBackStack);
00359 
00366    <a class="code" href="Types_8h.html#a21">uint32</a> changeNodeCost( <a class="code" href="Types_8h.html#a21">uint32</a> nodeID,
00367                           <span class="keywordtype">float</span> factor,
00368                           <span class="keywordtype">bool</span> temporary);
00369 
00378    <a class="code" href="Types_8h.html#a21">uint32</a> setConnections(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node,
00379                          <a class="code" href="classRoutingConnection.html">RoutingConnection</a>* firstNewConnection,
00380                          <span class="keywordtype">bool</span> forward,
00381                          <a class="code" href="classDisturbanceStorage.html">DisturbanceStorage</a>* rollBackStack);
00382                          
00383    
00390    <a class="code" href="Types_8h.html#a21">uint32</a> avoidNode( <a class="code" href="Types_8h.html#a21">uint32</a> nodeID,
00391                      <span class="keywordtype">bool</span> temporary );
00392 
00403    <a class="code" href="Types_8h.html#a21">uint32</a> multiplyNodeCost(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node,
00404                            <a class="code" href="Types_8h.html#a21">uint32</a> infoModuleFactor );
00405 
00410    <a class="code" href="Types_8h.html#a21">uint32</a> restoreConnections(<a class="code" href="classRoutingNode.html">RoutingNode</a>* mode);
00411    
00417    <span class="keywordtype">int</span> addDisturbances(<span class="keyword">const</span> <a class="code" href="classDisturbanceVector.html">DisturbanceVector</a>* distVect,
00418                        <span class="keywordtype">bool</span> temporary = <span class="keyword">true</span>);
00419 
00432    <span class="keyword">inline</span> <span class="keywordtype">bool</span> checkTempDisturbances(<a class="code" href="Types_8h.html#a21">uint32</a> fromID,
00433                                      <a class="code" href="Types_8h.html#a21">uint32</a> toID,
00434                                      <a class="code" href="Types_8h.html#a21">uint32</a>&amp; costA,
00435                                      <a class="code" href="Types_8h.html#a21">uint32</a>&amp; costB,
00436                                      <a class="code" href="Types_8h.html#a21">uint32</a>&amp; costC,
00437                                      <a class="code" href="Types_8h.html#a21">uint32</a>&amp; costD) <span class="keyword">const</span>;
00438 
00450    <span class="keyword">inline</span> <span class="keywordtype">bool</span> lookupExpandedNodes( set&lt;fromToNode_t&gt;&amp; nodes,
00451                                     <a class="code" href="Types_8h.html#a21">uint32</a> nodeID) <span class="keyword">const</span>;
00452    
00453 <span class="keyword">private</span>:
00454 
00463    <span class="keyword">inline</span> <span class="keywordtype">int</span> SEARCH_COMP( <a class="code" href="Types_8h.html#a21">uint32</a> key, <a class="code" href="Types_8h.html#a21">uint32</a> val );
00464    
00472    <span class="keywordtype">bool</span> loadMapFromSocket(<a class="code" href="classReadable.html">Readable</a>* TCPSock,
00473                           <a class="code" href="Types_8h.html#a21">uint32</a>&amp; mapSize);
00474 
00480    <span class="keywordtype">bool</span> readMapHierarchy(<a class="code" href="classReadable.html">Readable</a>* socket);
00481    
00488    <span class="keywordtype">bool</span> readNodeExpansionTable(<a class="code" href="classReadable.html">Readable</a>* socket);
00489    
00496    <span class="keywordtype">bool</span> processNodeData( <a class="code" href="classDataBuffer.html">DataBuffer</a>* buff, <a class="code" href="Types_8h.html#a21">uint32</a> nbrNodes);
00497    
00507    <span class="keywordtype">bool</span> processConnectionData( <a class="code" href="classDataBuffer.html">DataBuffer</a>* buff,
00508                                <span class="keywordtype">int</span> nbrConnections);
00509    
00519    <span class="keywordtype">bool</span> processOppositConnectionData( <a class="code" href="classDataBuffer.html">DataBuffer</a>&amp; buf,
00520                                       <span class="keywordtype">int</span> nbrConnections);
00521    
00529    <span class="keywordtype">bool</span> processExternalNodeData( <a class="code" href="classDataBuffer.html">DataBuffer</a>* buff, <a class="code" href="Types_8h.html#a21">uint32</a> nbrNodes);
00530    
00539    <span class="keywordtype">bool</span> processExternalConnectionData( <a class="code" href="classDataBuffer.html">DataBuffer</a>* buff,
00540                                        <span class="keywordtype">int</span> nbrConnections);
00541    
00556    <span class="keywordtype">bool</span> setBuffertData(<a class="code" href="classReadable.html">Readable</a>* socket, <a class="code" href="Types_8h.html#a21">uint32</a> &amp;nbrDataItems, 
00557                        <a class="code" href="Types_8h.html#a21">uint32</a> &amp;dataSize);
00558    
00565    <span class="keywordtype">void</span> createHigherLevelTable( <a class="code" href="classDataBuffer.html">DataBuffer</a>* buff);
00566    
00570    <span class="keywordtype">void</span> updateConnections();
00571    
00576    <span class="keywordtype">void</span> deleteAllMapData();
00577   
00578    
00579    <span class="comment">// ==================================================================</span>
00580    <span class="comment">//                                                 Member variables =</span>
00581    <span class="comment">// ==================================================================</span>
00582    
<a name="l00587"></a><a class="code" href="classRoutingMap.html#r0">00587</a>    <a class="code" href="classRoutingNode.html">RoutingNode</a>* m_externalNodeVector;
00588      
<a name="l00592"></a><a class="code" href="classRoutingMap.html#r1">00592</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrExternalNodes;
00593    
<a name="l00597"></a><a class="code" href="classRoutingMap.html#r2">00597</a>    <a class="code" href="classRoutingNode.html">RoutingNode</a>* m_nodeVector;
00598 
<a name="l00602"></a><a class="code" href="classRoutingMap.html#r3">00602</a>    <a class="code" href="Types_8h.html#a21">uint32</a>* m_estCosts;
00603 
<a name="l00607"></a><a class="code" href="classRoutingMap.html#r4">00607</a>    <a class="code" href="Types_8h.html#a21">uint32</a>* m_realCosts;
00608 
<a name="l00612"></a><a class="code" href="classRoutingMap.html#r5">00612</a>    <a class="code" href="classRoutingNode.html">RoutingNode</a>** m_gradients;
00613 
<a name="l00617"></a><a class="code" href="classRoutingMap.html#r6">00617</a>    <a class="code" href="Types_8h.html#a25">byte</a>* m_isDests;
00618    
<a name="l00622"></a><a class="code" href="classRoutingMap.html#r7">00622</a>    <a class="code" href="Types_8h.html#a25">byte</a>* m_isVisiteds;
00623    
<a name="l00627"></a><a class="code" href="classRoutingMap.html#r8">00627</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrNodes;
00628    
<a name="l00632"></a><a class="code" href="classRoutingMap.html#r9">00632</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_mapID;
00633    
<a name="l00637"></a><a class="code" href="classRoutingMap.html#r10">00637</a>    <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>* m_boundingBox;
00638 
<a name="l00643"></a><a class="code" href="classRoutingMap.html#r11">00643</a>    <a class="code" href="classIDTranslationTable.html">IDTranslationTable</a> m_idTranslationTable;
00644    
<a name="l00648"></a><a class="code" href="classRoutingMap.html#r12">00648</a>    <a class="code" href="classTimeTableContainer.html">TimeTableContainer</a>* m_timeTable;
00649    
<a name="l00653"></a><a class="code" href="classRoutingMap.html#r13">00653</a>    <a class="code" href="classDisturbanceStorage.html">DisturbanceStorage</a>* m_mainRollBackStack;
00654 
<a name="l00658"></a><a class="code" href="classRoutingMap.html#r14">00658</a>    <a class="code" href="classDisturbanceStorage.html">DisturbanceStorage</a>* m_tempRollBackStack;
00659       
<a name="l00663"></a><a class="code" href="classRoutingMap.html#r15">00663</a>    set&lt;uint32&gt; m_neighbours;
00664 
<a name="l00669"></a><a class="code" href="classRoutingMap.html#r16">00669</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrExpNodes;
00670    
<a name="l00675"></a><a class="code" href="classRoutingMap.html#r17">00675</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrMultiConnections;
00676 
<a name="l00681"></a><a class="code" href="classRoutingMap.html#r18">00681</a>    <a class="code" href="classnodeIndex__t.html">nodeIndex_t</a>* m_expNodeIndexTable;
00682 
<a name="l00687"></a><a class="code" href="classRoutingMap.html#r19">00687</a>    <a class="code" href="classfromToNode__t.html">fromToNode_t</a>* m_fromToNodeTable;
00688 
<a name="l00692"></a><a class="code" href="classRoutingMap.html#r20">00692</a>    <a class="code" href="Types_8h.html#a17">uint8</a> m_curInf;
00693    
00700    <span class="keywordtype">void</span> allocateConnections(<span class="keywordtype">int</span> nbrConnections);
00701 
00705    <a class="code" href="classRoutingConnection.html">RoutingConnection</a>* getNextConnection();
00706 
00710    <a class="code" href="classRoutingConnectionData.html">RoutingConnectionData</a>* getNextConnectionData();
00711 
00718    <span class="keywordtype">void</span> allocateExternalConnections(<span class="keywordtype">int</span> nbrConnections);
00719 
00724    <a class="code" href="classExternalRoutingConnection.html">ExternalRoutingConnection</a>* getNextExtConnection();
00725 
00730    <a class="code" href="classRoutingConnectionData.html">RoutingConnectionData</a>* getNextExtConnectionData();
00731    
<a name="l00733"></a><a class="code" href="classRoutingMap.html#r21">00733</a>    <a class="code" href="classRoutingConnection.html">RoutingConnection</a>* m_connections;
00735    <span class="comment">//RoutingConnectionData* m_connDatas;</span>
<a name="l00736"></a><a class="code" href="classRoutingMap.html#r22">00736</a>    RoutingConnectionAndDataPair* m_connDatas;
00737    
<a name="l00739"></a><a class="code" href="classRoutingMap.html#r23">00739</a>    <a class="code" href="classExternalRoutingConnection.html">ExternalRoutingConnection</a>* m_extConns;
<a name="l00741"></a><a class="code" href="classRoutingMap.html#r24">00741</a>    <a class="code" href="classRoutingConnectionData.html">RoutingConnectionData</a>* m_extConnDatas;
<a name="l00743"></a><a class="code" href="classRoutingMap.html#r25">00743</a>    <span class="keywordtype">int</span> m_nbrAllocatedConnections;
<a name="l00745"></a><a class="code" href="classRoutingMap.html#r26">00745</a>    <span class="keywordtype">int</span> m_nbrAllocatedConnDatas;
<a name="l00747"></a><a class="code" href="classRoutingMap.html#r27">00747</a>    <span class="keywordtype">int</span> m_nextFreeConnIndex;
<a name="l00749"></a><a class="code" href="classRoutingMap.html#r28">00749</a>    <span class="keywordtype">int</span> m_nextFreeConnDataIndex;
<a name="l00751"></a><a class="code" href="classRoutingMap.html#r29">00751</a>    <span class="keywordtype">int</span> m_nbrAllocatedExtConns;
<a name="l00753"></a><a class="code" href="classRoutingMap.html#r30">00753</a>    <span class="keywordtype">int</span> m_nbrAllocatedExtConnDatas;
<a name="l00755"></a><a class="code" href="classRoutingMap.html#r31">00755</a>    <span class="keywordtype">int</span> m_nextFreeExtConnIndex;
<a name="l00757"></a><a class="code" href="classRoutingMap.html#r32">00757</a>    <span class="keywordtype">int</span> m_nextFreeExtConnDataIndex;
00758 
<a name="l00760"></a><a class="code" href="classRoutingMap.html#y0">00760</a>    <span class="keyword">typedef</span> <a class="code" href="classmap.html">map&lt;uint32, uint32&gt;</a> <a class="code" href="classmap.html">levelMap_t</a>;
00761 
<a name="l00763"></a><a class="code" href="classRoutingMap.html#r33">00763</a>    levelMap_t m_levels;
00764 };
00765 
00766 <span class="preprocessor">#include "<a class="code" href="RoutingNode_8h.html">RoutingNode.h</a>"</span>
00767 <span class="preprocessor">#include "<a class="code" href="DisturbanceStorage_8h.html">DisturbanceStorage.h</a>"</span>
00768 
00769 <span class="comment">// ========================================================================</span>
00770 <span class="comment">//                                      Implementation of inlined methods =</span>
00771 <span class="comment">// ========================================================================</span>
00772 
00773 <span class="comment">// -- Methods to be used later. Problem with the OrigDestNode.</span>
00774 
00775 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00776"></a><a class="code" href="classRoutingMap.html#a19">00776</a> <a class="code" href="classRoutingMap.html#a19">RoutingMap::getEstCost</a>(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node)<span class="keyword"> const</span>
00777 <span class="keyword"></span>{
00778    <span class="keywordflow">return</span> <a class="code" href="classRoutingMap.html#r3">m_estCosts</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()];
00779 }
00780 
00781 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00782"></a><a class="code" href="classRoutingMap.html#a20">00782</a> <a class="code" href="classRoutingMap.html#a20">RoutingMap::setEstCost</a>(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, uint32 cost)
00783 {
00784    <a class="code" href="classRoutingMap.html#r3">m_estCosts</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()] = cost;
00785 }
00786 
00787 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00788"></a><a class="code" href="classRoutingMap.html#a21">00788</a> <a class="code" href="classRoutingMap.html#a21">RoutingMap::getRealCost</a>(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node)<span class="keyword"> const</span>
00789 <span class="keyword"></span>{
00790    <span class="keywordflow">return</span> <a class="code" href="classRoutingMap.html#r4">m_realCosts</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()];
00791 }
00792 
00793 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00794"></a><a class="code" href="classRoutingMap.html#a22">00794</a> <a class="code" href="classRoutingMap.html#a22">RoutingMap::setRealCost</a>(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, uint32 cost)
00795 {
00796    <a class="code" href="classRoutingMap.html#r4">m_realCosts</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()] = cost;
00797 }
00798 
00799 <span class="keyword">inline</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>*
<a name="l00800"></a><a class="code" href="classRoutingMap.html#a23">00800</a> <a class="code" href="classRoutingMap.html#a23">RoutingMap::getGradient</a>(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node)<span class="keyword"> const</span>
00801 <span class="keyword"></span>{
00802    <span class="keywordflow">return</span> <a class="code" href="classRoutingMap.html#r5">m_gradients</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()];
00803 }
00804 
00805 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00806"></a><a class="code" href="classRoutingMap.html#a24">00806</a> <a class="code" href="classRoutingMap.html#a24">RoutingMap::setGradient</a>(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, <a class="code" href="classRoutingNode.html">RoutingNode</a>* gradient)
00807 {
00808    <a class="code" href="classRoutingMap.html#r5">m_gradients</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()] = gradient;
00809 }
00810 
00811 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00812"></a><a class="code" href="classRoutingMap.html#a25">00812</a> <a class="code" href="classRoutingMap.html#a25">RoutingMap::isDest</a>(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node)<span class="keyword"> const</span>
00813 <span class="keyword"></span>{
00814    <span class="keywordflow">return</span> bool(<a class="code" href="classRoutingMap.html#r6">m_isDests</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()]);
00815 }
00816 
00817 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00818"></a><a class="code" href="classRoutingMap.html#a26">00818</a> <a class="code" href="classRoutingMap.html#a26">RoutingMap::setDest</a>(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, <span class="keywordtype">bool</span> isDest)
00819 {
00820    <a class="code" href="classRoutingMap.html#r6">m_isDests</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()] = isDest;
00821 }
00822 
00823 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00824"></a><a class="code" href="classRoutingMap.html#a27">00824</a> <a class="code" href="classRoutingMap.html#a27">RoutingMap::isVisited</a>(<span class="keyword">const</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>* node)<span class="keyword"> const</span>
00825 <span class="keyword"></span>{
00826    <span class="keywordflow">return</span> bool(<a class="code" href="classRoutingMap.html#r7">m_isVisiteds</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()]);
00827 }
00828 
00829 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00830"></a><a class="code" href="classRoutingMap.html#a28">00830</a> <a class="code" href="classRoutingMap.html#a28">RoutingMap::setVisited</a>(<a class="code" href="classRoutingNode.html">RoutingNode</a>* node, <span class="keywordtype">bool</span> visited)
00831 {
00832    <a class="code" href="classRoutingMap.html#r7">m_isVisiteds</a>[node-&gt;<a class="code" href="classRoutingNode.html#a3">getIndex</a>()] = visited;
00833 }
00834 
00835 <span class="comment">// -- End</span>
00836 
00837 
00838 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00839"></a><a class="code" href="classRoutingMap.html#a5">00839</a> <a class="code" href="classRoutingMap.html#a5">RoutingMap::getMapID</a>()<span class="keyword"> const</span>
00840 <span class="keyword"></span>{
00841    <span class="keywordflow">return</span> m_mapID;
00842 }
00843 
00844 <span class="keyword">inline</span> <span class="keyword">const</span> set&lt;uint32&gt;*
<a name="l00845"></a><a class="code" href="classRoutingMap.html#a6">00845</a> <a class="code" href="classRoutingMap.html#a6">RoutingMap::getNeighbourMapIDs</a>()<span class="keyword"> const</span>
00846 <span class="keyword"></span>{
00847    <span class="keywordflow">return</span> &amp;m_neighbours;
00848 }
00849 
00850 <span class="keyword">inline</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>*
<a name="l00851"></a><a class="code" href="classRoutingMap.html#a8">00851</a> <a class="code" href="classRoutingMap.html#a8">RoutingMap::getNode</a>( uint32 index )
00852 {
00853    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( index &lt; <a class="code" href="classRoutingMap.html#r8">m_nbrNodes</a> );
00854    
00855    <span class="keywordflow">return</span> &amp;<a class="code" href="classRoutingMap.html#r2">m_nodeVector</a>[index];
00856 }
00857 
00858 
00859 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00860"></a><a class="code" href="classRoutingMap.html#a10">00860</a> <a class="code" href="classRoutingMap.html#a10">RoutingMap::getNbrNodes</a>()<span class="keyword"> const</span>
00861 <span class="keyword"></span>{
00862    <span class="keywordflow">return</span> m_nbrNodes;
00863 }
00864 
00865 
00866 <span class="keyword">inline</span> <a class="code" href="classRoutingNode.html">RoutingNode</a>*
<a name="l00867"></a><a class="code" href="classRoutingMap.html#a11">00867</a> <a class="code" href="classRoutingMap.html#a11">RoutingMap::getExternalNodes</a>()
00868 {
00869    <span class="keywordflow">return</span> m_externalNodeVector;
00870 }
00871 
00872 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00873"></a><a class="code" href="classRoutingMap.html#a12">00873</a> <a class="code" href="classRoutingMap.html#a12">RoutingMap::getNumExternalNodes</a>()
00874 {
00875    <span class="keywordflow">return</span> m_nbrExternalNodes;
00876 }
00877 
00878 <span class="keyword">inline</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>*
<a name="l00879"></a><a class="code" href="classRoutingMap.html#a14">00879</a> <a class="code" href="classRoutingMap.html#a14">RoutingMap::getMC2BoundingBox</a>()
00880 {
00881    <span class="keywordflow">return</span> m_boundingBox;
00882 }
00883       
00884 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00885"></a><a class="code" href="classRoutingMap.html#a15">00885</a> <a class="code" href="classRoutingMap.html#a15">RoutingMap::translateToHigher</a>(uint32 mapID,
00886                               uint32 nodeID)
00887 {
00888    <span class="comment">// Save the node number </span>
00889    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> nodePattern = <a class="code" href="Types_8h.html#a11">GET_UINT32_MSB</a>( nodeID );
00890 
00891    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> itemID =
00892       <a class="code" href="classRoutingMap.html#r11">m_idTranslationTable</a>.<a class="code" href="classIDTranslationTable.html#a7">translateToHigher</a>(mapID,
00893                                              <a class="code" href="Types_8h.html#a10">REMOVE_UINT32_MSB</a>(nodeID));
00894 
00895    <span class="keywordflow">return</span> nodePattern | itemID;
00896 
00897 }
00898 
00899 <span class="keyword">inline</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>
<a name="l00900"></a><a class="code" href="classRoutingMap.html#a16">00900</a> <a class="code" href="classRoutingMap.html#a15">RoutingMap::translateToHigher</a>(<span class="keyword">const</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>&amp; lowerPair)
00901 {
00902    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> higherNode = <a class="code" href="classRoutingMap.html#a15">translateToHigher</a>(lowerPair.first,
00903                                                lowerPair.second);
00904    
00905    <span class="keywordflow">if</span> ( higherNode != MAX_UINT32 ) {
00906       <span class="keywordflow">return</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>( <a class="code" href="classRoutingMap.html#a5">getMapID</a>(), higherNode );      
00907    } <span class="keywordflow">else</span> {
00908       <span class="keywordflow">return</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>( <a class="code" href="Types_8h.html#a4">MAX_UINT32</a>, <a class="code" href="Types_8h.html#a4">MAX_UINT32</a> );
00909    }
00910 }
00911 
00912 <span class="keyword">inline</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>
<a name="l00913"></a><a class="code" href="classRoutingMap.html#a17">00913</a> <a class="code" href="classRoutingMap.html#a17">RoutingMap::translateToLower</a>(uint32 nodeID)
00914 {
00915    <span class="comment">// Save the node number</span>
00916    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> nodePattern = <a class="code" href="Types_8h.html#a11">GET_UINT32_MSB</a>( nodeID );
00917 
00918    <a class="code" href="classIDPair__t.html">IDPair_t</a>
00919       id(<a class="code" href="classRoutingMap.html#r11">m_idTranslationTable</a>.<a class="code" href="classIDTranslationTable.html#a9">translateToLower</a>(<a class="code" href="Types_8h.html#a10">REMOVE_UINT32_MSB</a>(nodeID)));
00920 
00921    <span class="keywordtype">id</span>.second |= nodePattern;
00922    <span class="keywordflow">return</span> id;
00923   
00924 }
00925 
00926 <span class="keyword">inline</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>
<a name="l00927"></a><a class="code" href="classRoutingMap.html#a18">00927</a> <a class="code" href="classRoutingMap.html#a17">RoutingMap::translateToLower</a>(<span class="keyword">const</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>&amp; higherPair)
00928 {
00929    <span class="comment">// Check if it's this map</span>
00930    <span class="keywordflow">if</span> ( higherPair.first != <a class="code" href="classRoutingMap.html#a5">getMapID</a>() ) {
00931       <a class="code" href="MC2Logging_8h.html#a0">mc2log</a> &lt;&lt; <a class="code" href="MC2Logging_8h.html#a15">warn</a> &lt;&lt; <a class="code" href="MC2Logging_8h.html#a7">here</a> &lt;&lt; <span class="stringliteral">" wrong map id - should be "</span>
00932                 &lt;&lt; <a class="code" href="classRoutingMap.html#a5">getMapID</a>() &lt;&lt; <span class="stringliteral">" is "</span> &lt;&lt; higherPair.first &lt;&lt; endl;
00933       <span class="keywordflow">return</span> <a class="code" href="classIDPair__t.html">IDPair_t</a>( <a class="code" href="Types_8h.html#a4">MAX_UINT32</a>, <a class="code" href="Types_8h.html#a4">MAX_UINT32</a> );
00934    }
00935 
00936    <span class="comment">// Translate it to lower level.</span>
00937    <span class="keywordflow">return</span> <a class="code" href="classRoutingMap.html#a17">translateToLower</a>( higherPair.second );
00938    
00939 }
00940 
00941 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00942"></a><a class="code" href="classRoutingMap.html#a32">00942</a> <a class="code" href="classRoutingMap.html#a32">RoutingMap::getRandomItemID</a>()
00943 {
00944    <a class="code" href="Types_8h.html#a21">uint32</a> index = <a class="code" href="Types_8h.html#a21">uint32</a>((<span class="keywordtype">double</span>(rand()) / RAND_MAX) * <a class="code" href="classRoutingMap.html#r8">m_nbrNodes</a>);
00945    <span class="keywordflow">return</span> <a class="code" href="Types_8h.html#a10">REMOVE_UINT32_MSB</a>(<a class="code" href="classRoutingMap.html#r2">m_nodeVector</a>[index].getItemID());
00946 }
00947 
<a name="l00948"></a><a class="code" href="classRoutingMap.html#d0">00948</a> <span class="keywordtype">int</span> <a class="code" href="classRoutingMap.html#d0">RoutingMap::SEARCH_COMP</a>( uint32 key, uint32 val ) {
00949    <span class="keywordflow">if</span> (<a class="code" href="classRoutingMap.html#r2">m_nodeVector</a>[val].<a class="code" href="classRoutingNode.html#z390_0">getItemID</a>() == key)
00950       <span class="keywordflow">return</span> 0;
00951    <span class="keywordflow">else</span>
00952       <span class="keywordflow">return</span> (<a class="code" href="classRoutingMap.html#r2">m_nodeVector</a>[val].<a class="code" href="classRoutingNode.html#z390_0">getItemID</a>() &lt; key ) ? 1 : -1;
00953 
00954 }
00955 
00956 
00957 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00958"></a><a class="code" href="classRoutingMap.html#a47">00958</a> <a class="code" href="classRoutingMap.html#a47">RoutingMap::checkTempDisturbances</a>(uint32 fromID,
00959                                   uint32 toID,
00960                                   uint32&amp; costA,
00961                                   uint32&amp; costB,
00962                                   uint32&amp; costC,
00963                                   uint32&amp; costD)<span class="keyword"> const</span>
00964 <span class="keyword"></span>{
00965    <span class="keywordflow">return</span> <a class="code" href="classRoutingMap.html#r14">m_tempRollBackStack</a>-&gt;<a class="code" href="classDisturbanceStorage.html#a6">getOldCosts</a>(fromID,
00966                                            toID,
00967                                            costA,
00968                                            costB,
00969                                            costC,
00970                                            costD);
00971 }
00972 
00973 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00974"></a><a class="code" href="classRoutingMap.html#a7">00974</a> <a class="code" href="classRoutingMap.html#a7">RoutingMap::getMapAtLevel</a>(uint32 level)<span class="keyword"> const</span>
00975 <span class="keyword"></span>{
00976    levelMap_t::const_iterator it = <a class="code" href="classRoutingMap.html#r33">m_levels</a>.find(level);
00977    <span class="keywordflow">if</span> ( it == <a class="code" href="classRoutingMap.html#r33">m_levels</a>.end() ) {
00978       <span class="keywordflow">return</span> MAX_UINT32;
00979    } <span class="keywordflow">else</span> {
00980       <span class="keywordflow">return</span> it-&gt;second;
00981    }
00982 }
00983 
00984 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00985"></a><a class="code" href="classRoutingMap.html#a48">00985</a> <a class="code" href="classRoutingMap.html#a48">RoutingMap::lookupExpandedNodes</a>( set&lt;fromToNode_t&gt;&amp; nodes,
00986                                  uint32 nodeID )<span class="keyword"> const</span>
00987 <span class="keyword"></span>{
00988    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <a class="code" href="classRoutingMap.html#r18">m_expNodeIndexTable</a> != NULL );
00989    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <a class="code" href="classRoutingMap.html#r19">m_fromToNodeTable</a> != NULL );
00990 
00991    <a class="code" href="classnodeIndex__t.html">nodeIndex_t</a> searchKey;
00992    searchKey.first = nodeID;
00993   
00994    <a class="code" href="classnodeIndex__t.html">nodeIndex_t</a>* endOfTable = <a class="code" href="classRoutingMap.html#r18">m_expNodeIndexTable</a> + m_nbrExpNodes;   
00995 
00996    <span class="comment">//Slow MC2_ASSERT( is_sorted( m_expNodeIndexTable, endOfTable ) );</span>
00997    
00998    <span class="comment">// Binary search</span>
00999    pair&lt;nodeIndex_t*, nodeIndex_t*&gt; range = 
01000        equal_range( <a class="code" href="classRoutingMap.html#r18">m_expNodeIndexTable</a>,             
01001                     endOfTable,
01002                     searchKey );
01003 
01004    <span class="keywordflow">for</span>( <a class="code" href="classnodeIndex__t.html">nodeIndex_t</a>* it = range.first;
01005         it != range.second;
01006         ++it ) {
01007       <span class="comment">// Found</span>
01008       <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> index = it-&gt;second;
01009       <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( index &lt; <a class="code" href="classRoutingMap.html#r17">m_nbrMultiConnections</a> );
01010       nodes.insert(<a class="code" href="classRoutingMap.html#r19">m_fromToNodeTable</a>[ index ]);
01011    }
01012    
01013    <span class="keywordflow">return</span> !nodes.empty();
01014    
01015 }
01016 
01017 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l01018"></a><a class="code" href="classRoutingMap.html#a13">01018</a> <a class="code" href="classRoutingMap.html#a13">RoutingMap::binarySearch</a>( uint32 itemID ) 
01019 {
01020    <a class="code" href="Types_8h.html#a21">uint32</a> KEY = itemID;
01021    <a class="code" href="Types_8h.html#a21">uint32</a> <span class="keyword">const</span> SEARCH_START_INDEX = 0;
01022    <a class="code" href="Types_8h.html#a21">uint32</a> <span class="keyword">const</span> SEARCH_STOP_INDEX  = <a class="code" href="classRoutingMap.html#r8">m_nbrNodes</a> - 1;
01023 <span class="preprocessor">#undef SEARCH_COMP   </span>
01024 <span class="preprocessor"></span><span class="preprocessor">#include "binarysearch.src"</span>
01025 
01026    <span class="keywordflow">return</span> RESULT_INDEX;
01027 }
01028 
01029 <span class="keyword">inline</span>
01030 <a class="code" href="Types_8h.html#a17">uint8</a>
<a name="l01031"></a><a class="code" href="classRoutingMap.html#a34">01031</a> <a class="code" href="classRoutingMap.html#a34">RoutingMap::getInfinity</a>()<span class="keyword"> const</span>
01032 <span class="keyword"></span>{
01033    <span class="keywordflow">return</span> m_curInf;
01034 }
01035 
01036 
01037 <span class="preprocessor">#endif</span>
01038 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:50 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
