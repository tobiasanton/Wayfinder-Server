<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: TransformMatrix.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>TransformMatrix.h</h1><a href="TransformMatrix_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef TRANSFORMMATRIX_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define TRANSFORMMATRIX_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 
00019 <span class="preprocessor">#include "<a class="code" href="MC2Point_8h.html">MC2Point.h</a>"</span>
00020 <span class="preprocessor">#include "<a class="code" href="MC2Coordinate_8h.html">MC2Coordinate.h</a>"</span>
00021 
00022 <span class="preprocessor">#include &lt;math.h&gt;</span>
00023 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00024 
<a name="l00025"></a><a class="code" href="TransformMatrix_8h.html#a0">00025</a> <span class="preprocessor">#define USE_NEW_INTEGERS</span>
00026 <span class="preprocessor"></span>
<a name="l00037"></a><a class="code" href="classTransformMatrix.html">00037</a> <span class="keyword">class </span><a class="code" href="classTransformMatrix.html">TransformMatrix</a> {
00038 <span class="keyword">public</span>:
00039 
<a name="l00044"></a><a class="code" href="classTransformMatrix.html#w0">00044</a>    <span class="keyword">typedef</span> <a class="code" href="Types_8h.html#a22">int32</a> scaleInt_t;
00045    
00049    <a class="code" href="classTransformMatrix.html">TransformMatrix</a>();
00050    
00054    <span class="keywordtype">void</span> setToIdentity();
00055    
00066    <span class="keywordtype">void</span> updateMatrix(<span class="keywordtype">double</span> angle360,
00067                      <span class="keywordtype">double</span> scale,
00068                      <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; center,
00069                      <span class="keywordtype">int</span> screenWidth, <span class="keywordtype">int</span> screenHeight);
00070 
00076    <span class="keywordtype">void</span> setInternalCosLat(<span class="keywordtype">double</span> cosLat);
00077    
00082    <span class="keyword">inline</span> <span class="keywordtype">void</span> 
00083      transformPointInternalCosLat( MC2Point::coord_t&amp; outX,
00084                                    MC2Point::coord_t&amp; outY,
00085                                    <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord ) <span class="keyword">const</span>;
00086 
00091    <span class="keyword">inline</span> <span class="keywordtype">void</span> 
00092       transformPointInternalCosLat( <a class="code" href="classMC2Point.html">MC2Point</a>&amp; outPoint,
00093                                     <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord ) <span class="keyword">const</span>;
00094 
00098    <span class="keyword">inline</span> <span class="keywordtype">void</span> transformPointUsingCosLat( MC2Point::coord_t&amp; outX,
00099                                           MC2Point::coord_t&amp; outY,
00100                                           <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord) <span class="keyword">const</span>;
00101    
00105    <span class="keyword">inline</span> <span class="keywordtype">void</span> transformPointCosLatSupplied( MC2Point::coord_t&amp; outX,
00106                                              MC2Point::coord_t&amp; outY,
00107                                              <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord,
00108                                              <span class="keywordtype">float</span> cosLat) <span class="keyword">const</span>;
00109    
00113    <span class="keyword">inline</span> <span class="keywordtype">void</span> transformPointCosLatSupplied( <a class="code" href="classMC2Point.html">MC2Point</a>&amp; outPoint,
00114                                              <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord,
00115                                              <span class="keywordtype">float</span> cosLat ) <span class="keyword">const</span>;
00116 
00120    <span class="keyword">inline</span> <span class="keywordtype">void</span> inverseTranformUsingCosLat( <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; outCoord,
00121                                            int32 inX, int32 inY ) <span class="keyword">const</span>;
00125    <span class="keyword">inline</span> <span class="keywordtype">void</span> inverseTranformUsingCosLat( <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; outCoord,
00126                                            <span class="keyword">const</span> <a class="code" href="classMC2Point.html">MC2Point</a>&amp; inPoint) <span class="keyword">const</span>;
00127    
00131    <span class="keyword">inline</span> <span class="keywordtype">void</span> inverseTranformCosLatSupplied( <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; outCoord,
00132                                               int32 inX, int32 inY,
00133                                               <span class="keywordtype">float</span> cosLat ) <span class="keyword">const</span>;
<a name="l00137"></a><a class="code" href="classTransformMatrix.html#a12">00137</a>    <span class="keyword">inline</span> <span class="keywordtype">void</span> inverseTranformCosLatSupplied( <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; outCoord,
00138                                               <span class="keyword">const</span> <a class="code" href="classMC2Point.html">MC2Point</a>&amp; inPoint,
00139                                               <span class="keywordtype">float</span> cosLat )<span class="keyword"> const </span>{
00140       inverseTranformCosLatSupplied( outCoord, inPoint.<a class="code" href="classMC2Point.html#a1">getX</a>(), inPoint.<a class="code" href="classMC2Point.html#a2">getY</a>(),
00141                                      cosLat );
00142    }
00143 
00147    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">double</span> getCosLat(int32 lat);
00148    
00152    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">double</span> getCosLat(int32 lat1, int32 lat2);
00153 
00154  <span class="keyword">protected</span>:
<a name="l00160"></a><a class="code" href="classTransformMatrix.html#b0">00160</a>    <span class="keyword">virtual</span> <span class="keywordtype">void</span> matrixUpdated() {}
00161    
00170    <a class="code" href="Types_8h.html#a20">int16</a> getScaleAndShift(int32&amp; outScale, <span class="keywordtype">double</span> inScale, <span class="keywordtype">int</span> maxShift);
00171    
<a name="l00172"></a><a class="code" href="classTransformMatrix.html#p0">00172</a>    <span class="keywordtype">float</span> m_SxA;   
<a name="l00173"></a><a class="code" href="classTransformMatrix.html#p1">00173</a>    <span class="keywordtype">float</span> m_SyB;
<a name="l00174"></a><a class="code" href="classTransformMatrix.html#p2">00174</a>    <span class="keywordtype">float</span> m_SxC;
<a name="l00175"></a><a class="code" href="classTransformMatrix.html#p3">00175</a>    <span class="keywordtype">float</span> m_SyD;
<a name="l00176"></a><a class="code" href="classTransformMatrix.html#p4">00176</a>    <span class="keywordtype">float</span> m_SxATx;
<a name="l00177"></a><a class="code" href="classTransformMatrix.html#p5">00177</a>    <span class="keywordtype">float</span> m_SyBTy;
<a name="l00178"></a><a class="code" href="classTransformMatrix.html#p6">00178</a>    <span class="keywordtype">float</span> m_SxCTx;
<a name="l00179"></a><a class="code" href="classTransformMatrix.html#p7">00179</a>    <span class="keywordtype">float</span> m_SyDTy;
<a name="l00180"></a><a class="code" href="classTransformMatrix.html#p8">00180</a>    <span class="keywordtype">float</span> m_SyCtxSyDtyTy;
<a name="l00181"></a><a class="code" href="classTransformMatrix.html#p9">00181</a>    <span class="keywordtype">float</span> m_SxAtxBty;
00182 
<a name="l00183"></a><a class="code" href="classTransformMatrix.html#p10">00183</a>    <span class="keywordtype">float</span> m_SxB;
<a name="l00184"></a><a class="code" href="classTransformMatrix.html#p11">00184</a>    <span class="keywordtype">float</span> m_SyC;
<a name="l00185"></a><a class="code" href="classTransformMatrix.html#p12">00185</a>    <span class="keywordtype">float</span> m_SxD;
00186 
<a name="l00187"></a><a class="code" href="classTransformMatrix.html#p13">00187</a>    <span class="keywordtype">float</span> m_Sx;
<a name="l00188"></a><a class="code" href="classTransformMatrix.html#p14">00188</a>    <span class="keywordtype">float</span> m_Sy;
00189    
<a name="l00191"></a><a class="code" href="classTransformMatrix.html#p15">00191</a>    <span class="keywordtype">float</span> m_tx;
<a name="l00193"></a><a class="code" href="classTransformMatrix.html#p16">00193</a>    <span class="keywordtype">float</span> m_ty;
<a name="l00195"></a><a class="code" href="classTransformMatrix.html#p17">00195</a>    <span class="keywordtype">float</span> m_Tx;
<a name="l00196"></a><a class="code" href="classTransformMatrix.html#p18">00196</a>    <span class="keywordtype">float</span> m_Ty;
00197 
<a name="l00198"></a><a class="code" href="classTransformMatrix.html#p19">00198</a>    <span class="keywordtype">float</span> m_A;
<a name="l00199"></a><a class="code" href="classTransformMatrix.html#p20">00199</a>    <span class="keywordtype">float</span> m_B;
<a name="l00200"></a><a class="code" href="classTransformMatrix.html#p21">00200</a>    <span class="keywordtype">float</span> m_C;
<a name="l00201"></a><a class="code" href="classTransformMatrix.html#p22">00201</a>    <span class="keywordtype">float</span> m_D;
00202 
<a name="l00203"></a><a class="code" href="classTransformMatrix.html#p23">00203</a>    <span class="keywordtype">float</span> m_SyBTy_plus_tx;
<a name="l00204"></a><a class="code" href="classTransformMatrix.html#p24">00204</a>    <span class="keywordtype">float</span> m_SyDTy_plus_ty;
00205 
<a name="l00207"></a><a class="code" href="classTransformMatrix.html#p25">00207</a>    <span class="keywordtype">float</span> m_cosLatSxA;
<a name="l00208"></a><a class="code" href="classTransformMatrix.html#p26">00208</a>    <span class="keywordtype">float</span> m_cosLatSxATx_plus_SyBTy_plus_tx;
<a name="l00209"></a><a class="code" href="classTransformMatrix.html#p27">00209</a>    <span class="keywordtype">float</span> m_cosLatSxC;
<a name="l00210"></a><a class="code" href="classTransformMatrix.html#p28">00210</a>    <span class="keywordtype">float</span> m_cosLatSxCTx_plus_m_SyDTy_plus_ty;
00211 
<a name="l00212"></a><a class="code" href="classTransformMatrix.html#p29">00212</a>    <span class="keywordtype">float</span> m_cosLat;
00213    
00214    <span class="comment">// Some integers   </span>
00216 <span class="comment"></span><span class="preprocessor">#ifdef USE_INTEGERS</span>
00217 <span class="preprocessor"></span>   <span class="keywordtype">int</span> m_scale1Shift;
00218    <span class="keywordtype">int</span> m_scale1CosLatShift;
00220    <span class="keywordtype">int</span> m_cosLatSxAShift;
00222    <span class="keywordtype">int</span> m_SyBShift;
00224    <span class="keywordtype">int</span> m_cosLatSxCShift;
00226    <span class="keywordtype">int</span> m_SyDShift;
00227 <span class="preprocessor">#else</span>
00228 <span class="preprocessor"></span><span class="preprocessor">#ifdef USE_NEW_INTEGERS</span>
00229 <span class="preprocessor"></span>   <span class="comment">// For the new version</span>
<a name="l00231"></a><a class="code" href="classTransformMatrix.html#p30">00231</a> <span class="comment"></span>   <span class="keywordtype">int</span> m_cosLatSxAShift1;
<a name="l00233"></a><a class="code" href="classTransformMatrix.html#p31">00233</a>    <span class="keywordtype">int</span> m_SyBShift1;
<a name="l00235"></a><a class="code" href="classTransformMatrix.html#p32">00235</a>    <span class="keywordtype">int</span> m_cosLatSxCShift1;
<a name="l00237"></a><a class="code" href="classTransformMatrix.html#p33">00237</a>    <span class="keywordtype">int</span> m_SyDShift1;
00238 <span class="preprocessor">#endif</span>
00239 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00240 <span class="preprocessor"></span>
<a name="l00241"></a><a class="code" href="classTransformMatrix.html#p34">00241</a>    <a class="code" href="Types_8h.html#a22">int32</a> m_TxInt;
<a name="l00242"></a><a class="code" href="classTransformMatrix.html#p35">00242</a>    <a class="code" href="Types_8h.html#a22">int32</a> m_TyInt;
<a name="l00244"></a><a class="code" href="classTransformMatrix.html#p36">00244</a>    <a class="code" href="Types_8h.html#a22">int32</a> m_txInt;
<a name="l00246"></a><a class="code" href="classTransformMatrix.html#p37">00246</a>    <a class="code" href="Types_8h.html#a22">int32</a> m_tyInt;
00247    
<a name="l00249"></a><a class="code" href="classTransformMatrix.html#p38">00249</a>    scaleInt_t m_SyDInt;
<a name="l00251"></a><a class="code" href="classTransformMatrix.html#p39">00251</a>    scaleInt_t m_cosLatSxAInt;
<a name="l00253"></a><a class="code" href="classTransformMatrix.html#p40">00253</a>    scaleInt_t m_SyBInt;
<a name="l00255"></a><a class="code" href="classTransformMatrix.html#p41">00255</a>    scaleInt_t m_cosLatSxCInt;
00256 };
00257 
00258 <span class="keyword">inline</span> <span class="keywordtype">double</span>
<a name="l00259"></a><a class="code" href="classTransformMatrix.html#e0">00259</a> <a class="code" href="classTransformMatrix.html#e0">TransformMatrix::getCosLat</a>(int32 lat)
00260 {
00261    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> mc2scaletoradians = 1.0 / (11930464.7111*
00262                                                 180.0/3.14159265358979323846);
00263    <span class="keywordflow">return</span> cos(mc2scaletoradians*lat);
00264 }
00265 
00266 <span class="keyword">inline</span> <span class="keywordtype">double</span>
<a name="l00267"></a><a class="code" href="classTransformMatrix.html#e1">00267</a> <a class="code" href="classTransformMatrix.html#e0">TransformMatrix::getCosLat</a>(int32 lat1, int32 lat2)
00268 {
00269    <span class="comment">// Loses a coordinate sometimes, but that is approx one cm.</span>
00270    <span class="keywordflow">return</span> <a class="code" href="classTransformMatrix.html#e0">getCosLat</a>( (lat1 &gt;&gt; 1) + (lat2 &gt;&gt; 1) );
00271 }
00272 
00274 <span class="comment">// Old version without precalculated shift steps</span>
00275 <span class="comment">//  #define CALC_ONE_TERM(diff, scale, n, m) </span>
00276 <span class="comment">//                     (int32((scale)*((diff) &gt;&gt; ((n)-(m)+1))) &gt;&gt; (m-1))</span>
00277 
00278 <span class="preprocessor">#if 0</span>
00279 <span class="preprocessor"></span><span class="comment">// Well this does not work when using thumb anyway.</span>
00280 <span class="preprocessor">#if defined(__MARM__) &amp;&amp; defined(__GCC32__) &amp;&amp; defined(__MARM_ARMI__)</span>
00281 <span class="preprocessor"></span><span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a22">int32</a> <a class="code" href="TransformMatrix_8h.html#a1">MULT16_16</a>(int16 x, int16 y) {
00282   <span class="keywordtype">int</span> res;
00283   <span class="keyword">asm</span> (<span class="stringliteral">"smulbb  %0,%1,%2;\n"</span>
00284               : <span class="stringliteral">"=&amp;r"</span>(res)
00285               : <span class="stringliteral">"%r"</span>(x),<span class="stringliteral">"r"</span>(y));
00286   <span class="keywordflow">return</span>(res);
00287 }
00288 <span class="preprocessor">#else</span>
00289 <span class="preprocessor"></span><span class="preprocessor">#define MULT16_16(a,b) ( ((int32)(int16(a)))*((int32)(int16(b))) )</span>
00290 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00291 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00292"></a><a class="code" href="TransformMatrix_8h.html#a1">00292</a> <span class="preprocessor"></span><span class="preprocessor">#define MULT16_16(a,b) ((a)*(b))</span>
00293 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00294 <span class="preprocessor"></span><span class="comment">// New version where the shift steps are precalculated.</span>
<a name="l00295"></a><a class="code" href="TransformMatrix_8h.html#a2">00295</a> <span class="preprocessor">#define CALC_ONE_TERM(diff, scale, n, m) \</span>
00296 <span class="preprocessor">                     (int32(MULT16_16((scale), ((diff) &gt;&gt; (n)))) &gt;&gt; (m))</span>
00297 <span class="preprocessor"></span>
<a name="l00298"></a><a class="code" href="TransformMatrix_8h.html#a3">00298</a> <span class="preprocessor">#define CALC_ONE_TERM_MAYBE_BETTER(diff, scale, n, m) \</span>
00299 <span class="preprocessor">     (((scale) != 0) ? CALC_ONE_TERM_SUB(diff,scale,n,m) : 0 )</span>
00300 <span class="preprocessor"></span>
00301 <span class="preprocessor">#ifdef USE_NEW_INTEGERS</span>
00302 <span class="preprocessor"></span>
<a name="l00303"></a><a class="code" href="TransformMatrix_8h.html#a5">00303</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="TransformMatrix_8h.html#a5">getShiftDownTo15</a>( <span class="keywordtype">int</span> nbr )
00304 {
00305    <span class="keywordtype">int</span> shift = 0;
00306    <span class="comment">// Get the number of shifts needed to get the number down to</span>
00307    <span class="comment">// 15 bits.</span>
00308    <span class="comment">// FIXME: Optimize</span>
00309    nbr = abs(nbr);
00310    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> maxNbr = (0xffff) &gt;&gt; 2;
00311    <span class="keywordflow">while</span> ( nbr &gt; maxNbr ) {
00312       nbr &gt;&gt;= 1;
00313       ++shift;
00314    }
00315    <span class="keywordflow">return</span> shift;
00316 }
00317 
<a name="l00318"></a><a class="code" href="TransformMatrix_8h.html#a6">00318</a> <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a22">int32</a> <a class="code" href="TransformMatrix_8h.html#a6">calcTerm</a>( int32 diff, <span class="keywordtype">int</span> diffShift,
00319                               int32 scale, <span class="keywordtype">int</span> scaleShift )
00320 {
00321    <a class="code" href="Types_8h.html#a22">int32</a> tmpRes = (diff &gt;&gt; diffShift )*( scale );
00322    <span class="keywordtype">int</span> shiftAmount = scaleShift - diffShift;
00323    <span class="keywordflow">if</span> ( shiftAmount &gt; 0 ) {
00324       tmpRes &gt;&gt;= shiftAmount;
00325    } <span class="keywordflow">else</span> {
00326       tmpRes &lt;&lt;= -shiftAmount;
00327    }
00328    <span class="keywordflow">return</span> tmpRes;
00329 }
00330 
00331 <span class="preprocessor">#endif</span>
00332 <span class="preprocessor"></span>
00333 <span class="keyword">inline</span> <span class="keywordtype">void</span>
00334 <a class="code" href="classTransformMatrix.html#a4">TransformMatrix::</a>
<a name="l00335"></a><a class="code" href="classTransformMatrix.html#a4">00335</a> <a class="code" href="classTransformMatrix.html#a4">transformPointInternalCosLat</a>( MC2Point::coord_t&amp; outX,
00336                               MC2Point::coord_t&amp; outY,
00337                               <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord )<span class="keyword"> const</span>
00338 <span class="keyword"></span>{
00339 <span class="preprocessor">#ifdef USE_NEW_INTEGERS</span>
00340 <span class="preprocessor"></span>   <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> lonDiff = incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a> + m_TxInt;
00341    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> latDiff = incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a> + m_TyInt;
00342    <span class="keyword">const</span> <span class="keywordtype">int</span> latShift = <a class="code" href="TransformMatrix_8h.html#a5">getShiftDownTo15</a>(latDiff);
00343    <span class="keyword">const</span> <span class="keywordtype">int</span> lonShift = <a class="code" href="TransformMatrix_8h.html#a5">getShiftDownTo15</a>(lonDiff);
00344    
00345 <span class="comment">//     mc2log &lt;&lt; "[TM]: latShift = " &lt;&lt; latShift &lt;&lt; ", lonShift = " &lt;&lt; lonShift</span>
00346 <span class="comment">//            &lt;&lt; ", m_cosLatSxAShift = " &lt;&lt; m_cosLatSxAShift</span>
00347 <span class="comment">//            &lt;&lt; ", m_cosLatSxAInt = " &lt;&lt; m_cosLatSxAInt</span>
00348 <span class="comment">//            &lt;&lt; ", latDiff &gt;&gt; latShift = " &lt;&lt; (latDiff &gt;&gt; latShift ) &lt;&lt; endl;</span>
00349  
00350    outX = <a class="code" href="TransformMatrix_8h.html#a6">calcTerm</a>( lonDiff, lonShift,
00351                     <a class="code" href="classTransformMatrix.html#p39">m_cosLatSxAInt</a>,
00352                     <a class="code" href="classTransformMatrix.html#p30">m_cosLatSxAShift1</a> ) +
00353       <a class="code" href="TransformMatrix_8h.html#a6">calcTerm</a>( latDiff, latShift, <a class="code" href="classTransformMatrix.html#p40">m_SyBInt</a>, <a class="code" href="classTransformMatrix.html#p31">m_SyBShift1</a> ) +
00354       m_txInt;
00355 
00356    outY = <a class="code" href="TransformMatrix_8h.html#a6">calcTerm</a>( lonDiff, lonShift,
00357                     <a class="code" href="classTransformMatrix.html#p41">m_cosLatSxCInt</a>,
00358                     <a class="code" href="classTransformMatrix.html#p32">m_cosLatSxCShift1</a> ) +
00359       <a class="code" href="TransformMatrix_8h.html#a6">calcTerm</a>( latDiff, latShift, <a class="code" href="classTransformMatrix.html#p38">m_SyDInt</a>, <a class="code" href="classTransformMatrix.html#p33">m_SyDShift1</a> ) +
00360       m_tyInt;
00361 
00362 <span class="preprocessor">#else </span>
00363 <span class="preprocessor"></span><span class="preprocessor">#ifdef USE_INTEGERS</span>
00364 <span class="preprocessor"></span>   <span class="comment">// Old integer version</span>
00365    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> lonDiff = lon + m_TxInt;   
00366    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a22">int32</a> latDiff = lat + m_TyInt;
00367   
00368    outX = <a class="code" href="TransformMatrix_8h.html#a2">CALC_ONE_TERM</a>(lonDiff, <a class="code" href="classTransformMatrix.html#p39">m_cosLatSxAInt</a>, 
00369              m_cosLatSxAShift, m_scale1CosLatShift) +
00370       <a class="code" href="TransformMatrix_8h.html#a2">CALC_ONE_TERM</a>(latDiff, <a class="code" href="classTransformMatrix.html#p40">m_SyBInt</a>,
00371                     m_SyBShift, m_scale1Shift) + m_txInt;
00372    
00373   outY = <a class="code" href="TransformMatrix_8h.html#a2">CALC_ONE_TERM</a>(lonDiff, <a class="code" href="classTransformMatrix.html#p41">m_cosLatSxCInt</a>,
00374                        m_cosLatSxCShift, m_scale1CosLatShift) +
00375      <a class="code" href="TransformMatrix_8h.html#a2">CALC_ONE_TERM</a>(latDiff, <a class="code" href="classTransformMatrix.html#p38">m_SyDInt</a>,
00376                    m_SyDShift, m_scale1Shift) + m_tyInt;
00377 <span class="preprocessor">#else</span>
00378 <span class="preprocessor"></span><span class="preprocessor">#if 0</span>
00379 <span class="preprocessor"></span>   <span class="comment">// These are the expressions which are used to derive the </span>
00380    <span class="comment">// integer versions.</span>
00381    outX =
00382       <a class="code" href="Types_8h.html#a22">int32</a>(<a class="code" href="classTransformMatrix.html#p29">m_cosLat</a>*<a class="code" href="classTransformMatrix.html#p13">m_Sx</a>*<a class="code" href="classTransformMatrix.html#p19">m_A</a>*(incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a> + <a class="code" href="classTransformMatrix.html#p17">m_Tx</a>) +
00383             <a class="code" href="classTransformMatrix.html#p14">m_Sy</a>*<a class="code" href="classTransformMatrix.html#p20">m_B</a>*(incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a> + <a class="code" href="classTransformMatrix.html#p18">m_Ty</a>) + <a class="code" href="classTransformMatrix.html#p15">m_tx</a> );
00384   
00385    outY = <a class="code" href="Types_8h.html#a22">int32</a>(<a class="code" href="classTransformMatrix.html#p29">m_cosLat</a>*<a class="code" href="classTransformMatrix.html#p13">m_Sx</a>*<a class="code" href="classTransformMatrix.html#p21">m_C</a>*(incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a> + m_Tx) +
00386       <a class="code" href="classTransformMatrix.html#p14">m_Sy</a>*<a class="code" href="classTransformMatrix.html#p22">m_D</a>*(incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a> + m_Ty) + <a class="code" href="classTransformMatrix.html#p16">m_ty</a> );
00387 
00388 <span class="preprocessor">#endif</span>
00389 <span class="preprocessor"></span>
00390   <span class="comment">// These are the shortest floating point expressions for </span>
00391   <span class="comment">// the calculations</span>
00392    outX = <a class="code" href="Types_8h.html#a22">int32</a>( incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a>*(<a class="code" href="classTransformMatrix.html#p25">m_cosLatSxA</a>)+
00393                  incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a>*(<a class="code" href="classTransformMatrix.html#p1">m_SyB</a>)+(<a class="code" href="classTransformMatrix.html#p26">m_cosLatSxATx_plus_SyBTy_plus_tx</a>) );
00394 
00395    outY =
00396       <a class="code" href="Types_8h.html#a22">int32</a>(incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a>*(<a class="code" href="classTransformMatrix.html#p27">m_cosLatSxC</a>)+
00397           incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a>*(<a class="code" href="classTransformMatrix.html#p3">m_SyD</a>)+(<a class="code" href="classTransformMatrix.html#p28">m_cosLatSxCTx_plus_m_SyDTy_plus_ty</a>) );
00398 <span class="preprocessor">#endif</span>
00399 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00400 <span class="preprocessor"></span>   
00401 <span class="preprocessor">#define COMPARE_TO_FLOAT</span>
00402 <span class="preprocessor"></span><span class="preprocessor">#ifdef COMPARE_TO_FLOAT</span>
00403 <span class="preprocessor"></span><span class="preprocessor">#ifdef __unix__</span>
00404 <span class="preprocessor"></span>   MC2Point::coord_t compX = <a class="code" href="Types_8h.html#a22">int32</a>( incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a>*(<a class="code" href="classTransformMatrix.html#p25">m_cosLatSxA</a>)+
00405                                     incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a>*(m_SyB)+
00406                                     (m_cosLatSxATx_plus_SyBTy_plus_tx) );
00407 
00408    MC2Point::coord_t compY =
00409       <a class="code" href="Types_8h.html#a22">int32</a>(incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a>*(<a class="code" href="classTransformMatrix.html#p27">m_cosLatSxC</a>)+
00410             incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a>*(m_SyD)+(m_cosLatSxCTx_plus_m_SyDTy_plus_ty) );
00411    <span class="keywordflow">if</span> ( ( outX != compX ) || ( outY != compY ) ) {
00412       <span class="keywordflow">if</span> ( ( abs( outX - compX ) &gt; 2 ) || ( abs( outY - compY ) &gt; 2 ) ) {
00413          <a class="code" href="MC2Logging_8h.html#a0">mc2log</a> &lt;&lt; <span class="stringliteral">"[TM]: Diffs are ("</span>
00414                 &lt;&lt; (outX-compX) &lt;&lt; <span class="stringliteral">","</span>
00415                 &lt;&lt; (outY - compY ) &lt;&lt; <span class="stringliteral">")"</span> &lt;&lt; <span class="stringliteral">" for orig coord "</span>
00416                 &lt;&lt; incoord &lt;&lt; <span class="stringliteral">" (latDiff &gt;&gt; latShift) = "</span>
00417                 &lt;&lt; (latDiff &gt;&gt; latShift ) 
00418                 &lt;&lt; <span class="stringliteral">", (lonDiff &gt;&gt; lonShift) = "</span> &lt;&lt; (lonDiff &gt;&gt; lonShift )
00419                 &lt;&lt; <span class="stringliteral">", lonDiff = "</span> &lt;&lt; lonDiff
00420                 &lt;&lt; <span class="stringliteral">", lonShift = "</span> &lt;&lt; lonShift
00421                 &lt;&lt; <span class="stringliteral">", m_cosLatSxAInt = "</span> &lt;&lt; <a class="code" href="classTransformMatrix.html#p39">m_cosLatSxAInt</a>
00422                 &lt;&lt; <span class="stringliteral">", m_cosLatSxAShift1 = "</span> &lt;&lt; <a class="code" href="classTransformMatrix.html#p30">m_cosLatSxAShift1</a>
00423                 &lt;&lt; <span class="stringliteral">", (m_cosLat * m_Sx * m_A) = "</span> &lt;&lt; (<a class="code" href="classTransformMatrix.html#p29">m_cosLat</a> * <a class="code" href="classTransformMatrix.html#p13">m_Sx</a> * m_A)
00424                 &lt;&lt; endl;
00425       }
00426    }
00427 <span class="preprocessor">#endif</span>
00428 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00429 <span class="preprocessor"></span>
00430 }
00431 
00432 <span class="keyword">inline</span> <span class="keywordtype">void</span>
00433 <a class="code" href="classTransformMatrix.html#a4">TransformMatrix::</a>
<a name="l00434"></a><a class="code" href="classTransformMatrix.html#a5">00434</a> <a class="code" href="classTransformMatrix.html#a4">transformPointInternalCosLat</a>( <a class="code" href="classMC2Point.html">MC2Point</a>&amp; outPoint,
00435                               <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord )<span class="keyword"> const</span>
00436 <span class="keyword"></span>{
00437    <a class="code" href="classTransformMatrix.html#a4">transformPointInternalCosLat</a>(outPoint.<a class="code" href="classMC2Point.html#a1">getX</a>(), outPoint.<a class="code" href="classMC2Point.html#a2">getY</a>(), incoord);
00438 }
00439 
00440 
00441 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00442"></a><a class="code" href="classTransformMatrix.html#a7">00442</a> <a class="code" href="classTransformMatrix.html#a7">TransformMatrix::transformPointCosLatSupplied</a>( MC2Point::coord_t&amp; outX,
00443                                                MC2Point::coord_t&amp; outY,
00444                                                <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord,
00445                                                <span class="keywordtype">float</span> cosLat )<span class="keyword"> const</span>
00446 <span class="keyword"></span>{   
00447    outX =
00448       <a class="code" href="Types_8h.html#a22">int32</a>(incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a>*(cosLat*<a class="code" href="classTransformMatrix.html#p0">m_SxA</a>)+
00449           incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a>*(<a class="code" href="classTransformMatrix.html#p1">m_SyB</a>)+(cosLat*<a class="code" href="classTransformMatrix.html#p4">m_SxATx</a> + <a class="code" href="classTransformMatrix.html#p23">m_SyBTy_plus_tx</a>) );   
00450 
00451 <span class="preprocessor">#ifdef __unix__</span>
00452 <span class="preprocessor"></span>   <a class="code" href="MC2Logging_8h.html#a6">mc2dbg8</a> &lt;&lt; <span class="stringliteral">"[TMX]: Sx = "</span> &lt;&lt; <a class="code" href="classTransformMatrix.html#p13">m_Sx</a> &lt;&lt; <span class="stringliteral">" A = "</span> &lt;&lt; <a class="code" href="classTransformMatrix.html#p19">m_A</a>
00453           &lt;&lt; <span class="stringliteral">" SxA "</span> &lt;&lt; m_SxA &lt;&lt; <span class="stringliteral">" lon = "</span> &lt;&lt; incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a> &lt;&lt; <span class="stringliteral">" T_x = "</span>
00454           &lt;&lt; <a class="code" href="classTransformMatrix.html#p17">m_Tx</a> &lt;&lt; <span class="stringliteral">" lon + T_X "</span> &lt;&lt; (incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a>+m_Tx) &lt;&lt; endl;
00455 <span class="preprocessor">#endif</span>
00456 <span class="preprocessor"></span>   
00457    outY =
00458       <a class="code" href="Types_8h.html#a22">int32</a>(incoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a>*(cosLat*<a class="code" href="classTransformMatrix.html#p2">m_SxC</a>)+
00459           incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a>*(<a class="code" href="classTransformMatrix.html#p3">m_SyD</a>)+(cosLat*<a class="code" href="classTransformMatrix.html#p6">m_SxCTx</a> + <a class="code" href="classTransformMatrix.html#p24">m_SyDTy_plus_ty</a>) );
00460 }
00461 
00462 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00463"></a><a class="code" href="classTransformMatrix.html#a8">00463</a> <a class="code" href="classTransformMatrix.html#a7">TransformMatrix::transformPointCosLatSupplied</a>( <a class="code" href="classMC2Point.html">MC2Point</a>&amp; outPoint,
00464                                                <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord,
00465                                                <span class="keywordtype">float</span> cosLat )<span class="keyword"> const</span>
00466 <span class="keyword"></span>{
00467    <a class="code" href="classTransformMatrix.html#a7">transformPointCosLatSupplied</a>(outPoint.<a class="code" href="classMC2Point.html#a1">getX</a>(),
00468                                 outPoint.<a class="code" href="classMC2Point.html#a2">getY</a>(), incoord, cosLat);
00469 }
00470 
00471 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00472"></a><a class="code" href="classTransformMatrix.html#a6">00472</a> <a class="code" href="classTransformMatrix.html#a6">TransformMatrix::transformPointUsingCosLat</a>( MC2Point::coord_t&amp; outX,
00473                                             MC2Point::coord_t&amp; outY,
00474                                             <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; incoord )<span class="keyword"></span>
00475 <span class="keyword">   const</span>
00476 <span class="keyword"></span>{   
00477    <a class="code" href="classTransformMatrix.html#a7">transformPointCosLatSupplied</a>(outX, outY, incoord, <a class="code" href="classTransformMatrix.html#e0">getCosLat</a>(incoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a>));
00478 }
00479 
00480 
00481 
00482 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00483"></a><a class="code" href="classTransformMatrix.html#a11">00483</a> <a class="code" href="classTransformMatrix.html#a11">TransformMatrix::inverseTranformCosLatSupplied</a>( <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; outCoord,
00484                                               int32 inX, int32 inY,
00485                                               <span class="keywordtype">float</span> cosLat )<span class="keyword"> const</span>
00486 <span class="keyword"></span>{
00487    outCoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a> = <a class="code" href="Types_8h.html#a22">int32</a>( - 1.0/<a class="code" href="classTransformMatrix.html#p14">m_Sy</a> * <a class="code" href="classTransformMatrix.html#p21">m_C</a> * inX
00488                          + 1.0/<a class="code" href="classTransformMatrix.html#p14">m_Sy</a> * <a class="code" href="classTransformMatrix.html#p22">m_D</a> * inY
00489                          + 1.0/<a class="code" href="classTransformMatrix.html#p14">m_Sy</a> * <a class="code" href="classTransformMatrix.html#p21">m_C</a> * <a class="code" href="classTransformMatrix.html#p15">m_tx</a> 
00490                          - 1.0/<a class="code" href="classTransformMatrix.html#p14">m_Sy</a> * <a class="code" href="classTransformMatrix.html#p22">m_D</a> * <a class="code" href="classTransformMatrix.html#p16">m_ty</a>
00491                          - <a class="code" href="classTransformMatrix.html#p18">m_Ty</a> );
00492    
00493    <span class="keywordtype">double</span> S_x = <a class="code" href="classTransformMatrix.html#p13">m_Sx</a> * cosLat;
00494    
00495    outCoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a> = <a class="code" href="Types_8h.html#a22">int32</a>( + 1.0 / S_x * <a class="code" href="classTransformMatrix.html#p19">m_A</a> * inX
00496                          - 1.0 / S_x * <a class="code" href="classTransformMatrix.html#p20">m_B</a> * inY
00497                          - 1.0 / S_x * <a class="code" href="classTransformMatrix.html#p19">m_A</a> * <a class="code" href="classTransformMatrix.html#p15">m_tx</a>
00498                          + 1.0 / S_x * <a class="code" href="classTransformMatrix.html#p20">m_B</a> * <a class="code" href="classTransformMatrix.html#p16">m_ty</a>
00499                          - <a class="code" href="classTransformMatrix.html#p17">m_Tx</a>);
00500 
00501 <span class="preprocessor">#ifdef __unix__</span>
00502 <span class="preprocessor"></span>   <a class="code" href="classMC2Point.html">MC2Point</a> backXY(0,0);
00503    <a class="code" href="classTransformMatrix.html#a6">transformPointUsingCosLat</a>(backXY.<a class="code" href="classMC2Point.html#a1">getX</a>(), backXY.<a class="code" href="classMC2Point.html#a2">getY</a>(), outCoord);
00504    
00505    <a class="code" href="MC2Logging_8h.html#a6">mc2dbg8</a> &lt;&lt; <span class="stringliteral">"[TMX]: Coord is "</span> &lt;&lt; outCoord &lt;&lt; endl;
00506    <a class="code" href="MC2Logging_8h.html#a6">mc2dbg8</a> &lt;&lt; <span class="stringliteral">"[TMX]: (inX, inY) = "</span> &lt;&lt; <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>(inX, inY)
00507            &lt;&lt; <span class="stringliteral">" converted back "</span> &lt;&lt; <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>(backXY.<a class="code" href="classMC2Point.html#a1">getX</a>(), backXY.<a class="code" href="classMC2Point.html#a2">getY</a>())
00508            &lt;&lt; endl;
00509 <span class="preprocessor">#endif</span>
00510 <span class="preprocessor"></span>}
00511 
00512 <span class="keyword">inline</span> <span class="keywordtype">void</span>
00513 <a class="code" href="classTransformMatrix.html#a9">TransformMatrix::</a>
<a name="l00514"></a><a class="code" href="classTransformMatrix.html#a9">00514</a> <a class="code" href="classTransformMatrix.html#a9">inverseTranformUsingCosLat</a>( <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; outCoord,
00515                             int32 inX, int32 inY )<span class="keyword"> const</span>
00516 <span class="keyword"></span>{
00517    outCoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a> = <a class="code" href="Types_8h.html#a22">int32</a>( - 1.0/<a class="code" href="classTransformMatrix.html#p14">m_Sy</a> * <a class="code" href="classTransformMatrix.html#p21">m_C</a> * inX
00518                          + 1.0/<a class="code" href="classTransformMatrix.html#p14">m_Sy</a> * <a class="code" href="classTransformMatrix.html#p22">m_D</a> * inY
00519                          + 1.0/<a class="code" href="classTransformMatrix.html#p14">m_Sy</a> * <a class="code" href="classTransformMatrix.html#p21">m_C</a> * <a class="code" href="classTransformMatrix.html#p15">m_tx</a>
00520                          - 1.0/<a class="code" href="classTransformMatrix.html#p14">m_Sy</a> * <a class="code" href="classTransformMatrix.html#p22">m_D</a> * <a class="code" href="classTransformMatrix.html#p16">m_ty</a>
00521                          - <a class="code" href="classTransformMatrix.html#p18">m_Ty</a> );
00522    
00523    <span class="keywordtype">double</span> S_x = <a class="code" href="classTransformMatrix.html#p13">m_Sx</a> * <a class="code" href="classTransformMatrix.html#e0">getCosLat</a>(outCoord.<a class="code" href="classMC2Coordinate.html#o0">lat</a>);
00524    
00525    outCoord.<a class="code" href="classMC2Coordinate.html#o1">lon</a> = <a class="code" href="Types_8h.html#a22">int32</a>( + 1.0 / S_x * <a class="code" href="classTransformMatrix.html#p19">m_A</a> * inX
00526                          - 1.0 / S_x * <a class="code" href="classTransformMatrix.html#p20">m_B</a> * inY
00527                          - 1.0 / S_x * <a class="code" href="classTransformMatrix.html#p19">m_A</a> * <a class="code" href="classTransformMatrix.html#p15">m_tx</a>
00528                          + 1.0 / S_x * <a class="code" href="classTransformMatrix.html#p20">m_B</a> * <a class="code" href="classTransformMatrix.html#p16">m_ty</a>
00529                          - <a class="code" href="classTransformMatrix.html#p17">m_Tx</a>);
00530 
00531 <span class="preprocessor">#ifdef __unix__</span>
00532 <span class="preprocessor"></span>   <a class="code" href="classMC2Point.html">MC2Point</a> backXY(0,0);
00533    <a class="code" href="classTransformMatrix.html#a6">transformPointUsingCosLat</a>(backXY.<a class="code" href="classMC2Point.html#a1">getX</a>(), backXY.<a class="code" href="classMC2Point.html#a2">getY</a>(), outCoord);
00534    
00535    <a class="code" href="MC2Logging_8h.html#a6">mc2dbg8</a> &lt;&lt; <span class="stringliteral">"[TMX]: Coord is "</span> &lt;&lt; outCoord &lt;&lt; endl;
00536    <a class="code" href="MC2Logging_8h.html#a6">mc2dbg8</a> &lt;&lt; <span class="stringliteral">"[TMX]: (inX, inY) = "</span> &lt;&lt; <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>(inX, inY)
00537            &lt;&lt; <span class="stringliteral">" converted back "</span> &lt;&lt; <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>(backXY.<a class="code" href="classMC2Point.html#a1">getX</a>(), backXY.<a class="code" href="classMC2Point.html#a2">getY</a>())
00538            &lt;&lt; endl;
00539 <span class="preprocessor">#endif</span>
00540 <span class="preprocessor"></span>}
00541 
00542 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00543"></a><a class="code" href="classTransformMatrix.html#a10">00543</a> <a class="code" href="classTransformMatrix.html#a9">TransformMatrix::inverseTranformUsingCosLat</a>( <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; outCoord,
00544                                              <span class="keyword">const</span> <a class="code" href="classMC2Point.html">MC2Point</a>&amp; inPoint)<span class="keyword"> const</span>
00545 <span class="keyword"></span>{
00546    <a class="code" href="classTransformMatrix.html#a9">inverseTranformUsingCosLat</a>(outCoord, inPoint.<a class="code" href="classMC2Point.html#a1">getX</a>(), inPoint.<a class="code" href="classMC2Point.html#a2">getY</a>() );
00547 }
00548 
00549 
00550 <span class="preprocessor">#endif</span>
00551 <span class="preprocessor"></span>
00552 
00553 
00554 
00555 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:51 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
