<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: MapReader Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>MapReader Class Reference</h1>Class that handles some packets to the MapModule in a special way.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="MapReader_8h-source.html">MapReader.h</a>&gt;</code>
<p>
Inheritance diagram for MapReader:<p><center><img src="classMapReader__inherit__graph.png" border="0" usemap="#MapReader__inherit__map" alt="Inheritance graph"></center>
<map name="MapReader__inherit__map">
<area href="classStandardReader.html" shape="rect" coords="44,155,164,181" alt="">
<area href="classReader.html" shape="rect" coords="20,80,84,107" alt="">
<area href="classISABThread.html" shape="rect" coords="5,5,99,32" alt="">
<area href="classReaderBase.html" shape="rect" coords="108,80,204,107" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for MapReader:<p><center><img src="classMapReader__coll__graph.png" border="0" usemap="#MapReader__coll__map" alt="Collaboration graph"></center>
<map name="MapReader__coll__map">
<area href="classStandardReader.html" shape="rect" coords="5,5,125,32" alt="">
<area href="classMapModuleNoticeContainer.html" shape="rect" coords="149,5,336,32" alt="">
<area href="classMMRoutingCostTable.html" shape="rect" coords="360,5,509,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classMapReader-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classMapReader.html#a0">MapReader</a> (<a class="el" href="classQueue.html">Queue</a> *q, <a class="el" href="classPointerFifoTemplate.html">NetPacketQueue</a> &amp;sendQueue, <a class="el" href="classMapSafeVector.html">MapSafeVector</a> *loadedMaps, <a class="el" href="classPacketReaderThread.html">PacketReaderThread</a> *packetReader, <a class="el" href="Types_8h.html#a19">uint16</a> port, <a class="el" href="Types_8h.html#a21">uint32</a> definedRank, Vector *startWithMaps)
<dl class="el"><dd class="mdescRight">Creates an MapReader according to the specifications.  <a href="#a0"></a><br></dl><li>virtual <a class="el" href="classMapReader.html#a1">~MapReader</a> ()
<dl class="el"><dd class="mdescRight">Deletes the MapReader and releases the allocated memory.  <a href="#a1"></a><br></dl><li>bool <a class="el" href="classMapReader.html#a2">leaderProcessCtrlPacket</a> (<a class="el" href="classPacket.html">Packet</a> *p)
<dl class="el"><dd class="mdescRight">Take care of some of the special controllpackets that might be received by the MapModule-leader.  <a href="#a2"></a><br></dl><li>void <a class="el" href="classMapReader.html#a3">initLeader</a> (set&lt; <a class="el" href="MapBits_8h.html#a5">MapID</a> &gt; &amp;allMaps)
<dl class="el"><dd class="mdescRight">Loads the MapModuleObjVector when become leader.  <a href="#a3"></a><br></dl><li>bool <a class="el" href="classMapReader.html#a4">printMidMif</a> (<a class="el" href="Types_8h.html#a21">uint32</a> mapId, <a class="el" href="classItemTypes.html#w342">ItemTypes::itemType</a> type)
<dl class="el"><dd class="mdescRight">Makes Generic map to print a mid mif version of an Items attributes and gfx-data.  <a href="#a4"></a><br></dl></ul>
<h2>Private Member Functions</h2>
<ul>
<li><a class="el" href="classMapReplyPacket.html">MapReplyPacket</a> * <a class="el" href="classMapReader.html#d0">handleMapRequestPacket</a> (<a class="el" href="classPacket.html">Packet</a> *p)
<dl class="el"><dd class="mdescRight">Adds info about the overview maps to the <a class="el" href="classMapRequestPacket.html">MapRequestPacket</a> if the packet is requesting a routemap.  <a href="#d0"></a><br></dl><li><a class="el" href="classTopRegionReplyPacket.html">TopRegionReplyPacket</a> * <a class="el" href="classMapReader.html#d1">handleTopRegionRequestPacket</a> (<a class="el" href="classPacket.html">Packet</a> *p) const 
<dl class="el"><dd class="mdescRight">Adds all top regions to the reply packet.  <a href="#d1"></a><br></dl><li><a class="el" href="classRoutingInfoReplyPacket.html">RoutingInfoReplyPacket</a> * <a class="el" href="classMapReader.html#d2">handleRoutingInfoRequest</a> (const <a class="el" href="classRoutingInfoRequestPacket.html">RoutingInfoRequestPacket</a> *req) const 
<dl class="el"><dd class="mdescRight">Fills a reply with information needed by the <a class="el" href="classRouteSender.html">RouteSender</a>.  <a href="#d2"></a><br></dl><li><a class="el" href="Types_8h.html#a21">uint32</a> <a class="el" href="classMapReader.html#d3">getRouteDistanceForLevel</a> (<a class="el" href="Types_8h.html#a21">uint32</a> level) const 
<dl class="el"><dd class="mdescRight">Uses <a class="el" href="classProperties.html">Properties</a> <b>ROUTE_DISTANCE_LEVEL_n</b> to find the distance to be used to decide when to start routing on higher level for the supplied level.  <a href="#d3"></a><br></dl><li><a class="el" href="classSmallestRoutingCostReplyPacket.html">SmallestRoutingCostReplyPacket</a> * <a class="el" href="classMapReader.html#d4">handleSmallestRoutingCostRequestPacket</a> (const <a class="el" href="classSmallestRoutingCostRequestPacket.html">SmallestRoutingCostRequestPacket</a> *p) const 
<dl class="el"><dd class="mdescRight">Takes care of a smallestRoutingCostRequestPacket and returns a reply.  <a href="#d4"></a><br></dl><li><a class="el" href="Types_8h.html#a21">uint32</a> <a class="el" href="classMapReader.html#d5">findMapFromCoordinate</a> (<a class="el" href="Types_8h.html#a22">int32</a> lat, <a class="el" href="Types_8h.html#a22">int32</a> lon, <a class="el" href="Types_8h.html#a27">float64</a> *mapDist=NULL)
<dl class="el"><dd class="mdescRight">Used internal to get the map where a point is located.\ { Currently this method uses linear search among the maps!}.  <a href="#d5"></a><br></dl><li>void <a class="el" href="classMapReader.html#d6">findMapsAtCoordinate</a> (<a class="el" href="Types_8h.html#a22">int32</a> lat, <a class="el" href="Types_8h.html#a22">int32</a> lon, Vector *mapIDs)
<li>void <a class="el" href="classMapReader.html#d7">findMapsInMC2BoundingBox</a> (const <a class="el" href="classMC2BoundingBox.html">MC2BoundingBox</a> *bbox, Vector *mapIDs, bool onlyAddCountryMaps=false)
<dl class="el"><dd class="mdescRight">Used internally to get the maps that are covered by a boundingbox.  <a href="#d7"></a><br></dl><li>void <a class="el" href="classMapReader.html#d8">findMapsWithinRadius</a> (Vector &amp;mapIDs, const <a class="el" href="classMC2Coordinate.html">MC2Coordinate</a> &amp;center, <a class="el" href="Types_8h.html#a21">uint32</a> radiusMeters, bool addUnderviewMaps=true, bool addCountryMaps=false)
<dl class="el"><dd class="mdescRight">Finds the maps covered by a circle with center in <code>center</code> and with a radius <code>radius</code>.  <a href="#d8"></a><br></dl><li><a class="el" href="classBBoxReplyPacket.html">BBoxReplyPacket</a> * <a class="el" href="classMapReader.html#d9">handleBBoxRequest</a> (const <a class="el" href="classBBoxRequestPacket.html">BBoxRequestPacket</a> *req)
<dl class="el"><dd class="mdescRight">Handles a bborequest packet.  <a href="#d9"></a><br></dl><li><a class="el" href="classAllMapReplyPacket.html">AllMapReplyPacket</a> * <a class="el" href="classMapReader.html#d10">handleAllMapRequest</a> (const <a class="el" href="classAllMapRequestPacket.html">AllMapRequestPacket</a> *req)
<dl class="el"><dd class="mdescRight">Handles the AllMap packet.  <a href="#d10"></a><br></dl><li><a class="el" href="classCopyrightBoxReplyPacket.html">CopyrightBoxReplyPacket</a> * <a class="el" href="classMapReader.html#d11">handleCopyrightBoxRequest</a> (const <a class="el" href="classCopyrightBoxRequestPacket.html">CopyrightBoxRequestPacket</a> *packet) const 
</ul>
<h2>Private Attributes</h2>
<ul>
<li>Vector * <a class="el" href="classMapReader.html#r0">m_startWithMaps</a>
<dl class="el"><dd class="mdescRight">Vector containing ID of the maps to start loading.  <a href="#r0"></a><br></dl><li><a class="el" href="classMapModuleNoticeContainer.html">MapModuleNoticeContainer</a> <a class="el" href="classMapReader.html#r1">m_indexDB</a>
<dl class="el"><dd class="mdescRight">Container with information about all maps.  <a href="#r1"></a><br></dl><li><a class="el" href="classMMRoutingCostTable.html">MMRoutingCostTable</a> * <a class="el" href="classMapReader.html#r2">m_routingCostTable</a>
<dl class="el"><dd class="mdescRight">A table containing the smallest routing costs from map to map.  <a href="#r2"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Class that handles some packets to the MapModule in a special way. 
<p>

<p>
Definition at line <a class="el" href="MapReader_8h-source.html#l00050">50</a> of file <a class="el" href="MapReader_8h-source.html">MapReader.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="MapReader::MapReader"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">MapReader::MapReader           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classQueue.html">Queue</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>q</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classPointerFifoTemplate.html">NetPacketQueue</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>sendQueue</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMapSafeVector.html">MapSafeVector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>loadedMaps</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classPacketReaderThread.html">PacketReaderThread</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>packetReader</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a19">uint16</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>definedRank</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Vector *&nbsp;</td>
          <td class="mdname" nowrap> <em>startWithMaps</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates an MapReader according to the specifications. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>q</em>&nbsp;</td><td>The queue where to insert the request to be processed by the processor. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>loadedMaps</em>&nbsp;</td><td>Where to look for the currently loaded maps. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>preferedPort</em>&nbsp;</td><td>The port to use if possible </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>leaderIP</em>&nbsp;</td><td>IP-address of the leader multicast address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>leaderPort</em>&nbsp;</td><td>Port for packets to the leader. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>availableIP</em>&nbsp;</td><td>IP-address of the available multicast address. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>availablePort</em>&nbsp;</td><td>Port for packets to the available's. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>definedRank</em>&nbsp;</td><td>Value used when voting for leader. High value indicated that the system administrator want this <a class="el" href="classModule.html">Module</a> to be leader. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>startWithMaps</em>&nbsp;</td><td>ID of the maps to load. If NULL all maps are loaded. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="MapReader::~MapReader"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual MapReader::~<a class="el" href="classMapReader.html">MapReader</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Deletes the MapReader and releases the allocated memory. 
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="d5" doxytag="MapReader::findMapFromCoordinate"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a> MapReader::findMapFromCoordinate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a22">int32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lat</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a22">int32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a27">float64</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>mapDist</em> = <code>NULL</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Used internal to get the map where a point is located.\ { Currently this method uses linear search among the maps!}. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>lat</em>&nbsp;</td><td>The latitude for the point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lon</em>&nbsp;</td><td>The longitude for the point. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mapDist</em>&nbsp;</td><td>Set to the signed square distance from the point to the map if not NULL. Default NULL. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Id of the map where point is located. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d6" doxytag="MapReader::findMapsAtCoordinate"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MapReader::findMapsAtCoordinate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a22">int32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lat</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a22">int32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>lon</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Vector *&nbsp;</td>
          <td class="mdname" nowrap> <em>mapIDs</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d7" doxytag="MapReader::findMapsInMC2BoundingBox"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MapReader::findMapsInMC2BoundingBox           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2BoundingBox.html">MC2BoundingBox</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>bbox</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Vector *&nbsp;</td>
          <td class="mdname" nowrap> <em>mapIDs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>onlyAddCountryMaps</em> = <code>false</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Used internally to get the maps that are covered by a boundingbox. 
<p>
Note that this method may include maps that really are not covered, since it uses the boundingboxes of the maps to compare with. This on the other hand a much faster way to do it. { Currently this method uses linear search among the maps!}<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bbox</em>&nbsp;</td><td>The boundingbox. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mapIDs</em>&nbsp;</td><td>Preallocated empty vector which will contain the mapids of the maps covered by the boundingbox. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>onlyAddCountryMaps</em>&nbsp;</td><td>Optional parameter, default false. Indicates if only country maps should be included or not. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d8" doxytag="MapReader::findMapsWithinRadius"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MapReader::findMapsWithinRadius           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Vector &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>mapIDs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2Coordinate.html">MC2Coordinate</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>center</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>radiusMeters</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>addUnderviewMaps</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>addCountryMaps</em> = <code>false</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Finds the maps covered by a circle with center in <code>center</code> and with a radius <code>radius</code>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mapIDs</em>&nbsp;</td><td>Vector to put the mapIDs in. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>center</em>&nbsp;</td><td>Center of the circle. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>radiusMeters</em>&nbsp;</td><td>Radius in verktum. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addUnderviewMaps</em>&nbsp;</td><td>True if underview maps are interesting. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>addCountryMaps</em>&nbsp;</td><td>True if country maps are interesting. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="MapReader::getRouteDistanceForLevel"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a> MapReader::getRouteDistanceForLevel           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>level</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Uses <a class="el" href="classProperties.html">Properties</a> <b>ROUTE_DISTANCE_LEVEL_n</b> to find the distance to be used to decide when to start routing on higher level for the supplied level. 
<p>
If there is no such property the defaults are used. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>The level to move from. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The level should be left when the distance is larger than the value returned here. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d10" doxytag="MapReader::handleAllMapRequest"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classAllMapReplyPacket.html">AllMapReplyPacket</a>* MapReader::handleAllMapRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classAllMapRequestPacket.html">AllMapRequestPacket</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>req</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handles the AllMap packet. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d9" doxytag="MapReader::handleBBoxRequest"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBBoxReplyPacket.html">BBoxReplyPacket</a>* MapReader::handleBBoxRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classBBoxRequestPacket.html">BBoxRequestPacket</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>req</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handles a bborequest packet. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d11" doxytag="MapReader::handleCopyrightBoxRequest"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classCopyrightBoxReplyPacket.html">CopyrightBoxReplyPacket</a>* MapReader::handleCopyrightBoxRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classCopyrightBoxRequestPacket.html">CopyrightBoxRequestPacket</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>packet</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="MapReader::handleMapRequestPacket"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMapReplyPacket.html">MapReplyPacket</a>* MapReader::handleMapRequestPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds info about the overview maps to the <a class="el" href="classMapRequestPacket.html">MapRequestPacket</a> if the packet is requesting a routemap. 
<p>
Uses the country information to get the country map with the same country code as the requested map and then converts the country map id to an overview map id. &lt;br /&gt; STORKA: This should be removed when the maps have this info in them. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>The <a class="el" href="classMapRequestPacket.html">MapRequestPacket</a> </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="MapReader::handleRoutingInfoRequest"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classRoutingInfoReplyPacket.html">RoutingInfoReplyPacket</a>* MapReader::handleRoutingInfoRequest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classRoutingInfoRequestPacket.html">RoutingInfoRequestPacket</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>req</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Fills a reply with information needed by the <a class="el" href="classRouteSender.html">RouteSender</a>. 
<p>
Currently number of map levels and distances to use when routing on them. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>req</em>&nbsp;</td><td>The request. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A reply with the information. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="MapReader::handleSmallestRoutingCostRequestPacket"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classSmallestRoutingCostReplyPacket.html">SmallestRoutingCostReplyPacket</a>* MapReader::handleSmallestRoutingCostRequestPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classSmallestRoutingCostRequestPacket.html">SmallestRoutingCostRequestPacket</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Takes care of a smallestRoutingCostRequestPacket and returns a reply. 
<p>
{ NB!} The reply is created inside this method and both the request and the reply { must} be deleted by the caller!     </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="MapReader::handleTopRegionRequestPacket"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classTopRegionReplyPacket.html">TopRegionReplyPacket</a>* MapReader::handleTopRegionRequestPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds all top regions to the reply packet. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td><a class="el" href="classTopRegionRequestPacket.html">TopRegionRequestPacket</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A new <a class="el" href="classTopRegionReplyPacket.html">TopRegionReplyPacket</a> containing all the top regions. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="MapReader::initLeader"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void MapReader::initLeader           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">set&lt; <a class="el" href="MapBits_8h.html#a5">MapID</a> &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>allMaps</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Loads the MapModuleObjVector when become leader. 
<p>
Calls the <a class="el" href="classMapReader.html#a3">initLeader()</a> in the superclass to ``do the ordinary things''. 
<p>
Reimplemented from <a class="el" href="classStandardReader.html#a12">StandardReader</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="MapReader::leaderProcessCtrlPacket"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MapReader::leaderProcessCtrlPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Take care of some of the special controllpackets that might be received by the MapModule-leader. 
<p>
Calls the leaderProcessCtrlPacket in the super class to take care of the ``ordinary'' control packet.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p</em>&nbsp;</td><td>The incomming control packet. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>True if the packet was handled by this method or by the method in the superclass, false otherwise. </dd></dl>

<p>
Reimplemented from <a class="el" href="classStandardReader.html#z338_7">StandardReader</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="MapReader::printMidMif"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool MapReader::printMidMif           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>mapId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classItemTypes.html#w342">ItemTypes::itemType</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Makes Generic map to print a mid mif version of an Items attributes and gfx-data. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mapId</em>&nbsp;</td><td>The identity of the map </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>The item type to create.  true if map is created, false if otherwise. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r1" doxytag="MapReader::m_indexDB"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMapModuleNoticeContainer.html">MapModuleNoticeContainer</a> <a class="el" href="classMapReader.html#r1">MapReader::m_indexDB</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Container with information about all maps. 
<p>
Has replaced the MapModuleObjVector. 
<p>
Definition at line <a class="el" href="MapReader_8h-source.html#l00249">249</a> of file <a class="el" href="MapReader_8h-source.html">MapReader.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="MapReader::m_routingCostTable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMMRoutingCostTable.html">MMRoutingCostTable</a>* <a class="el" href="classMapReader.html#r2">MapReader::m_routingCostTable</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A table containing the smallest routing costs from map to map. 
<p>

<p>
Definition at line <a class="el" href="MapReader_8h-source.html#l00255">255</a> of file <a class="el" href="MapReader_8h-source.html">MapReader.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="MapReader::m_startWithMaps"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Vector* <a class="el" href="classMapReader.html#r0">MapReader::m_startWithMaps</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Vector containing ID of the maps to start loading. 
<p>

<p>
Definition at line <a class="el" href="MapReader_8h-source.html#l00243">243</a> of file <a class="el" href="MapReader_8h-source.html">MapReader.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="MapReader_8h-source.html">MapReader.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:25:14 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
