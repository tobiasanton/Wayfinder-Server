<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: UserEnums.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000006.html">include</a></div>
<h1>UserEnums.h</h1><a href="UserEnums_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef USERENUMS_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define USERENUMS_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include "<a class="code" href="WFSubscriptionConstants_8h.html">WFSubscriptionConstants.h</a>"</span>
00019 <span class="preprocessor">#include "<a class="code" href="LangTypes_8h.html">LangTypes.h</a>"</span>
00020 <span class="preprocessor">#include "<a class="code" href="MC2String_8h.html">MC2String.h</a>"</span>
00021 
00022 <span class="keyword">class </span><a class="code" href="classPacket.html">Packet</a>;  <span class="comment">//Forward decl.</span>
00023 
<a name="l00027"></a><a class="code" href="classUserEnums.html">00027</a> <span class="keyword">class </span><a class="code" href="classUserEnums.html">UserEnums</a> {
00028    <span class="keyword">public</span>:
<a name="l00032"></a><a class="code" href="classUserEnums.html#w60">00032</a>       <span class="keyword">enum</span> userRightLevel {
00033          UR_TRIAL                         = (0x1 &lt;&lt;31),
00034          UR_SILVER                        = (0x1 &lt;&lt;30),
00035          UR_GOLD                          = (0x1 &lt;&lt;29),
00036          UR_DEMO                          = (0x1 &lt;&lt;28),
00037          UR_IRON                          = (0x1 &lt;&lt;27),
00038          UR_LITHIUM                       = (0x1 &lt;&lt;26),
00039          UR_CESIUM                        = (0x1 &lt;&lt;25),
00040          UR_WOLFRAM                       = (0x1 &lt;&lt;24),
00041 
00042          <span class="comment">// For convenience a all levels mask.</span>
00043          ALL_LEVEL_MASK                   = (UR_TRIAL|UR_SILVER|UR_GOLD|
00044                                              UR_IRON|UR_LITHIUM|UR_WOLFRAM),
00045          <span class="comment">// For convenience a TrialSilverGold mask.</span>
00046          TSG_MASK                         = (UR_TRIAL|UR_SILVER|UR_GOLD),
00047          <span class="comment">// For convenience a SilverGold mask.</span>
00048          SG_MASK                          = (UR_SILVER|UR_GOLD),
00049          <span class="comment">// For convenience a TrialSilver mask.</span>
00050          TS_MASK                          = (UR_TRIAL|UR_SILVER),
00051          <span class="comment">// For convenience a TrialGold mask.</span>
00052          TG_MASK                          = (UR_TRIAL|UR_GOLD),
00053          <span class="comment">// For convenience a TrialLithium mask.</span>
00054          TL_MASK                          = (UR_TRIAL|UR_LITHIUM),
00055          <span class="comment">// For convenience a TrialWolfram mask.</span>
00056          TW_MASK                          = (UR_TRIAL|UR_WOLFRAM),
00057 
00058          <span class="comment">// No level</span>
00059          UR_NO_LEVEL                      = 0,
00060 
00062          ALL_FLAGS                        = (UR_DEMO),
00063          ALL_FLAGS_INV                    = ~(ALL_FLAGS),
00064       };
00065 
00066 
<a name="l00072"></a><a class="code" href="classUserEnums.html#w61">00072</a>       <span class="keyword">enum</span> userRightService {
00073          UR_WF                              = 0x1,
00074          UR_RESERVED_BIT_2                  = 0x2,
00075          UR_MYWAYFINDER                     = 0x4,
00076          UR_MAPDL_PREGEN                    = 0x8,
00077          UR_MAPDL_CUSTOM                    = 0x10,
00078          UR_XML                             = 0x20,
00079          UR_RESERVED_BIT_6                  = 0x40,
00080          UR_TRAFFIC                         = 0x80,
00081          UR_SPEEDCAM                        = 0x100,
00082          UR_RESERVED_BIT_9                  = 0x200,
00083          UR_RESERVED_BIT_10                 = 0x400,
00084          UR_RESERVED_BIT_11                 = 0x800,
00085          UR_FREE_TRAFFIC                    = 0x1000,
00086          UR_POSITIONING                     = 0x2000,
00087          UR_RESERVED_BIT_14                 = 0x4000,
00088          UR_RESERVED_BIT_15                 = 0x8000,
00089          UR_FLEET                           = 0x10000,
00090          UR_VERSION_LOCK                    = 0x20000,
00091          UR_RESERVED_BIT_18                 = 0x40000,
00092          UR_RESERVED_BIT_19                 = 0x80000,
00093          UR_RESERVED_BIT_20                 = 0x100000,
00094          UR_RESERVED_BIT_21                 = 0x200000,
00095          UR_RESERVED_BIT_22                 = 0x400000,
00096          UR_WF_TRAFFIC_INFO_TEST            = 0x800000,
00097          UR_RESERVED_BIT_24                 = 0x1000000,
00098 
00099          UR_RESERVED_BIT_25                 = 0x2000000,
00100          UR_RESERVED_BIT_26                 = 0x4000000,
00101          UR_RESERVED_BIT_27                 = 0x8000000,
00102          UR_RESERVED_BIT_28                 = 0x10000000,
00103          UR_RESERVED_BIT_29                 = 0x20000000,
00104          UR_RESERVED_BIT_30                 = 0x40000000,
00105          UR_RESERVED_BIT_31                 = 0x80000000,
00106 
00107          UR_USE_GPS                         = 0x5,
00108          UR_ROUTE                           = 0x6,
00109          UR_SEARCH                          = 0x7,
00110          UR_POI                             = 0x9,
00111          <span class="comment">// Unused right here, 0xa</span>
00112          UR_PRO_WEATHER                     = 0xb,
00113 
00115          UR_ADD_NON_SUP_RIGHTS              = 0xc,
00116          <span class="comment">// Unused rights here, 0xd-0xf </span>
00117          
00119          UR_SCDB_SPEEDCAM                   = 0x11,
00121          UR_DISABLE_POI_LAYER               = 0x12,
00122 
00124          UR_APP_STORE_NAVIGATION            = 0x13,
00125 
00127 
00129          <span class="comment">// userRightService is no longer a bitfield use new method</span>
00130          UR_ALL_TRAFFIC_MASK = (UR_FREE_TRAFFIC | UR_WF_TRAFFIC_INFO_TEST ),
00131       };
00132 
00133 
00137       <span class="keyword">static</span> <span class="keywordtype">bool</span> isBitRight( userRightService r );
00138 
00139 
00143       <span class="keyword">static</span> <span class="keywordtype">bool</span> isTrafficRight( userRightService r );
00144 
00145 
<a name="l00147"></a><a class="code" href="classUserEnums_1_1URType.html">00147</a>       <span class="keyword">class </span><a class="code" href="classUserEnums_1_1URType.html">URType</a> : <span class="keyword">public</span> pair&lt;userRightLevel,userRightService&gt; {
00148          <span class="keyword">public</span>:
<a name="l00155"></a><a class="code" href="classUserEnums_1_1URType.html#a0">00155</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a>( userRightLevel level, userRightService service )
00156                : pair&lt;userRightLevel,userRightService&gt;( level, service ) {}
00157 
00158 
<a name="l00162"></a><a class="code" href="classUserEnums_1_1URType.html#a1">00162</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a>() 
00163                : pair&lt;userRightLevel,userRightService&gt;( 
00164                   userRightLevel(0), userRightService(0) ) {}
00165 
<a name="l00169"></a><a class="code" href="classUserEnums_1_1URType.html#a2">00169</a>             <span class="keyword">inline</span> <span class="keywordtype">bool</span> empty()<span class="keyword"> const </span>{
00170                <span class="keywordflow">return</span> first == 0 &amp;&amp; second == 0;
00171             }
00172 
<a name="l00176"></a><a class="code" href="classUserEnums_1_1URType.html#a3">00176</a>             <span class="keyword">inline</span> operator const void*()<span class="keyword"> const </span>{
00177                <span class="keywordflow">return</span> empty() ? NULL : <span class="keyword">this</span>;
00178             }
00179 
<a name="l00183"></a><a class="code" href="classUserEnums_1_1URType.html#a4">00183</a>             userRightLevel level()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> first; }
00184 
00185 
<a name="l00189"></a><a class="code" href="classUserEnums_1_1URType.html#a5">00189</a>             <span class="keywordtype">void</span> setLevel( userRightLevel l ) { first = l; }
00190 
00191 
<a name="l00195"></a><a class="code" href="classUserEnums_1_1URType.html#a6">00195</a>             userRightService service()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> second; }
00196 
<a name="l00200"></a><a class="code" href="classUserEnums_1_1URType.html#n3">00200</a>             <span class="keyword">friend</span> ostream&amp; <a class="code" href="UserRightsItemTable_8h.html#a0">operator&lt;&lt;</a>( ostream&amp; ost, <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; ur ) {
00201                <span class="keywordflow">return</span> ost &lt;&lt; <a class="code" href="MC2Logging_8h.html#a12">MC2HEX</a>(ur.<a class="code" href="classUserEnums_1_1URType.html#d2">getAsInt</a>());
00202             }
00203 
00207             <a class="code" href="classMC2String.html">MC2String</a>&amp; phpPrint( <a class="code" href="classMC2String.html">MC2String</a>&amp; tmp ) <span class="keyword">const</span>;
00208 
<a name="l00212"></a><a class="code" href="classUserEnums_1_1URType.html#a8">00212</a>             <span class="keywordtype">void</span> setService( userRightService s ) { second = s; }
00213 
<a name="l00217"></a><a class="code" href="classUserEnums_1_1URType.html#e0">00217</a>             <span class="keyword">static</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a> getAllMask() { <span class="keywordflow">return</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a>(<a class="code" href="Types_8h.html#a13">MAX_UINT64</a>); }
00218          
00222             WFSubscriptionConstants::subscriptionsTypes getLevelAsWFST()
00223                <span class="keyword">const</span>;
00224 
<a name="l00229"></a><a class="code" href="classUserEnums_1_1URType.html#a10">00229</a>             <span class="keywordtype">bool</span> levelAndServiceMatch( <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; other )<span class="keyword"> const </span>{
00230                <span class="keywordtype">bool</span> serviceMath = <span class="keyword">false</span>;
00231                <span class="keywordtype">bool</span> thisOneBit = isBitRight( service() );
00232                <span class="keywordtype">bool</span> otherOneBit = isBitRight( other.<a class="code" href="classUserEnums_1_1URType.html#a6">service</a>() );
00233                <span class="keywordflow">if</span> ( thisOneBit ) {
00234                   <span class="keywordflow">if</span> ( otherOneBit ) {
00235                      serviceMath = (service() &amp; other.<a class="code" href="classUserEnums_1_1URType.html#a6">service</a>());
00236                   }
00237                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !otherOneBit ) {
00238                   serviceMath = (service() == other.<a class="code" href="classUserEnums_1_1URType.html#a6">service</a>());
00239                }
00240                <span class="keywordflow">return</span> ( ( level() &amp; other.<a class="code" href="classUserEnums_1_1URType.html#a4">level</a>() ) || 
00241                         ((level()&amp;ALL_FLAGS_INV) == UR_NO_LEVEL &amp;&amp; 
00242                          (other.<a class="code" href="classUserEnums_1_1URType.html#a4">level</a>()&amp;ALL_FLAGS_INV) ==
00243                          UR_NO_LEVEL ) ) &amp;&amp; serviceMath;
00244             }
00245 
00246 
<a name="l00251"></a><a class="code" href="classUserEnums_1_1URType.html#a11">00251</a>             <span class="keywordtype">bool</span> levelAndServiceMatchMask( <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; mask )<span class="keyword"> const </span>{
00252                <span class="keywordtype">bool</span> serviceMath = <span class="keyword">false</span>;
00253                <span class="keywordtype">bool</span> thisOneBit = isBitRight( service() );
00254                <span class="keywordflow">if</span> ( thisOneBit ) {
00255                   serviceMath = (service() &amp; mask.<a class="code" href="classUserEnums_1_1URType.html#a6">service</a>());
00256                }
00257                <span class="keywordflow">return</span> ( ( (level()&amp;ALL_FLAGS_INV) &amp; 
00258                           (mask.<a class="code" href="classUserEnums_1_1URType.html#a4">level</a>()&amp;ALL_FLAGS_INV) ) || 
00259                         ((level()&amp;ALL_FLAGS_INV) == UR_NO_LEVEL &amp;&amp; 
00260                          (mask.<a class="code" href="classUserEnums_1_1URType.html#a4">level</a>()&amp;ALL_FLAGS_INV) ==
00261                          UR_NO_LEVEL ) ) &amp;&amp; serviceMath;
00262             }
00263             
00264 
<a name="l00268"></a><a class="code" href="classUserEnums_1_1URType.html#a12">00268</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; operator &amp;= ( <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; other ) {
00269                first  = userRightLevel( level() &amp; other.<a class="code" href="classUserEnums_1_1URType.html#a4">level</a>() );
00270                second = userRightService( service() &amp; other.<a class="code" href="classUserEnums_1_1URType.html#a6">service</a>() );
00271                <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00272             }
00273             
<a name="l00277"></a><a class="code" href="classUserEnums_1_1URType.html#a13">00277</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; operator|=( <span class="keyword">const</span> userRightService&amp; inservice ) {
00278                second = userRightService( second | inservice );
00279                <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00280             }
00281             
<a name="l00285"></a><a class="code" href="classUserEnums_1_1URType.html#a14">00285</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; operator|=( <span class="keyword">const</span> userRightLevel&amp; inlevel ) {
00286                first = userRightLevel( first | inlevel );
00287                <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00288             }
00289 
<a name="l00293"></a><a class="code" href="classUserEnums_1_1URType.html#a15">00293</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; operator|=( <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; other ) {
00294                *<span class="keyword">this</span> |= other.first;
00295                *<span class="keyword">this</span> |= other.second;
00296                <span class="keywordflow">return</span> *<span class="keyword">this</span>;
00297             }
00298 
<a name="l00302"></a><a class="code" href="classUserEnums_1_1URType.html#a16">00302</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a> operator~()<span class="keyword"> const </span>{
00303                <span class="keywordflow">return</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a> ( userRightLevel(~<a class="code" href="Types_8h.html#a21">uint32</a>(first)),
00304                                userRightService(~(second)) );
00305             }
00306 
00312             <span class="keywordtype">bool</span> <a class="code" href="namespaceTileFeatureScaleRange.html#a4">load</a>(<span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* p, <span class="keywordtype">int</span>&amp; pos);
00313             
00319             <span class="keywordtype">bool</span> <a class="code" href="namespaceTileFeatureScaleRange.html#a3">save</a>(<a class="code" href="classPacket.html">Packet</a>* p, <span class="keywordtype">int</span> &amp;pos) <span class="keyword">const</span>;
00320             
00325             <span class="keywordtype">int</span> getSizeInPacket() <span class="keyword">const</span>;
00326            
00327             
00328         <span class="keyword">private</span>:
<a name="l00334"></a><a class="code" href="classUserEnums_1_1URType.html#d0">00334</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a> <a class="code" href="MapRights_8h.html#a0">operator &amp;</a>( <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a>&amp; other )<span class="keyword"> const </span>{
00335                <span class="keywordflow">return</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a>( *<span class="keyword">this</span> ) &amp;= other;
00336             }
00337             
<a name="l00339"></a><a class="code" href="classUserEnums_1_1URType.html#n0">00339</a>             <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classUserProcessor.html">UserProcessor</a>;
<a name="l00341"></a><a class="code" href="classUserEnums_1_1URType.html#n1">00341</a>             <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classUserRight.html">UserRight</a>;
<a name="l00343"></a><a class="code" href="classUserEnums_1_1URType.html#n2">00343</a>             <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classXMLParserThread.html">XMLParserThread</a>;            
00344             
<a name="l00350"></a><a class="code" href="classUserEnums_1_1URType.html#d1">00350</a>             <a class="code" href="classUserEnums_1_1URType.html">URType</a>( uint64 type )
00351                : pair&lt;userRightLevel,userRightService&gt;( 
00352                   userRightLevel(type &gt;&gt; 32), 
00353                   userRightService(type&amp;<a class="code" href="Types_8h.html#a4">MAX_UINT32</a>) ) {}
00354             
<a name="l00358"></a><a class="code" href="classUserEnums_1_1URType.html#d2">00358</a>             <a class="code" href="Types_8h.html#a23">uint64</a> getAsInt()<span class="keyword"> const </span>{ 
00359                <span class="keywordflow">return</span> (<a class="code" href="Types_8h.html#a23">uint64</a>(level())&lt;&lt;32 | service()); }
00360 
00361       };
00362 
00370       <span class="keyword">static</span> <a class="code" href="classMC2String.html">MC2String</a> getName( <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">UserEnums::URType</a>&amp; type,
00371                                 LangTypes::language_t lang );
00372 
<a name="l00374"></a><a class="code" href="classUserEnums.html#s0">00374</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a> defaultMask;
00375 
<a name="l00377"></a><a class="code" href="classUserEnums.html#s1">00377</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a> allMask;
00378 
<a name="l00380"></a><a class="code" href="classUserEnums.html#s2">00380</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classUserEnums_1_1URType.html">URType</a> emptyMask;
00381       
00385       <span class="keyword">static</span> userRightLevel wfstAsLevel( 
00386          WFSubscriptionConstants::subscriptionsTypes wfst );
00387 
00388    
00389    <span class="keyword">private</span>:
00393       <a class="code" href="classUserEnums.html">UserEnums</a>();
00394 };
00395 
00396 
00397 <span class="preprocessor">#endif // USERENUMS_H</span>
00398 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:51 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
