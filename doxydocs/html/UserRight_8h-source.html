<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: UserRight.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000006.html">include</a></div>
<h1>UserRight.h</h1><a href="UserRight_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef USERRIGHT_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define USERRIGHT_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include "<a class="code" href="UserElement_8h.html">UserElement.h</a>"</span>
00019 <span class="preprocessor">#include "<a class="code" href="UserEnums_8h.html">UserEnums.h</a>"</span>
00020 <span class="preprocessor">#include "<a class="code" href="UserConstants_8h.html">UserConstants.h</a>"</span>
00021 
00022 <span class="keyword">class </span><a class="code" href="classUserReplyPacket.html">UserReplyPacket</a>;
00023 <span class="keyword">class </span><a class="code" href="classClientSetting.html">ClientSetting</a>;
00024 
<a name="l00048"></a><a class="code" href="classUserRight.html">00048</a> <span class="keyword">class </span><a class="code" href="classUserRight.html">UserRight</a> : <span class="keyword">public</span> <a class="code" href="classUserElement.html">UserElement</a> {
00049    <span class="keyword">public</span>:
00062       <a class="code" href="classUserRight.html#a0">UserRight</a>( <a class="code" href="Types_8h.html#a21">uint32</a> <span class="keywordtype">id</span>, <a class="code" href="Types_8h.html#a21">uint32</a> addTime, <a class="code" href="classUserEnums_1_1URType.html">UserEnums::URType</a> type,
00063                  <a class="code" href="Types_8h.html#a21">uint32</a> regionID, <a class="code" href="Types_8h.html#a21">uint32</a> startTime, <a class="code" href="Types_8h.html#a21">uint32</a> endTime,
00064                  <span class="keywordtype">bool</span> deleted, <span class="keyword">const</span> <span class="keywordtype">char</span>* origin );
00065 
00066 
00071       <a class="code" href="classUserRight.html#a0">UserRight</a>( <a class="code" href="Types_8h.html#a21">uint32</a> <span class="keywordtype">id</span> );
00072 
00073 
00077       <a class="code" href="classUserRight.html#a0">UserRight</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* p, <span class="keywordtype">int</span>&amp; pos );
00078 
00079    
00083       <a class="code" href="classUserRight.html#a0">UserRight</a>( <span class="keyword">const</span> <a class="code" href="classUserRight.html">UserRight</a>&amp; user );
00084 
00085 
00089       <span class="keyword">virtual</span> <a class="code" href="classUserRight.html#a4">~UserRight</a>();
00090 
00091 
00098       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a5">getSize</a>() <span class="keyword">const</span>;
00099 
00100 
00109       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a6">packInto</a>( <a class="code" href="classPacket.html">Packet</a>* p, <span class="keywordtype">int</span>&amp; pos );
00110 
00111 
00116       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a7">addChanges</a>( <a class="code" href="classPacket.html">Packet</a>* p, <span class="keywordtype">int</span>&amp; position );
00117 
00118 
00122       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#a8">readChanges</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* p, <span class="keywordtype">int</span>&amp; pos, 
00123                                 UserConstants::UserAction&amp; action );
00124 
00125 
00133       <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a9">readFromPacket</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* p, <span class="keywordtype">int</span>&amp; pos );
00134 
00135 
00141       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a10">getAddTime</a>() <span class="keyword">const</span>;
00142 
00143 
00149       <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a11">setAddTime</a>( <a class="code" href="Types_8h.html#a21">uint32</a> val );
00150 
00151 
00157       <a class="code" href="classUserEnums_1_1URType.html">UserEnums::URType</a> <a class="code" href="classUserRight.html#a12">getUserRightType</a>() <span class="keyword">const</span>;
00158 
00159 
00165       <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a13">setUserRightType</a>( <a class="code" href="classUserEnums_1_1URType.html">UserEnums::URType</a> val );
00166 
00167 
00173       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a14">getRegionID</a>() <span class="keyword">const</span>;
00174 
00175 
00181       <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a15">setRegionID</a>( <a class="code" href="Types_8h.html#a21">uint32</a> val );
00182 
00193    <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a16">getVersionLock</a>( <a class="code" href="Types_8h.html#a21">uint32</a> defval ) <span class="keyword">const</span>;
00194 
00203    <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#a17">setVersionLock</a>( <a class="code" href="Types_8h.html#a21">uint32</a> versionLock );
00204 
00205    
00211       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a18">getStartTime</a>() <span class="keyword">const</span>;
00212 
00213    
00219       <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a19">setStartTime</a>( <a class="code" href="Types_8h.html#a21">uint32</a> val );
00220 
00221 
00227       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a20">getEndTime</a>() <span class="keyword">const</span>;
00228 
00229 
00235       <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a21">setEndTime</a>( <a class="code" href="Types_8h.html#a21">uint32</a> val );
00236 
00237 
00243       <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#a22">checkAccessAt</a>( <a class="code" href="Types_8h.html#a21">uint32</a> t ) <span class="keyword">const</span>;
00244 
00251       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a23">getRightTimeLength</a>() <span class="keyword">const</span>;
00252 
00260       <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#a24">notDeletedAndValidAt</a>( <a class="code" href="Types_8h.html#a21">uint32</a> t ) <span class="keyword">const</span>;
00261 
00265       <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#a25">isDeleted</a>() <span class="keyword">const</span>;
00266 
00267 
00271       <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a26">setDeleted</a>( <span class="keywordtype">bool</span> val );
00272 
00273 
00277       <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classUserRight.html#a27">getOrigin</a>() <span class="keyword">const</span>;
00278 
00279 
00283       <span class="keywordtype">void</span> <a class="code" href="classUserRight.html#a28">setOrigin</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* val );
00284 
00285 
00289       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a29">getNbrChanged</a>() <span class="keyword">const</span>;
00290 
00291 
00299       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a30">printValue</a>( <span class="keywordtype">char</span>* target, 
00300                          UserConstants::UserRightField field ) <span class="keyword">const</span>;
00301 
00302 
00308       <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classUserRight.html#a31">getID</a>() <span class="keyword">const</span>;
00309 
00310 
00314       <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#a32">changed</a>( UserConstants::UserRightField field ) <span class="keyword">const</span>;
00315 
00316 
00320       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#a33">isChanged</a>() <span class="keyword">const</span>;
00321 
00322 
00323    <span class="keyword">private</span>:
00327       <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#d0">readDataChanges</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* p, <span class="keywordtype">int</span>&amp; pos );
00328 
00329 
<a name="l00333"></a><a class="code" href="classUserRight.html#r0">00333</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_addTime;
00334 
00335 
<a name="l00339"></a><a class="code" href="classUserRight.html#r1">00339</a>       <a class="code" href="classUserEnums_1_1URType.html">UserEnums::URType</a> m_userRightType;
00340 
00341 
<a name="l00345"></a><a class="code" href="classUserRight.html#r2">00345</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_regionID;
00346 
00347 
<a name="l00351"></a><a class="code" href="classUserRight.html#r3">00351</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_startTime;
00352 
00353 
<a name="l00357"></a><a class="code" href="classUserRight.html#r4">00357</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_endTime;
00358 
00359 
<a name="l00363"></a><a class="code" href="classUserRight.html#r5">00363</a>       <span class="keywordtype">bool</span> m_deleted;
00364 
00365 
<a name="l00369"></a><a class="code" href="classUserRight.html#r6">00369</a>       <a class="code" href="classMC2String.html">MC2String</a> m_origin;
00370 
00371 
<a name="l00375"></a><a class="code" href="classUserRight.html#r7">00375</a>       <span class="keywordtype">bool</span> <a class="code" href="classUserRight.html#r7">m_changed</a>[ UserConstants::USER_RIGHT_NBRFIELDS ];
00376 };
00377 
00378 
00379 <span class="comment">// -----------------------------------------------------------------</span>
00380 <span class="comment">//  Implementation of inlined methods for UserRight</span>
00381 <span class="comment">// -----------------------------------------------------------------</span>
00382 
00383 
00384 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00385"></a><a class="code" href="classUserRight.html#a10">00385</a> <a class="code" href="classUserRight.html#a10">UserRight::getAddTime</a>()<span class="keyword"> const </span>{
00386    <span class="keywordflow">return</span> m_addTime;
00387 }
00388 
00389 
00390 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00391"></a><a class="code" href="classUserRight.html#a11">00391</a> <a class="code" href="classUserRight.html#a11">UserRight::setAddTime</a>( uint32 val ) {
00392    <a class="code" href="classUserRight.html#r7">m_changed</a>[ UserConstants::USER_RIGHT_ADD_TIME ] = <span class="keyword">true</span>;
00393    <a class="code" href="classUserRight.html#r0">m_addTime</a> = val;
00394 }
00395 
00396 
00397 <span class="keyword">inline</span> <a class="code" href="classUserEnums_1_1URType.html">UserEnums::URType</a>
<a name="l00398"></a><a class="code" href="classUserRight.html#a12">00398</a> <a class="code" href="classUserRight.html#a12">UserRight::getUserRightType</a>()<span class="keyword"> const </span>{
00399    <span class="keywordflow">return</span> m_userRightType;
00400 }
00401 
00402 
00403 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00404"></a><a class="code" href="classUserRight.html#a13">00404</a> <a class="code" href="classUserRight.html#a13">UserRight::setUserRightType</a>( <a class="code" href="classUserEnums_1_1URType.html">UserEnums::URType</a> val ) {
00405    <a class="code" href="classUserRight.html#r7">m_changed</a>[ UserConstants::USER_RIGHT_TYPE ] = <span class="keyword">true</span>;
00406    <a class="code" href="classUserRight.html#r1">m_userRightType</a> = val;
00407 }
00408 
00409 
00410 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00411"></a><a class="code" href="classUserRight.html#a14">00411</a> <a class="code" href="classUserRight.html#a14">UserRight::getRegionID</a>()<span class="keyword"> const </span>{
00412    <span class="keywordflow">return</span> m_regionID;
00413 }
00414 
00415 
00416 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00417"></a><a class="code" href="classUserRight.html#a15">00417</a> <a class="code" href="classUserRight.html#a15">UserRight::setRegionID</a>( uint32 val ) {
00418    <a class="code" href="classUserRight.html#r7">m_changed</a>[ UserConstants::USER_RIGHT_REGION_ID ] = <span class="keyword">true</span>;
00419    <a class="code" href="classUserRight.html#r2">m_regionID</a> = val;
00420 }
00421 
00422 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00423"></a><a class="code" href="classUserRight.html#a16">00423</a> <a class="code" href="classUserRight.html#a16">UserRight::getVersionLock</a>(uint32 value)<span class="keyword"> const</span>
00424 <span class="keyword"></span>{
00425    <span class="keywordflow">return</span> ((<a class="code" href="classUserRight.html#r1">m_userRightType</a>.second == UserEnums::UR_VERSION_LOCK) ?
00426            <a class="code" href="classUserRight.html#a14">getRegionID</a>() : value);
00427 }
00428 
00429 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
<a name="l00430"></a><a class="code" href="classUserRight.html#a17">00430</a> <a class="code" href="classUserRight.html#a17">UserRight::setVersionLock</a>(uint32 versionLock)
00431 {
00432    <span class="keywordtype">bool</span> is_vl = ( <a class="code" href="classUserRight.html#r1">m_userRightType</a>.second == UserEnums::UR_VERSION_LOCK );
00433    <span class="keywordflow">if</span>( is_vl ) {
00434       <a class="code" href="classUserRight.html#a15">setRegionID</a>( versionLock );
00435    } 
00436    <span class="keywordflow">return</span> is_vl;
00437 }
00438 
00439 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00440"></a><a class="code" href="classUserRight.html#a18">00440</a> <a class="code" href="classUserRight.html#a18">UserRight::getStartTime</a>()<span class="keyword"> const </span>{
00441    <span class="keywordflow">return</span> m_startTime;
00442 }
00443 
00444 
00445 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00446"></a><a class="code" href="classUserRight.html#a19">00446</a> <a class="code" href="classUserRight.html#a19">UserRight::setStartTime</a>( uint32 val ) {
00447    <a class="code" href="classUserRight.html#r7">m_changed</a>[ UserConstants::USER_RIGHT_START_TIME ] = <span class="keyword">true</span>;
00448    <a class="code" href="classUserRight.html#r3">m_startTime</a> = val;
00449 }
00450 
00451 
00452 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00453"></a><a class="code" href="classUserRight.html#a20">00453</a> <a class="code" href="classUserRight.html#a20">UserRight::getEndTime</a>()<span class="keyword"> const </span>{
00454    <span class="keywordflow">return</span> m_endTime;
00455 }
00456 
00457 
00458 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00459"></a><a class="code" href="classUserRight.html#a21">00459</a> <a class="code" href="classUserRight.html#a21">UserRight::setEndTime</a>( uint32 val ) {
00460    <a class="code" href="classUserRight.html#r7">m_changed</a>[ UserConstants::USER_RIGHT_END_TIME ] = <span class="keyword">true</span>;
00461    <a class="code" href="classUserRight.html#r4">m_endTime</a> = val;
00462 }
00463 
00464 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
<a name="l00465"></a><a class="code" href="classUserRight.html#a24">00465</a> <a class="code" href="classUserRight.html#a24">UserRight::notDeletedAndValidAt</a>( uint32 t )<span class="keyword"> const</span>
00466 <span class="keyword"></span>{
00467    <span class="keywordflow">return</span> <a class="code" href="classUserRight.html#a22">checkAccessAt</a>( t ) &amp;&amp; ! <a class="code" href="classUserRight.html#a25">isDeleted</a>();
00468 }
00469 
00470 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l00471"></a><a class="code" href="classUserRight.html#a25">00471</a> <a class="code" href="classUserRight.html#a25">UserRight::isDeleted</a>()<span class="keyword"> const </span>{
00472    <span class="keywordflow">return</span> m_deleted;
00473 }
00474 
00475 
00476 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00477"></a><a class="code" href="classUserRight.html#a26">00477</a> <a class="code" href="classUserRight.html#a26">UserRight::setDeleted</a>( <span class="keywordtype">bool</span> val ) {
00478    <a class="code" href="classUserRight.html#r7">m_changed</a>[ UserConstants::USER_RIGHT_DELETED ] = <span class="keyword">true</span>;
00479    <a class="code" href="classUserRight.html#r5">m_deleted</a> = val;
00480 }
00481 
00482 
00483 <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l00484"></a><a class="code" href="classUserRight.html#a27">00484</a> <a class="code" href="classUserRight.html#a27">UserRight::getOrigin</a>()<span class="keyword"> const </span>{
00485    <span class="keywordflow">return</span> <a class="code" href="classUserRight.html#r6">m_origin</a>.<a class="code" href="classMC2String.html#a11">c_str</a>();
00486 }
00487 
00488 
00489 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00490"></a><a class="code" href="classUserRight.html#a28">00490</a> <a class="code" href="classUserRight.html#a28">UserRight::setOrigin</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* val ) {
00491    <a class="code" href="classUserRight.html#r7">m_changed</a>[ UserConstants::USER_RIGHT_ORIGIN ] = <span class="keyword">true</span>;
00492    <a class="code" href="classUserRight.html#r6">m_origin</a> = val;
00493 }
00494 
00495 
00496 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00497"></a><a class="code" href="classUserRight.html#a31">00497</a> <a class="code" href="classUserRight.html#a31">UserRight::getID</a>()<span class="keyword"> const </span>{
00498    <span class="keywordflow">return</span> m_id;
00499 }
00500 
00501 
00502 <span class="preprocessor">#endif // USERRIGHT_H</span>
00503 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:51 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
