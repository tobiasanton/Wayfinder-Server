<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: Item.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000005.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000013.html">Items</a>&nbsp;/&nbsp;<a class="el" href="dir_000014.html">include</a></div>
<h1>Item.h</h1><a href="Item_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef ITEM_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define ITEM_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00019 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00020 <span class="preprocessor">#include "<a class="code" href="ItemTypes_8h.html">ItemTypes.h</a>"</span>
00021 <span class="preprocessor">#include "<a class="code" href="NameUtility_8h.html">NameUtility.h</a>"</span>
00022 
00023 <span class="keyword">class </span><a class="code" href="classGenericMap.html">GenericMap</a>;
00024 <span class="keyword">class </span><a class="code" href="classItemNames.html">ItemNames</a>;
00025 <span class="keyword">class </span><a class="code" href="classDataBuffer.html">DataBuffer</a>;
00026 <span class="keyword">class </span><a class="code" href="classGfxData.html">GfxData</a>;
00027 <span class="keyword">class </span><a class="code" href="classRouteableItem.html">RouteableItem</a>;
00028 <span class="keyword">class </span><a class="code" href="classGroupItem.html">GroupItem</a>;
00029 
00030 <span class="comment">// Cast functions which are needed when we remove the virtualness of the</span>
00031 <span class="comment">// items.</span>
00032 
00033 <span class="keyword">class </span><a class="code" href="classItem.html">Item</a>;
00034 
<a name="l00035"></a><a class="code" href="Item_8h.html#a0">00035</a> <span class="preprocessor">#define ITEMCAST(X, Y) class X; \</span>
00036 <span class="preprocessor"> inline X* item_cast_helper(Item* i, \</span>
00037 <span class="preprocessor">                            const X*) \</span>
00038 <span class="preprocessor">{ \</span>
00039 <span class="preprocessor">   return (X *) Item::itemOfType( i, ItemTypes::Y ); \</span>
00040 <span class="preprocessor">}</span>
00041 <span class="preprocessor"></span>
00042 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> DEST&gt;
<a name="l00043"></a><a class="code" href="Item_8h.html#a5">00043</a> <span class="keyword">const</span> DEST* <a class="code" href="Item_8h.html#a5">item_cast_helper_const</a>( <span class="keyword">const</span> <a class="code" href="classItem.html">Item</a>* i, <span class="keyword">const</span> DEST* d )
00044 {
00045    <span class="keywordflow">return</span> <a class="code" href="ZipCodeItem_8h.html#a0">item_cast_helper</a>( const_cast&lt;Item*&gt;(i), const_cast&lt;DEST*&gt;(d));
00046 }
00047 
00048 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00049"></a><a class="code" href="Item_8h.html#a6">00049</a> T <a class="code" href="Item_8h.html#a7">item_cast</a>(<span class="keyword">const</span> <a class="code" href="classItem.html">Item</a>* i)
00050 {
00051    <span class="keywordflow">return</span> <a class="code" href="Item_8h.html#a5">item_cast_helper_const</a>( i, static_cast&lt;T&gt;(i) );
00052 }
00053 
00054 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;
<a name="l00055"></a><a class="code" href="Item_8h.html#a7">00055</a> T <a class="code" href="Item_8h.html#a7">item_cast</a>(<a class="code" href="classItem.html">Item</a>* i)
00056 {
00057    <span class="keywordflow">return</span> <a class="code" href="ZipCodeItem_8h.html#a0">item_cast_helper</a>( i, static_cast&lt;T&gt;(i) );
00058 }
00059 
00060 
<a name="l00067"></a><a class="code" href="classItem.html">00067</a> <span class="keyword">class </span><a class="code" href="classItem.html">Item</a> {
00068       
<a name="l00072"></a><a class="code" href="Item_8h.html#a1">00072</a> <span class="preprocessor">#define GET_ZOOMLEVEL(id) ( ((id) &gt;&gt; 27) &amp; 0x0f)</span>
00073 <span class="preprocessor"></span>
<a name="l00074"></a><a class="code" href="Item_8h.html#a2">00074</a> <span class="preprocessor">#define GET_INDEXINZOOM(id) ( (id) &amp; 0x07ffffff)</span>
00075 <span class="preprocessor"></span>
<a name="l00076"></a><a class="code" href="Item_8h.html#a3">00076</a> <span class="preprocessor">#define CREATE_ITEMID(z, i) ( ((uint32(z) &amp; 0x0f) &lt;&lt; 27) |\</span>
00077 <span class="preprocessor">                                     (uint32(i) &amp; 0x07ffffff))</span>
00078 <span class="preprocessor"></span>   
00079 <span class="keyword">public</span>:
<a name="l00080"></a><a class="code" href="classItem.html#n0">00080</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classM3Creator.html">M3Creator</a>;
<a name="l00081"></a><a class="code" href="classItem.html#w0">00081</a>    <span class="keyword">typedef</span> <a class="code" href="Types_8h.html#a21">uint32</a> group_t;
<a name="l00082"></a><a class="code" href="classItem.html#w1">00082</a>    <span class="keyword">typedef</span> group_t* groupIndex_t;
<a name="l00083"></a><a class="code" href="classItem.html#w2">00083</a>    <span class="keyword">typedef</span> <a class="code" href="Types_8h.html#a21">uint32</a> name_t;
<a name="l00084"></a><a class="code" href="classItem.html#w3">00084</a>    <span class="keyword">typedef</span> name_t* nameIndex_t;
00085 
00093    <span class="keyword">static</span> <a class="code" href="classItem.html">Item</a>* createItemFromType( ItemTypes::itemType type,
00094                                     <a class="code" href="classGenericMap.html">GenericMap</a>&amp; theMap, 
00095                                     uint32 itemID);
00103    <span class="keyword">static</span> <a class="code" href="classItem.html">Item</a>* createNewItem(<a class="code" href="classDataBuffer.html">DataBuffer</a>&amp; dataBuffer, <a class="code" href="classGenericMap.html">GenericMap</a>&amp; theMap);
<a name="l00108"></a><a class="code" href="Item_8h.html#a4">00108</a> <span class="preprocessor">#define ITEMID_MASK 0x7fffffff</span>
00109 <span class="preprocessor"></span>
<a name="l00113"></a><a class="code" href="classItem.html#a0">00113</a>    <span class="keyword">inline</span> <a class="code" href="classItem.html">Item</a>() { <a class="code" href="MC2Logging_8h.html#a1">MINFO</a>(<span class="stringliteral">"Item()"</span>); };
00114       
00120    <span class="keyword">explicit</span> <a class="code" href="classItem.html">Item</a>(ItemTypes::itemType type, uint32 <span class="keywordtype">id</span> = MAX_UINT32);
00121 
<a name="l00125"></a><a class="code" href="classItem.html#a2">00125</a>    ~<a class="code" href="classItem.html">Item</a>() {}
00126 
00131    <span class="keyword">static</span> <a class="code" href="classGroupItem.html">GroupItem</a>* groupItem( <a class="code" href="classItem.html">Item</a>* maybeGroup );
00132 
00137    <span class="keyword">static</span> <a class="code" href="classRouteableItem.html">RouteableItem</a>* routeableItem( <a class="code" href="classItem.html">Item</a>* maybeRoutaeble );
00138 
00143    <span class="keyword">static</span> <a class="code" href="classItem.html">Item</a>* itemOfType( <a class="code" href="classItem.html">Item</a>* in_item,
00144                             ItemTypes::itemType wantedType );
00145    
00156    <span class="keyword">inline</span> LangTypes::language_t getNameLanguage(byte offset) <span class="keyword">const</span>;
00157 
00163    <span class="keyword">inline</span> ItemTypes::name_t getNameType(byte offset) <span class="keyword">const</span>;
00164 
00172    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getStringIndex(byte offset) <span class="keyword">const</span>;
00173          
00182    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getRawStringIndex(byte offset) <span class="keyword">const</span>;
00183 
00196    <span class="keyword">inline</span> <span class="keywordtype">bool</span> getNameAndType(byte offset, 
00197                               LangTypes::language_t&amp; strLang, 
00198                               ItemTypes::name_t&amp; strType, 
00199                               uint32&amp; strIndex) <span class="keyword">const</span>;
00200 
00215    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getNameWithType(ItemTypes::name_t strType, 
00216                                  LangTypes::language_t strLang) <span class="keyword">const</span>;
00217 
00225    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getBestRawName( LangTypes::language_t reqLang,
00226                                  <span class="keywordtype">bool</span> acceptUniqueName = <span class="keyword">true</span> ) <span class="keyword">const</span>;
00227 
00236    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getBestRawName( LangTypes::language_t reqLang,
00237                                  ItemTypes::name_t reqType,
00238                                  set&lt;uint32&gt;* usedStrings = NULL) <span class="keyword">const</span>;
00239 
00247    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getBestRawName(
00248                                 <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;LangTypes::language_t&gt;</a>&amp; reqLangs,
00249                                 <span class="keywordtype">bool</span> acceptUniqueName = <span class="keyword">true</span> ) <span class="keyword">const</span>;
00250 
00260    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
00261    getBestRawNameOfType( ItemTypes::name_t    nameType,
00262                          LangTypes::language_t reqLang,
00263                          set&lt;uint32&gt;* usedStrings = NULL) <span class="keyword">const</span>;
00264 
00274    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getBestRawNameOfType( ItemTypes::name_t nameType,
00275                        <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;LangTypes::language_t&gt;</a>&amp; reqLangs ) <span class="keyword">const</span>;
00276          
00281    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> getNbrNames() <span class="keyword">const</span>;
00282 
00292    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> getNbrNamesWithType(ItemTypes::name_t types) <span class="keyword">const</span>;
00293 
00295      
00310    <span class="keywordtype">bool</span> setNameType(byte offset, ItemTypes::name_t type);
00311 
00319    <span class="keywordtype">bool</span> setNameLanguage(byte offset, LangTypes::language_t lang);
00321      
00322 
00328 
00340    <span class="keywordtype">bool</span> hasSameNames(<span class="keyword">const</span> <a class="code" href="classItem.html">Item</a>* item) <span class="keyword">const</span>;
00341 
00342 
00352    <span class="keywordtype">bool</span> hasCommonName(<span class="keyword">const</span> <a class="code" href="classItem.html">Item</a>* item) <span class="keyword">const</span>;
00353 
00362    <span class="keywordtype">bool</span> hasCommonLangName(<span class="keyword">const</span> <a class="code" href="classItem.html">Item</a>* item) <span class="keyword">const</span>;
00363 
00372    <span class="keywordtype">bool</span> hasAllLangNames(<span class="keyword">const</span> <a class="code" href="classItem.html">Item</a>* item) <span class="keyword">const</span>;
00373 
00380    <a class="code" href="classvector.html">vector&lt;uint32&gt;</a> getCommonStrIdxes(<span class="keyword">const</span> <a class="code" href="classItem.html">Item</a>* item) <span class="keyword">const</span>;
00382 
00387    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getID () <span class="keyword">const </span>;
00388 
00393    <span class="keyword">inline</span> <span class="keywordtype">void</span> setID(uint32 ID);
00394       
00400    <span class="keyword">inline</span> <a class="code" href="classGfxData.html">GfxData</a>* getGfxData() <span class="keyword">const</span>;
00401    <span class="keyword">inline</span> <span class="keyword">const</span> nameIndex_t getNames() <span class="keyword">const</span>;
00402    <span class="keyword">inline</span> <span class="keyword">const</span> groupIndex_t getGroups() <span class="keyword">const</span>;
00403 
00416    <span class="keywordtype">void</span> setGfxData(<a class="code" href="classGfxData.html">GfxData</a>* gfx, <span class="keywordtype">bool</span> deleteOld = <span class="keyword">false</span>);
00417 
00425    <a class="code" href="Types_8h.html#a21">uint32</a> getLength() <span class="keyword">const</span>;
00426 
00434    <span class="keyword">inline</span> ItemTypes::itemType getItemType() <span class="keyword">const</span>;
00435       
00436 
00437 
00438    <span class="keyword">inline</span> <span class="keywordtype">bool</span> memberOfGroup(uint32 groupID) <span class="keyword">const</span>;
00439 
00444    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getNbrGroups() <span class="keyword">const</span>;
00445 
00451    <span class="keyword">inline</span> group_t getGroup( uint32 i ) <span class="keyword">const</span>;
00452 
00453 
00454    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getGroupIndex() <span class="keyword">const</span>;
00455 
00459    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> getUnmaskedGroup( uint32 i ) <span class="keyword">const</span>;
00460 
00461 
<a name="l00466"></a><a class="code" href="classItem.html#a16">00466</a>    <span class="keyword">inline</span> <span class="keywordtype">void</span> setGroup( groupIndex_t index ) { m_groups = index; }
<a name="l00471"></a><a class="code" href="classItem.html#a17">00471</a>    <span class="keyword">inline</span> <span class="keywordtype">void</span> setNames( nameIndex_t index ) { m_names = index; }
00472 
00478    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a17">uint8</a> getSource() <span class="keyword">const</span>;
00479 
00484    <span class="keyword">inline</span> <span class="keywordtype">void</span> setSource(uint8 newSource);
00485 
00492    <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* getItemTypeAsString( StringTable::languageCode lc = 
00493                                            StringTable::ENGLISH ) <span class="keyword">const</span>;
00494          
00499    <a class="code" href="Types_8h.html#a21">uint32</a> getMemoryUsage() <span class="keyword">const</span>;
00500 
00501 
00506    <span class="keywordtype">void</span> <a class="code" href="namespaceTileFeatureScaleRange.html#a3">save</a>( <a class="code" href="classDataBuffer.html">DataBuffer</a>&amp; dataBuffer, <span class="keyword">const</span> <a class="code" href="classGenericMap.html">GenericMap</a>&amp; <a class="code" href="classmap.html">map</a> ) <span class="keyword">const</span>;
00507 
00511    <span class="keywordtype">void</span> <a class="code" href="namespaceTileFeatureScaleRange.html#a4">load</a>( <a class="code" href="classDataBuffer.html">DataBuffer</a>&amp; dataBuffer, <a class="code" href="classGenericMap.html">GenericMap</a>&amp; theMap );
00512 
<a name="l00513"></a><a class="code" href="classItem.html#a24">00513</a>    <span class="keywordtype">void</span> setItemType( ItemTypes::itemType type ) { m_type = type; }
00514 
00515 <span class="keyword">protected</span>:
00520    <span class="keywordtype">void</span> init(ItemTypes::itemType type);
00521       
<a name="l00528"></a><a class="code" href="classItem.html#p0">00528</a>    nameIndex_t m_names;
00529 
<a name="l00534"></a><a class="code" href="classItem.html#p1">00534</a>    groupIndex_t m_groups;
00535 
<a name="l00543"></a><a class="code" href="classItem.html#p2">00543</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_localID;
00544 
<a name="l00548"></a><a class="code" href="classItem.html#p3">00548</a>    <a class="code" href="classGfxData.html">GfxData</a>* m_gfxData;
00549 
<a name="l00553"></a><a class="code" href="classItem.html#p4">00553</a>    <a class="code" href="Types_8h.html#a25">byte</a> m_nbrNames;
00554 
<a name="l00558"></a><a class="code" href="classItem.html#p5">00558</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrGroups;
00559 
<a name="l00565"></a><a class="code" href="classItem.html#p6">00565</a>    <a class="code" href="Types_8h.html#a25">byte</a> m_type;
00566 
<a name="l00570"></a><a class="code" href="classItem.html#p7">00570</a>    <a class="code" href="Types_8h.html#a25">byte</a> m_source;
00571 
00572 };
00573 
00574 
00575 <span class="comment">// ========================================================================</span>
00576 <span class="comment">//                                       Implementation ofinlined methods =</span>
00577 
00578 <span class="keyword">inline</span> LangTypes::language_t 
<a name="l00579"></a><a class="code" href="classItem.html#z673_0">00579</a> <a class="code" href="classItem.html#z673_0">Item::getNameLanguage</a>(byte offset)<span class="keyword"> const</span>
00580 <span class="keyword"></span>{
00581    <span class="keywordflow">if</span> ((offset &lt; m_nbrNames) &amp;&amp; (m_nbrNames &gt; 0)) {
00582       <span class="keywordflow">if</span>(<a class="code" href="classItem.html#z673_1">getNameType</a>(offset) == ItemTypes::roadNumber)
00583          <span class="keywordflow">return</span> (LangTypes::invalidLanguage);
00584       <span class="keywordflow">return</span> (<a class="code" href="ItemTypes_8h.html#a4">GET_STRING_LANGUAGE</a>(<a class="code" href="classItem.html#p0">m_names</a>[offset]));
00585    } <span class="keywordflow">else</span> {
00586       <span class="keywordflow">return</span> (LangTypes::invalidLanguage);
00587    }
00588 }
00589 
00590 <span class="keyword">inline</span> ItemTypes::name_t 
<a name="l00591"></a><a class="code" href="classItem.html#z673_1">00591</a> <a class="code" href="classItem.html#z673_1">Item::getNameType</a>(byte offset)<span class="keyword"> const</span>
00592 <span class="keyword"></span>{
00593    <span class="keywordflow">if</span> ((offset &lt; m_nbrNames) &amp;&amp; (m_nbrNames &gt; 0)) {
00594       <span class="keywordflow">return</span> (<a class="code" href="ItemTypes_8h.html#a7">GET_STRING_TYPE</a>(<a class="code" href="classItem.html#p0">m_names</a>[offset]));
00595    } <span class="keywordflow">else</span> {
00596       <span class="keywordflow">return</span> (ItemTypes::invalidName);
00597    }
00598 }
00599 
00600 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00601"></a><a class="code" href="classItem.html#z673_3">00601</a> <a class="code" href="classItem.html#z673_3">Item::getRawStringIndex</a>(byte offset)<span class="keyword"> const</span>
00602 <span class="keyword"></span>{
00603    <span class="keywordflow">if</span> (<a class="code" href="classItem.html#p4">m_nbrNames</a> == 0)
00604       <span class="keywordflow">return</span> (0);
00605    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (offset &lt; m_nbrNames)
00606       <span class="keywordflow">return</span> (<a class="code" href="classItem.html#p0">m_names</a>[offset]);
00607    <span class="keywordflow">else</span>
00608       <span class="keywordflow">return</span> (MAX_UINT32);
00609 }
00610 
00611 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00612"></a><a class="code" href="classItem.html#z673_2">00612</a> <a class="code" href="classItem.html#z673_2">Item::getStringIndex</a>(byte offset)<span class="keyword"> const</span>
00613 <span class="keyword"></span>{
00614    <a class="code" href="Types_8h.html#a21">uint32</a> res = <a class="code" href="classItem.html#z673_3">getRawStringIndex</a>(offset);
00615    <span class="keywordflow">if</span> (res != MAX_UINT32) {
00616       res = <a class="code" href="ItemTypes_8h.html#a10">GET_STRING_INDEX</a>(res);
00617    }
00618    <span class="keywordflow">return</span> res;
00619 }
00620 
00621 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
<a name="l00622"></a><a class="code" href="classItem.html#z673_4">00622</a> <a class="code" href="classItem.html#z673_4">Item::getNameAndType</a>(byte offset, LangTypes::language_t&amp; strLang, 
00623                      ItemTypes::name_t&amp; strType, uint32&amp; strIndex)<span class="keyword"> const</span>
00624 <span class="keyword"></span>{
00625    <span class="keywordflow">if</span> (<a class="code" href="classItem.html#p4">m_nbrNames</a> == 0) {
00626       strLang = LangTypes::invalidLanguage;
00627       strType = ItemTypes::invalidName;
00628       strIndex = 0;
00629       <span class="keywordflow">return</span> <span class="keyword">true</span>;
00630    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (offset &lt; m_nbrNames) {
00631       strType = <a class="code" href="ItemTypes_8h.html#a7">GET_STRING_TYPE</a>(<a class="code" href="classItem.html#p0">m_names</a>[offset]);
00632       <span class="keywordflow">if</span>(strType == ItemTypes::roadNumber)
00633          strLang = LangTypes::invalidLanguage;
00634       <span class="keywordflow">else</span>
00635          strLang = <a class="code" href="ItemTypes_8h.html#a4">GET_STRING_LANGUAGE</a>(<a class="code" href="classItem.html#p0">m_names</a>[offset]);
00636       strIndex = <a class="code" href="ItemTypes_8h.html#a10">GET_STRING_INDEX</a>(<a class="code" href="classItem.html#p0">m_names</a>[offset]);
00637       <span class="keywordflow">return</span> <span class="keyword">true</span>;
00638    } <span class="keywordflow">else</span> {
00639       <span class="keywordflow">return</span> <span class="keyword">false</span>;
00640    }
00641 }
00642 
00643 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00644"></a><a class="code" href="classItem.html#z673_5">00644</a> <a class="code" href="classItem.html#z673_5">Item::getNameWithType</a>(ItemTypes::name_t strType, 
00645                       LangTypes::language_t strLang)<span class="keyword"> const</span>
00646 <span class="keyword"></span>{
00647    <a class="code" href="Types_8h.html#a21">uint32</a> i=0;
00648    <a class="code" href="Types_8h.html#a21">uint32</a> retValue = MAX_UINT32;
00649    <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;
00650    <span class="keywordflow">while</span> ((i&lt;<a class="code" href="classItem.html#z673_11">getNbrNames</a>()) &amp;&amp; (!found)) {
00651       ItemTypes::name_t curType;
00652       LangTypes::language_t curLang;
00653       <a class="code" href="Types_8h.html#a21">uint32</a> curIndex;
00654 
00655       <span class="keywordflow">if</span> (<a class="code" href="classItem.html#z673_4">getNameAndType</a>(i, curLang, curType, curIndex)) {
00656          
00657          <span class="keywordflow">if</span> ( ((strType == curType) || 
00658               (strType == ItemTypes::invalidName)) &amp;&amp;
00659               ((strLang == curLang) || 
00660               (strLang == LangTypes::invalidLanguage)) ) {
00661             found = <span class="keyword">true</span>;
00662             retValue = curIndex;
00663          } <span class="keywordflow">else</span> {
00664             i++;
00665          }
00666       } <span class="keywordflow">else</span> {
00667          found = <span class="keyword">true</span>;
00668          retValue = MAX_UINT32;
00669       }
00670 
00671    }
00672 
00673    <span class="keywordflow">return</span> (retValue);
00674 }
00675 
00676 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00677"></a><a class="code" href="classItem.html#z673_6">00677</a> <a class="code" href="classItem.html#z673_6">Item::getBestRawName</a>(LangTypes::language_t reqLang,
00678                      <span class="keywordtype">bool</span> acceptUniqueName)<span class="keyword"> const</span>
00679 <span class="keyword"></span>{
00680    <span class="keywordtype">int</span> idx = <a class="code" href="classNameUtility.html#e0">NameUtility::getBestName</a>(<a class="code" href="classItem.html#p4">m_nbrNames</a>,
00681                                       <a class="code" href="classItem.html#p0">m_names</a>,
00682                                       reqLang,
00683                                       NULL,
00684                                       acceptUniqueName);
00685    <span class="keywordflow">if</span> ( idx &lt; 0 ) {
00686       <span class="keywordflow">return</span> MAX_UINT32;
00687    } <span class="keywordflow">else</span> {
00688       <span class="keywordflow">return</span> <a class="code" href="classItem.html#p0">m_names</a>[idx];
00689    }
00690 }
00691 
00692 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00693"></a><a class="code" href="classItem.html#z673_7">00693</a> <a class="code" href="classItem.html#z673_6">Item::getBestRawName</a>(LangTypes::language_t reqLang,
00694                      ItemTypes::name_t reqType,
00695                      set&lt;uint32&gt;* usedStrings)<span class="keyword"> const</span>
00696 <span class="keyword"></span>{
00697    <span class="keywordtype">int</span> idx = <a class="code" href="classNameUtility.html#e7">NameUtility::getName</a>(<a class="code" href="classItem.html#p4">m_nbrNames</a>,
00698                                   <a class="code" href="classItem.html#p0">m_names</a>,
00699                                   reqLang,
00700                                   reqType,
00701                                   usedStrings);
00702    <span class="keywordflow">if</span> ( idx &lt; 0 ) {
00703       <span class="keywordflow">return</span> MAX_UINT32;
00704    } <span class="keywordflow">else</span> {
00705       <span class="keywordflow">return</span> <a class="code" href="classItem.html#p0">m_names</a>[idx];
00706    }
00707 }
00708 
00709 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00710"></a><a class="code" href="classItem.html#z673_8">00710</a> <a class="code" href="classItem.html#z673_6">Item::getBestRawName</a>(<span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;LangTypes::language_t&gt;</a>&amp; reqLangs,
00711                      <span class="keywordtype">bool</span> acceptUniqueName)<span class="keyword"> const</span>
00712 <span class="keyword"></span>{
00713    <span class="keywordtype">int</span> idx = <a class="code" href="classNameUtility.html#e0">NameUtility::getBestName</a>(<a class="code" href="classItem.html#p4">m_nbrNames</a>,
00714                                       <a class="code" href="classItem.html#p0">m_names</a>,
00715                                       reqLangs,
00716                                       NULL,
00717                                       acceptUniqueName);
00718    <span class="keywordflow">if</span> ( idx &lt; 0 ) {
00719       <span class="keywordflow">return</span> MAX_UINT32;
00720    } <span class="keywordflow">else</span> {
00721       <span class="keywordflow">return</span> <a class="code" href="classItem.html#p0">m_names</a>[idx];
00722    }
00723 }
00724 
00725 
00726 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00727"></a><a class="code" href="classItem.html#z673_9">00727</a> <a class="code" href="classItem.html#z673_9">Item::getBestRawNameOfType</a>(ItemTypes::name_t     nameType,
00728                            LangTypes::language_t reqLang ,
00729                            set&lt;uint32&gt;* usedStrings)<span class="keyword"> const</span>
00730 <span class="keyword"></span>{
00731    <span class="keywordtype">int</span> idx = <a class="code" href="classNameUtility.html#e4">NameUtility::getBestNameOfType</a>(<a class="code" href="classItem.html#p4">m_nbrNames</a>,
00732                                             <a class="code" href="classItem.html#p0">m_names</a>,
00733                                             reqLang,
00734                                             nameType,
00735                                             usedStrings);
00736    <span class="keywordflow">if</span> ( idx &lt; 0 ) {
00737       <span class="keywordflow">return</span> MAX_UINT32;
00738    } <span class="keywordflow">else</span> {
00739       <span class="keywordflow">return</span> <a class="code" href="classItem.html#p0">m_names</a>[idx];
00740    } 
00741 }
00742 
00743 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l00744"></a><a class="code" href="classItem.html#z673_10">00744</a> <a class="code" href="classItem.html#z673_9">Item::getBestRawNameOfType</a>(ItemTypes::name_t nameType,
00745                            <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;LangTypes::language_t&gt;</a>&amp; reqLangs)<span class="keyword"> const</span>
00746 <span class="keyword"></span>{
00747    <span class="keywordtype">int</span> idx = <a class="code" href="classNameUtility.html#e4">NameUtility::getBestNameOfType</a>(<a class="code" href="classItem.html#p4">m_nbrNames</a>,
00748                                             <a class="code" href="classItem.html#p0">m_names</a>,
00749                                             reqLangs,
00750                                             nameType);
00751    <span class="keywordflow">if</span> ( idx &lt; 0 ) {
00752       <span class="keywordflow">return</span> MAX_UINT32;
00753    } <span class="keywordflow">else</span> {
00754       <span class="keywordflow">return</span> <a class="code" href="classItem.html#p0">m_names</a>[idx];
00755    }
00756 }
00757 
00758 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> 
<a name="l00759"></a><a class="code" href="classItem.html#z673_11">00759</a> <a class="code" href="classItem.html#z673_11">Item::getNbrNames</a>()<span class="keyword"> const</span>
00760 <span class="keyword"></span>{
00761    <span class="keywordflow">return</span> <a class="code" href="Types_8h.html#a25">byte</a>(<a class="code" href="classItem.html#p4">m_nbrNames</a>);
00762 }
00763 
00764 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> 
<a name="l00765"></a><a class="code" href="classItem.html#z673_12">00765</a> <a class="code" href="classItem.html#z673_12">Item::getNbrNamesWithType</a>(ItemTypes::name_t type)<span class="keyword"> const</span>
00766 <span class="keyword"></span>{
00767    <span class="comment">// The value to return.</span>
00768    <a class="code" href="Types_8h.html#a25">byte</a> retVal = 0;
00769 
00770    <span class="comment">// Loop over all the names and find the names that match the given types</span>
00771    <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i=0; i&lt;<a class="code" href="classItem.html#z673_11">getNbrNames</a>(); i++) {
00772       ItemTypes::name_t strType = <a class="code" href="ItemTypes_8h.html#a7">GET_STRING_TYPE</a>(<a class="code" href="classItem.html#p0">m_names</a>[i]);
00773       <span class="keywordflow">if</span> ( strType == type) {
00774          retVal++;
00775       }
00776    }
00777 
00778    <span class="comment">// Return the number of found companies</span>
00779    <span class="keywordflow">return</span> (retVal);
00780 }
00781 
<a name="l00782"></a><a class="code" href="classItem.html#a3">00782</a> <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classItem.html#a3">Item::getID</a> ()<span class="keyword"> const</span>
00783 <span class="keyword"></span>{
00784    <span class="keywordflow">return</span> m_localID;
00785 }
00786 
<a name="l00787"></a><a class="code" href="classItem.html#a4">00787</a> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classItem.html#a4">Item::setID</a>(uint32 ID)
00788 {
00789    <a class="code" href="classItem.html#p2">m_localID</a> = ID;
00790 }
00791 
00792 <span class="keyword">inline</span> <a class="code" href="classGfxData.html">GfxData</a>* 
<a name="l00793"></a><a class="code" href="classItem.html#a5">00793</a> <a class="code" href="classItem.html#a5">Item::getGfxData</a>()<span class="keyword"> const</span>
00794 <span class="keyword"></span>{
00795    <span class="keywordflow">return</span> m_gfxData;
00796 }
00797 
00798 <span class="keyword">inline</span> <span class="keyword">const</span> Item::nameIndex_t
<a name="l00799"></a><a class="code" href="classItem.html#a6">00799</a> <a class="code" href="classItem.html#a6">Item::getNames</a>()<span class="keyword"> const</span>
00800 <span class="keyword"></span>{
00801    <span class="keywordflow">return</span> m_names;
00802 }
00803 
00804 <span class="keyword">inline</span> <span class="keyword">const</span> Item::groupIndex_t
<a name="l00805"></a><a class="code" href="classItem.html#a7">00805</a> <a class="code" href="classItem.html#a7">Item::getGroups</a>()<span class="keyword"> const</span>
00806 <span class="keyword"></span>{
00807    <span class="keywordflow">return</span> m_groups;
00808 }
00809 
00810 <span class="keyword">inline</span> ItemTypes::itemType
<a name="l00811"></a><a class="code" href="classItem.html#a10">00811</a> <a class="code" href="classItem.html#a10">Item::getItemType</a>()<span class="keyword"> const</span>
00812 <span class="keyword"></span>{
00813    <span class="keywordflow">return</span> (<a class="code" href="classItemTypes.html#w342">ItemTypes::itemType</a>(<a class="code" href="classItem.html#p6">m_type</a>));
00814 }
00815 
00816 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00817"></a><a class="code" href="classItem.html#a12">00817</a> <a class="code" href="classItem.html#a12">Item::getNbrGroups</a>()<span class="keyword"> const</span>
00818 <span class="keyword"></span>{
00819    <span class="keywordflow">return</span> m_nbrGroups;
00820 }
00821 
00822 <span class="keyword">inline</span> Item::group_t
<a name="l00823"></a><a class="code" href="classItem.html#a13">00823</a> <a class="code" href="classItem.html#a13">Item::getGroup</a>(uint32 i)<span class="keyword"> const</span>
00824 <span class="keyword"></span>{
00825    <span class="keywordflow">if</span> (i &lt; <a class="code" href="classItem.html#a12">getNbrGroups</a>()) {
00826       <span class="keywordflow">return</span> <a class="code" href="classItem.html#p1">m_groups</a>[i] &amp; 0x7fffffff;
00827    }
00828    <span class="keywordflow">return</span> MAX_UINT32;
00829 }
00830 
00831 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l00832"></a><a class="code" href="classItem.html#a15">00832</a> <a class="code" href="classItem.html#a15">Item::getUnmaskedGroup</a>(uint32 i)<span class="keyword"> const</span>
00833 <span class="keyword"></span>{
00834    <span class="keywordflow">if</span> (i &lt; <a class="code" href="classItem.html#a12">getNbrGroups</a>()) {
00835       <span class="keywordflow">return</span> <a class="code" href="classItem.html#p1">m_groups</a>[i];
00836    }
00837    <span class="keywordflow">return</span> MAX_UINT32;
00838 }
00839 
00840 <span class="keyword">inline</span> <span class="keywordtype">bool</span> 
<a name="l00841"></a><a class="code" href="classItem.html#a11">00841</a> <a class="code" href="classItem.html#a11">Item::memberOfGroup</a>(uint32 groupID)<span class="keyword"> const</span>
00842 <span class="keyword"></span>{
00843    <span class="keywordflow">for</span> (<a class="code" href="Types_8h.html#a21">uint32</a> i=0; i&lt;<a class="code" href="classItem.html#a12">getNbrGroups</a>(); ++i) {
00844       <span class="keywordflow">if</span> (<a class="code" href="classItem.html#a13">getGroup</a>(i) == groupID)
00845          <span class="keywordflow">return</span> <span class="keyword">true</span>;
00846    }
00847    <span class="keywordflow">return</span> <span class="keyword">false</span>;
00848 }
00849 
00850 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a17">uint8</a> 
<a name="l00851"></a><a class="code" href="classItem.html#a18">00851</a> <a class="code" href="classItem.html#a18">Item::getSource</a>()<span class="keyword"> const </span>
00852 <span class="keyword"></span>{
00853    <span class="keywordflow">return</span> m_source;
00854 }
00855 
00856 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l00857"></a><a class="code" href="classItem.html#a19">00857</a> <a class="code" href="classItem.html#a19">Item::setSource</a>(uint8 newSource) 
00858 {
00859    <a class="code" href="classItem.html#p7">m_source</a> = newSource;
00860 }
00861 
00862 <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* 
<a name="l00863"></a><a class="code" href="classItem.html#a20">00863</a> <a class="code" href="classItem.html#a20">Item::getItemTypeAsString</a>( StringTable::languageCode lc )<span class="keyword"> const </span>
00864 <span class="keyword"></span>{
00865    <span class="keyword">const</span> <span class="keywordtype">char</span>* str = <a class="code" href="classStringTable.html#z86_1">StringTable::getString</a>( 
00866          ItemTypes::getItemTypeSC( <a class="code" href="classItem.html#a10">getItemType</a>() ), lc );
00867    <span class="keywordflow">if</span> (str != NULL) {
00868       <span class="keywordflow">return</span> (str);
00869    } <span class="keywordflow">else</span> {
00870       <span class="keywordflow">return</span> (<span class="stringliteral">"Unknown itemtype"</span>);
00871    }
00872       
00873 }
00874 
00875 
00876 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:47 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
