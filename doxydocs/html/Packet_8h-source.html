<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: Packet.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">include</a></div>
<h1>Packet.h</h1><a href="Packet_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef __PACKET_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define __PACKET_H</span>
00016 <span class="preprocessor"></span>
00017 
00018 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00019 
00020 <span class="preprocessor">#include "<a class="code" href="AlignUtility_8h.html">AlignUtility.h</a>"</span>
00021 <span class="preprocessor">#include "<a class="code" href="BitUtility_8h.html">BitUtility.h</a>"</span>
00022 <span class="preprocessor">#include "<a class="code" href="TimeUtility_8h.html">TimeUtility.h</a>"</span>
00023 <span class="preprocessor">#include "<a class="code" href="NotCopyable_8h.html">NotCopyable.h</a>"</span>
00024 
00025 <span class="preprocessor">#include "<a class="code" href="MC2BoundingBox_8h.html">MC2BoundingBox.h</a>"</span>
00026 <span class="preprocessor">#include "<a class="code" href="MC2String_8h.html">MC2String.h</a>"</span>
00027 
00028 <span class="preprocessor">#ifndef _MSC_VER</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;netinet/in.h&gt;</span> <span class="comment">// htonl</span>
00030 <span class="preprocessor">#else</span>
00031 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;winsock.h&gt;</span>
00032 <span class="preprocessor">#endif</span>
00033 <span class="preprocessor"></span>
00034 <span class="preprocessor">#include &lt;string.h&gt;</span>
00035 
00036 <span class="keyword">class </span><a class="code" href="classIPnPort.html">IPnPort</a>;
00037 
<a name="l00038"></a><a class="code" href="Packet_8h.html#a0">00038</a> <span class="preprocessor">#define DEFAULT_PACKET_PRIO    7</span>
<a name="l00039"></a><a class="code" href="Packet_8h.html#a1">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define DEFAULT_PACKET_TAG     "MC2"</span>
<a name="l00040"></a><a class="code" href="Packet_8h.html#a2">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_TAG          0</span>
<a name="l00041"></a><a class="code" href="Packet_8h.html#a3">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_PROTMAJOR    3</span>
<a name="l00042"></a><a class="code" href="Packet_8h.html#a4">00042</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_PROTPRIO     4</span>
<a name="l00043"></a><a class="code" href="Packet_8h.html#a5">00043</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_PACKETNBR    5</span>
<a name="l00044"></a><a class="code" href="Packet_8h.html#a6">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_SUBTYPE      6</span>
<a name="l00045"></a><a class="code" href="Packet_8h.html#a7">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_ORIGINIP     8</span>
<a name="l00046"></a><a class="code" href="Packet_8h.html#a8">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_ORIGINPORT  12</span>
<a name="l00047"></a><a class="code" href="Packet_8h.html#a9">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_REQUESTID   14</span>
<a name="l00048"></a><a class="code" href="Packet_8h.html#a10">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_TIMESTAMP   16</span>
<a name="l00049"></a><a class="code" href="Packet_8h.html#a11">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_ORIGINATOR  20</span>
<a name="l00050"></a><a class="code" href="Packet_8h.html#a12">00050</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_RESOURCE    22</span>
<a name="l00051"></a><a class="code" href="Packet_8h.html#a13">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_DEBITINFO   24</span>
<a name="l00052"></a><a class="code" href="Packet_8h.html#a14">00052</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_PACKETID    28</span>
<a name="l00053"></a><a class="code" href="Packet_8h.html#a15">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_NBRPACKETS  30</span>
<a name="l00054"></a><a class="code" href="Packet_8h.html#a16">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_RESENDNBR   31</span>
<a name="l00055"></a><a class="code" href="Packet_8h.html#a17">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_MAPSETID    32</span>
<a name="l00056"></a><a class="code" href="Packet_8h.html#a18">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_REQUEST_TAG 36</span>
<a name="l00057"></a><a class="code" href="Packet_8h.html#a19">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_TIMEOUT     40</span>
<a name="l00058"></a><a class="code" href="Packet_8h.html#a20">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define PACKET_OFFSET_CPUTIME     41</span>
00059 <span class="preprocessor"></span><span class="comment">// Packet header size (bytes)</span>
<a name="l00060"></a><a class="code" href="Packet_8h.html#a21">00060</a> <span class="preprocessor">#  define   HEADER_SIZE          48    </span>
00061 <span class="preprocessor"></span><span class="comment">// RequestPacket header size (bytes)</span>
<a name="l00062"></a><a class="code" href="Packet_8h.html#a22">00062</a> <span class="preprocessor">#  define   REQUEST_HEADER_SIZE  (HEADER_SIZE + 4)</span>
00063 <span class="preprocessor"></span><span class="comment">// ReplyPacket header size (bytes)</span>
<a name="l00064"></a><a class="code" href="Packet_8h.html#a23">00064</a> <span class="preprocessor">#  define   REPLY_HEADER_SIZE    (HEADER_SIZE + 4)</span>
00065 <span class="preprocessor"></span><span class="comment">// Max packet size for receiving OK</span>
<a name="l00066"></a><a class="code" href="Packet_8h.html#a24">00066</a> <span class="preprocessor">#  define   MAX_PACKET_SIZE      65000 </span>
00067 <span class="preprocessor"></span><span class="comment">// SubTypes highest bit</span>
<a name="l00068"></a><a class="code" href="Packet_8h.html#a25">00068</a> <span class="preprocessor">#  define   CTRL_PACKET_BIT      32768 </span>
00069 <span class="preprocessor"></span>
<a name="l00100"></a><a class="code" href="classPacket.html">00100</a> <span class="keyword">class </span><a class="code" href="classPacket.html">Packet</a>: <span class="keyword">private</span> <a class="code" href="classNotCopyable.html">NotCopyable</a>
00101 {
<a name="l00102"></a><a class="code" href="classPacket.html#n0">00102</a>    <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classPacketPool.html">PacketPool</a>;
00103 
00104    <span class="keyword">public</span>:
<a name="l00105"></a><a class="code" href="classPacket.html#w0">00105</a>       <span class="keyword">typedef</span> <a class="code" href="Types_8h.html#a19">uint16</a> PacketID;
<a name="l00106"></a><a class="code" href="classPacket.html#w1">00106</a>       <span class="keyword">typedef</span> <a class="code" href="Types_8h.html#a19">uint16</a> RequestID;
<a name="l00107"></a><a class="code" href="classPacket.html#w2">00107</a>       <span class="keyword">typedef</span> <a class="code" href="Types_8h.html#a21">uint32</a> MapID;
<a name="l00113"></a><a class="code" href="classPacket.html#s0">00113</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrPriorities;
<a name="l00114"></a><a class="code" href="classPacket.html#s1">00114</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classPacket.html#w2">MapID</a> MAX_MAP_ID;
<a name="l00115"></a><a class="code" href="classPacket.html#s2">00115</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="classPacket.html#w1">RequestID</a> MAX_REQUEST_ID;
<a name="l00119"></a><a class="code" href="classPacket.html#w217">00119</a>       <span class="keyword">enum</span> <a class="code" href="classPacket.html#w217">packetType</a> {
00120          <a class="code" href="classPacket.html#w217w3">PACKETTYPE_ACKNOWLEDGE</a>                             = 1,
00121          <a class="code" href="classPacket.html#w217w4">PACKETTYPE_MAPREPLY</a>                                = 17,
00122          <a class="code" href="classPacket.html#w217w5">PACKETTYPE_ROUTEREPLY</a>                              = 19,
00123          <a class="code" href="classPacket.html#w217w6">PACKETTYPE_COORDINATEREPLY</a>                         = 22,
00124          <a class="code" href="classPacket.html#w217w7">PACKETTYPE_TOPREGIONREPLY</a>                          = 23,
00125          <a class="code" href="classPacket.html#w217w8">PACKETTYPE_VANILLASEARCHREQUEST</a>                    = 26,
00126          <a class="code" href="classPacket.html#w217w9">PACKETTYPE_VANILLASEARCHREPLY</a>                      = 27,
00127          <a class="code" href="classPacket.html#w217w10">PACKETTYPE_USERSEARCHREQUEST</a>                       = 28,
00128          <a class="code" href="classPacket.html#w217w11">PACKETTYPE_USERSEARCHREPLY</a>                         = 29,
00129          <a class="code" href="classPacket.html#w217w12">PACKETTYPE_EXPANDROUTEREQUEST</a>                      = 33,
00130          <a class="code" href="classPacket.html#w217w13">PACKETTYPE_EXPANDROUTEREPLY</a>                        = 34,
00131          <a class="code" href="classPacket.html#w217w14">PACKETTYPE_LOADMAPREQUEST</a>                          = 35,
00132          <a class="code" href="classPacket.html#w217w15">PACKETTYPE_SUBROUTE</a>                                = 36,
00133          <a class="code" href="classPacket.html#w217w16">PACKETTYPE_TESTREQUEST</a>                             = 41,
00134          <a class="code" href="classPacket.html#w217w17">PACKETTYPE_TESTREPLY</a>                               = 42,
00135          <a class="code" href="classPacket.html#w217w18">PACKETTYPE_USERGETDATAREQUEST</a>                      = 43,
00136          <a class="code" href="classPacket.html#w217w19">PACKETTYPE_USERGETDATAREPLY</a>                        = 44,
00137          <a class="code" href="classPacket.html#w217w20">PACKETTYPE_USERVERIFYREQUEST</a>                       = 45,
00138          <a class="code" href="classPacket.html#w217w21">PACKETTYPE_USERVERIFYREPLY</a>                         = 46,
00139          <a class="code" href="classPacket.html#w217w22">PACKETTYPE_USERLOGOUTREQUEST</a>                       = 47,
00140          <a class="code" href="classPacket.html#w217w23">PACKETTYPE_USERLOGOUTREPLY</a>                         = 48,
00141          <a class="code" href="classPacket.html#w217w24">PACKETTYPE_USERSESSIONCLEANUPREQUEST</a>               = 49,
00142          <a class="code" href="classPacket.html#w217w25">PACKETTYPE_USERSESSIONCLEANUPREPLY</a>                 = 50,
00143          <a class="code" href="classPacket.html#w217w26">PACKETTYPE_USERCHECKPASSWORDREQUEST</a>                = 51,
00144          <a class="code" href="classPacket.html#w217w27">PACKETTYPE_USERCHECKPASSWORDREPLY</a>                  = 52,
00145          <a class="code" href="classPacket.html#w217w28">PACKETTYPE_USERFINDREQUEST</a>                         = 53,
00146          <a class="code" href="classPacket.html#w217w29">PACKETTYPE_USERFINDREPLY</a>                           = 54,
00147          <a class="code" href="classPacket.html#w217w30">PACKETTYPE_GETCELLULARPHONEMODELDATAREQUEST</a>        = 55,
00148          <a class="code" href="classPacket.html#w217w31">PACKETTYPE_GETCELLULARPHONEMODELDATAREPLY</a>          = 56,
00149          <span class="comment">// Unused 57,58</span>
00150          <a class="code" href="classPacket.html#w217w32">PACKETTYPE_DELETEMAPREQUEST</a>                        = 63,
00151          <span class="comment">// DELETEMAPREPLY moved to ctrl packet</span>
00152          <a class="code" href="classPacket.html#w217w33">PACKETTYPE_PROXIMITYPOSITIONREQUESTPACKET</a>          = 65,
00153          <a class="code" href="classPacket.html#w217w34">PACKETTYPE_PROXIMITYITEMSETREQUESTPACKET</a>           = 66,
00154          <a class="code" href="classPacket.html#w217w35">PACKETTYPE_PROXIMITYREPLYPACKET</a>                    = 67,
00155          <a class="code" href="classPacket.html#w217w36">PACKETTYPE_COVEREDIDSREPLYPACKET</a>                   = 68,
00156          <a class="code" href="classPacket.html#w217w37">PACKETTYPE_PROXIMITYSEARCHREQUEST</a>                  = 69,
00157          <a class="code" href="classPacket.html#w217w38">PACKETTYPE_PROXIMITYSEARCHREPLY</a>                    = 70,
00159          <a class="code" href="classPacket.html#w217w39">PACKETTYPE_SMSREQUEST</a>                              = 71,
00160          <a class="code" href="classPacket.html#w217w40">PACKETTYPE_SMSREPLY</a>                                = 72,
00161          <a class="code" href="classPacket.html#w217w41">PACKETTYPE_SMSLISTENREPLY</a>                          = 77,
00162          <a class="code" href="classPacket.html#w217w42">PACKETTYPE_SMSLISTENREQUEST</a>                        = 80,
00163          <a class="code" href="classPacket.html#w217w43">PACKETTYPE_SUBROUTEREQUEST</a>                         = 83,
00164          <a class="code" href="classPacket.html#w217w44">PACKETTYPE_DEBITREQUEST</a>                            = 84,
00165          <a class="code" href="classPacket.html#w217w45">PACKETTYPE_DEBITREPLY</a>                              = 85,
00166          <a class="code" href="classPacket.html#w217w46">PACKETTYPE_OVERVIEWSEARCHREQUESTPACKET</a>             = 86,
00167          <a class="code" href="classPacket.html#w217w47">PACKETTYPE_OVERVIEWSEARCHREPLYPACKET</a>               = 87,
00168          <a class="code" href="classPacket.html#w217w48">PACKETTYPE_COORDINATEONITEMREQUEST</a>                 = 88,
00169          <a class="code" href="classPacket.html#w217w49">PACKETTYPE_COORDINATEONITEMREPLY</a>                   = 89,
00170          <a class="code" href="classPacket.html#w217w50">PACKETTYPE_EXPANDITEMREQUEST</a>                       = 90,
00171          <a class="code" href="classPacket.html#w217w51">PACKETTYPE_EXPANDITEMREPLY</a>                         = 91,
00172          <a class="code" href="classPacket.html#w217w52">PACKETTYPE_SEARCHSELECTIONREPORT</a>                   = 96,
00173          <span class="comment">// Unused 99,100</span>
00174          <a class="code" href="classPacket.html#w217w53">PACKETTYPE_SENDEMAILREQUEST</a>                        = 101,
00175          <a class="code" href="classPacket.html#w217w54">PACKETTYPE_SENDEMAILREPLY</a>                          = 102,
00176          <a class="code" href="classPacket.html#w217w55">PACKETTYPE_UPDATETRAFFICCOSTREPLY</a>                  = 103,
00177          <a class="code" href="classPacket.html#w217w56">PACKETTYPE_ADDDISTURBANCEREQUEST</a>                   = 104,
00178          <a class="code" href="classPacket.html#w217w57">PACKETTYPE_ADDDISTURBANCEREPLY</a>                     = 105,
00179          <a class="code" href="classPacket.html#w217w58">PACKETTYPE_REMOVEDISTURBANCEREQUEST</a>                = 106,
00180          <a class="code" href="classPacket.html#w217w59">PACKETTYPE_REMOVEDISTURBANCEREPLY</a>                  = 107,
00181          <a class="code" href="classPacket.html#w217w60">PACKETTYPE_UPDATETRAFFICCOSTREQUEST</a>                = 110,
00182          <a class="code" href="classPacket.html#w217w61">PACKETTYPE_DISTURBANCESUBSCRIPTIONREQUEST</a>          = 113,
00183          <a class="code" href="classPacket.html#w217w62">PACKETTYPE_DISTURBANCESUBSCRIPTIONREPLY</a>            = 114,
00184          <a class="code" href="classPacket.html#w217w63">PACKETTYPE_GETUSERNAVDESTINATIONREQUESTPACKET</a>      = 124,
00185          <a class="code" href="classPacket.html#w217w64">PACKETTYPE_GETUSERNAVDESTINATIONREPLYPACKET</a>        = 125,
00186          <a class="code" href="classPacket.html#w217w65">PACKETTYPE_SORTDISTREQUEST</a>                         = 129,
00187          <a class="code" href="classPacket.html#w217w66">PACKETTYPE_SORTDISTREPLY</a>                           = 130,
00188          <a class="code" href="classPacket.html#w217w67">PACKETTYPE_EXPANDCATEGORY2SEARCHREQUEST</a>            = 131, 
00189          <a class="code" href="classPacket.html#w217w68">PACKETTYPE_USER_AUTH_REQUEST</a>                       = 134,
00190          <a class="code" href="classPacket.html#w217w69">PACKETTYPE_USER_AUTH_REPLY</a>                         = 135,
00191          <a class="code" href="classPacket.html#w217w70">PACKETTYPE_ROUTEEXPANDITEMREQUEST</a>                  = 136,
00192          <a class="code" href="classPacket.html#w217w71">PACKETTYPE_ROUTEEXPANDITEMREPLY</a>                    = 137,
00193          <a class="code" href="classPacket.html#w217w72">PACKETTYPE_GETTMCCOORREQUEST</a>                       = 138,
00194          <a class="code" href="classPacket.html#w217w73">PACKETTYPE_GETTMCCOORREPLY</a>                         = 139,
00195          <a class="code" href="classPacket.html#w217w74">PACKETTYPE_ROUTESTORAGE_GET_ROUTE_REQUEST</a>          = 140,
00196          <a class="code" href="classPacket.html#w217w75">PACKETTYPE_ROUTESTORAGE_GET_ROUTE_REPLY</a>            = 141,
00197          <a class="code" href="classPacket.html#w217w76">PACKETTYPE_ITEM_NAMES_REQUEST</a>                      = 142,
00198          <a class="code" href="classPacket.html#w217w77">PACKETTYPE_ITEM_NAMES_REPLY</a>                        = 143,
00199          <a class="code" href="classPacket.html#w217w78">PACKETTYPE_ADDMAPUPDATE_REQUEST</a>                    = 144,
00200          <a class="code" href="classPacket.html#w217w79">PACKETTYPE_ADDMAPUPDATE_REPLY</a>                      = 145,
00201          <a class="code" href="classPacket.html#w217w80">PACKETTYPE_ITEMINFO_REQUEST</a>                        = 146,
00202          <a class="code" href="classPacket.html#w217w81">PACKETTYPE_ITEMINFO_REPLY</a>                          = 147,
00203          <a class="code" href="classPacket.html#w217w82">PACKETTYPE_GFXFEATUREMAP_IMAGE_REQUEST</a>             = 148,
00204          <a class="code" href="classPacket.html#w217w83">PACKETTYPE_GFXFEATUREMAP_IMAGE_REPLY</a>               = 149,
00205          <a class="code" href="classPacket.html#w217w84">PACKETTYPE_EDGENODESREQUEST</a>                        = 154,
00206          <a class="code" href="classPacket.html#w217w85">PACKETTYPE_EDGENODESREPLY</a>                          = 155,
00207          <a class="code" href="classPacket.html#w217w86">PACKETTYPE_IDTRANSLATIONREQUEST</a>                    = 156,
00208          <a class="code" href="classPacket.html#w217w87">PACKETTYPE_IDTRANSLATIONREPLY</a>                      = 157,
00209          <a class="code" href="classPacket.html#w217w88">PACKETTYPE_USERFAVORITES_REQUEST</a>                   = 158,
00210          <a class="code" href="classPacket.html#w217w89">PACKETTYPE_USERFAVORITES_REPLY</a>                     = 159,
00211          <a class="code" href="classPacket.html#w217w90">PACKETTYPE_MAPSUBSCRIPTIONREQUEST</a>                  = 160,
00212          <a class="code" href="classPacket.html#w217w91">PACKETTYPE_MAPSUBSCRIPTIONHEARTBEATREQUEST</a>         = 161,
00213          <a class="code" href="classPacket.html#w217w92">PACKETTYPE_TEST_PUSH</a>                               = 162,
00214          <a class="code" href="classPacket.html#w217w93">PACKETTYPE_UPDATEDISTURBANCEREQUEST</a>                = 165,
00215          <a class="code" href="classPacket.html#w217w94">PACKETTYPE_UPDATEDISTURBANCEREPLY</a>                  = 166,
00216          <a class="code" href="classPacket.html#w217w95">PACKETTYPE_SHUTDOWN</a>                                = 167,
00217          <a class="code" href="classPacket.html#w217w96">PACKETTYPE_ADDUSERTRACK_REQUEST</a>                     = 168,
00218          <a class="code" href="classPacket.html#w217w97">PACKETTYPE_ADDUSERTRACK_REPLY</a>                       = 169,
00219          <a class="code" href="classPacket.html#w217w98">PACKETTYPE_GETUSERTRACK_REQUEST</a>                     = 170,
00220          <a class="code" href="classPacket.html#w217w99">PACKETTYPE_GETUSERTRACK_REPLY</a>                       = 171,
00221          <a class="code" href="classPacket.html#w217w100">PACKETTYPE_SEARCHEXPANDITEMREQUEST</a>                  = 172,
00222          <a class="code" href="classPacket.html#w217w101">PACKETTYPE_SEARCHEXPANDITEMREPLY</a>                    = 173,
00223          <a class="code" href="classPacket.html#w217w102">PACKETTYPE_MATCHINFOREQUEST</a>                         = 174,
00224          <a class="code" href="classPacket.html#w217w103">PACKETTYPE_MATCHINFOREPLY</a>                           = 175,
00225          <a class="code" href="classPacket.html#w217w104">PACKETTYPE_SEARCHREQUEST</a>                            = 176,
00226          <a class="code" href="classPacket.html#w217w105">PACKETTYPE_WFACTIVATIONREQUEST</a>                      = 177,
00227          <a class="code" href="classPacket.html#w217w106">PACKETTYPE_WFACTIVATIONREPLY</a>                        = 178,
00228          <a class="code" href="classPacket.html#w217w107">PACKETTYPE_QUEUESTARTREQUEST</a>                        = 179,
00229          <a class="code" href="classPacket.html#w217w108">PACKETTYPE_QUEUESTARTREPLY</a>                          = 180,
00230          <a class="code" href="classPacket.html#w217w109">PACKETTYPE_ROUTETRAFFICCOSTREQUEST</a>                  = 181,
00231          <a class="code" href="classPacket.html#w217w110">PACKETTYPE_ROUTETRAFFICCOSTREPLY</a>                    = 182,
00232          <a class="code" href="classPacket.html#w217w111">PACKETTYPE_EXTERNALSEARCH_REQUEST</a>                   = 183,
00233          <a class="code" href="classPacket.html#w217w112">PACKETTYPE_EXTERNALSEARCH_REPLY</a>                     = 184,
00234          <a class="code" href="classPacket.html#w217w113">PACKETTYPE_EXTERNALITEMINFO_REQUEST</a>                 = 185,
00235          <a class="code" href="classPacket.html#w217w114">PACKETTYPE_TILEMAP_REQUEST</a>                          = 186,
00236          <a class="code" href="classPacket.html#w217w115">PACKETTYPE_TILEMAP_REPLY</a>                            = 187,
00237          <a class="code" href="classPacket.html#w217w116">PACKETTYPE_EXPAND_REQUEST</a>                           = 188,
00238          <a class="code" href="classPacket.html#w217w117">PACKETTYPE_EXPAND_REPLY</a>                             = 189,
00239          <a class="code" href="classPacket.html#w217w118">PACKETTYPE_TRAFFICPOINTREQUESTPACKET</a>                = 192,
00240          <a class="code" href="classPacket.html#w217w119">PACKETTYPE_TRAFFICPOINTREPLYPACKET</a>                  = 193,
00241          <a class="code" href="classPacket.html#w217w120">PACKETTYPE_GFXFEATUREMAPREQUEST</a>                     = 194,
00242          <a class="code" href="classPacket.html#w217w121">PACKETTYPE_GFXFEATUREMAPREPLY</a>                       = 195,
00243          <a class="code" href="classPacket.html#w217w122">PACKETTYPE_INFOCOORDINATEREQUEST</a>                    = 196,
00244          <a class="code" href="classPacket.html#w217w123">PACKETTYPE_INFOCOORDINATEREPLY</a>                      = 197,
00245          <span class="comment">// POI review</span>
00246          <a class="code" href="classPacket.html#w217w124">PACKETTYPE_POIREVIEW_ADD_REQUEST</a>                    = 198,
00247          <a class="code" href="classPacket.html#w217w125">PACKETTYPE_POIREVIEW_ADD_REPLY</a>                      = 199,
00248          <a class="code" href="classPacket.html#w217w126">PACKETTYPE_POIREVIEW_DELETE_REQUEST</a>                 = 200,
00249          <a class="code" href="classPacket.html#w217w127">PACKETTYPE_POIREVIEW_DELETE_REPLY</a>                   = 201,
00250          <a class="code" href="classPacket.html#w217w128">PACKETTYPE_POIREVIEW_LIST_REQUEST</a>                   = 202,
00251          <a class="code" href="classPacket.html#w217w129">PACKETTYPE_POIREVIEW_LIST_REPLY</a>                     = 203,
00252          <a class="code" href="classPacket.html#w217w130">PACKETTYPE_PERIODIC_REQUEST</a>                         = 204,
00253          <a class="code" href="classPacket.html#w217w131">PACKETTYPE_PERIODIC_REPLY</a>                           = 205,
00254          <a class="code" href="classPacket.html#w217w132">PACKETTYPE_SEND_DATA_REQUEST</a>                        = 206,
00255          <a class="code" href="classPacket.html#w217w133">PACKETTYPE_SEND_DATA_REPLY</a>                          = 207,
00256          <span class="comment">// Unused 208,209 here</span>
00257          <a class="code" href="classPacket.html#w217w134">PACKETTYPE_TILEMAPPOI_REQUEST</a>                       = 210,
00258          <a class="code" href="classPacket.html#w217w135">PACKETTYPE_TILEMAPPOI_REPLY</a>                         = 211,
00259          <span class="comment">// Stored user data packets</span>
00260          <a class="code" href="classPacket.html#w217w136">PACKETTYPE_GET_STORED_USER_DATA_REQUEST</a>             = 212,
00261          <a class="code" href="classPacket.html#w217w137">PACKETTYPE_GET_STORED_USER_DATA_REPLY</a>               = 213,
00262          <a class="code" href="classPacket.html#w217w138">PACKETTYPE_SET_STORED_USER_DATA_REQUEST</a>             = 214,
00263          <a class="code" href="classPacket.html#w217w139">PACKETTYPE_SET_STORED_USER_DATA_REPLY</a>               = 215,
00264 
00265          <a class="code" href="classPacket.html#w217w140">PACKETTYPE_LICENCE_TO_REQUEST</a>                       = 216,
00266          <a class="code" href="classPacket.html#w217w141">PACKETTYPE_LICENCE_TO_REPLY</a>                         = 217,
00267          <a class="code" href="classPacket.html#w217w142">PACKETTYPE_LISTDEBITREQUESTPACKET</a>                   = 218,
00268          <a class="code" href="classPacket.html#w217w143">PACKETTYPE_LISTDEBITREPLYPACKET</a>                     = 219,         
00269 
00270          <a class="code" href="classPacket.html#w217w144">PACKETTYPE_DISTURBANCE_CHANGESET_REQUEST</a>            = 220,
00271          <a class="code" href="classPacket.html#w217w145">PACKETTYPE_DISTURBANCE_CHANGESET_REPLY</a>              = 221,
00272 
00273          <a class="code" href="classPacket.html#w217w146">PACKETTYPE_FETCH_ALL_DISTURBANCES_REQUEST</a>           = 222,
00274          <a class="code" href="classPacket.html#w217w147">PACKETTYPE_FETCH_ALL_DISTURBANCES_REPLY</a>             = 223,
00275          <a class="code" href="classPacket.html#w217w148">PACKETTYPE_EXTSERVICE_LIST_REQUEST</a>                  = 224,
00276          <a class="code" href="classPacket.html#w217w149">PACKETTYPE_EXTSERVICE_LIST_REPLY</a>                    = 225,
00277 
00279          <a class="code" href="classPacket.html#w217w150">PACKETTYPE_GET_ITEM_INFO_REQUEST</a>                    = 226,
00281          <a class="code" href="classPacket.html#w217w151">PACKETTYPE_GET_ITEM_INFO_REPLY</a>                      = 227,
00282 
00284          <a class="code" href="classPacket.html#w217w152">PACKETTYPE_ID_KEY_TO_REQUEST</a>                        = 228,
00285          <a class="code" href="classPacket.html#w217w153">PACKETTYPE_ID_KEY_TO_REPLY</a>                          = 229,
00286 
00287 
00288          <span class="comment">// The ctrl-bit is set (32768..65536) --&gt; packet handled by leader</span>
00289 
00291          <a class="code" href="classPacket.html#w217w154">PACKETTYPE_HEARTBEAT</a>                               = 32769, 
00293          <a class="code" href="classPacket.html#w217w155">PACKETTYPE_VOTE</a>                                    = 32770,
00295          <a class="code" href="classPacket.html#w217w156">PACKETTYPE_IGNORE</a>                                  = 32771, 
00297          <a class="code" href="classPacket.html#w217w157">PACKETTYPE_STATISTICS</a>                              = 32772, 
00298          
00299          <span class="comment">// Top region request</span>
00300          <a class="code" href="classPacket.html#w217w158">PACKETTYPE_TOPREGIONREQUEST</a>                        = 32776,
00301          <a class="code" href="classPacket.html#w217w159">PACKETTYPE_ALLMAPREQUEST</a>                           = 32777,
00302          <a class="code" href="classPacket.html#w217w160">PACKETTYPE_ALLMAPREPLY</a>                             = 32778,
00304          <a class="code" href="classPacket.html#w217w161">PACKETTYPE_LOADMAPREPLY</a>                            = 32779,   
00305          <a class="code" href="classPacket.html#w217w162">PACKETTYPE_COORDINATEREQUEST</a>                       = 32780,
00307          <a class="code" href="classPacket.html#w217w163">PACKETTYPE_COVEREDIDSREQUESTPACKET</a>                 = 32781,
00309          <a class="code" href="classPacket.html#w217w164">PACKETTYPE_SMSSTATISTICS</a>                           = 32782,
00310          <a class="code" href="classPacket.html#w217w165">PACKETTYPE_SUBROUTEREPLY</a>                           = 32783,
00312          <a class="code" href="classPacket.html#w217w166">PACKETTYPE_USERADDREQUEST</a>                          = 32784,
00313          <a class="code" href="classPacket.html#w217w167">PACKETTYPE_USERADDREPLY</a>                            = 32785,
00314          <a class="code" href="classPacket.html#w217w168">PACKETTYPE_USERDELETEREQUEST</a>                       = 32786,
00315          <a class="code" href="classPacket.html#w217w169">PACKETTYPE_USERDELETEREPLY</a>                         = 32787,
00316          <a class="code" href="classPacket.html#w217w170">PACKETTYPE_USERCHANGEREQUEST</a>                       = 32788,
00317          <a class="code" href="classPacket.html#w217w171">PACKETTYPE_USERCHANGEREPLY</a>                         = 32789,
00318          <a class="code" href="classPacket.html#w217w172">PACKETTYPE_ADDCELLULARPHONEMODELREQUESTPACKET</a>      = 32790,
00319          <a class="code" href="classPacket.html#w217w173">PACKETTYPE_ADDCELLULARPHONEMODELREPLYPACKET</a>        = 32791,
00320          <a class="code" href="classPacket.html#w217w174">PACKETTYPE_CHANGEUSERPASSWORDREQUESTPACKET</a>         = 32792,
00321          <a class="code" href="classPacket.html#w217w175">PACKETTYPE_CHANGEUSERPASSWORDREPLYPACKET</a>           = 32793,
00322          <a class="code" href="classPacket.html#w217w176">PACKETTYPE_CHANGECELLULARPHONEMODELREQUESTPACKET</a>   = 32794,
00323          <a class="code" href="classPacket.html#w217w177">PACKETTYPE_CHANGECELLULARPHONEMODELREPLYPACKET</a>     = 32795,
00324          <span class="comment">// Removed ctrl bit from LISTDEBIT packet </span>
00325          <a class="code" href="classPacket.html#w217w178">PACKETTYPE_ADDUSERNAVDESTINATIONREQUESTPACKET</a>      = 32801,
00326          <a class="code" href="classPacket.html#w217w179">PACKETTYPE_ADDUSERNAVDESTINATIONREPLYPACKET</a>        = 32802, 
00327          <a class="code" href="classPacket.html#w217w180">PACKETTYPE_DELETEUSERNAVDESTINATIONREQUESTPACKET</a>   = 32808,
00328          <a class="code" href="classPacket.html#w217w181">PACKETTYPE_DELETEUSERNAVDESTINATIONREPLYPACKET</a>     = 32803,
00329          <a class="code" href="classPacket.html#w217w182">PACKETTYPE_CHANGEUSERNAVDESTINATIONREQUESTPACKET</a>   = 32804,
00330          <a class="code" href="classPacket.html#w217w183">PACKETTYPE_CHANGEUSERNAVDESTINATIONREPLYPACKET</a>     = 32805,
00331          <a class="code" href="classPacket.html#w217w184">PACKETTYPE_ALLCOUNTRYREQUEST</a>                       = 32806,
00332          <a class="code" href="classPacket.html#w217w185">PACKETTYPE_ALLCOUNTRYREPLY</a>                         = 32807,
00333          <a class="code" href="classPacket.html#w217w186">PACKETTYPE_ROUTESTORAGE_ADD_ROUTE_REQUEST</a>          = 32811,
00334          <a class="code" href="classPacket.html#w217w187">PACKETTYPE_ROUTESTORAGE_ADD_ROUTE_REPLY</a>            = 32812,
00335          <a class="code" href="classPacket.html#w217w188">PACKETTYPE_USER_CREATE_SESSION_REQUEST</a>             = 32813,
00336          <a class="code" href="classPacket.html#w217w189">PACKETTYPE_USER_CREATE_SESSION_REPLY</a>               = 32814,
00337          <a class="code" href="classPacket.html#w217w190">PACKETTYPE_LEADERIP_REQUEST</a>                        = 32819,
00338          <a class="code" href="classPacket.html#w217w191">PACKETTYPE_LEADERIP_REPLY</a>                          = 32820,
00339 
00341          <a class="code" href="classPacket.html#w217w192">PACKETTYPE_DELETEMAPREPLY</a>                          = 32821,
00342          <a class="code" href="classPacket.html#w217w193">PACKETTYPE_STREET_SEGMENT_ITEMREQUEST</a>              = 32822,
00343          <a class="code" href="classPacket.html#w217w194">PACKETTYPE_STREET_SEGMENT_ITEMREPLY</a>                = 32823,
00344          <a class="code" href="classPacket.html#w217w195">PACKETTYPE_DISTURBANCEREQUEST</a>                      = 32824,
00345          <a class="code" href="classPacket.html#w217w196">PACKETTYPE_DISTURBANCEREPLY</a>                        = 32825,
00346          <a class="code" href="classPacket.html#w217w197">PACKETTYPE_DISTURBANCEPUSH</a>                         = 32826,
00347          <span class="comment">// </span>
00348          <a class="code" href="classPacket.html#w217w198">PACKETTYPE_ALIVEREQUEST</a>                            = 32827,
00349          <a class="code" href="classPacket.html#w217w199">PACKETTYPE_ALIVEREPLY</a>                              = 32828,
00350 
00352          <a class="code" href="classPacket.html#w217w200">PACKETTYPE_MAPREQUEST</a>                              = 32829,
00353          
00354          <a class="code" href="classPacket.html#w217w201">PACKETTYPE_SMALLESTROUTINGCOSTREQUEST</a>              = 32830,
00355          <a class="code" href="classPacket.html#w217w202">PACKETTYPE_SMALLESTROUTINGCOSTREPLY</a>                = 32831,
00356 
00357          <a class="code" href="classPacket.html#w217w203">PACKETTYPE_ROUTINGINFOREQUEST</a>                      = 32832,
00358          <a class="code" href="classPacket.html#w217w204">PACKETTYPE_ROUTINGINFOREPLY</a>                        = 32833,
00359 
00360          <a class="code" href="classPacket.html#w217w205">PACKETTYPE_ROUTESTORAGE_CHANGE_ROUTE_REQUEST</a>       = 32836,
00361          <a class="code" href="classPacket.html#w217w206">PACKETTYPE_ROUTESTORAGE_CHANGE_ROUTE_REPLY</a>         = 32837,
00362 
00363          <a class="code" href="classPacket.html#w217w207">PACKETTYPE_TRANSACTION_REQUEST</a>                     = 32838,
00364          <a class="code" href="classPacket.html#w217w208">PACKETTYPE_TRANSACTION_REPLY</a>                       = 32839,
00365 
00366          <a class="code" href="classPacket.html#w217w209">PACKETTYPE_TRANSACTION_DAYS_REQUEST</a>                = 32840,
00367          <a class="code" href="classPacket.html#w217w210">PACKETTYPE_TRANSACTION_DAYS_REPLY</a>                  = 32841,
00368          <a class="code" href="classPacket.html#w217w211">PACKETTYPE_DISTURBANCEINFOREQUEST</a>                  = 32842,
00369          <a class="code" href="classPacket.html#w217w212">PACKETTYPE_DISTURBANCEINFOREPLY</a>                    = 32843,
00370          <a class="code" href="classPacket.html#w217w213">PACKETTYPE_BBOXREQUEST</a>                             = 32844,
00371          <a class="code" href="classPacket.html#w217w214">PACKETTYPE_BBOXREPLY</a>                               = 32845,
00372 
00373          <a class="code" href="classPacket.html#w217w215">PACKETTYPE_COPYRIGHTBOX_REQUEST</a>                    = 32846,
00374          <a class="code" href="classPacket.html#w217w216">PACKETTYPE_COPYRIGHTBOX_REPLY</a>                      = 32847,
00375 
00376       };
00377 
<a name="l00381"></a><a class="code" href="classPacket.html#s3">00381</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> MAX_UDP_PACKET_SIZE;
00382 
00388       <span class="keyword">static</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#e0">getTCPLimitSize</a>();
00389   
<a name="l00394"></a><a class="code" href="classPacket.html#s4">00394</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#s4">NO_PACKET_ID</a> = MAX_UINT16;
00395       
00401       <a class="code" href="classPacket.html#a0">Packet</a>(uint32 bufLength);
00402       
00412       <a class="code" href="classPacket.html#a0">Packet</a>(byte* buf, uint32 bufLength, <span class="keywordtype">bool</span> nodeleteandinit = <span class="keyword">false</span> );
00413 
00425       <a class="code" href="classPacket.html#a0">Packet</a>(uint32 bufLength, byte prio, uint16 subType, uint32 ip, 
00426              uint16 port, PacketID packetId, uint32 deb);
00427       
00439       <a class="code" href="classPacket.html#a0">Packet</a>( uint32 bufLength, byte prio, uint16 subType,
00440               PacketID packetId, RequestID requestID );      
00441       
00455       <a class="code" href="classPacket.html#a0">Packet</a>(uint32 bufLength, byte prio, uint16 subType,
00456              uint32 ip, uint16 port, PacketID packetId,
00457              RequestID requestId, uint32 deb );
00458       
00470       <span class="keyword">static</span> <a class="code" href="classPacket.html">Packet</a>* <a class="code" href="classPacket.html#e1">makePacket</a>( byte* buff, uint32 buffLength );
00471       
00475       <span class="keyword">virtual</span> <a class="code" href="classPacket.html#a5">~Packet</a>();
00476       
00482       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a6">getLength</a>() <span class="keyword">const</span>;
00483       
00488       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a7">setLength</a>(uint32 l);
00489       
00494       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a8">getBufSize</a>() <span class="keyword">const</span>;
00495       
00501       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a>* <a class="code" href="classPacket.html#a9">getBuf</a>() <span class="keyword">const</span>;
00502       
00510       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a>* <a class="code" href="classPacket.html#a10">getDataAddress</a>() <span class="keyword">const</span>;
00511       
00517       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#a11">getProtocolVersion</a>() <span class="keyword">const</span>;
00518       
00524       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a12">setProtocolVersion</a>(byte majorProt, byte minorProt);
00525       
00530       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#a13">getPriority</a>() <span class="keyword">const</span>;
00531       
00536       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a14">setPriority</a>(byte pr);
00537       
00543       <span class="keyword">inline</span> <a class="code" href="classPacket.html#w217">packetType</a> <a class="code" href="classPacket.html#a15">getSubType</a>() <span class="keyword">const</span>;
00544 
00545       
00550       <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classPacket.html#w217">packetType</a> <a class="code" href="classPacket.html#a15">getSubType</a>( byte* buff );
00551 
00556       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a16">setPacketTag</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* tag );
00557 
00562       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a17">setResourceID</a>( uint16 res );
00563       
00568       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#a18">getResourceID</a>() <span class="keyword">const</span>;
00569       
00574       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a19">setSubType</a>(uint16 st);
00575       
00581       <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="classPacket.html#a20">getSubTypeAsString</a>() <span class="keyword">const</span>;
00582 
00588       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a21">getOriginIP</a>() <span class="keyword">const</span>;
00589 
00594       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a22">setOriginIP</a>(uint32 ip);
00595 
00601       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#a23">getOriginPort</a>() <span class="keyword">const</span>;
00602       
00607       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a24">setOriginPort</a>(uint16 pn);
00608 
00612       <a class="code" href="classIPnPort.html">IPnPort</a> <a class="code" href="classPacket.html#a25">getOriginAddr</a>() <span class="keyword">const</span>;
00613 
00617       <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a26">setOriginAddr</a>( <span class="keyword">const</span> <a class="code" href="classIPnPort.html">IPnPort</a>&amp; addr );
00618       
00623       <span class="keyword">inline</span> <a class="code" href="classPacket.html#w1">RequestID</a> <a class="code" href="classPacket.html#a27">getRequestID</a>() <span class="keyword">const</span>;
00624 
00629       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a28">setRequestID</a>(RequestID rid);
00630       
00635       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a29">getRequestTimestamp</a>() <span class="keyword">const</span>;
00636 
00643       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a30">setRequestTimestamp</a>(uint32 timestamp);
00644       
00650       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#a31">getRequestOriginator</a>() <span class="keyword">const</span>;
00651 
00657       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a32">setRequestOriginator</a>(uint16 origin);
00658 
00665       <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a33">copyRequestInfoFrom</a>( <span class="keyword">const</span> <a class="code" href="classPacket.html">Packet</a>* other );
00666       
00671       <span class="keyword">inline</span> <a class="code" href="classPacket.html#w0">PacketID</a> <a class="code" href="classPacket.html#a34">getPacketID</a>() <span class="keyword">const</span>;
00672 
00677       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a35">setPacketID</a>(PacketID pi);
00678 
00683       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a36">getDebInfo</a>() <span class="keyword">const</span>;
00684 
00689       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a37">setDebInfo</a>(uint32 de);
00690 
00695    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a38">setCPUTime</a>( uint32 time );
00697    <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a39">getCPUTime</a>() <span class="keyword">const</span>;
00702       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#a40">getPacketNbr</a>() <span class="keyword">const</span>;
00703 
00708       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a41">setPacketNbr</a>( byte nbr );
00709 
00714       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#a42">getNbrPackets</a>() <span class="keyword">const</span>;
00715 
00720       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a43">setNbrPackets</a>( byte nbr );
00721  
00726       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#a44">getResendNbr</a>() <span class="keyword">const</span>;
00727 
00732       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a45">setResendNbr</a>( byte nbr );
00733 
00738       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a46">getMapSet</a>() <span class="keyword">const</span>;
00739       
00744       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a47">setMapSet</a>(uint32 mapSet);
00745 
00750       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a48">getRequestTag</a>() <span class="keyword">const</span>;
00751       
00756       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a49">setRequestTag</a>(uint32 requestTag);
00757 
00768       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a50">incWriteLong</a>(<span class="keywordtype">int</span> &amp;position, uint32 value);
00769 
00780       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a51">incWriteLongLong</a>(<span class="keywordtype">int</span>&amp; position, uint64 value);
00781 
00786       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a52">incWriteFloat32</a>( <span class="keywordtype">int</span>&amp; position, float32 value );
00787       
00793       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a53">incAlignWriteLong</a>(<span class="keywordtype">int</span>&amp; position);
00794       
00799       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a54">incAlignReadLong</a>(<span class="keywordtype">int</span>&amp; position) <span class="keyword">const</span>;
00800       
00810       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a55">incWriteShort</a>(<span class="keywordtype">int</span> &amp;position, uint16 value);
00811 
00817       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a56">incAlignWriteShort</a>(<span class="keywordtype">int</span>&amp; position);
00818       
00823       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a57">incAlignReadShort</a>(<span class="keywordtype">int</span>&amp; position) <span class="keyword">const</span>;
00824       
00834       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a58">incWriteByte</a>(<span class="keywordtype">int</span> &amp;position, byte value);
00835 
00844       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a59">incReadLong</a>(<span class="keywordtype">int</span> &amp;position) <span class="keyword">const</span>;
00845    
00852       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a23">uint64</a> <a class="code" href="classPacket.html#a60">incReadLongLong</a>(<span class="keywordtype">int</span> &amp; position) <span class="keyword">const</span>;
00853 
00862       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a26">float32</a> <a class="code" href="classPacket.html#a61">incReadFloat32</a>(<span class="keywordtype">int</span> &amp;position) <span class="keyword">const</span>;
00863 
00875       <span class="keyword">template</span>&lt;<span class="keyword">class</span> TYPE&gt; <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a59">incReadLong</a>(<span class="keywordtype">int</span>&amp; position, TYPE&amp; value) <span class="keyword">const</span>;
00876       
00885       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#a63">incReadShort</a>(<span class="keywordtype">int</span> &amp;position) <span class="keyword">const</span>;
00886 
00898       <span class="keyword">template</span>&lt;<span class="keyword">class</span> TYPE&gt; <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a63">incReadShort</a>(<span class="keywordtype">int</span>&amp; position, TYPE&amp; value) <span class="keyword">const</span>;
00899 
00906       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#a65">incReadByte</a>(<span class="keywordtype">int</span> &amp;position) <span class="keyword">const</span>;
00907       
00921       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a66">incReadString</a>(<span class="keywordtype">int</span> &amp;position, <span class="keywordtype">char</span>* &amp;str) <span class="keyword">const</span>;
00922 
00934       <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classPacket.html#a66">incReadString</a>(<span class="keywordtype">int</span> &amp;position) <span class="keyword">const</span>;
00935 
00939       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a66">incReadString</a>( <span class="keywordtype">int</span>&amp; pos, <a class="code" href="classMC2String.html">MC2String</a>&amp; string ) <span class="keyword">const</span>;
00940 
00954       <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a25">byte</a>* <a class="code" href="classPacket.html#a69">incReadByteArray</a>(<span class="keywordtype">int</span> &amp;position,
00955                                           <span class="keywordtype">int</span> nbrBytes) <span class="keyword">const</span>;
00956       
00957 
00966       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a>* <a class="code" href="classPacket.html#a69">incReadByteArray</a>(<span class="keywordtype">int</span> &amp;position,
00967                                     byte* dest,
00968                                     <span class="keywordtype">int</span> nbrBytes) <span class="keyword">const</span>;
00969            
00979       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a71">incReadBBox</a>(<span class="keywordtype">int</span>&amp; position, <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; bbox) <span class="keyword">const</span>;
00980       
00988       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a72">incWriteString</a>(<span class="keywordtype">int</span> &amp;position, <span class="keyword">const</span> <span class="keywordtype">char</span>* str);
00989       
00997       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a72">incWriteString</a>(<span class="keywordtype">int</span> &amp;position, <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; str );
00998 
01010       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a74">incWriteByteArray</a>(<span class="keywordtype">int</span> &amp;position,
01011                                    <span class="keyword">const</span> byte* bptr,
01012                                    <span class="keywordtype">int</span> nbrBytes);
01013       
01021       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a75">incWriteBBox</a>(<span class="keywordtype">int</span>&amp; position, <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; bbox);
01022       
01029       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a76">quickIncWriteString</a>( <span class="keywordtype">int</span> &amp;position,
01030                                        <span class="keyword">const</span> <span class="keywordtype">char</span> *str );
01031       
01042       <span class="keyword">inline</span> <span class="keyword">virtual</span> <a class="code" href="classPacket.html">Packet</a> *<a class="code" href="classPacket.html#a77">getClone</a>(<span class="keywordtype">bool</span> fullBuffer = <span class="keyword">true</span>) <span class="keyword">const</span>;
01043 
01051       <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a78">resize</a>( uint32 newSize );
01052 
01062       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a79">dump</a>(<span class="keywordtype">bool</span> headerOnly = <span class="keyword">false</span>,
01063                         <span class="keywordtype">bool</span> lookupIP = <span class="keyword">false</span> ) <span class="keyword">const</span>; 
01064 
01065 
01077       <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classPacket.html#a80">updateSize</a>(uint32 addSize, uint32 resizeSize);
01078 
<a name="l01082"></a><a class="code" href="classPacket.html#a81">01082</a>       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a81">setArrivalTime</a>() {
01083          <a class="code" href="classPacket.html#p3">m_arrivalTime</a> = <a class="code" href="namespaceTimeUtility.html#a0">TimeUtility::getCurrentTime</a>();
01084       }
01085 
<a name="l01089"></a><a class="code" href="classPacket.html#a82">01089</a>       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a82">getArrivalTime</a>()<span class="keyword"> const </span>{
01090          <span class="keywordflow">return</span> m_arrivalTime;
01091       }
01092 
<a name="l01096"></a><a class="code" href="classPacket.html#a83">01096</a>       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a83">getTimeSinceArrival</a>()<span class="keyword"> const </span>{
01097          <span class="keywordflow">return</span> <a class="code" href="namespaceTimeUtility.html#a0">TimeUtility::getCurrentTime</a>() - <a class="code" href="classPacket.html#a82">getArrivalTime</a>();
01098       }
01099 
01103      <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a84">getTimeout</a>() <span class="keyword">const</span>;
01104 
<a name="l01108"></a><a class="code" href="classPacket.html#a85">01108</a>      <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classPacket.html#a85">hasTimeout</a>()<span class="keyword"> const </span>{
01109         <span class="keywordflow">return</span> <a class="code" href="classPacket.html#a84">getTimeout</a>() != 0;
01110      }
01111 
01115      <span class="keywordtype">bool</span> <a class="code" href="classPacket.html#a86">timedOut</a>() <span class="keyword">const</span>;
01116 
01120     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a87">setTimeout</a>( byte timeout );
01121 
01122    <span class="keyword">protected</span>:
<a name="l01126"></a><a class="code" href="classPacket.html#p0">01126</a>       <a class="code" href="Types_8h.html#a25">byte</a> *buffer;
01127       
<a name="l01131"></a><a class="code" href="classPacket.html#p1">01131</a>       <a class="code" href="Types_8h.html#a21">uint32</a> bufSize;
01132 
<a name="l01136"></a><a class="code" href="classPacket.html#p2">01136</a>       <a class="code" href="Types_8h.html#a21">uint32</a> length;
01137 
<a name="l01139"></a><a class="code" href="classPacket.html#p3">01139</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_arrivalTime;
01140       
<a name="l01142"></a><a class="code" href="classPacket.html#p4">01142</a>       <span class="keywordtype">bool</span> m_deleteBuffer;
01143 
01150       <span class="keywordtype">void</span> <a class="code" href="classPacket.html#b0">dumpData</a>( uint32 startPos ) <span class="keyword">const</span>; 
01151       
01160       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#b1">writeLong</a>(<span class="keywordtype">int</span> position, uint32 value);
01161 
01172       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#b2">quickIncReadLong</a>(<span class="keywordtype">int</span> &amp;position) <span class="keyword">const</span>;
01173       
01183       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#b3">quickIncReadShort</a>(<span class="keywordtype">int</span> &amp;position) <span class="keyword">const</span>;
01184       
01192       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#b4">quickIncWriteLong</a>( <span class="keywordtype">int</span> &amp;position, uint32 value );
01193 
01201       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#b5">quickIncWriteShort</a>(<span class="keywordtype">int</span> &amp;position, uint16 value);
01202       
01210       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#b6">writeShort</a>(<span class="keywordtype">int</span> position, uint16 value);
01211       
01219       <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#b7">writeByte</a>(<span class="keywordtype">int</span> position, byte value);
01220 
01226       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#b8">readByte</a>(<span class="keywordtype">int</span> position) <span class="keyword">const</span>;
01227 
01228   <span class="keyword">public</span>:
01237       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a88">writeBit</a>(<span class="keywordtype">int</span> bytepos, <span class="keywordtype">int</span> bitnumber, <span class="keywordtype">bool</span> value);
01238       
01247       <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classPacket.html#a89">readBit</a>(<span class="keywordtype">int</span> bytepos, <span class="keywordtype">int</span> bitnumber) <span class="keyword">const</span>;
01248 
01249   <span class="keyword">protected</span>:
01250       
01258       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#b9">quickReadLong</a>(<span class="keywordtype">int</span> position) <span class="keyword">const</span>;
01259       
01267       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#b10">readLong</a>(<span class="keywordtype">int</span> position) <span class="keyword">const</span>;
01268       
01276       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#b11">quickReadShort</a>(<span class="keywordtype">int</span> position) <span class="keyword">const</span>;
01277       
01287       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#b12">readShort</a>(<span class="keywordtype">int</span> position) <span class="keyword">const</span>;
01288 
01289   <span class="keyword">protected</span>:
<a name="l01290"></a><a class="code" href="classPacket.html#b13">01290</a>       <span class="keywordtype">bool</span> <a class="code" href="classPacket.html#b13">shortAligned</a>(<span class="keywordtype">int</span> pos)<span class="keyword"> const </span>{
01291          <a class="code" href="Types_8h.html#a17">uint8</a>* ptr = <a class="code" href="classPacket.html#p0">buffer</a> + pos;
01292          uintptr_t iPtr = (uintptr_t)(ptr);
01293          <span class="keywordflow">return</span> ! ( iPtr &amp; 1 );
01294       }
01295 
<a name="l01296"></a><a class="code" href="classPacket.html#b14">01296</a>       <span class="keywordtype">bool</span> <a class="code" href="classPacket.html#b14">longAligned</a>(<span class="keywordtype">int</span> pos)<span class="keyword"> const </span>{
01297          <a class="code" href="Types_8h.html#a17">uint8</a>* ptr = <a class="code" href="classPacket.html#p0">buffer</a> + pos;
01298          uintptr_t iPtr = (uintptr_t)(ptr);
01299          <span class="keywordflow">return</span> ! ( iPtr &amp; 3 );
01300       }
01301 
<a name="l01302"></a><a class="code" href="classPacket.html#b15">01302</a>       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#b15">assertInside</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* func,
01303                                 <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> max )<span class="keyword"> const </span>{
01304          <span class="keywordflow">if</span> ( pos &gt;= max ) {
01305             <a class="code" href="MC2Logging_8h.html#a0">mc2log</a> &lt;&lt; <span class="stringliteral">"[Packet]: "</span> &lt;&lt; func &lt;&lt; <span class="stringliteral">" - outside buffer "</span>
01306                    &lt;&lt; pos &lt;&lt; <span class="stringliteral">" &gt;= "</span> &lt;&lt; max &lt;&lt; endl;
01307             <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( pos &lt; max );
01308          }
01309       }
01310       
01311   <span class="keyword">private</span>:
<a name="l01316"></a><a class="code" href="classPacket.html#r0">01316</a>       <a class="code" href="classPacket.html">Packet</a>* next;
01317 };
01318 
<a name="l01319"></a><a class="code" href="Packet_8h.html#a26">01319</a> <span class="preprocessor">#define ASSERT_INSIDE(pos) assertInside( __FUNCTION__, pos, getBufSize())</span>
01320 <span class="preprocessor"></span>
<a name="l01335"></a><a class="code" href="classRequestPacket.html">01335</a> <span class="keyword">class </span><a class="code" href="classRequestPacket.html">RequestPacket</a> : <span class="keyword">public</span> <a class="code" href="classPacket.html">Packet</a>
01336 {
01337    <span class="keyword">public</span>:
<a name="l01341"></a><a class="code" href="classRequestPacket.html#s0">01341</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> REQUEST_PACKET_MAPID_POS;
01342 
01347       <a class="code" href="classRequestPacket.html#a0">RequestPacket</a>(); 
01348       
01356       <a class="code" href="classRequestPacket.html#a0">RequestPacket</a>(byte* buf, uint32 bufLength);
01357       
01363       <a class="code" href="classRequestPacket.html#a0">RequestPacket</a>(uint32 bufLength);
01364 
01372       <a class="code" href="classRequestPacket.html#a0">RequestPacket</a>( uint32 bufLength, uint16 subType );
01373 
01384       <a class="code" href="classRequestPacket.html#a0">RequestPacket</a>( uint32 bufLength,
01385                      byte prio,
01386                      uint16 subType,
01387                      PacketID packetId,
01388                      RequestID requestID,
01389                      MapID mapID );
01390 
01401       <span class="keywordtype">void</span> <a class="code" href="classRequestPacket.html#a5">init</a>(  byte prio,
01402                   uint16 subType,
01403                   PacketID packetId,
01404                   RequestID requestID,
01405                   MapID mapID );
01406 
01411       <span class="keyword">inline</span> MapID <a class="code" href="classRequestPacket.html#a6">getMapID</a>() <span class="keyword">const</span>;
01412 
01417       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRequestPacket.html#a7">setMapID</a>(MapID mapID);
01418 };
01419 
01420 
<a name="l01432"></a><a class="code" href="classReplyPacket.html">01432</a> <span class="keyword">class </span><a class="code" href="classReplyPacket.html">ReplyPacket</a> : <span class="keyword">public</span> <a class="code" href="classPacket.html">Packet</a>
01433 {
01434    <span class="keyword">public</span>:
<a name="l01438"></a><a class="code" href="classReplyPacket.html#s0">01438</a>       <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> REPLY_PACKET_STATUS_POS;
01439 
01445       <a class="code" href="classReplyPacket.html#a0">ReplyPacket</a>(); 
01446       
01454       <a class="code" href="classReplyPacket.html#a0">ReplyPacket</a>(byte* buf, uint32 bufLength);
01455       
01462       <a class="code" href="classReplyPacket.html#a0">ReplyPacket</a>(uint32 bufLength);
01463 
01472       <a class="code" href="classReplyPacket.html#a0">ReplyPacket</a>(uint32 bufLength, uint16 subType ) ;
01473 
01486       <a class="code" href="classReplyPacket.html#a0">ReplyPacket</a>(uint32 bufLength, uint16 subType,
01487                   <span class="keyword">const</span> <a class="code" href="classRequestPacket.html">RequestPacket</a>* req, uint32 status);
01488 
01501       <span class="keywordtype">void</span> <a class="code" href="classReplyPacket.html#a5">init</a>(uint16 subtype, <span class="keyword">const</span> <a class="code" href="classRequestPacket.html">RequestPacket</a>* req, uint32 status);
01502 
01503 
01512       <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classReplyPacket.html#a6">getStatus</a>() <span class="keyword">const</span>;
01513 
01518       <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classReplyPacket.html#a7">getStatusAsString</a>() <span class="keyword">const</span>;
01519 
01525       <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classReplyPacket.html#a8">setStatus</a>(uint32 status);
01526 
01535       <span class="keywordtype">bool</span> <a class="code" href="classReplyPacket.html#a9">checkStatus</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* sender);
01536 };
01537 
01538 
01539 <span class="comment">// ========================================================================</span>
01540 <span class="comment">//                                  Implementation of the inlined methods =</span>
01541 
01542 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l01543"></a><a class="code" href="classPacket.html#a6">01543</a> <a class="code" href="classPacket.html#a6">Packet::getLength</a>()<span class="keyword"> const </span>
01544 <span class="keyword"></span>{ 
01545    <span class="keywordflow">return</span> length; 
01546 }
01547 
01548 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l01549"></a><a class="code" href="classPacket.html#a7">01549</a> <a class="code" href="classPacket.html#a7">Packet::setLength</a>(uint32 l) 
01550 {   
01551   <a class="code" href="classPacket.html#p2">length</a> = l; 
01552 }
01553 
01554 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l01555"></a><a class="code" href="classPacket.html#a8">01555</a> <a class="code" href="classPacket.html#a8">Packet::getBufSize</a>()<span class="keyword"> const </span>
01556 <span class="keyword"></span>{ 
01557    <span class="keywordflow">return</span> bufSize; 
01558 }
01559 
01560 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a>* 
<a name="l01561"></a><a class="code" href="classPacket.html#a9">01561</a> <a class="code" href="classPacket.html#a9">Packet::getBuf</a>()<span class="keyword"> const </span>
01562 <span class="keyword"></span>{ 
01563    <span class="keywordflow">return</span> buffer; 
01564 }
01565 
01566 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a>* 
<a name="l01567"></a><a class="code" href="classPacket.html#a10">01567</a> <a class="code" href="classPacket.html#a10">Packet::getDataAddress</a>()<span class="keyword"> const </span>
01568 <span class="keyword"></span>{ 
01569    <span class="keywordflow">return</span> &amp;<a class="code" href="classPacket.html#p0">buffer</a>[HEADER_SIZE]; 
01570 }
01571 
01572 
01573 <span class="keyword">inline</span> <a class="code" href="classPacket.html">Packet</a>*
<a name="l01574"></a><a class="code" href="classPacket.html#a77">01574</a> <a class="code" href="classPacket.html#a77">Packet::getClone</a>(<span class="keywordtype">bool</span> fullBuffer)<span class="keyword"> const</span>
01575 <span class="keyword"></span>{
01576    <span class="comment">// Set the length. </span>
01577    <span class="keywordtype">int</span> newBufSize = fullBuffer ? <a class="code" href="classPacket.html#a8">getBufSize</a>() : <a class="code" href="classPacket.html#a6">getLength</a>();
01578    <a class="code" href="Types_8h.html#a25">byte</a>* buff = reinterpret_cast&lt; byte* &gt; ( 
01579       <span class="keyword">new</span> <a class="code" href="Types_8h.html#a21">uint32</a>[ ( newBufSize + 3) &gt;&gt; 2 ] );
01580 
01581    <span class="comment">// Only copy getLength() bytes to the new packet.</span>
01582    memcpy( buff , <a class="code" href="classPacket.html#a9">getBuf</a>(), <a class="code" href="classPacket.html#a6">getLength</a>() );
01583    <a class="code" href="classPacket.html">Packet</a> *result = <a class="code" href="classPacket.html#e1">makePacket</a>( buff, newBufSize );
01584    result-&gt;<a class="code" href="classPacket.html#p1">bufSize</a> = newBufSize;
01585    result-&gt;<a class="code" href="classPacket.html#p2">length</a> = <a class="code" href="classPacket.html#a6">getLength</a>();
01586    result-&gt;<a class="code" href="classPacket.html#p3">m_arrivalTime</a> = m_arrivalTime;
01587    result-&gt;<a class="code" href="classPacket.html#p4">m_deleteBuffer</a> = <span class="keyword">true</span>;
01588    <span class="keywordflow">return</span> result;
01589 }
01590 
01591 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l01592"></a><a class="code" href="classPacket.html#a80">01592</a> <a class="code" href="classPacket.html#a80">Packet::updateSize</a>(uint32 addSize, uint32 resizeSize)
01593 {
01594    <span class="keywordflow">if</span> (<a class="code" href="classPacket.html#a6">getLength</a>() + addSize &lt; <a class="code" href="classPacket.html#a8">getBufSize</a>()) {
01595       <span class="keywordflow">return</span> (<span class="keyword">false</span>);
01596    } <span class="keywordflow">else</span> {
01597       <a class="code" href="classPacket.html#a78">resize</a>(<a class="code" href="classPacket.html#a6">getLength</a>() + resizeSize);
01598       <span class="keywordflow">return</span> (<span class="keyword">true</span>);
01599    }
01600 }
01601 
01602 <span class="comment">// ----------- Read Long  -------------</span>
01603 
01604 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l01605"></a><a class="code" href="classPacket.html#b9">01605</a> <a class="code" href="classPacket.html#b9">Packet::quickReadLong</a>(<span class="keywordtype">int</span> position)<span class="keyword"> const </span>
01606 <span class="keyword"></span>{
01607    <span class="comment">// ====================================================== </span>
01608    <span class="comment">// This might be removed if the statement consumes too much cpu...</span>
01609    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <a class="code" href="classPacket.html#b14">longAligned</a>( position ) );
01610    <a class="code" href="Packet_8h.html#a26">ASSERT_INSIDE</a>( position );
01611    <span class="comment">// ====================================================== </span>
01612 
01613    <span class="keywordflow">return</span> ntohl(*((<a class="code" href="Types_8h.html#a21">uint32</a> *)&amp;(<a class="code" href="classPacket.html#p0">buffer</a>[position])));
01614 }
01615 
01616 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l01617"></a><a class="code" href="classPacket.html#b10">01617</a> <a class="code" href="classPacket.html#b10">Packet::readLong</a>(<span class="keywordtype">int</span> position)<span class="keyword"> const </span>
01618 <span class="keyword"></span>{
01619    <a class="code" href="Packet_8h.html#a26">ASSERT_INSIDE</a>( position );
01620    <a class="code" href="namespaceAlignUtility.html#a4">AlignUtility::alignLong</a>(position);
01621 
01622    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b9">quickReadLong</a>( position );
01623 }
01624 
01625 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l01626"></a><a class="code" href="classPacket.html#b2">01626</a> <a class="code" href="classPacket.html#b2">Packet::quickIncReadLong</a>(<span class="keywordtype">int</span> &amp;position)<span class="keyword"> const </span>
01627 <span class="keyword"></span>{
01628    <a class="code" href="Types_8h.html#a21">uint32</a> tempLong = <a class="code" href="classPacket.html#b9">quickReadLong</a>(position);
01629    position += <span class="keyword">sizeof</span>(uint32);
01630    <span class="keywordflow">return</span> tempLong;
01631 }
01632 
01633 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l01634"></a><a class="code" href="classPacket.html#a59">01634</a> <a class="code" href="classPacket.html#a59">Packet::incReadLong</a>(<span class="keywordtype">int</span> &amp;position)<span class="keyword"> const </span>{
01635    <a class="code" href="namespaceAlignUtility.html#a4">AlignUtility::alignLong</a>(position);
01636    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b2">quickIncReadLong</a>( position );
01637 }
01638 
01639 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a23">uint64</a> 
<a name="l01640"></a><a class="code" href="classPacket.html#a60">01640</a> <a class="code" href="classPacket.html#a60">Packet::incReadLongLong</a>(<span class="keywordtype">int</span> &amp; position)<span class="keyword"> const </span>{
01641    <a class="code" href="Types_8h.html#a23">uint64</a> val = <a class="code" href="classPacket.html#a59">incReadLong</a>( position );
01642    val &lt;&lt;= 32;
01643    val |= <a class="code" href="classPacket.html#a59">incReadLong</a>( position );
01644    <span class="keywordflow">return</span> val;
01645 }
01646 
01647 
01648 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a26">float32</a>
<a name="l01649"></a><a class="code" href="classPacket.html#a61">01649</a> <a class="code" href="classPacket.html#a61">Packet::incReadFloat32</a>( <span class="keywordtype">int</span>&amp; pos )<span class="keyword"> const </span>{
01650    <a class="code" href="Types_8h.html#a21">uint32</a> tmpVal = <a class="code" href="classPacket.html#a59">incReadLong</a>( pos );
01651    <span class="keywordflow">return</span> *reinterpret_cast&lt;float32*&gt;(&amp;tmpVal);
01652 }
01653 
01654 <span class="keyword">template</span>&lt;<span class="keyword">class</span> TYPE&gt;
01655 <span class="keyword">inline</span>
<a name="l01656"></a><a class="code" href="classPacket.html#a62">01656</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a59">Packet::incReadLong</a>(<span class="keywordtype">int</span>&amp; position, TYPE&amp; value)<span class="keyword"> const</span>
01657 <span class="keyword"></span>{
01658    value = static_cast&lt;TYPE&gt;(<a class="code" href="classPacket.html#a59">incReadLong</a>(position));
01659 }
01660 
01661 <span class="comment">// ----------- Read Short -------------</span>
01662 
01663 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> 
<a name="l01664"></a><a class="code" href="classPacket.html#b11">01664</a> <a class="code" href="classPacket.html#b11">Packet::quickReadShort</a>(<span class="keywordtype">int</span> position)<span class="keyword"> const </span>
01665 <span class="keyword"></span>{
01666    <span class="comment">// ====================================================== </span>
01667    <span class="comment">// This might be removed if the if-statement consumes too much cpu...</span>
01668    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <a class="code" href="classPacket.html#b13">shortAligned</a>( position ) );
01669    <a class="code" href="Packet_8h.html#a26">ASSERT_INSIDE</a>( position );
01670    <span class="comment">// ====================================================== </span>
01671 
01672    <span class="keywordflow">return</span> ntohs(*((<a class="code" href="Types_8h.html#a19">uint16</a> *)&amp;(<a class="code" href="classPacket.html#p0">buffer</a>[position])));
01673 }
01674 
01675 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> 
<a name="l01676"></a><a class="code" href="classPacket.html#b12">01676</a> <a class="code" href="classPacket.html#b12">Packet::readShort</a>(<span class="keywordtype">int</span> position)<span class="keyword"> const </span>
01677 <span class="keyword"></span>{
01678    <a class="code" href="namespaceAlignUtility.html#a0">AlignUtility::alignShort</a>(position);
01679    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b11">quickReadShort</a>( position );
01680 }
01681 
01682 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> 
<a name="l01683"></a><a class="code" href="classPacket.html#b3">01683</a> <a class="code" href="classPacket.html#b3">Packet::quickIncReadShort</a>(<span class="keywordtype">int</span> &amp;position)<span class="keyword"> const </span>
01684 <span class="keyword"></span>{
01685    <a class="code" href="Types_8h.html#a19">uint16</a> tempShort = <a class="code" href="classPacket.html#b11">quickReadShort</a>(position);
01686    position += <span class="keyword">sizeof</span>(uint16);
01687    <span class="keywordflow">return</span> tempShort;
01688 }
01689 
01690 <a class="code" href="Types_8h.html#a19">uint16</a>
<a name="l01691"></a><a class="code" href="classPacket.html#a63">01691</a> <a class="code" href="classPacket.html#a63">Packet::incReadShort</a>(<span class="keywordtype">int</span> &amp;position)<span class="keyword"> const </span>{
01692    <a class="code" href="namespaceAlignUtility.html#a0">AlignUtility::alignShort</a>(position);
01693    <span class="keywordflow">return</span>  <a class="code" href="classPacket.html#b3">quickIncReadShort</a>(position);
01694 }
01695 
01696 <span class="keyword">template</span>&lt;<span class="keyword">class</span> TYPE&gt;
01697 <span class="keyword">inline</span>
<a name="l01698"></a><a class="code" href="classPacket.html#a64">01698</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a63">Packet::incReadShort</a>(<span class="keywordtype">int</span>&amp; position, TYPE&amp; value)<span class="keyword"> const</span>
01699 <span class="keyword"></span>{
01700    value = static_cast&lt;TYPE&gt;(<a class="code" href="classPacket.html#a63">incReadShort</a>(position));
01701 }
01702 
01703 
01704 <span class="comment">// ----------- Read Byte  -------------</span>
01705 
01706 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> 
<a name="l01707"></a><a class="code" href="classPacket.html#b8">01707</a> <a class="code" href="classPacket.html#b8">Packet::readByte</a>(<span class="keywordtype">int</span> position)<span class="keyword"> const </span>
01708 <span class="keyword"></span>{ 
01709    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#p0">buffer</a>[position]; 
01710 }
01711 
01712 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a>
<a name="l01713"></a><a class="code" href="classPacket.html#a65">01713</a> <a class="code" href="classPacket.html#a65">Packet::incReadByte</a>(<span class="keywordtype">int</span> &amp;position)<span class="keyword"> const</span>
01714 <span class="keyword"></span>{
01715    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b8">readByte</a>(position++);
01716 }
01717 
01718 <span class="comment">// ----------- Read Bit   -------------</span>
01719 
01720 <span class="keyword">inline</span> <span class="keywordtype">bool</span>
<a name="l01721"></a><a class="code" href="classPacket.html#a89">01721</a> <a class="code" href="classPacket.html#a89">Packet::readBit</a>(<span class="keywordtype">int</span> bytepos,
01722                 <span class="keywordtype">int</span> bitnumber)<span class="keyword"> const</span>
01723 <span class="keyword"></span>{
01724    <a class="code" href="Types_8h.html#a25">byte</a> b = <a class="code" href="classPacket.html#b8">readByte</a>(bytepos);
01725    <span class="keywordflow">return</span> <a class="code" href="namespaceBitUtility.html#a1">BitUtility::getBit</a>(b, bitnumber);
01726 }
01727 
01728 <span class="comment">// ----------- Read string -----------</span>
01729 
<a name="l01730"></a><a class="code" href="classPacket.html#a66">01730</a> <span class="keywordtype">int</span> <a class="code" href="classPacket.html#a66">Packet::incReadString</a>(<span class="keywordtype">int</span> &amp;position, <span class="keywordtype">char</span>* &amp;str)<span class="keyword"> const</span>
01731 <span class="keyword"></span>{
01732    str = (<span class="keywordtype">char</span> *)(&amp;(<a class="code" href="classPacket.html#p0">buffer</a>[position]));
01733    <a class="code" href="Types_8h.html#a21">uint32</a> strLength = strlen(str);
01734    position += (strLength + 1);
01735    <span class="keywordflow">return</span> strLength;
01736 }
01737 
01738 <span class="keyword">inline</span> <span class="keyword">const</span> <span class="keywordtype">char</span>*
<a name="l01739"></a><a class="code" href="classPacket.html#a67">01739</a> <a class="code" href="classPacket.html#a66">Packet::incReadString</a>(<span class="keywordtype">int</span> &amp;position)<span class="keyword"> const</span>
01740 <span class="keyword"></span>{
01741    <span class="keywordtype">char</span>* str;
01742    <a class="code" href="classPacket.html#a66">incReadString</a>(position, str);
01743    <span class="keywordflow">return</span> str;
01744 }
01745 
01746 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l01747"></a><a class="code" href="classPacket.html#a68">01747</a> <a class="code" href="classPacket.html#a66">Packet::incReadString</a>( <span class="keywordtype">int</span>&amp; pos, <a class="code" href="classMC2String.html">MC2String</a>&amp; str )<span class="keyword"> const</span>
01748 <span class="keyword"></span>{
01749    <span class="keywordtype">char</span>* tmp;
01750    <span class="keywordtype">int</span> len = <a class="code" href="classPacket.html#a66">incReadString</a>( pos, tmp );
01751    str = tmp;
01752    <span class="keywordflow">return</span> len;
01753 }
01754 
01755 <span class="comment">// ------------ Read bytearray --------</span>
01756 
01757 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="Types_8h.html#a25">byte</a>*
<a name="l01758"></a><a class="code" href="classPacket.html#a69">01758</a> <a class="code" href="classPacket.html#a69">Packet::incReadByteArray</a>(<span class="keywordtype">int</span> &amp;position,
01759                          <span class="keywordtype">int</span> nbrBytes)<span class="keyword"> const</span>
01760 <span class="keyword"></span>{
01761    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a25">byte</a>* bptr = (&amp;(<a class="code" href="classPacket.html#p0">buffer</a>[position]));
01762    position += nbrBytes;
01763    <span class="keywordflow">return</span> bptr;
01764 }
01765 
01766 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a>*
<a name="l01767"></a><a class="code" href="classPacket.html#a70">01767</a> <a class="code" href="classPacket.html#a69">Packet::incReadByteArray</a>(<span class="keywordtype">int</span> &amp;position,
01768                          byte* dest,
01769                          <span class="keywordtype">int</span> nbrBytes)<span class="keyword"> const</span>
01770 <span class="keyword"></span>{
01771    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a25">byte</a>* source = <a class="code" href="classPacket.html#a69">incReadByteArray</a>(position,
01772                                          nbrBytes);
01773    memcpy(dest, source, nbrBytes);
01774    <span class="keywordflow">return</span> dest;
01775 }
01776 
01777 <span class="comment">// ------------ Read bbox --------</span>
01778 
01779 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l01780"></a><a class="code" href="classPacket.html#a71">01780</a> <a class="code" href="classPacket.html#a71">Packet::incReadBBox</a>(<span class="keywordtype">int</span>&amp; position, <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; bbox)<span class="keyword"> const</span>
01781 <span class="keyword"></span>{
01782    bbox.<a class="code" href="classMC2BoundingBox.html#z81_0">setMaxLat</a>( <a class="code" href="classPacket.html#a59">incReadLong</a>( position ) );
01783    bbox.<a class="code" href="classMC2BoundingBox.html#z81_3">setMinLon</a>( <a class="code" href="classPacket.html#a59">incReadLong</a>( position ) );
01784    bbox.<a class="code" href="classMC2BoundingBox.html#z81_1">setMinLat</a>( <a class="code" href="classPacket.html#a59">incReadLong</a>( position ) );
01785    bbox.<a class="code" href="classMC2BoundingBox.html#z81_2">setMaxLon</a>( <a class="code" href="classPacket.html#a59">incReadLong</a>( position ) );
01786    <span class="keywordflow">return</span> 4*4;
01787 }
01788 
01789 
01790 <span class="comment">// ----------- Write Long -------------</span>
01791 
01792 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l01793"></a><a class="code" href="classPacket.html#b4">01793</a> <a class="code" href="classPacket.html#b4">Packet::quickIncWriteLong</a>( <span class="keywordtype">int</span> &amp;position, uint32 value )
01794 {
01795    <span class="comment">// ====================================================== </span>
01796    <span class="comment">// This might be removed if the if-statement consumes too much cpu...</span>
01797    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <a class="code" href="classPacket.html#b14">longAligned</a>( position ) );
01798    <a class="code" href="Packet_8h.html#a26">ASSERT_INSIDE</a>( position );
01799    <span class="comment">// ====================================================== </span>
01800 
01801    *( (<a class="code" href="Types_8h.html#a21">uint32</a> *) &amp;<a class="code" href="classPacket.html#p0">buffer</a>[position] ) = htonl(value);
01802    position += <span class="keyword">sizeof</span>(uint32);
01803 }
01804 
01805 <span class="keyword">inline</span> <span class="keywordtype">int</span> 
<a name="l01806"></a><a class="code" href="classPacket.html#b1">01806</a> <a class="code" href="classPacket.html#b1">Packet::writeLong</a>(<span class="keywordtype">int</span> position, uint32 value) 
01807 {
01808 <span class="comment">//   DEBUG8(cerr &lt;&lt; "writeLong at position " &lt;&lt; position &lt;&lt; endl);</span>
01809 
01810    <span class="comment">// ====================================================== </span>
01811    <span class="comment">// This might be removed if the if-statement consumes too much cpu...</span>
01812    <a class="code" href="Packet_8h.html#a26">ASSERT_INSIDE</a>( position );
01813    <span class="comment">// ====================================================== </span>
01814 
01815    <span class="keywordtype">int</span> oldPos = position;
01816    <a class="code" href="namespaceAlignUtility.html#a4">AlignUtility::alignLong</a>(position);
01817 
01818    <span class="comment">// no need to check if we align it anyway</span>
01819    <span class="comment">// ====================================================== </span>
01820    <span class="comment">// This might be removed if the if-statement consumes too much cpu...</span>
01821 <span class="comment">/*   if( ( ((int)(&amp;buffer[position])) &amp; 3) != 0 ) {</span>
01822 <span class="comment">      mc2log &lt;&lt; fatal &lt;&lt; "BUG: Packet::writeLong(): Protocol not aligned. "</span>
01823 <span class="comment">                         "Packettype = " &lt;&lt; getSubTypeAsString() &lt;&lt; " = " </span>
01824 <span class="comment">             &lt;&lt; uint32(getSubType()) &lt;&lt; endl; </span>
01825 <span class="comment">      exit(1);</span>
01826 <span class="comment">   } */</span>
01827    <span class="comment">// ====================================================== </span>
01828    *( (<a class="code" href="Types_8h.html#a21">uint32</a> *) &amp;<a class="code" href="classPacket.html#p0">buffer</a>[position] ) = htonl(value);
01829    <span class="keywordflow">return</span> position-oldPos+<span class="keyword">sizeof</span>(uint32); 
01830 }
01831 
01832 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l01833"></a><a class="code" href="classPacket.html#a53">01833</a> <a class="code" href="classPacket.html#a53">Packet::incAlignWriteLong</a>(<span class="keywordtype">int</span>&amp; position)
01834 {
01835    <span class="keywordtype">int</span> retVal = 0;
01836    <span class="keywordtype">int</span> newPos = position;
01837    <a class="code" href="namespaceAlignUtility.html#a4">AlignUtility::alignLong</a>(newPos);
01838    <span class="keywordflow">while</span> ( position &lt; newPos ) {
01839       <a class="code" href="classPacket.html#p0">buffer</a>[position++] = 0; <span class="comment">// Zero out the stuff.</span>
01840       ++retVal;
01841    }
01842    <span class="keywordflow">return</span> retVal;
01843 }
01844 
01845 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l01846"></a><a class="code" href="classPacket.html#a54">01846</a> <a class="code" href="classPacket.html#a54">Packet::incAlignReadLong</a>(<span class="keywordtype">int</span>&amp; position)<span class="keyword"> const</span>
01847 <span class="keyword"></span>{
01848    <a class="code" href="namespaceAlignUtility.html#a4">AlignUtility::alignLong</a>(position);
01849 }
01850 
01851 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l01852"></a><a class="code" href="classPacket.html#a50">01852</a> <a class="code" href="classPacket.html#a50">Packet::incWriteLong</a>(<span class="keywordtype">int</span> &amp;position, uint32 value)
01853 {
01854    <a class="code" href="Types_8h.html#a21">uint32</a> temp = <a class="code" href="classPacket.html#b1">writeLong</a>(position, value);
01855    position += temp;
01856    <span class="keywordflow">return</span> temp; 
01857 }
01858 
01859 <span class="keyword">inline</span> <span class="keywordtype">int</span> 
<a name="l01860"></a><a class="code" href="classPacket.html#a51">01860</a> <a class="code" href="classPacket.html#a51">Packet::incWriteLongLong</a>(<span class="keywordtype">int</span>&amp; position, uint64 value)
01861 {
01862    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> high = (value &gt;&gt; 32);
01863    <span class="keyword">const</span> <a class="code" href="Types_8h.html#a21">uint32</a> low  = (value &gt;&gt;  0);
01864    <a class="code" href="classPacket.html#a50">incWriteLong</a>(position, high);
01865    <a class="code" href="classPacket.html#a50">incWriteLong</a>(position, low);
01866    <span class="keywordflow">return</span> 8;
01867 }
01868 
01869 
01870 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l01871"></a><a class="code" href="classPacket.html#a52">01871</a> <a class="code" href="classPacket.html#a52">Packet::incWriteFloat32</a>( <span class="keywordtype">int</span>&amp; position, float32 val)
01872 {
01873    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#a50">incWriteLong</a>( position, *reinterpret_cast&lt;uint32*&gt;(&amp;val));
01874 }
01875 
01876 <span class="comment">// ----------- Write Short -------------</span>
01877 
01878 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l01879"></a><a class="code" href="classPacket.html#a56">01879</a> <a class="code" href="classPacket.html#a56">Packet::incAlignWriteShort</a>(<span class="keywordtype">int</span>&amp; position)
01880 {
01881    <span class="keywordtype">int</span> newPos = position;
01882    <a class="code" href="namespaceAlignUtility.html#a0">AlignUtility::alignShort</a>(newPos);
01883    <span class="keywordflow">if</span> ( newPos &gt; position ) {
01884       <a class="code" href="classPacket.html#p0">buffer</a>[position++] = 0; <span class="comment">// Write zero</span>
01885       <span class="keywordflow">return</span> 1;
01886    } <span class="keywordflow">else</span> {
01887       <span class="keywordflow">return</span> 0; <span class="comment">// Nothing to do.</span>
01888    }
01889 }
01890 
01891 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l01892"></a><a class="code" href="classPacket.html#a57">01892</a> <a class="code" href="classPacket.html#a57">Packet::incAlignReadShort</a>( <span class="keywordtype">int</span>&amp; pos )<span class="keyword"> const</span>
01893 <span class="keyword"></span>{
01894    <a class="code" href="namespaceAlignUtility.html#a0">AlignUtility::alignShort</a>( pos );
01895 }
01896 
01897 <span class="keyword">inline</span> <span class="keywordtype">int</span> 
<a name="l01898"></a><a class="code" href="classPacket.html#b6">01898</a> <a class="code" href="classPacket.html#b6">Packet::writeShort</a>(<span class="keywordtype">int</span> position, uint16 value) 
01899 {
01900 <span class="comment">//   DEBUG8(cerr &lt;&lt; "writeShort at position " &lt;&lt; position &lt;&lt; endl);</span>
01901    
01902    <span class="comment">// ====================================================== </span>
01903    <span class="comment">// This might be removed if the if-statement consumes too much cpu...</span>
01904    <span class="keywordflow">if</span>( position &gt;= int(<a class="code" href="classPacket.html#p1">bufSize</a>) ) {
01905       <a class="code" href="MC2Logging_8h.html#a0">mc2log</a> &lt;&lt; <a class="code" href="MC2Logging_8h.html#a17">fatal</a> &lt;&lt; <span class="stringliteral">"BUG: Packet::writeShort(): Write outside packet "</span>
01906                          <span class="stringliteral">"buffer, Packettype = "</span> &lt;&lt; <a class="code" href="classPacket.html#a20">getSubTypeAsString</a>()
01907              &lt;&lt; endl;
01908       <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <span class="keyword">false</span> );
01909    }
01910    <span class="comment">// ====================================================== </span>
01911 
01912    <span class="keywordtype">int</span> oldPos = position;
01913    <a class="code" href="namespaceAlignUtility.html#a0">AlignUtility::alignShort</a>(position);
01914 
01915    <span class="comment">// ====================================================== </span>
01916    <span class="comment">// This might be removed if the if-statement consumes too much cpu...</span>
01917    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <a class="code" href="classPacket.html#b13">shortAligned</a>( position ) );
01918    <span class="comment">// ====================================================== </span>
01919    
01920    *((<a class="code" href="Types_8h.html#a19">uint16</a> *)&amp;<a class="code" href="classPacket.html#p0">buffer</a>[position]) = htons(value);
01921    <span class="keywordflow">return</span> position-oldPos+<span class="keyword">sizeof</span>(uint16);  
01922 }
01923 
01924 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l01925"></a><a class="code" href="classPacket.html#a55">01925</a> <a class="code" href="classPacket.html#a55">Packet::incWriteShort</a>(<span class="keywordtype">int</span> &amp;position, uint16 value) {
01926    <a class="code" href="Types_8h.html#a21">uint32</a> temp = <a class="code" href="classPacket.html#b6">writeShort</a>(position, value);
01927    position += temp;
01928    <span class="keywordflow">return</span> temp;  
01929 }
01930 
01931 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l01932"></a><a class="code" href="classPacket.html#b5">01932</a> <a class="code" href="classPacket.html#b5">Packet::quickIncWriteShort</a>(<span class="keywordtype">int</span> &amp;position, uint16 value)
01933 {
01934    <span class="comment">// ====================================================== </span>
01935    <span class="comment">// This might be removed if the if-statement consumes too much cpu...</span>
01936    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <a class="code" href="classPacket.html#b13">shortAligned</a>( position ) );
01937    <span class="comment">// ====================================================== </span>
01938    *((<a class="code" href="Types_8h.html#a19">uint16</a> *)&amp;<a class="code" href="classPacket.html#p0">buffer</a>[position]) = htons(value);
01939    position += <span class="keyword">sizeof</span>(uint16);
01940 }
01941 
01942 <span class="comment">// ----------- Write Byte -------------</span>
01943 
01944 <span class="keyword">inline</span> <span class="keywordtype">int</span> 
<a name="l01945"></a><a class="code" href="classPacket.html#b7">01945</a> <a class="code" href="classPacket.html#b7">Packet::writeByte</a>(<span class="keywordtype">int</span> position, byte value) 
01946 {
01947 <span class="comment">//   DEBUG8(cerr &lt;&lt; "writeByte at position " &lt;&lt; position &lt;&lt; endl);</span>
01948 
01949    <span class="comment">// ====================================================== </span>
01950    <span class="comment">// This might be removed if the if-statement consumes too much cpu...</span>
01951    <span class="keywordflow">if</span>( position &gt; (int) bufSize ) {
01952       <a class="code" href="MC2Logging_8h.html#a0">mc2log</a> &lt;&lt; <a class="code" href="MC2Logging_8h.html#a16">error</a> &lt;&lt; <span class="stringliteral">"BUG: Packet::writeByte(): Write outside packet "</span>
01953                          <span class="stringliteral">"buffer, Packettype = "</span> &lt;&lt; <a class="code" href="classPacket.html#a20">getSubTypeAsString</a>()
01954              &lt;&lt; endl;
01955       <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <span class="keyword">false</span> );
01956    }
01957    <span class="comment">// ====================================================== </span>
01958    <a class="code" href="classPacket.html#p0">buffer</a>[position] = value;
01959    <span class="keywordflow">return</span> (1);
01960 }
01961 
01962 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l01963"></a><a class="code" href="classPacket.html#a58">01963</a> <a class="code" href="classPacket.html#a58">Packet::incWriteByte</a>(<span class="keywordtype">int</span> &amp;position, byte value) {
01964    <a class="code" href="Types_8h.html#a21">uint32</a> temp = <a class="code" href="classPacket.html#b7">writeByte</a>(position, value);
01965    position += temp;
01966    <span class="keywordflow">return</span> temp;  
01967 }
01968 
01969 <span class="comment">// ----------- Write Bit -------------</span>
01970 
01971 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l01972"></a><a class="code" href="classPacket.html#a88">01972</a> <a class="code" href="classPacket.html#a88">Packet::writeBit</a>(<span class="keywordtype">int</span> bytepos,
01973                  <span class="keywordtype">int</span> bitnumber,
01974                  <span class="keywordtype">bool</span> value)
01975 {
01976 <span class="preprocessor">#if defined(__i386__) &amp;&amp; defined(__GNUC__) &amp;&amp; defined (NOT_NOW_MAYBE_NOT_EVER)</span>
01977 <span class="preprocessor"></span>   <span class="keyword">struct </span>__dummy { <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> a[100]; };
01978 <span class="preprocessor">#  define ADDR (*(struct __dummy *) addr)</span>
01979 <span class="preprocessor"></span>   <a class="code" href="Types_8h.html#a25">byte</a>* addr = &amp;<a class="code" href="classPacket.html#p0">buffer</a>[bytepos];
01980    <span class="keywordflow">if</span> ( value ) {
01981       __asm__ (
01982          <span class="stringliteral">"btsl %1,%0"</span>
01983          :<span class="stringliteral">"=m"</span> (ADDR)
01984          :<span class="stringliteral">"Ir"</span> (bitnumber));
01985    } <span class="keywordflow">else</span> {
01986       __asm__ ( 
01987          <span class="stringliteral">"btrl %1,%0"</span>
01988          :<span class="stringliteral">"=m"</span> (ADDR)
01989          :<span class="stringliteral">"Ir"</span> (bitnumber));
01990    }
01991 <span class="preprocessor">#  undef ADDR</span>
01992 <span class="preprocessor"></span><span class="preprocessor">#else  </span>
01993 <span class="preprocessor"></span>   <a class="code" href="Types_8h.html#a25">byte</a> b = <a class="code" href="classPacket.html#b8">readByte</a>(bytepos);
01994    b = <a class="code" href="namespaceBitUtility.html#a0">BitUtility::setBit</a>(b, bitnumber, value);
01995    <a class="code" href="classPacket.html#b7">writeByte</a>(bytepos, b);
01996 <span class="preprocessor">#endif</span>
01997 <span class="preprocessor"></span>
01998 }
01999 
02000 <span class="comment">// ----------- Write String -------------</span>
02001 
02002 <span class="keyword">inline</span>
<a name="l02003"></a><a class="code" href="classPacket.html#a76">02003</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a76">Packet::quickIncWriteString</a>( <span class="keywordtype">int</span> &amp;position,
02004                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *str )
02005 {
02006    <span class="comment">// a little quicker...</span>
02007    <span class="keywordtype">char</span> *tmp = (<span class="keywordtype">char</span> *) (<a class="code" href="classPacket.html#p0">buffer</a> + position);
02008    <span class="keywordflow">while</span> ( (*tmp++ = *str++) != <span class="charliteral">'\0'</span>) {}
02009    position = tmp - (<span class="keywordtype">char</span> *) buffer; 
02010 }
02011 
02012 <span class="keyword">inline</span>
<a name="l02013"></a><a class="code" href="classPacket.html#a72">02013</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a72">Packet::incWriteString</a>(<span class="keywordtype">int</span> &amp;position, <span class="keyword">const</span> <span class="keywordtype">char</span>* str) {
02014    <span class="keywordflow">if</span> ( str == NULL )
02015       str = <span class="stringliteral">""</span>;
02016    <a class="code" href="classPacket.html#a76">quickIncWriteString</a>( position, str );
02017    
02018    <span class="comment">// ======================================================</span>
02019    <a class="code" href="config_8h.html#a8">DEBUG1</a>(
02020       <span class="keywordflow">if</span>( position &gt;  <span class="keywordtype">int</span>(<a class="code" href="classPacket.html#p1">bufSize</a>) ) {
02021          cerr &lt;&lt; <span class="stringliteral">"BUG: incWriteString : Write outside packet buffer "</span>
02022               &lt;&lt; <span class="stringliteral">"Packettype = "</span> &lt;&lt; <a class="code" href="classPacket.html#a20">getSubTypeAsString</a>() &lt;&lt; endl;
02023          <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( <span class="keyword">false</span> );
02024       }
02025       );
02026    <span class="comment">// ======================================================</span>
02027 }
02028 
02029 
02030 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l02031"></a><a class="code" href="classPacket.html#a73">02031</a> <a class="code" href="classPacket.html#a72">Packet::incWriteString</a>( <span class="keywordtype">int</span>&amp; pos, <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; str )
02032 {
02033    <span class="comment">// NB! Byte writing function cannot be used since it would</span>
02034    <span class="comment">//     not be compatible with readString, thus c_str() must</span>
02035    <span class="comment">//     be used.</span>
02036    <a class="code" href="classPacket.html#a72">incWriteString</a>( pos, str.<a class="code" href="classMC2String.html#a11">c_str</a>() );
02037 }
02038 
02039 <span class="comment">//  -------------- Write bytearray ---------------</span>
02040 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l02041"></a><a class="code" href="classPacket.html#a74">02041</a> <a class="code" href="classPacket.html#a74">Packet::incWriteByteArray</a>(<span class="keywordtype">int</span> &amp;position,
02042                           <span class="keyword">const</span> byte* bptr,
02043                           <span class="keywordtype">int</span> nbrBytes)
02044 {
02045    <span class="comment">// ====================================================== </span>
02046    <span class="comment">// This might be removed if the statement consumes too much cpu...</span>
02047    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( position + nbrBytes &lt;= <a class="code" href="Types_8h.html#a22">int32</a>(<a class="code" href="classPacket.html#p1">bufSize</a>) );
02048    <span class="comment">// ====================================================== </span>
02049 
02050    <a class="code" href="Types_8h.html#a25">byte</a> *packetPos = (&amp;(<a class="code" href="classPacket.html#p0">buffer</a>[position]));
02051    memcpy(packetPos, bptr, nbrBytes);
02052    position += nbrBytes;
02053 }
02054 
02055 <span class="comment">//  -------------- Write bbox ---------------</span>
02056 
02057 <span class="keyword">inline</span> <span class="keywordtype">int</span>
<a name="l02058"></a><a class="code" href="classPacket.html#a75">02058</a> <a class="code" href="classPacket.html#a75">Packet::incWriteBBox</a>(<span class="keywordtype">int</span>&amp; position, <span class="keyword">const</span> <a class="code" href="classMC2BoundingBox.html">MC2BoundingBox</a>&amp; bbox)
02059 {
02060    <span class="comment">// ====================================================== </span>
02061    <span class="comment">// This might be removed if the statement consumes too much cpu...</span>
02062    <a class="code" href="config_8h.html#a29">MC2_ASSERT</a>( position + 4*4 &lt;= <a class="code" href="Types_8h.html#a22">int32</a>(<a class="code" href="classPacket.html#p1">bufSize</a>) );
02063    <span class="comment">// ====================================================== </span>
02064 
02065    <a class="code" href="classPacket.html#a50">incWriteLong</a>( position, bbox.<a class="code" href="classMC2BoundingBox.html#z79_0">getMaxLat</a>() );
02066    <a class="code" href="classPacket.html#a50">incWriteLong</a>( position, bbox.<a class="code" href="classMC2BoundingBox.html#z79_3">getMinLon</a>() );
02067    <a class="code" href="classPacket.html#a50">incWriteLong</a>( position, bbox.<a class="code" href="classMC2BoundingBox.html#z79_1">getMinLat</a>() );
02068    <a class="code" href="classPacket.html#a50">incWriteLong</a>( position, bbox.<a class="code" href="classMC2BoundingBox.html#z79_2">getMaxLon</a>() );
02069    <span class="keywordflow">return</span> 4*4;
02070 }
02071 
02072 
02073 <span class="comment">// -- Set and get functions using the above read and write functions.</span>
02074 
02075 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l02076"></a><a class="code" href="classPacket.html#a16">02076</a> <a class="code" href="classPacket.html#a16">Packet::setPacketTag</a>( <span class="keyword">const</span> <span class="keywordtype">char</span>* tag ) 
02077 { 
02078    <a class="code" href="classPacket.html#b7">writeByte</a>( <a class="code" href="Packet_8h.html#a2">PACKET_OFFSET_TAG</a>, tag[0] );
02079    <a class="code" href="classPacket.html#b7">writeByte</a>( <a class="code" href="Packet_8h.html#a2">PACKET_OFFSET_TAG</a> + 1, tag[1] );
02080    <a class="code" href="classPacket.html#b7">writeByte</a>( <a class="code" href="Packet_8h.html#a2">PACKET_OFFSET_TAG</a> + 2, tag[2] );
02081 }
02082 
02083 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l02084"></a><a class="code" href="classPacket.html#a17">02084</a> <a class="code" href="classPacket.html#a17">Packet::setResourceID</a>( uint16 resnbr )
02085 {
02086    <a class="code" href="classPacket.html#b6">writeShort</a>( <a class="code" href="Packet_8h.html#a12">PACKET_OFFSET_RESOURCE</a>, resnbr );
02087 }
02088 
02089 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a>
<a name="l02090"></a><a class="code" href="classPacket.html#a18">02090</a> <a class="code" href="classPacket.html#a18">Packet::getResourceID</a>()<span class="keyword"> const</span>
02091 <span class="keyword"></span>{
02092    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b12">readShort</a>( <a class="code" href="Packet_8h.html#a12">PACKET_OFFSET_RESOURCE</a> );
02093 }
02094 
02095 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a19">uint16</a> 
<a name="l02096"></a><a class="code" href="classPacket.html#a11">02096</a> <a class="code" href="classPacket.html#a11">Packet::getProtocolVersion</a>()<span class="keyword"> const </span>
02097 <span class="keyword"></span>{
02098    <span class="keywordflow">return</span> ( <a class="code" href="classPacket.html#b8">readByte</a>(<a class="code" href="Packet_8h.html#a3">PACKET_OFFSET_PROTMAJOR</a>) &lt;&lt; 8 ) |
02099       ( (<a class="code" href="classPacket.html#b8">readByte</a>(<a class="code" href="Packet_8h.html#a4">PACKET_OFFSET_PROTPRIO</a>) &gt;&gt; 4) &amp; 0x0F ); 
02100 }
02101 
02102 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l02103"></a><a class="code" href="classPacket.html#a12">02103</a> <a class="code" href="classPacket.html#a12">Packet::setProtocolVersion</a>(byte majorProt, byte minorProt) 
02104 {
02105    <a class="code" href="classPacket.html#b7">writeByte</a>(<a class="code" href="Packet_8h.html#a3">PACKET_OFFSET_PROTMAJOR</a>, majorProt);
02106    <a class="code" href="classPacket.html#b7">writeByte</a>(<a class="code" href="Packet_8h.html#a4">PACKET_OFFSET_PROTPRIO</a>, (minorProt &lt;&lt; 4) | <a class="code" href="classPacket.html#a13">getPriority</a>() );
02107 }
02108 
02109 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a25">byte</a> 
<a name="l02110"></a><a class="code" href="classPacket.html#a13">02110</a> <a class="code" href="classPacket.html#a13">Packet::getPriority</a>()<span class="keyword"> const </span>
02111 <span class="keyword"></span>{
02112    <span class="keywordflow">return</span> (<a class="code" href="classPacket.html#b8">readByte</a>(<a class="code" href="Packet_8h.html#a4">PACKET_OFFSET_PROTPRIO</a>) &amp; 0x0F); 
02113 }
02114 
02115 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l02116"></a><a class="code" href="classPacket.html#a14">02116</a> <a class="code" href="classPacket.html#a14">Packet::setPriority</a>(byte pr) 
02117 {
02118    <a class="code" href="classPacket.html#b7">writeByte</a>(<a class="code" href="Packet_8h.html#a4">PACKET_OFFSET_PROTPRIO</a>, (pr &amp; 0x0F) |
02119              (<a class="code" href="classPacket.html#b8">readByte</a>(<a class="code" href="Packet_8h.html#a4">PACKET_OFFSET_PROTPRIO</a>) &amp; 0xF0) ); 
02120 }
02121 
02122 
02123 <span class="keyword">inline</span> Packet::packetType 
<a name="l02124"></a><a class="code" href="classPacket.html#e2">02124</a> <a class="code" href="classPacket.html#a15">Packet::getSubType</a>( byte* buff ) {
02125    <span class="comment">// Do not use readShort here, since it calls getSubType</span>
02126    <span class="keywordflow">return</span> (Packet::packetType)
02127       ntohs(*((<a class="code" href="Types_8h.html#a19">uint16</a> *)&amp;(buff[<a class="code" href="Packet_8h.html#a6">PACKET_OFFSET_SUBTYPE</a>])));
02128 }
02129 
02130 <span class="keyword">inline</span> Packet::packetType
<a name="l02131"></a><a class="code" href="classPacket.html#a15">02131</a> <a class="code" href="classPacket.html#a15">Packet::getSubType</a>()<span class="keyword"> const </span>
02132 <span class="keyword"></span>{ 
02133    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#a15">getSubType</a>(<a class="code" href="classPacket.html#a9">getBuf</a>());
02134 }
02135 
02136 
02137 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l02138"></a><a class="code" href="classPacket.html#a19">02138</a> <a class="code" href="classPacket.html#a19">Packet::setSubType</a>(uint16 st) 
02139 { 
02140    <a class="code" href="classPacket.html#b6">writeShort</a>( <a class="code" href="Packet_8h.html#a6">PACKET_OFFSET_SUBTYPE</a>, st );
02141 }
02142 
02143 <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l02144"></a><a class="code" href="classPacket.html#a21">02144</a> <a class="code" href="classPacket.html#a21">Packet::getOriginIP</a>()<span class="keyword"> const </span>
02145 <span class="keyword"></span>{ 
02146    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b10">readLong</a>( <a class="code" href="Packet_8h.html#a7">PACKET_OFFSET_ORIGINIP</a> ); 
02147 }
02148 
02149 <span class="keywordtype">void</span> 
<a name="l02150"></a><a class="code" href="classPacket.html#a22">02150</a> <a class="code" href="classPacket.html#a22">Packet::setOriginIP</a>(uint32 ip) 
02151 { 
02152    <a class="code" href="classPacket.html#b1">writeLong</a>( <a class="code" href="Packet_8h.html#a7">PACKET_OFFSET_ORIGINIP</a>, ip ); 
02153 }
02154 
<a name="l02155"></a><a class="code" href="classPacket.html#a23">02155</a> <a class="code" href="Types_8h.html#a19">uint16</a> <a class="code" href="classPacket.html#a23">Packet::getOriginPort</a>()<span class="keyword"> const </span>{ 
02156    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b12">readShort</a>(<a class="code" href="Packet_8h.html#a8">PACKET_OFFSET_ORIGINPORT</a>); 
02157 }
02158 
<a name="l02159"></a><a class="code" href="classPacket.html#a24">02159</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a24">Packet::setOriginPort</a>(uint16 pn) { 
02160    <a class="code" href="classPacket.html#b6">writeShort</a>(<a class="code" href="Packet_8h.html#a8">PACKET_OFFSET_ORIGINPORT</a>, pn); 
02161 }
02162 
<a name="l02163"></a><a class="code" href="classPacket.html#a27">02163</a> <a class="code" href="classPacket.html#w1">Packet::RequestID</a> <a class="code" href="classPacket.html#a27">Packet::getRequestID</a>()<span class="keyword"> const </span>{ 
02164    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b12">readShort</a>(<a class="code" href="Packet_8h.html#a9">PACKET_OFFSET_REQUESTID</a>); 
02165 }
02166 
<a name="l02167"></a><a class="code" href="classPacket.html#a28">02167</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a28">Packet::setRequestID</a>(RequestID rid) { 
02168    <a class="code" href="classPacket.html#b6">writeShort</a>(<a class="code" href="Packet_8h.html#a9">PACKET_OFFSET_REQUESTID</a>, rid); 
02169 }
<a name="l02170"></a><a class="code" href="classPacket.html#a87">02170</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a87">Packet::setTimeout</a>( byte timeout ) {
02171    <a class="code" href="classPacket.html#b7">writeByte</a>( <a class="code" href="Packet_8h.html#a19">PACKET_OFFSET_TIMEOUT</a>, timeout );
02172 }
02173 
02174 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l02175"></a><a class="code" href="classPacket.html#a84">02175</a> <a class="code" href="classPacket.html#a84">Packet::getTimeout</a>()<span class="keyword"> const</span>
02176 <span class="keyword"></span>{
02177    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b8">readByte</a>( <a class="code" href="Packet_8h.html#a19">PACKET_OFFSET_TIMEOUT</a> );
02178 }
02179 
02180 <a class="code" href="Types_8h.html#a21">uint32</a>
<a name="l02181"></a><a class="code" href="classPacket.html#a29">02181</a> <a class="code" href="classPacket.html#a29">Packet::getRequestTimestamp</a>()<span class="keyword"> const </span>{
02182    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b10">readLong</a>(<a class="code" href="Packet_8h.html#a10">PACKET_OFFSET_TIMESTAMP</a>);
02183 }
02184 
02185 <span class="keywordtype">void</span> 
<a name="l02186"></a><a class="code" href="classPacket.html#a30">02186</a> <a class="code" href="classPacket.html#a30">Packet::setRequestTimestamp</a>(uint32 timestamp) {
02187    <a class="code" href="classPacket.html#b1">writeLong</a>( <a class="code" href="Packet_8h.html#a10">PACKET_OFFSET_TIMESTAMP</a>, timestamp ); 
02188 }
02189       
02190 <a class="code" href="Types_8h.html#a19">uint16</a>
<a name="l02191"></a><a class="code" href="classPacket.html#a31">02191</a> <a class="code" href="classPacket.html#a31">Packet::getRequestOriginator</a>()<span class="keyword"> const </span>{
02192    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b12">readShort</a>(<a class="code" href="Packet_8h.html#a11">PACKET_OFFSET_ORIGINATOR</a>);
02193 }
02194 
02195 <span class="keywordtype">void</span>
<a name="l02196"></a><a class="code" href="classPacket.html#a32">02196</a> <a class="code" href="classPacket.html#a32">Packet::setRequestOriginator</a>(uint16 origin) {
02197    <a class="code" href="classPacket.html#b6">writeShort</a>(<a class="code" href="Packet_8h.html#a11">PACKET_OFFSET_ORIGINATOR</a>, origin); 
02198 }
02199 
<a name="l02200"></a><a class="code" href="classPacket.html#a36">02200</a> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a36">Packet::getDebInfo</a>()<span class="keyword"> const </span>{ 
02201    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b10">readLong</a>(<a class="code" href="Packet_8h.html#a13">PACKET_OFFSET_DEBITINFO</a>); 
02202 }
02203 
<a name="l02204"></a><a class="code" href="classPacket.html#a37">02204</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a37">Packet::setDebInfo</a>(uint32 de) { 
02205    <a class="code" href="classPacket.html#b1">writeLong</a>(<a class="code" href="Packet_8h.html#a13">PACKET_OFFSET_DEBITINFO</a>, de); 
02206 }
02207 
<a name="l02208"></a><a class="code" href="classPacket.html#a39">02208</a> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a39">Packet::getCPUTime</a>()<span class="keyword"> const </span>{
02209    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b10">readLong</a>( <a class="code" href="Packet_8h.html#a20">PACKET_OFFSET_CPUTIME</a> );
02210 }
02211 
<a name="l02212"></a><a class="code" href="classPacket.html#a38">02212</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a38">Packet::setCPUTime</a>( uint32 timeMs ) {
02213    <a class="code" href="classPacket.html#b1">writeLong</a>( <a class="code" href="Packet_8h.html#a20">PACKET_OFFSET_CPUTIME</a>, timeMs );
02214 }
02215 
<a name="l02216"></a><a class="code" href="classPacket.html#a34">02216</a> <a class="code" href="classPacket.html#w0">Packet::PacketID</a> <a class="code" href="classPacket.html#a34">Packet::getPacketID</a>()<span class="keyword"> const </span>{ 
02217    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b12">readShort</a>(<a class="code" href="Packet_8h.html#a14">PACKET_OFFSET_PACKETID</a>); 
02218 }
02219 
<a name="l02220"></a><a class="code" href="classPacket.html#a35">02220</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a35">Packet::setPacketID</a>(PacketID pi) { 
02221    <a class="code" href="classPacket.html#b6">writeShort</a>(<a class="code" href="Packet_8h.html#a14">PACKET_OFFSET_PACKETID</a>, pi); 
02222 }
02223 
<a name="l02224"></a><a class="code" href="classPacket.html#a40">02224</a> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#a40">Packet::getPacketNbr</a>()<span class="keyword"> const </span>{ 
02225    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b8">readByte</a>(<a class="code" href="Packet_8h.html#a5">PACKET_OFFSET_PACKETNBR</a>); 
02226 }
02227 
<a name="l02228"></a><a class="code" href="classPacket.html#a41">02228</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a41">Packet::setPacketNbr</a>(byte nbr) { 
02229    <a class="code" href="classPacket.html#b7">writeByte</a>(<a class="code" href="Packet_8h.html#a5">PACKET_OFFSET_PACKETNBR</a>, nbr); 
02230 }
02231 
<a name="l02232"></a><a class="code" href="classPacket.html#a42">02232</a> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#a42">Packet::getNbrPackets</a>()<span class="keyword"> const </span>{ 
02233    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b8">readByte</a>(<a class="code" href="Packet_8h.html#a15">PACKET_OFFSET_NBRPACKETS</a>); 
02234 }
02235 
<a name="l02236"></a><a class="code" href="classPacket.html#a43">02236</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a43">Packet::setNbrPackets</a>(byte nbr) { 
02237    <a class="code" href="classPacket.html#b7">writeByte</a>(<a class="code" href="Packet_8h.html#a15">PACKET_OFFSET_NBRPACKETS</a>, nbr); 
02238 }
02239 
<a name="l02240"></a><a class="code" href="classPacket.html#a44">02240</a> <a class="code" href="Types_8h.html#a25">byte</a> <a class="code" href="classPacket.html#a44">Packet::getResendNbr</a>()<span class="keyword"> const </span>{ 
02241    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b8">readByte</a>(<a class="code" href="Packet_8h.html#a16">PACKET_OFFSET_RESENDNBR</a>); 
02242 }
02243 
<a name="l02244"></a><a class="code" href="classPacket.html#a45">02244</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a45">Packet::setResendNbr</a>(byte nbr) { 
02245    <a class="code" href="classPacket.html#b7">writeByte</a>(<a class="code" href="Packet_8h.html#a16">PACKET_OFFSET_RESENDNBR</a>, nbr); 
02246 }
02247 
<a name="l02248"></a><a class="code" href="classPacket.html#a47">02248</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a47">Packet::setMapSet</a>(uint32 mapSet) { 
02249    <a class="code" href="classPacket.html#b1">writeLong</a>(<a class="code" href="Packet_8h.html#a17">PACKET_OFFSET_MAPSETID</a>, mapSet); 
02250 }
02251 
<a name="l02252"></a><a class="code" href="classPacket.html#a46">02252</a> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a46">Packet::getMapSet</a>()<span class="keyword"> const </span>{ 
02253    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b10">readLong</a>(<a class="code" href="Packet_8h.html#a17">PACKET_OFFSET_MAPSETID</a>); 
02254 }
02255 
<a name="l02256"></a><a class="code" href="classPacket.html#a49">02256</a> <span class="keywordtype">void</span> <a class="code" href="classPacket.html#a49">Packet::setRequestTag</a>(uint32 requestTag) { 
02257    <a class="code" href="classPacket.html#b1">writeLong</a>(<a class="code" href="Packet_8h.html#a18">PACKET_OFFSET_REQUEST_TAG</a>, requestTag); 
02258 }
02259 
<a name="l02260"></a><a class="code" href="classPacket.html#a48">02260</a> <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classPacket.html#a48">Packet::getRequestTag</a>()<span class="keyword"> const </span>{ 
02261    <span class="keywordflow">return</span> <a class="code" href="classPacket.html#b10">readLong</a>(<a class="code" href="Packet_8h.html#a18">PACKET_OFFSET_REQUEST_TAG</a>); 
02262 }
02263 
02264 <span class="comment">// ======================================================= RequestPacket =</span>
02265 <span class="keyword">inline</span> Packet::MapID 
<a name="l02266"></a><a class="code" href="classRequestPacket.html#a6">02266</a> <a class="code" href="classRequestPacket.html#a6">RequestPacket::getMapID</a>()<span class="keyword"> const </span>
02267 <span class="keyword"></span>{
02268    <span class="keywordflow">return</span> ( <a class="code" href="classPacket.html#b10">readLong</a>( <a class="code" href="classRequestPacket.html#s0">REQUEST_PACKET_MAPID_POS</a> ) );
02269 }
02270 
02271 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
02272 <a class="code" href="classRequestPacket.html#a7">RequestPacket::setMapID</a>( uint32 mapID ) 
02273 {
02274    <a class="code" href="classPacket.html#b1">writeLong</a>( REQUEST_PACKET_MAPID_POS, mapID );
02275 }
02276 
02277 <span class="comment">// ========================================================= ReplyPacket =</span>
02278 <span class="keyword">inline</span> <a class="code" href="Types_8h.html#a21">uint32</a> 
<a name="l02279"></a><a class="code" href="classReplyPacket.html#a6">02279</a> <a class="code" href="classReplyPacket.html#a6">ReplyPacket::getStatus</a>()<span class="keyword"> const </span>
02280 <span class="keyword"></span>{
02281    <span class="keywordflow">return</span> ( <a class="code" href="classPacket.html#b10">readLong</a>( <a class="code" href="classReplyPacket.html#s0">REPLY_PACKET_STATUS_POS</a> ) );
02282 }
02283 
02284 <span class="keyword">inline</span> <span class="keywordtype">void</span> 
<a name="l02285"></a><a class="code" href="classReplyPacket.html#a8">02285</a> <a class="code" href="classReplyPacket.html#a8">ReplyPacket::setStatus</a>( uint32 status ) 
02286 {
02287    <a class="code" href="classPacket.html#b1">writeLong</a>( <a class="code" href="classReplyPacket.html#s0">REPLY_PACKET_STATUS_POS</a>, status);
02288 }
02289 
02290 <span class="preprocessor">#endif // __PACKET_H</span>
02291 <span class="preprocessor"></span>
02292 
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:49 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
