<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: SearchHandler.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">Servers</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">include</a></div>
<h1>SearchHandler.h</h1><a href="SearchHandler_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef SEARCHRHANDLER_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define SEARCHRHANDLER_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 
00019 <span class="preprocessor">#include&lt;set&gt;</span>
00020 <span class="preprocessor">#include&lt;vector&gt;</span>
00021 <span class="preprocessor">#include&lt;map&gt;</span>
00022 
00023 <span class="preprocessor">#include "<a class="code" href="IDPairVector_8h.html">IDPairVector.h</a>"</span>
00024 <span class="preprocessor">#include "<a class="code" href="SearchTypes_8h.html">SearchTypes.h</a>"</span>
00025 <span class="preprocessor">#include "<a class="code" href="StringTable_8h.html">StringTable.h</a>"</span>
00026 <span class="preprocessor">#include "<a class="code" href="MC2Coordinate_8h.html">MC2Coordinate.h</a>"</span>
00027 <span class="preprocessor">#include "<a class="code" href="MC2BoundingBox_8h.html">MC2BoundingBox.h</a>"</span>
00028 <span class="preprocessor">#include "<a class="code" href="SearchRequestParameters_8h.html">SearchRequestParameters.h</a>"</span>
00029 <span class="preprocessor">#include "<a class="code" href="TopRegionRequest_8h.html">TopRegionRequest.h</a>"</span>
00030 <span class="preprocessor">#include "<a class="code" href="NotCopyable_8h.html">NotCopyable.h</a>"</span>
00031 
00032 <span class="keyword">class </span><a class="code" href="classRequest.html">Request</a>;
00033 <span class="keyword">class </span><a class="code" href="classOldSearchRequestPacket.html">OldSearchRequestPacket</a>;
00034 <span class="keyword">class </span><a class="code" href="classVanillaSearchReplyPacket.html">VanillaSearchReplyPacket</a>;
00035 <span class="keyword">class </span><a class="code" href="classMatchLink.html">MatchLink</a>;
00036 <span class="keyword">class </span><a class="code" href="classOverviewMatch.html">OverviewMatch</a>;
00037 <span class="keyword">class </span><a class="code" href="classPacketContainer.html">PacketContainer</a>;
00038 <span class="keyword">class </span><a class="code" href="classPacketContainerTree.html">PacketContainerTree</a>;
00039 <span class="keyword">class </span><a class="code" href="classTopRegionMatch.html">TopRegionMatch</a>;
00040 <span class="keyword">class </span><a class="code" href="classCoordinateOnItemObject.html">CoordinateOnItemObject</a>;
00041 <span class="keyword">class </span><a class="code" href="classSearchMatch.html">SearchMatch</a>;
00042 <span class="keyword">class </span><a class="code" href="classVanillaMatch.html">VanillaMatch</a>;
00043 <span class="keyword">class </span><a class="code" href="classReplyPacket.html">ReplyPacket</a>;
00044 <span class="keyword">class </span><a class="code" href="classMatchInfoReplyPacket.html">MatchInfoReplyPacket</a>;
00045 
00046 
<a name="l00053"></a><a class="code" href="classSearchHandler.html">00053</a> <span class="keyword">class </span><a class="code" href="classSearchHandler.html">SearchHandler</a>: <span class="keyword">private</span> <a class="code" href="classNotCopyable.html">NotCopyable</a> {
00054 <span class="keyword">public</span>:
00055    
00082    <a class="code" href="classSearchHandler.html#a0">SearchHandler</a>( <a class="code" href="classOldSearchRequestPacket.html">OldSearchRequestPacket</a> *p,
00083                   <a class="code" href="classRequest.html">Request</a>* request,
00084                   <span class="keyword">const</span> <a class="code" href="classSearchRequestParameters.html">SearchRequestParameters</a>&amp; params,
00085                   <span class="keyword">const</span> <a class="code" href="classTopRegionRequest.html">TopRegionRequest</a>* topReq,
00086                   <span class="keywordtype">bool</span> uniqueOrFull               = <span class="keyword">true</span>,
00087                   <span class="keywordtype">bool</span> searchOnlyIfUniqueOrFull   = <span class="keyword">false</span>,
00088                   <a class="code" href="Types_8h.html#a21">uint32</a> regionsInMatches         = 0,
00089                   <a class="code" href="Types_8h.html#a21">uint32</a> overviewRegionsInMatches = 0,
00090                   <span class="keywordtype">bool</span> lookupCoordinates = <span class="keyword">false</span>,
00091                   <span class="keywordtype">bool</span> lookupBBoxes = <span class="keyword">false</span>,
00092                   <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; sortOrigin =
00093                              MC2Coordinate::invalidCoordinate,
00094                   <span class="keyword">const</span> <a class="code" href="classSearchRequestParameters.html">SearchRequestParameters</a>* overParams = NULL);
<a name="l00095"></a><a class="code" href="classSearchHandler.html#a1">00095</a> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#a1">sortOverviews</a>() {
00096       <a class="code" href="classSearchHandler.html#e2">calcDistsAndSort</a>( <a class="code" href="classSearchHandler.html#r7">m_unexpandedOverviewMatches</a>,
00097                         <a class="code" href="classSearchHandler.html#r29">m_sortOrigin</a>,
00098                         <a class="code" href="classSearchHandler.html#r30">m_params</a>.<a class="code" href="classSearchRequestParameters.html#a6">getSortingType</a>() );
00099    }
00100 
00101    
00105    <span class="keyword">virtual</span> <a class="code" href="classSearchHandler.html#a2">~SearchHandler</a>();
00106 
00110    <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#a3">printData</a>();
00111    
00116    <span class="keywordtype">bool</span> <a class="code" href="classSearchHandler.html#a4">processPacket</a>( <a class="code" href="classPacketContainer.html">PacketContainer</a>* cont );
00117 
00121    <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classSearchHandler.html#a5">getStatus</a>() <span class="keyword">const</span>;
00122    
00127    <a class="code" href="classPacketContainer.html">PacketContainer</a>* <a class="code" href="classSearchHandler.html#a6">getNextPacket</a>();
00128 
00129 
00133    <a class="code" href="classPacketContainer.html">PacketContainer</a>* <a class="code" href="classSearchHandler.html#a7">getAnswer</a>();
00134 
00135 
00139    <span class="keywordtype">bool</span> <a class="code" href="classSearchHandler.html#a8">requestDone</a>();
00140 
00141 
00145    <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classSearchHandler.html#a9">getNbrLocationsFound</a>();
00146 
00147 
00151    <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classSearchHandler.html#a10">getNbrOverviewMatches</a>();
00152 
00160    <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;VanillaMatch*&gt;</a>&amp; <a class="code" href="classSearchHandler.html#a11">getMatches</a>() <span class="keyword">const</span>;
00161 
00166    <span class="keyword">inline</span> <a class="code" href="classvector.html">vector&lt;VanillaMatch*&gt;</a>&amp; <a class="code" href="classSearchHandler.html#a12">getMatchesForWriting</a>();
00167    
00172    <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;OverviewMatch*&gt;</a> <a class="code" href="classSearchHandler.html#a13">getExpandedOverviewMatches</a>() <span class="keyword">const</span>;
00173    
00177    <a class="code" href="classOverviewMatch.html">OverviewMatch</a>* <a class="code" href="classSearchHandler.html#a14">getOverviewMatch</a>( uint32 index ) <span class="keyword">const</span>;
00178 
00179 
00183    <a class="code" href="classOverviewMatch.html">OverviewMatch</a>** <a class="code" href="classSearchHandler.html#a15">getOverviewMatches</a>();
00184 
00185 
00189    <a class="code" href="Types_8h.html#a21">uint32</a> <a class="code" href="classSearchHandler.html#a16">getUniqueOrFull</a>();
00190 
00191 
00202    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#e0">merge</a>( uint32 loNdx,  
00203                       uint32 hiNdx,
00204                       uint32 resNdx, 
00205                       <a class="code" href="classMatchLink.html">MatchLink</a> **matches,
00206                       uint32 nbrLists,
00207                       SearchTypes::SearchSorting sorting );
00208 
00209    
00213    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#e1">convMatchLinkToPacket</a>(   <a class="code" href="classMatchLink.html">MatchLink</a> *matchLink,
00214                                         <a class="code" href="classVanillaSearchReplyPacket.html">VanillaSearchReplyPacket</a> *p );
00215 
00216 
00220    <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classSearchRequestParameters.html">SearchRequestParameters</a>&amp; <a class="code" href="classSearchHandler.html#a17">getSearchParameters</a>() <span class="keyword">const</span>;
00221 
00228    <span class="keyword">template</span>&lt;<span class="keyword">class</span> SEARCHMATCH&gt;
00229       <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#e2">calcDistsAndSort</a>(<a class="code" href="classvector.html">vector&lt;SEARCHMATCH*&gt;</a>&amp; matches,
00230                                    <span class="keyword">const</span> <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a>&amp; origin,
00231                                    SearchTypes::SearchSorting sorting);
00232 
00233 
00234   <span class="keyword">private</span>:
00235 
00240    <a class="code" href="classPacketContainer.html">PacketContainer</a>* <a class="code" href="classSearchHandler.html#d0">dequeFromTree</a>();
00241 
00250    <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">bool</span>
00251                   <a class="code" href="classSearchHandler.html#h0">idAllowed</a>(<span class="keyword">const</span> <a class="code" href="classOverviewMatch.html">OverviewMatch</a>* match,
00252                             <span class="keyword">const</span> <a class="code" href="classmap.html">map&lt;const OverviewMatch*, uint32&gt;</a>&amp; mapIDs,
00253                             <span class="keyword">const</span> set&lt;uint32&gt;&amp; wholeMaps,
00254                             <span class="keyword">const</span> set&lt;IDPair_t&gt;&amp; allowedItems);
00255    
00267    <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#h1">reduceOverviewMatches</a>(<a class="code" href="classvector.html">vector&lt;OverviewMatch*&gt;</a>&amp; matches,
00268                                      uint32&amp; nbrOverviewLocations,
00269                                      <span class="keyword">const</span> <a class="code" href="classSearchRequestParameters.html">SearchRequestParameters</a>&amp; params,
00270                                      <span class="keyword">const</span> <a class="code" href="classTopRegionMatch.html">TopRegionMatch</a>&amp; topRegion,
00271                                      <a class="code" href="classmap.html">map&lt;const OverviewMatch*, uint32&gt;</a>&amp;mapIDs);
00272       
00274    <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#d1">handleAllOverviewsReceived</a>();
00275 
00277    <span class="keywordtype">bool</span> <a class="code" href="classSearchHandler.html#d2">makeOverviewMatchesFromMasks</a>( uint32 nbrMapIDs,
00278                                       <span class="keyword">const</span> uint32* mapIDs,
00279                                       uint32 nbrMasks,
00280                                       <span class="keyword">const</span> uint32* maskItemIDs,
00281                                       <span class="keyword">const</span> const_char_p* maskNames);
00282    
00284    <span class="keywordtype">bool</span> <a class="code" href="classSearchHandler.html#d3">makeSearchMaskPackets</a>( <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;OverviewMatch*&gt;</a>&amp; overviewMatches);
00285    
00287    <span class="keywordtype">bool</span> <a class="code" href="classSearchHandler.html#d3">makeSearchMaskPackets</a>( <span class="keyword">const</span> uint32* mapIDs, uint32 nbrMapIDs, 
00288                                <span class="keyword">const</span> uint32* masks, 
00289                                <span class="keyword">const</span> uint32* maskItemIDs,
00290                                <span class="keyword">const</span> <span class="keywordtype">char</span>** maskNames, uint32 nbrMasks );
00291 
00296    <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#d5">makeMatchVector</a>();
00297   
<a name="l00299"></a><a class="code" href="classSearchHandler.html#y16">00299</a>    <span class="keyword">enum</span> <a class="code" href="classSearchHandler.html#y16">state</a> { <a class="code" href="classSearchHandler.html#y16y0">START</a> = 0,
00300                 <a class="code" href="classSearchHandler.html#y16y1">SEND_TOP_REGION</a> = 10,
00301                 <a class="code" href="classSearchHandler.html#y16y2">AWAIT_TOP_REGION</a> = 11 ,
00302                 <a class="code" href="classSearchHandler.html#y16y3">SEND_OVERVIEW</a> = 20,
00303                 <a class="code" href="classSearchHandler.html#y16y4">AWAIT_OVERVIEW</a> = 21 ,
00304                 <a class="code" href="classSearchHandler.html#y16y5">SEND_SEARCH</a> = 30,
00305                 <a class="code" href="classSearchHandler.html#y16y6">AWAIT_SEARCH</a> = 31,
00306                 <a class="code" href="classSearchHandler.html#y16y7">SEND_EXPAND_ITEM</a> = 40,
00307                 <a class="code" href="classSearchHandler.html#y16y8">AWAIT_EXPAND_ITEM</a> = 41,
00308                 <a class="code" href="classSearchHandler.html#y16y9">OVERVIEWEXPAND</a> = 60,
00309                 <a class="code" href="classSearchHandler.html#y16y10">OVERVIEWEXPAND_THEN_OVERVIEW_CHECK</a> = 61,
00310                 <a class="code" href="classSearchHandler.html#y16y11">UNEXPAND_OVERVIEW</a> = 70,
00311                 <a class="code" href="classSearchHandler.html#y16y12">AWAIT_UNEXPAND_OVERVIEW</a> = 71,
00312                 <a class="code" href="classSearchHandler.html#y16y13">COORDINATES</a> = 73,
00314                 <a class="code" href="classSearchHandler.html#y16y14">ALMOST_DONE_2</a> = 80,
00315                 <a class="code" href="classSearchHandler.html#y16y15">DONE</a> = 1000 } m_state;
00316 
00320    <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classSearchHandler.html#h2">stateAsString</a>(state inState);
00321    
00327    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#d6">setState</a>(state newState, <span class="keywordtype">int</span> line = -1);
00328    
00333    <span class="keyword">inline</span> state <a class="code" href="classSearchHandler.html#d7">initOverviewExpand</a>();
00334 
00340    state <a class="code" href="classSearchHandler.html#d8">checkMatchInfosReceived</a>();
00341    
00347    <span class="keyword">inline</span> state <a class="code" href="classSearchHandler.html#d9">processOverviewExpand</a>(<a class="code" href="classPacketContainer.html">PacketContainer</a>* pack);
00348 
00355    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#d10">sendMatchInfoPacket</a>(<a class="code" href="classVanillaSearchReplyPacket.html">VanillaSearchReplyPacket</a>* packet);
00356 
00363    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#d11">handleTopRegionReceivedInUnexpand</a>();
00364 
00369    <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classSearchHandler.html#d12">handleUnexpandItemPackets</a>(<span class="keyword">const</span> <a class="code" href="classReplyPacket.html">ReplyPacket</a>* rep);
00370    
00374    <span class="keyword">inline</span> SearchHandler::state <a class="code" href="classSearchHandler.html#d13">initCoordinates</a>();
00375 
00379    <span class="keyword">inline</span> state <a class="code" href="classSearchHandler.html#d14">handleAllCoordinatesReceived</a>();
00380    
<a name="l00382"></a><a class="code" href="classSearchHandler.html#r1">00382</a>    <a class="code" href="classRequest.html">Request</a>* m_request;
00383 
00384    
<a name="l00386"></a><a class="code" href="classSearchHandler.html#r2">00386</a>    <a class="code" href="classOldSearchRequestPacket.html">OldSearchRequestPacket</a>* m_searchPacket;
00387 
00388 
<a name="l00390"></a><a class="code" href="classSearchHandler.html#r3">00390</a>    <a class="code" href="classPacketContainer.html">PacketContainer</a>* m_answer;
00391 
<a name="l00393"></a><a class="code" href="classSearchHandler.html#r4">00393</a>    <a class="code" href="classmap.html">map&lt;uint32, PacketContainer*&gt;</a> m_overviewReplies;
00394 
<a name="l00399"></a><a class="code" href="classSearchHandler.html#r5">00399</a>    <a class="code" href="classmap.html">map&lt;uint32, uint32&gt;</a> m_overviewRequestMaps;
00400    
<a name="l00402"></a><a class="code" href="classSearchHandler.html#r6">00402</a>    <span class="keywordtype">int</span> m_nbrOverviewSearchesLeft;
00403    
<a name="l00408"></a><a class="code" href="classSearchHandler.html#r7">00408</a>    <a class="code" href="classvector.html">vector&lt;OverviewMatch*&gt;</a> m_unexpandedOverviewMatches;
00409 
<a name="l00414"></a><a class="code" href="classSearchHandler.html#r8">00414</a>    <a class="code" href="classvector.html">vector&lt;OverviewMatch*&gt;</a> m_expandedOverviewMatches;
00415 
<a name="l00417"></a><a class="code" href="classSearchHandler.html#r9">00417</a>    <span class="keywordtype">int</span> m_nbrOverviewMatchesToExpand;
00418    
<a name="l00420"></a><a class="code" href="classSearchHandler.html#r10">00420</a>    <a class="code" href="classmap.html">map&lt;const OverviewMatch*, uint32&gt;</a> m_overviewMapIDsByOverviewMatch;
00421 
00422 
<a name="l00424"></a><a class="code" href="classSearchHandler.html#r11">00424</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrOverviewLocations;
00425    
00426 
<a name="l00428"></a><a class="code" href="classSearchHandler.html#r12">00428</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_currentRequestIndex;
00429 
00430 
<a name="l00432"></a><a class="code" href="classSearchHandler.html#r13">00432</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrRequestPackets;
00433 
00434    
<a name="l00436"></a><a class="code" href="classSearchHandler.html#r14">00436</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrReceivedPackets;
00437 
00438 
<a name="l00440"></a><a class="code" href="classSearchHandler.html#r15">00440</a>    <a class="code" href="classPacketContainer.html">PacketContainer</a> **m_requestPackets; <span class="comment">// array of pointers</span>
00441 
00442    
<a name="l00444"></a><a class="code" href="classSearchHandler.html#r16">00444</a>    <a class="code" href="Types_8h.html#a21">uint32</a>* m_requestPacketIDs;
00445 
00446 
<a name="l00448"></a><a class="code" href="classSearchHandler.html#r17">00448</a>    <a class="code" href="classPacketContainer.html">PacketContainer</a> **m_replyPackets; <span class="comment">// array of pointers</span>
00449 
<a name="l00451"></a><a class="code" href="classSearchHandler.html#r18">00451</a>    <a class="code" href="classMatchLink.html">MatchLink</a> **m_matches; 
00452 
<a name="l00454"></a><a class="code" href="classSearchHandler.html#r19">00454</a>    <a class="code" href="classPacketContainer.html">PacketContainer</a> *m_expandItemCont;
00455    
00456 
<a name="l00458"></a><a class="code" href="classSearchHandler.html#r20">00458</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_expandItemPacketID;
00459 
00460 
<a name="l00462"></a><a class="code" href="classSearchHandler.html#r21">00462</a>    <a class="code" href="classPacketContainer.html">PacketContainer</a> *m_expandItemReply;
00463 
<a name="l00465"></a><a class="code" href="classSearchHandler.html#r22">00465</a>    <span class="keywordtype">bool</span> m_firstPacket;
00466    
00467    <span class="comment">// Search stuff</span>
<a name="l00468"></a><a class="code" href="classSearchHandler.html#r23">00468</a>    <span class="keywordtype">char</span>* m_zipCode;
<a name="l00469"></a><a class="code" href="classSearchHandler.html#r24">00469</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrLocations;
<a name="l00470"></a><a class="code" href="classSearchHandler.html#r25">00470</a>    <span class="keywordtype">char</span>** m_locations;
<a name="l00471"></a><a class="code" href="classSearchHandler.html#r26">00471</a>    <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrCategories;
<a name="l00472"></a><a class="code" href="classSearchHandler.html#r27">00472</a>    <a class="code" href="Types_8h.html#a21">uint32</a>* m_categories;
00473    
<a name="l00474"></a><a class="code" href="classSearchHandler.html#r28">00474</a>    <span class="keywordtype">char</span>* m_searchString;
00475 
<a name="l00477"></a><a class="code" href="classSearchHandler.html#r29">00477</a>    <a class="code" href="classMC2Coordinate.html">MC2Coordinate</a> m_sortOrigin;
00478    
<a name="l00480"></a><a class="code" href="classSearchHandler.html#r30">00480</a>    <a class="code" href="classSearchRequestParameters.html">SearchRequestParameters</a> m_params;
00481    
<a name="l00483"></a><a class="code" href="classSearchHandler.html#r31">00483</a>    <a class="code" href="classSearchRequestParameters.html">SearchRequestParameters</a> m_overParams;
00484 
<a name="l00486"></a><a class="code" href="classSearchHandler.html#r32">00486</a>    StringTable::countryCode m_topRegionID;
00487 
<a name="l00492"></a><a class="code" href="classSearchHandler.html#r33">00492</a>    <a class="code" href="classPacketContainerTree.html">PacketContainerTree</a>* m_packetsReadyToSend;
00493 
<a name="l00497"></a><a class="code" href="classSearchHandler.html#r34">00497</a>    <span class="keyword">const</span> <a class="code" href="classTopRegionMatch.html">TopRegionMatch</a>* m_topRegion;
00498 
<a name="l00500"></a><a class="code" href="classSearchHandler.html#r35">00500</a>    <a class="code" href="classCoordinateOnItemObject.html">CoordinateOnItemObject</a>* m_coordinateHandler;
00501  
00502    
<a name="l00508"></a><a class="code" href="classSearchHandler.html#r36">00508</a>    <a class="code" href="classmap.html">map&lt;uint32, SearchMatch*&gt;</a> m_lookupCoordsMap;
00509    
<a name="l00511"></a><a class="code" href="classSearchHandler.html#r37">00511</a>    <a class="code" href="classvector.html">vector&lt;VanillaMatch*&gt;</a> m_matchVector;
00512 
<a name="l00517"></a><a class="code" href="classSearchHandler.html#r38">00517</a>    <a class="code" href="classvector.html">vector&lt;VanillaMatch*&gt;</a> m_matchesForUnexpansion;
00518 
<a name="l00522"></a><a class="code" href="classSearchHandler.html#r39">00522</a>    <a class="code" href="classvector.html">vector&lt;MatchInfoReplyPacket*&gt;</a> m_matchInfoReplies;
00523 
<a name="l00527"></a><a class="code" href="classSearchHandler.html#r40">00527</a>    <span class="keywordtype">int</span> m_nbrExpectedMatchInfoPackets;
00528 
<a name="l00532"></a><a class="code" href="classSearchHandler.html#r41">00532</a>    <a class="code" href="classvector.html">vector&lt;MC2BoundingBox&gt;</a> m_bboxesToSearchIn;
00533 
<a name="l00535"></a><a class="code" href="classSearchHandler.html#r42">00535</a>    <span class="keyword">const</span> <a class="code" href="classTopRegionRequest.html">TopRegionRequest</a>* m_topRegionRequest;
00536 
<a name="l00541"></a><a class="code" href="classSearchHandler.html#r43">00541</a>    <a class="code" href="classvector.html">vector&lt; uint32 &gt;</a> m_expandedToUnexpandedOverviewIndex;
00542 };
00543 
00544 <span class="comment">// - Implementation of inlined functions</span>
00545 <span class="keyword">const</span> <a class="code" href="classvector.html">vector&lt;OverviewMatch*&gt;</a>
<a name="l00546"></a><a class="code" href="classSearchHandler.html#a13">00546</a> <a class="code" href="classSearchHandler.html#a13">SearchHandler::getExpandedOverviewMatches</a>()<span class="keyword"> const</span>
00547 <span class="keyword"></span>{
00548    <span class="keywordflow">return</span> m_expandedOverviewMatches;
00549 }
00550 
00551 <span class="keyword">inline</span> <a class="code" href="classvector.html">vector&lt;VanillaMatch*&gt;</a>&amp;
<a name="l00552"></a><a class="code" href="classSearchHandler.html#a12">00552</a> <a class="code" href="classSearchHandler.html#a12">SearchHandler::getMatchesForWriting</a>()
00553 {
00554    <span class="keywordflow">return</span> m_matchVector;
00555 }
00556 
00557 
00558 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classSearchRequestParameters.html">SearchRequestParameters</a>&amp; 
<a name="l00559"></a><a class="code" href="classSearchHandler.html#a17">00559</a> <a class="code" href="classSearchHandler.html#a17">SearchHandler::getSearchParameters</a>()<span class="keyword"> const </span>{
00560    <span class="keywordflow">return</span> m_params;
00561 }
00562 
00563 <span class="preprocessor">#endif</span>
00564 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:50 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
