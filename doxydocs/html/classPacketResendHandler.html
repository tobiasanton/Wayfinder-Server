<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: PacketResendHandler Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>PacketResendHandler Class Reference</h1><a class="el" href="classPacket.html">Packet</a> resender class.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>&gt;</code>
<p>
Inheritance diagram for PacketResendHandler:<p><center><img src="classPacketResendHandler__inherit__graph.png" border="0" usemap="#PacketResendHandler__inherit__map" alt="Inheritance graph"></center>
<map name="PacketResendHandler__inherit__map">
<area href="classNotCopyable.html" shape="rect" coords="33,5,132,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for PacketResendHandler:<p><center><img src="classPacketResendHandler__coll__graph.png" border="0" usemap="#PacketResendHandler__coll__map" alt="Collaboration graph"></center>
<map name="PacketResendHandler__coll__map">
<area href="classPacketResendHandler_1_1TimeoutThread.html" shape="rect" coords="280,200,531,227" alt="">
<area href="classPacketResendHandler_1_1ReceiveThread.html" shape="rect" coords="5,200,256,227" alt="">
<area href="classNotCopyable.html" shape="rect" coords="215,5,313,32" alt="">
<area href="classISABThread.html" shape="rect" coords="457,109,551,136" alt="">
<area href="classISABThreadGroup.html" shape="rect" coords="439,5,569,32" alt="">
<area href="classISABMonitor.html" shape="rect" coords="89,5,185,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classPacketResendHandler-members.html">List of all members.</a><h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classPacketResendHandler.html#a0">PacketResendHandler</a> (<a class="el" href="Types_8h.html#a19">uint16</a> port)
<dl class="el"><dd class="mdescRight">Creates a new PacketResendHandler.  <a href="#a0"></a><br></dl><li><a class="el" href="classPacketResendHandler.html#a1">~PacketResendHandler</a> ()
<dl class="el"><dd class="mdescRight">Terminates the two threads and notifies the answer monitor.  <a href="#a1"></a><br></dl><li>void <a class="el" href="classPacketResendHandler.html#a2">start</a> ()
<dl class="el"><dd class="mdescRight">Starts the two threads.  <a href="#a2"></a><br></dl><li>void <a class="el" href="classPacketResendHandler.html#a3">addAndSend</a> (<a class="el" href="classPacketContainer.html">PacketContainer</a> *cont)
<dl class="el"><dd class="mdescRight">Adds and sends a new <a class="el" href="classPacketContainer.html">PacketContainer</a>.  <a href="#a3"></a><br></dl><li><a class="el" href="classPacketContainer.html">PacketContainer</a> * <a class="el" href="classPacketResendHandler.html#a4">getAnswer</a> ()
<dl class="el"><dd class="mdescRight">Returns a received answer.  <a href="#a4"></a><br></dl><li>void <a class="el" href="classPacketResendHandler.html#a5">notifyAnswer</a> ()
<dl class="el"><dd class="mdescRight">Notifies the answer so that threads hanging on getAnswer is awakend.  <a href="#a5"></a><br></dl><li><a class="el" href="classPacketContainer.html">PacketContainer</a> * <a class="el" href="classPacketResendHandler.html#a6">getAnswerNow</a> ()
<dl class="el"><dd class="mdescRight">Returns a received answer if there is one, NULL if no answers.  <a href="#a6"></a><br></dl><li><a class="el" href="Types_8h.html#a19">uint16</a> <a class="el" href="classPacketResendHandler.html#a7">getPort</a> ()
<dl class="el"><dd class="mdescRight">Return the port used to listen on returning packets on.  <a href="#a7"></a><br></dl></ul>
<h2>Private Member Functions</h2>
<ul>
<li><a class="el" href="classPacketContainer.html">PacketContainer</a> * <a class="el" href="classPacketResendHandler.html#d0">checkAndResend</a> ()
<dl class="el"><dd class="mdescRight">Check the timestamp on the first packetContainer in the <a class="el" href="classPriorityQueue.html">PriorityQueue</a>.  <a href="#d0"></a><br></dl><li>bool <a class="el" href="classPacketResendHandler.html#d1">findAndRemoveIfDone</a> (<a class="el" href="classPacket.html">Packet</a> *pack, <a class="el" href="classPacketContainer.html">PacketContainer</a> *&amp;res)
<dl class="el"><dd class="mdescRight">Find a packet matching a packetID, requestID.  <a href="#d1"></a><br></dl><li>bool <a class="el" href="classPacketResendHandler.html#d2">upDateRequestPacket</a> (<a class="el" href="classPacket.html">Packet</a> *pack, <a class="el" href="classPacketContainer.html">PacketContainer</a> *&amp;res)
<dl class="el"><dd class="mdescRight">Handles a <a class="el" href="classAcknowledgeRequestReplyPacket.html">AcknowledgeRequestReplyPacket</a>.  <a href="#d2"></a><br></dl><li>void <a class="el" href="classPacketResendHandler.html#d3">addAnswer</a> (<a class="el" href="classPacketContainer.html">PacketContainer</a> *cont)
<dl class="el"><dd class="mdescRight">Add answer.  <a href="#d3"></a><br></dl><li>bool <a class="el" href="classPacketResendHandler.html#d4">send</a> (<a class="el" href="classPacketContainer.html">PacketContainer</a> *cont)
<dl class="el"><dd class="mdescRight">Send the packet contained in the packetcontainer.  <a href="#d4"></a><br></dl><li>void <a class="el" href="classPacketResendHandler.html#d5">sendTCPPackets</a> (<a class="el" href="classPacket.html">Packet</a> *pack)
<dl class="el"><dd class="mdescRight">Sends the TCP packets in the queue.  <a href="#d5"></a><br></dl><li><a class="el" href="classPacket.html">Packet</a> * <a class="el" href="classPacketResendHandler.html#d6">receive</a> (<a class="el" href="Types_8h.html#a21">uint32</a> maxWaitTime)
<dl class="el"><dd class="mdescRight">Reads a packet from the network.  <a href="#d6"></a><br></dl><li>void <a class="el" href="classPacketResendHandler.html#d7">removeFromTCP</a> (<a class="el" href="classPacketContainer.html">PacketContainer</a> *cont)
<dl class="el"><dd class="mdescRight">Removes any packets from the tcpqueue for a <a class="el" href="classPacketContainer.html">PacketContainer</a>.  <a href="#d7"></a><br></dl></ul>
<h2>Private Attributes</h2>
<ul>
<li><a class="el" href="classISABMonitor.html">ISABMonitor</a> <a class="el" href="classPacketResendHandler.html#r0">m_monitor</a>
<dl class="el"><dd class="mdescRight">Monitor protecting this class functions.  <a href="#r0"></a><br></dl><li>auto_ptr&lt; <a class="el" href="classPacketContainerTree.html">PacketContainerTree</a> &gt; <a class="el" href="classPacketResendHandler.html#r1">m_contTree</a>
<dl class="el"><dd class="mdescRight">The tree of outstanding packets.  <a href="#r1"></a><br></dl><li><a class="el" href="classISABMonitor.html">ISABMonitor</a> <a class="el" href="classPacketResendHandler.html#r2">m_answerMonitor</a>
<dl class="el"><dd class="mdescRight">Monitor protecting the answer queue.  <a href="#r2"></a><br></dl><li>auto_ptr&lt; <a class="el" href="classPacketContainerTree.html">PacketContainerTree</a> &gt; <a class="el" href="classPacketResendHandler.html#r3">m_answerTree</a>
<dl class="el"><dd class="mdescRight">The tree of answers.  <a href="#r3"></a><br></dl><li>bool <a class="el" href="classPacketResendHandler.html#r4">m_running</a>
<dl class="el"><dd class="mdescRight">If handler is going down.  <a href="#r4"></a><br></dl><li><a class="el" href="classPacketResendHandler_1_1ReceiveThread.html">ReceiveThread</a> * <a class="el" href="classPacketResendHandler.html#r5">m_receiveThread</a>
<dl class="el"><dd class="mdescRight">The thread that handles receiving.  <a href="#r5"></a><br></dl><li><a class="el" href="classPacketResendHandler_1_1TimeoutThread.html">TimeoutThread</a> * <a class="el" href="classPacketResendHandler.html#r6">m_timeoutThread</a>
<dl class="el"><dd class="mdescRight">The thread that handles resending.  <a href="#r6"></a><br></dl><li>auto_ptr&lt; <a class="el" href="classPacketSenderReceiver.html">PacketSenderReceiver</a> &gt; <a class="el" href="classPacketResendHandler.html#r7">m_senderReceiver</a>
<li>auto_ptr&lt; ServerPacketSender &gt; <a class="el" href="classPacketResendHandler.html#r8">m_packetSender</a>
</ul>
<h2>Friends</h2>
<ul>
<li>class <a class="el" href="classPacketResendHandler.html#n0">ReceiveThread</a>
<dl class="el"><dd class="mdescRight"><a class="el" href="classPacketResendHandler_1_1ReceiveThread.html">ReceiveThread</a> is a friend.  <a href="#n0"></a><br></dl><li>class <a class="el" href="classPacketResendHandler.html#n1">TimeoutThread</a>
<dl class="el"><dd class="mdescRight"><a class="el" href="classPacketResendHandler_1_1TimeoutThread.html">TimeoutThread</a> is a friend.  <a href="#n1"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<a class="el" href="classPacket.html">Packet</a> resender class. 
<p>
Has two ISABThreads, one for resending and one for reading from the network. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00034">34</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="PacketResendHandler::PacketResendHandler"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">PacketResendHandler::PacketResendHandler           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a19">uint16</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>port</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a new PacketResendHandler. 
<p>
Use start to begin receving and resending.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>port</em>&nbsp;</td><td>The port to listen for incomming packets on, if port number port is allready used next number is tested and so on, in other words find free port is used. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="PacketResendHandler::~PacketResendHandler"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">PacketResendHandler::~<a class="el" href="classPacketResendHandler.html">PacketResendHandler</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Terminates the two threads and notifies the answer monitor. 
<p>
Might take up to 1000 ms before threads really ends so this destructor sleeps 3000 ms.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a3" doxytag="PacketResendHandler::addAndSend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void PacketResendHandler::addAndSend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketContainer.html">PacketContainer</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cont</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Adds and sends a new <a class="el" href="classPacketContainer.html">PacketContainer</a>. 
<p>
If moduleType in cont is MODULE_TYPE_INVALID the getSendIP and getSendPort is used as destination. Monitor function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cont</em>&nbsp;</td><td>The <a class="el" href="classPacketContainer.html">PacketContainer</a> with packet to send. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="PacketResendHandler::addAnswer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void PacketResendHandler::addAnswer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketContainer.html">PacketContainer</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cont</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add answer. 
<p>
AnswerMonitor function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cont</em>&nbsp;</td><td>The answer to add. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="PacketResendHandler::checkAndResend"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketContainer.html">PacketContainer</a>* PacketResendHandler::checkAndResend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check the timestamp on the first packetContainer in the <a class="el" href="classPriorityQueue.html">PriorityQueue</a>. 
<p>
If the timeout is due - resend the packet. If the maximum resend count is reached - remove and return the <a class="el" href="classPacketContainer.html">PacketContainer</a>. Monitor function.<p>
<dl compact><dt><b>Returns:</b></dt><dd>If first <a class="el" href="classPacketContainer.html">PacketContainer</a> has reached maximun resend count </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="PacketResendHandler::findAndRemoveIfDone"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool PacketResendHandler::findAndRemoveIfDone           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pack</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classPacketContainer.html">PacketContainer</a> *&amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>res</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Find a packet matching a packetID, requestID. 
<p>
Remove it from the list if it is found and has an answer when pack has been handled. Monitor function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pack</em>&nbsp;</td><td>The answer <a class="el" href="classPacket.html">Packet</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>res</em>&nbsp;</td><td>Is set to the requesting <a class="el" href="classPacketContainer.html">PacketContainer</a>, NULL if no matching requesting <a class="el" href="classPacketContainer.html">PacketContainer</a> or not compelete answer. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if pack was properly processed, complete or not, false if no matching <a class="el" href="classPacketContainer.html">PacketContainer</a>.</dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="PacketResendHandler::getAnswer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketContainer.html">PacketContainer</a>* PacketResendHandler::getAnswer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a received answer. 
<p>
Function will hang until there is a packet to return or notify is called. AnswerMonitor function.<p>
<dl compact><dt><b>Returns:</b></dt><dd>The requesting <a class="el" href="classPacketContainer.html">PacketContainer</a> with answer in the containers getAnswer, which can be NULL. Returns NULL if NotifyAnswer was called. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="PacketResendHandler::getAnswerNow"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketContainer.html">PacketContainer</a>* PacketResendHandler::getAnswerNow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns a received answer if there is one, NULL if no answers. 
<p>
Will not wait for answer if there is no ready answer. AnswerMonitor function.<p>
<dl compact><dt><b>Returns:</b></dt><dd>The requesting <a class="el" href="classPacketContainer.html">PacketContainer</a> with answer in the containers getAnswer, which can be NULL. Returns NULL if no answer is ready. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="PacketResendHandler::getPort"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a19">uint16</a> PacketResendHandler::getPort           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the port used to listen on returning packets on. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>The used port number. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="PacketResendHandler::notifyAnswer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void PacketResendHandler::notifyAnswer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Notifies the answer so that threads hanging on getAnswer is awakend. 
<p>
AnswerMonitor function.     </td>
  </tr>
</table>
<a class="anchor" name="d6" doxytag="PacketResendHandler::receive"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classPacket.html">Packet</a>* PacketResendHandler::receive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>maxWaitTime</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads a packet from the network. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>micros</em>&nbsp;</td><td>The max time to wait for a packet, in microseconds. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The packet that was received. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d7" doxytag="PacketResendHandler::removeFromTCP"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void PacketResendHandler::removeFromTCP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketContainer.html">PacketContainer</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cont</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Removes any packets from the tcpqueue for a <a class="el" href="classPacketContainer.html">PacketContainer</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cont</em>&nbsp;</td><td>The <a class="el" href="classPacketContainer.html">PacketContainer</a> to be removed fron the tcpqueue. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="PacketResendHandler::send"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool PacketResendHandler::send           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketContainer.html">PacketContainer</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>cont</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send the packet contained in the packetcontainer. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="PacketResendHandler::sendTCPPackets"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void PacketResendHandler::sendTCPPackets           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>pack</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends the TCP packets in the queue. 
<p>
Monitor function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pack</em>&nbsp;</td><td>The <a class="el" href="classLeaderIPReplyPacket.html">LeaderIPReplyPacket</a> to use when sending the enqueued packets. </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="PacketResendHandler::start"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void PacketResendHandler::start           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Starts the two threads. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="PacketResendHandler::upDateRequestPacket"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool PacketResendHandler::upDateRequestPacket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classPacket.html">Packet</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>pack</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classPacketContainer.html">PacketContainer</a> *&amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>res</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handles a <a class="el" href="classAcknowledgeRequestReplyPacket.html">AcknowledgeRequestReplyPacket</a>. 
<p>
Monitor function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pack</em>&nbsp;</td><td>Is the <a class="el" href="classAcknowledgeRequestReplyPacket.html">AcknowledgeRequestReplyPacket</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>res</em>&nbsp;</td><td>Set the the reqeuesting <a class="el" href="classPacketContainer.html">PacketContainer</a> if aborted. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>true if updated ok, false if request should be aborted. </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Friends And Related Function Documentation</h2>
<a class="anchor" name="n0" doxytag="PacketResendHandler::ReceiveThread"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">friend class <a class="el" href="classPacketResendHandler_1_1ReceiveThread.html">ReceiveThread</a><code> [friend]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="classPacketResendHandler_1_1ReceiveThread.html">ReceiveThread</a> is a friend. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00311">311</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="n1" doxytag="PacketResendHandler::TimeoutThread"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">friend class <a class="el" href="classPacketResendHandler_1_1TimeoutThread.html">TimeoutThread</a><code> [friend]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="classPacketResendHandler_1_1TimeoutThread.html">TimeoutThread</a> is a friend. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00315">315</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r2" doxytag="PacketResendHandler::m_answerMonitor"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classISABMonitor.html">ISABMonitor</a> <a class="el" href="classPacketResendHandler.html#r2">PacketResendHandler::m_answerMonitor</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Monitor protecting the answer queue. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00214">214</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="PacketResendHandler::m_answerTree"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">auto_ptr&lt;<a class="el" href="classPacketContainerTree.html">PacketContainerTree</a>&gt; <a class="el" href="classPacketResendHandler.html#r3">PacketResendHandler::m_answerTree</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The tree of answers. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00220">220</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="PacketResendHandler::m_contTree"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">auto_ptr&lt;<a class="el" href="classPacketContainerTree.html">PacketContainerTree</a>&gt; <a class="el" href="classPacketResendHandler.html#r1">PacketResendHandler::m_contTree</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The tree of outstanding packets. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00208">208</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="PacketResendHandler::m_monitor"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classISABMonitor.html">ISABMonitor</a> <a class="el" href="classPacketResendHandler.html#r0">PacketResendHandler::m_monitor</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Monitor protecting this class functions. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00202">202</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r8" doxytag="PacketResendHandler::m_packetSender"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">auto_ptr&lt;ServerPacketSender&gt; <a class="el" href="classPacketResendHandler.html#r8">PacketResendHandler::m_packetSender</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00318">318</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r5" doxytag="PacketResendHandler::m_receiveThread"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketResendHandler_1_1ReceiveThread.html">ReceiveThread</a>* <a class="el" href="classPacketResendHandler.html#r5">PacketResendHandler::m_receiveThread</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The thread that handles receiving. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00302">302</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="PacketResendHandler::m_running"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool <a class="el" href="classPacketResendHandler.html#r4">PacketResendHandler::m_running</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
If handler is going down. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00226">226</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r7" doxytag="PacketResendHandler::m_senderReceiver"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">auto_ptr&lt;<a class="el" href="classPacketSenderReceiver.html">PacketSenderReceiver</a>&gt; <a class="el" href="classPacketResendHandler.html#r7">PacketResendHandler::m_senderReceiver</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00317">317</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r6" doxytag="PacketResendHandler::m_timeoutThread"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classPacketResendHandler_1_1TimeoutThread.html">TimeoutThread</a>* <a class="el" href="classPacketResendHandler.html#r6">PacketResendHandler::m_timeoutThread</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The thread that handles resending. 
<p>

<p>
Definition at line <a class="el" href="PacketResendHandler_8h-source.html#l00308">308</a> of file <a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="PacketResendHandler_8h-source.html">PacketResendHandler.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:26:20 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
