<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: POIImageIdentificationTable Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>POIImageIdentificationTable Class Reference</h1>Encodes and decodes image filenames for the client.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>&gt;</code>
<p>
<a href="classPOIImageIdentificationTable-members.html">List of all members.</a><h2>Public Types</h2>
<ul>
<li>typedef <a class="el" href="classMC2String.html">MC2String</a> <a class="el" href="classPOIImageIdentificationTable.html#w0">ImageName</a>
<dl class="el"><dd class="mdescRight">image filename type  <a href="#w0"></a><br></dl><li>typedef <a class="el" href="classMC2String.html">MC2String</a> <a class="el" href="classPOIImageIdentificationTable.html#w1">CodeType</a>
<dl class="el"><dd class="mdescRight">type of the code  <a href="#w1"></a><br></dl></ul>
<h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classPOIImageIdentificationTable.html#a0">POIImageIdentificationTable</a> (const <a class="el" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> &amp;desc)
<dl class="el"><dd class="mdescRight">desc a default descriptor to fetch image names from.  <a href="#a0"></a><br></dl><li><a class="el" href="classMC2String.html">ImageName</a> <a class="el" href="classPOIImageIdentificationTable.html#a1">decode</a> (const <a class="el" href="classMC2String.html">CodeType</a> &amp;code) const 
<dl class="el"><dd class="mdescRight">Decode a image code.  <a href="#a1"></a><br></dl><li><a class="el" href="classMC2String.html">CodeType</a> <a class="el" href="classPOIImageIdentificationTable.html#a2">encode</a> (<a class="el" href="Types_8h.html#a21">uint32</a> poiType, const <a class="el" href="classMC2String.html">ImageName</a> &amp;filename) const 
<dl class="el"><dd class="mdescRight">Encode an image name to a code or to the fallback poi type image name.  <a href="#a2"></a><br></dl><li><a class="el" href="classMC2String.html">ImageName</a> <a class="el" href="classPOIImageIdentificationTable.html#a3">getFullImageName</a> (<a class="el" href="Types_8h.html#a21">uint32</a> poiType, const <a class="el" href="classMC2String.html">ImageName</a> &amp;shortImageName) const 
<dl class="el"><dd class="mdescRight">Determines full image name from a short image name.  <a href="#a3"></a><br></dl><li><a class="el" href="classMC2String.html">ImageName</a> <a class="el" href="classPOIImageIdentificationTable.html#a4">getSearchResultImageName</a> (<a class="el" href="Types_8h.html#a21">uint32</a> poiType, const <a class="el" href="classMC2String.html">ImageName</a> &amp;shortImageName) const 
<dl class="el"><dd class="mdescRight">Determines the full image name to use in search result lists.  <a href="#a4"></a><br></dl><li>bool <a class="el" href="classPOIImageIdentificationTable.html#a5">validateImageFilesOnDisc</a> (const <a class="el" href="classMC2String.html">MC2String</a> &amp;path) const 
<dl class="el"><dd class="mdescRight">Prints the missing image filenames and returns false if it finds any missing filenames.  <a href="#a5"></a><br></dl><li><a class="el" href="Types_8h.html#a21">uint32</a> <a class="el" href="classPOIImageIdentificationTable.html#a6">getCodeIndex</a> (<a class="el" href="Types_8h.html#a21">uint32</a> poiType, const <a class="el" href="classMC2String.html">ImageName</a> &amp;longImageName) const 
<dl class="el"><dd class="mdescRight">Determine a code index from poi type and longImageName.  <a href="#a6"></a><br></dl><li>void <a class="el" href="classPOIImageIdentificationTable.html#a7">getCodeTable</a> (<a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classMC2String.html">CodeType</a> &gt; &amp;codeTable) const 
<dl class="el"><dd class="mdescRight">codeTable returns a sorted vector of codes.  <a href="#a7"></a><br></dl></ul>
<h2>Private Types</h2>
<ul>
<li>typedef std::vector&lt; <a class="el" href="classPOIImageIdentificationTable_1_1TableType.html">TableType</a> &gt; <a class="el" href="classPOIImageIdentificationTable.html#y0">ImageToCodeTable</a>
<dl class="el"><dd class="mdescRight">Image filename to code table type.  <a href="#y0"></a><br></dl><li>typedef std::vector&lt; <a class="el" href="Types_8h.html#a21">uint32</a> &gt; <a class="el" href="classPOIImageIdentificationTable.html#y1">CodeToImageTable</a>
<dl class="el"><dd class="mdescRight">Code to image filename table type, index points into ImageToCodeTable.  <a href="#y1"></a><br></dl><li>typedef pair&lt; ImageToCodeTable::const_iterator,<br>
 <a class="el" href="classMC2String.html">MC2String</a> &gt; <a class="el" href="classPOIImageIdentificationTable.html#y2">IteratorOrImage</a>
<dl class="el"><dd class="mdescRight">Iterator or image value, if iterator is invalid then the string can be.  <a href="#y2"></a><br></dl></ul>
<h2>Private Member Functions</h2>
<ul>
<li><a class="el" href="classMC2String.html">MC2String</a> <a class="el" href="classPOIImageIdentificationTable.html#d0">findPrefix</a> (<a class="el" href="Types_8h.html#a21">uint32</a> poiType) const 
<li>ImageToCodeTable::const_iterator <a class="el" href="classPOIImageIdentificationTable.html#d1">findImage</a> (<a class="el" href="Types_8h.html#a21">uint32</a> poiType, const <a class="el" href="classMC2String.html">ImageName</a> &amp;shortImageName) const 
<dl class="el"><dd class="mdescRight">Finds iterator to image table type that matches the poi type and short image name.  <a href="#d1"></a><br></dl><li>ImageToCodeTable::const_iterator <a class="el" href="classPOIImageIdentificationTable.html#d2">decomposeFind</a> (<a class="el" href="Types_8h.html#a21">uint32</a> poiType, <a class="el" href="classMC2String.html">MC2String</a> &amp;inFilename) const 
<dl class="el"><dd class="mdescRight">Cut the inFilname at the last "_" point and try to find it in the table.  <a href="#d2"></a><br></dl><li>ImageToCodeTable::const_iterator <a class="el" href="classPOIImageIdentificationTable.html#d3">decomposeFindFirst</a> (<a class="el" href="Types_8h.html#a21">uint32</a> poiType, const <a class="el" href="classMC2String.html">MC2String</a> &amp;inFilename) const 
<dl class="el"><dd class="mdescRight">Cuts up the inFilename into "unique" and "_mapright_iconsubtype" pieces and tries to find one of them.  <a href="#d3"></a><br></dl></ul>
<h2>Private Attributes</h2>
<ul>
<li><a class="el" href="classPOIImageIdentificationTable.html#y0">ImageToCodeTable</a> <a class="el" href="classPOIImageIdentificationTable.html#r0">m_images</a>
<dl class="el"><dd class="mdescRight">image filename to code mapping  <a href="#r0"></a><br></dl><li><a class="el" href="classPOIImageIdentificationTable.html#y1">CodeToImageTable</a> <a class="el" href="classPOIImageIdentificationTable.html#r1">m_codes</a>
<dl class="el"><dd class="mdescRight">code to image filename mapping into m_images  <a href="#r1"></a><br></dl></ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Encodes and decodes image filenames for the client. 
<p>
It makes a compact code from a long image filename.<p>
The class needs a server tile map format descriptor at startup. This descriptor must not be destroyed during the life time of this object. This is because the table uses c-strings from the descriptor. Also note that all functions must be reentrables, this is to make them all easier to use with threads.<p>
Usage: <div class="fragment"><pre class="fragment">  <a class="code" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> desc( <a class="code" href="classSTMFDParams.html">STMFDParams</a>( LangTypes::english, <span class="keyword">false</span> ) );
  desc.setData();
  <a class="code" href="classPOIImageIdentificationTable.html">POIImageIdentificationTable</a> table( desc );
  <span class="keywordflow">if</span> ( table.validateImageFilesOnDisc( imagePath ) ) {
     <a class="code" href="classMC2String.html">MC2String</a> codeForGas = table.encode( ItemTypes::shop, <span class="stringliteral">"_gas"</span> );
     <span class="comment">// ...send code to client...</span>
  } <span class="keywordflow">else</span> {
     <span class="comment">// failed to validate images on disc</span>
  }
  <span class="comment">// ...</span>
  <span class="comment">// ... got some code from client so lets decode it...</span>
  <a class="code" href="classMC2String.html">MC2String</a> fullFilename = table.decode( code );
  <span class="comment">// .. load image and return it ...</span>
</pre></div>Note that full filename is returned when decoding the code, and NOT the original code "_gas". This was mostly done because of convenience in other parts of the code.<p>
The filename that the encode function takes must be coded with the following code: "uniquefile/_maprights_iconsubtype" The "/" works as a separator between unique filename and common filename. The "_" is a separator for maprights ( or in other words; icon subset ) and icon subtype. The "uniquefile" and "_maprights" are optional. The "uniquefile" is a unique file that encode should try to find first in the image table. If the unique file does not exist in the table the filename is cut at the "/" ( resulting in a new filename "_maprights_iconsubtype" ). The new filename is then matched against the image table again and if its not found the filename will be cut at the last "_" dash, resulting in "_maprights". Encode tries to find "_maprights" in the table, and if found the a code will be returned. If the encode will fail to find a matching code for the input filename the fallback will be the default poitype from the search tile map format descriptor. For example: <div class="fragment"><pre class="fragment"> <a class="code" href="classPOIImageIdentificationTable.html#a2">encode</a>( ItemTypes::petrolStation, <span class="stringliteral">"gardstangamacken/_gas"</span> ) 
</pre></div>Here unique filename is "gardstangamacken" and the iconsubtype is "_gas". ( Notice that there is no special mapright ( special icon subset ) here ). So first it will search for "gardstangamacken" wich does not exist; then for "_gas" which exist but the poi type does not match. So here it would fallback to server tile map format descriptor for the poi type ( petrolStation) and return a real image name instead of a code. The code would then be "tat_petrolstation".<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classMapUtility.html">MapUtility</a> <p>
<a class="el" href="classTileMapCreator.html">TileMapCreator</a> <p>
<a class="el" href="namespaceGfxFeatureMapUtility.html">GfxFeatureMapUtility</a> </dd></dl>

<p>

<p>
Definition at line <a class="el" href="POIImageIdentificationTable_8h-source.html#l00089">89</a> of file <a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>.<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="y1" doxytag="POIImageIdentificationTable::CodeToImageTable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::vector&lt;<a class="el" href="Types_8h.html#a21">uint32</a>&gt; <a class="el" href="classPOIImageIdentificationTable.html#y1">POIImageIdentificationTable::CodeToImageTable</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Code to image filename table type, index points into ImageToCodeTable. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classPOIImageIdentificationTable.html#y0">ImageToCodeTable</a> </dd></dl>

<p>
Definition at line <a class="el" href="POIImageIdentificationTable_8h-source.html#l00259">259</a> of file <a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="w1" doxytag="POIImageIdentificationTable::CodeType"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef <a class="el" href="classMC2String.html">MC2String</a> <a class="el" href="classMC2String.html">POIImageIdentificationTable::CodeType</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
type of the code 
<p>

<p>
Definition at line <a class="el" href="POIImageIdentificationTable_8h-source.html#l00092">92</a> of file <a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="w0" doxytag="POIImageIdentificationTable::ImageName"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef <a class="el" href="classMC2String.html">MC2String</a> <a class="el" href="classMC2String.html">POIImageIdentificationTable::ImageName</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
image filename type 
<p>

<p>
Definition at line <a class="el" href="POIImageIdentificationTable_8h-source.html#l00091">91</a> of file <a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="y0" doxytag="POIImageIdentificationTable::ImageToCodeTable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef std::vector&lt;<a class="el" href="classPOIImageIdentificationTable_1_1TableType.html">TableType</a>&gt; <a class="el" href="classPOIImageIdentificationTable.html#y0">POIImageIdentificationTable::ImageToCodeTable</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Image filename to code table type. 
<p>

<p>
Definition at line <a class="el" href="POIImageIdentificationTable_8h-source.html#l00254">254</a> of file <a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="y2" doxytag="POIImageIdentificationTable::IteratorOrImage"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef pair&lt;ImageToCodeTable::const_iterator, <a class="el" href="classMC2String.html">MC2String</a>&gt; <a class="el" href="classPOIImageIdentificationTable.html#y2">POIImageIdentificationTable::IteratorOrImage</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Iterator or image value, if iterator is invalid then the string can be. 
<p>

<p>
Definition at line <a class="el" href="POIImageIdentificationTable_8h-source.html#l00283">283</a> of file <a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="POIImageIdentificationTable::POIImageIdentificationTable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">POIImageIdentificationTable::POIImageIdentificationTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classServerTileMapFormatDesc.html">ServerTileMapFormatDesc</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>desc</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [explicit]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
desc a default descriptor to fetch image names from. 
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a1" doxytag="POIImageIdentificationTable::decode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMC2String.html">ImageName</a> POIImageIdentificationTable::decode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2String.html">CodeType</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>code</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Decode a image code. 
<p>
Note that this will NOT return the original encoded string but the full filename instead.<p>
<dl compact><dt><b>Returns:</b></dt><dd>The FULL image name to use for this code. If it's empty then the code did not match anything in the table. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d2" doxytag="POIImageIdentificationTable::decomposeFind"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ImageToCodeTable::const_iterator POIImageIdentificationTable::decomposeFind           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poiType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>inFilename</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Cut the inFilname at the last "_" point and try to find it in the table. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>poiType</em>&nbsp;</td><td>The poi type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>orgFilename</em>&nbsp;</td><td>original filename. eg. "_petrol_gas" without the unique filename. i.e no "gardstangamacken" </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>findCode </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>iterator to table type containing the image information. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="POIImageIdentificationTable::decomposeFindFirst"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ImageToCodeTable::const_iterator POIImageIdentificationTable::decomposeFindFirst           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poiType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>inFilename</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Cuts up the inFilename into "unique" and "_mapright_iconsubtype" pieces and tries to find one of them. 
<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classPOIImageIdentificationTable.html#d2">decomposeFind</a> </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>poiType</em>&nbsp;</td><td>the poi type of the coded image name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>inFilename</em>&nbsp;</td><td>the entire specially coded image name. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>iterator (pair.first) to the image table type. or the unique image name (pair.second). </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="POIImageIdentificationTable::encode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMC2String.html">CodeType</a> POIImageIdentificationTable::encode           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poiType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">ImageName</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>filename</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Encode an image name to a code or to the fallback poi type image name. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>poiType</em>&nbsp;</td><td>The poi type that should be associated with this image. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filename</em>&nbsp;</td><td>The image name without file ending and without poi prefix. This can be the "full" specially coded image name. For instance: "gardstangamacken/_petrol_gas" </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>code for this image name. If empty then the filename did not exist in the table and the poiType did not have an image name server tile map format descriptor. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="POIImageIdentificationTable::findImage"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ImageToCodeTable::const_iterator POIImageIdentificationTable::findImage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poiType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">ImageName</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>shortImageName</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const<code> [private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Finds iterator to image table type that matches the poi type and short image name. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>poiType</em>&nbsp;</td><td>the point of interest type for the return image </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>shortImageName</em>&nbsp;</td><td>short version of the full image name </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>iterator into image to code table. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="POIImageIdentificationTable::findPrefix"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMC2String.html">MC2String</a> POIImageIdentificationTable::findPrefix           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>poiType</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>poi image prefix for table type, from server tile map format desc. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="POIImageIdentificationTable::getCodeIndex"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a> POIImageIdentificationTable::getCodeIndex           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poiType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">ImageName</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>longImageName</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determine a code index from poi type and longImageName. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>poiType</em>&nbsp;</td><td>the real poi type of the requested image </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>longImageName</em>&nbsp;</td><td>the special coded image name from map module. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classPOIImageIdentificationTable.html#a2">encode</a> </dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>code index in code table or MAX_UINT32 if it fails to find image. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="POIImageIdentificationTable::getCodeTable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void POIImageIdentificationTable::getCodeTable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classvector.html">vector</a>&lt; <a class="el" href="classMC2String.html">CodeType</a> &gt; &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>codeTable</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
codeTable returns a sorted vector of codes. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="POIImageIdentificationTable::getFullImageName"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMC2String.html">ImageName</a> POIImageIdentificationTable::getFullImageName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poiType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">ImageName</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>shortImageName</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines full image name from a short image name. 
<p>
This is a variant of the encode function ( <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="classPOIImageIdentificationTable.html#a2">encode</a> ) Example: <div class="fragment"><pre class="fragment"> <a class="code" href="classPOIImageIdentificationTable.html#a3">getFullImageName</a>( ItemTypes::shop, <span class="stringliteral">"_gas"</span> );
</pre></div>might return "tat_petrolstation_gas".</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>poiType</em>&nbsp;</td><td>the poi type of the image name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>shortImageName</em>&nbsp;</td><td>the short version of the image name. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>full image name </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="POIImageIdentificationTable::getSearchResultImageName"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classMC2String.html">ImageName</a> POIImageIdentificationTable::getSearchResultImageName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Types_8h.html#a21">uint32</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>poiType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="classMC2String.html">ImageName</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>shortImageName</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Determines the full image name to use in search result lists. 
<p>
If we shouldn't show this special icon in search results (probably because we don't have a suitable version of the icon), this function returns the empty string.<p>
The difference between icons in the map and in the search results is typically that the icon for the search results is just square without a pointy bit.<p>
Example: <div class="fragment"><pre class="fragment"> <a class="code" href="classPOIImageIdentificationTable.html#a4">getSearchResultImageName</a>( ItemTypes::shop, <span class="stringliteral">"_astore"</span> );
</pre></div>might return "cat_tat_shop_astore".<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>poiType</em>&nbsp;</td><td>the poi type of the image name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>shortImageName</em>&nbsp;</td><td>the short version of the image name. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>search result image name or empty string. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="POIImageIdentificationTable::validateImageFilesOnDisc"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool POIImageIdentificationTable::validateImageFilesOnDisc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classMC2String.html">MC2String</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>path</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Prints the missing image filenames and returns false if it finds any missing filenames. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>path</em>&nbsp;</td><td>the path to the images. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>false if there are missing files, else true. </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r1" doxytag="POIImageIdentificationTable::m_codes"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classPOIImageIdentificationTable.html#y1">CodeToImageTable</a> <a class="el" href="classPOIImageIdentificationTable.html#r1">POIImageIdentificationTable::m_codes</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
code to image filename mapping into m_images 
<p>

<p>
Definition at line <a class="el" href="POIImageIdentificationTable_8h-source.html#l00364">364</a> of file <a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>.    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="POIImageIdentificationTable::m_images"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classPOIImageIdentificationTable.html#y0">ImageToCodeTable</a> <a class="el" href="classPOIImageIdentificationTable.html#r0">POIImageIdentificationTable::m_images</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
image filename to code mapping 
<p>

<p>
Definition at line <a class="el" href="POIImageIdentificationTable_8h-source.html#l00362">362</a> of file <a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="POIImageIdentificationTable_8h-source.html">POIImageIdentificationTable.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:26:31 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
