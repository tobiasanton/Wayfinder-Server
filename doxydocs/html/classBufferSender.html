<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: BufferSender Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>BufferSender Class Reference</h1>Sends a buffer to a specific destination with TCP in non-blocking mode.  
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="BufferSender_8h-source.html">BufferSender.h</a>&gt;</code>
<p>
Inheritance diagram for BufferSender:<p><center><img src="classBufferSender__inherit__graph.png" border="0" usemap="#BufferSender__inherit__map" alt="Inheritance graph"></center>
<map name="BufferSender__inherit__map">
<area href="classMultiPacketSender.html" shape="rect" coords="25,304,159,331" alt="">
<area href="classTimedSelectable.html" shape="rect" coords="32,155,152,181" alt="">
<area href="classSelectable.html" shape="rect" coords="51,80,133,107" alt="">
<area href="classTemplateSelectable.html" shape="rect" coords="5,5,179,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for BufferSender:<p><center><img src="classBufferSender__coll__graph.png" border="0" usemap="#BufferSender__coll__map" alt="Collaboration graph"></center>
<map name="BufferSender__coll__map">
<area href="classTimedSelectable.html" shape="rect" coords="120,173,240,200" alt="">
<area href="classSelectable.html" shape="rect" coords="51,83,133,109" alt="">
<area href="classTemplateSelectable.html" shape="rect" coords="5,5,179,32" alt="">
<area href="classTimeoutClock.html" shape="rect" coords="157,83,261,109" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classBufferSender-members.html">List of all members.</a><h2>Public Types</h2>
<ul>
<li>typedef <a class="el" href="classSimpleArray.html">SimpleArray</a>&lt; <a class="el" href="Types_8h.html#a25">byte</a> &gt; <a class="el" href="classBufferSender.html#w0">BufferType</a>
<li>enum <a class="el" href="classBufferSender.html#w6">State</a> { <br>
&nbsp;&nbsp;<a class="el" href="classBufferSender.html#w6w1">CONNECTING</a>, 
<a class="el" href="classBufferSender.html#w6w2">READY</a>, 
<a class="el" href="classBufferSender.html#w6w3">SENDING</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="classBufferSender.html#w6w4">ERROR</a>, 
<a class="el" href="classBufferSender.html#w6w5">DONE</a>
<br>
 }
<dl class="el"><dd class="mdescRight">Different states this sender can be in.  <a href="#w6">More...</a><br></dl></ul>
<h2>Public Member Functions</h2>
<ul>
<li><a class="el" href="classBufferSender.html#a0">BufferSender</a> (const <a class="el" href="classIPnPort.html">IPnPort</a> &amp;destination)  throw (SocketException)
<dl class="el"><dd class="mdescRight">Connects to destination and goes in to DONE state Can throw socket exception if connection failed.  <a href="#a0"></a><br></dl><li>virtual <a class="el" href="classBufferSender.html#a1">~BufferSender</a> ()
<li>void <a class="el" href="classBufferSender.html#a2">send</a> ()
<dl class="el"><dd class="mdescRight">Try to send a piece of the databuffer.  <a href="#a2"></a><br></dl><li>void <a class="el" href="classBufferSender.html#a3">setBuffer</a> (<a class="el" href="classSimpleArray.html">BufferType</a> &amp;buffer)
<dl class="el"><dd class="mdescRight">Sets the buffer to send, the current buffer will be discared.  <a href="#a3"></a><br></dl><li>const <a class="el" href="classIPnPort.html">IPnPort</a> &amp; <a class="el" href="classBufferSender.html#a4">getDestination</a> () const 
<dl class="el"><dd class="mdescRight">address to databuffer destination  <a href="#a4"></a><br></dl><li>void <a class="el" href="classBufferSender.html#a5">reconnect</a> ()  throw (SocketException)
<dl class="el"><dd class="mdescRight">tries to reconnect to destination  <a href="#a5"></a><br></dl><li><a class="el" href="classBufferSender.html#w6">State</a> <a class="el" href="classBufferSender.html#a6">getState</a> () const 
<dl class="el"><dd class="mdescRight">current state  <a href="#a6"></a><br></dl><li><a class="el" href="classTemplateSelectable.html#w0">selectable</a> <a class="el" href="classBufferSender.html#a7">getSelectable</a> () const 
<dl class="el"><dd class="mdescRight">selectable  <a href="#a7"></a><br></dl><li>bool <a class="el" href="classBufferSender.html#a8">wantRead</a> () const 
<dl class="el"><dd class="mdescRight">true if this selector wants to be selected with read  <a href="#a8"></a><br></dl><li>bool <a class="el" href="classBufferSender.html#a9">wantWrite</a> () const 
<dl class="el"><dd class="mdescRight">true if this selector wants to be selected with write  <a href="#a9"></a><br></dl><li>void <a class="el" href="classBufferSender.html#a10">handleIO</a> (bool readyRead, bool readyWrite)
<dl class="el"><dd class="mdescRight">called when this selector is ready to read or write  <a href="#a10"></a><br></dl><li>void <a class="el" href="classBufferSender.html#a11">handleTimeout</a> ()
<dl class="el"><dd class="mdescRight">called when this selector timed out with one of its timers  <a href="#a11"></a><br></dl></ul>
<h2>Private Attributes</h2>
<ul>
<li>std::auto_ptr&lt; Impl &gt; <a class="el" href="classBufferSender.html#r0">m_impl</a>
</ul>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Sends a buffer to a specific destination with TCP in non-blocking mode. 
<p>

<p>
Definition at line <a class="el" href="BufferSender_8h-source.html#l00029">29</a> of file <a class="el" href="BufferSender_8h-source.html">BufferSender.h</a>.<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="w0" doxytag="BufferSender::BufferType"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef <a class="el" href="classSimpleArray.html">SimpleArray</a>&lt;<a class="el" href="Types_8h.html#a25">byte</a>&gt; <a class="el" href="classSimpleArray.html">BufferSender::BufferType</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="BufferSender_8h-source.html#l00031">31</a> of file <a class="el" href="BufferSender_8h-source.html">BufferSender.h</a>.    </td>
  </tr>
</table>
<hr><h2>Member Enumeration Documentation</h2>
<a class="anchor" name="w6" doxytag="BufferSender::State"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="classBufferSender.html#w6">BufferSender::State</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Different states this sender can be in. 
<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="w6w1" doxytag="CONNECTING"></a>CONNECTING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w6w2" doxytag="READY"></a>READY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w6w3" doxytag="SENDING"></a>SENDING</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w6w4" doxytag="ERROR"></a>ERROR</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" name="w6w5" doxytag="DONE"></a>DONE</em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="BufferSender_8h-source.html#l00034">34</a> of file <a class="el" href="BufferSender_8h-source.html">BufferSender.h</a>.    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="BufferSender::BufferSender"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">BufferSender::BufferSender           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classIPnPort.html">IPnPort</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>destination</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw (<a class="el" href="classSocketException.html">SocketException</a>)<code> [explicit]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Connects to destination and goes in to DONE state Can throw socket exception if connection failed. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>destination</em>&nbsp;</td><td>the destination </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="BufferSender::~BufferSender"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual BufferSender::~<a class="el" href="classBufferSender.html">BufferSender</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a4" doxytag="BufferSender::getDestination"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const <a class="el" href="classIPnPort.html">IPnPort</a>&amp; BufferSender::getDestination           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
address to databuffer destination 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="BufferSender::getSelectable"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classTemplateSelectable.html#w0">selectable</a> BufferSender::getSelectable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
selectable 
<p>

<p>
Implements <a class="el" href="classTemplateSelectable.html#a0">TemplateSelectable&lt; int &gt;</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="BufferSender::getState"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classBufferSender.html#w6">State</a> BufferSender::getState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
current state 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="BufferSender::handleIO"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void BufferSender::handleIO           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">bool&nbsp;</td>
          <td class="mdname" nowrap> <em>readyRead</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>bool&nbsp;</td>
          <td class="mdname" nowrap> <em>readyWrite</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
called when this selector is ready to read or write 
<p>

<p>
Implements <a class="el" href="classTimedSelectable.html#a11">TimedSelectable</a>.
<p>
Reimplemented in <a class="el" href="classMultiPacketSender.html#a3">MultiPacketSender</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="BufferSender::handleTimeout"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void BufferSender::handleTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
called when this selector timed out with one of its timers 
<p>

<p>
Implements <a class="el" href="classTimedSelectable.html#a12">TimedSelectable</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="BufferSender::reconnect"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void BufferSender::reconnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throw (<a class="el" href="classSocketException.html">SocketException</a>)</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
tries to reconnect to destination 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="BufferSender::send"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void BufferSender::send           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Try to send a piece of the databuffer. 
<p>
The state will tell if the entire databuffer was sent or not     </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="BufferSender::setBuffer"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void BufferSender::setBuffer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classSimpleArray.html">BufferType</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>buffer</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the buffer to send, the current buffer will be discared. 
<p>
If the sender is in state DONE or SENDING it will go into state SENDING and start sending the buffer. Note however that if state isSENDING state, there could be some unsent data in the old buffer. So check the state before calling setBuffer <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>the buffer to send, the data will be swapped with the old buffer </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="BufferSender::wantRead"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool BufferSender::wantRead           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
true if this selector wants to be selected with read 
<p>

<p>
Implements <a class="el" href="classTimedSelectable.html#a9">TimedSelectable</a>.
<p>
Reimplemented in <a class="el" href="classMultiPacketSender.html#a5">MultiPacketSender</a>.    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="BufferSender::wantWrite"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">bool BufferSender::wantWrite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
true if this selector wants to be selected with write 
<p>

<p>
Implements <a class="el" href="classTimedSelectable.html#a10">TimedSelectable</a>.
<p>
Reimplemented in <a class="el" href="classMultiPacketSender.html#a6">MultiPacketSender</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="BufferSender::m_impl"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">std::auto_ptr&lt;Impl&gt; <a class="el" href="classBufferSender.html#r0">BufferSender::m_impl</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="BufferSender_8h-source.html#l00086">86</a> of file <a class="el" href="BufferSender_8h-source.html">BufferSender.h</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="BufferSender_8h-source.html">BufferSender.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:23:11 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
