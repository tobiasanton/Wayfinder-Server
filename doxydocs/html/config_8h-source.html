<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: config.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">Shared</a>&nbsp;/&nbsp;<a class="el" href="dir_000015.html">Utility</a>&nbsp;/&nbsp;<a class="el" href="dir_000016.html">include</a></div>
<h1>config.h</h1><a href="config_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef MC2_CONFIG_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#  define MC2_CONFIG_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#  ifdef   __sparc</span>
00018 <span class="preprocessor"></span><span class="preprocessor">#     define   WORDS_BIGENDIAN</span>
00019 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00020 <span class="preprocessor"></span>
00021 <span class="preprocessor">#  ifdef   __i386</span>
00022 <span class="preprocessor"></span><span class="preprocessor">#     define   WORDS_LITTLEENDIAN</span>
00023 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00024 <span class="preprocessor"></span>
00025 <span class="preprocessor">#  ifdef _MSC_VER</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#     include  "<a class="code" href="WinConfig_8h.html">WinConfig.h</a>"</span>
00027 <span class="preprocessor">#  endif</span>
00028 <span class="preprocessor"></span>
00029 <span class="preprocessor">#  ifdef __GNUC__</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#    ifdef _WIN32 </span>
00031 <span class="preprocessor"></span><span class="preprocessor">#       include  "<a class="code" href="GnuWinConfig_8h.html">GnuWinConfig.h</a>"</span>
00032 <span class="preprocessor">#    endif</span>
00033 <span class="preprocessor"></span>
00034 <span class="preprocessor">#    ifdef   __linux</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#       include  "<a class="code" href="LinuxConfig_8h.html">LinuxConfig.h</a>"</span>
00036 <span class="preprocessor">#    endif</span>
00037 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00038 <span class="preprocessor"></span>
00039 <span class="preprocessor">#  ifdef   __SVR4</span>
00040 <span class="preprocessor"></span><span class="preprocessor">#     include  "<a class="code" href="SolarisConfig_8h.html">SolarisConfig.h</a>"</span>
00041 <span class="preprocessor">#  endif</span>
00042 <span class="preprocessor"></span>
00043 <span class="preprocessor">#  if defined(__unix__) || defined(__MACH__)</span>
00044 <span class="preprocessor"></span><span class="comment">// To avoid problems with MAX,MIN</span>
00045 <span class="preprocessor">#     include  &lt;sys/param.h&gt;</span>
00046 
00047 <span class="comment">// Hope that we have inttypes.h</span>
00048 <span class="comment">// Get the format macros from inttypes.</span>
00049 <span class="preprocessor">#     define __STDC_FORMAT_MACROS</span>
00050 <span class="preprocessor"></span><span class="preprocessor">#     include  &lt;inttypes.h&gt;</span>
00051 <span class="preprocessor">#  endif</span>
00052 <span class="preprocessor"></span>
00053 
00054 
00055 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00056 
00057 
00058 
00059 <span class="comment">// It MC2_UTF8 is defined, utf8 is used in mc2</span>
<a name="l00060"></a><a class="code" href="config_8h.html#a0">00060</a> <span class="preprocessor">#define MC2_UTF8</span>
00061 <span class="preprocessor"></span>
00062 
00063 <span class="comment">// Set default stl allocator to use malloc</span>
00064 <span class="comment">//#define __USE_MALLOC</span>
00065 
00066 <span class="comment">// </span>
00067 <span class="comment">// This is an _U_G_L_Y_ way of crashing programs on</span>
00068 <span class="comment">// errors. Any usage of this macro should be avoided</span>
00069 <span class="comment">// and soon replaced with cleaner error-handling.</span>
00070 <span class="comment">// Only for debugging!</span>
00071 <span class="comment">//--------------------------------------------------------------</span>
00072 <span class="preprocessor">#ifndef _MSC_VER</span>
<a name="l00073"></a><a class="code" href="config_8h.html#a1">00073</a> <span class="preprocessor"></span><span class="preprocessor">#  define   PANIC(A,B)  { mc2log &lt;&lt; fatal &lt;&lt; A &lt;&lt; B &lt;&lt; endl; perror("PANIC! Last system error: "); *(char*)(NULL) = 1; exit(1); }</span>
00074 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00075 <span class="preprocessor"></span><span class="preprocessor">#  define   PANIC(A,B)  { mc2log &lt;&lt; fatal &lt;&lt; A &lt;&lt; B &lt;&lt; endl; }</span>
00076 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00077 <span class="preprocessor"></span><span class="comment">//--------------------------------------------------------------</span>
00078 
00079 <span class="comment">// </span>
00080 <span class="comment">// Print the last system error on standard error</span>
00081 <span class="comment">// -------------------------------------------------------------</span>
00082 <span class="preprocessor">#ifndef _MSC_VER</span>
<a name="l00083"></a><a class="code" href="config_8h.html#a2">00083</a> <span class="preprocessor"></span><span class="preprocessor">#  define   PERROR perror("Last system error")</span>
00084 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00085 <span class="preprocessor"></span><span class="preprocessor">#  define   PERROR  { ; }</span>
00086 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00087 <span class="preprocessor"></span><span class="comment">// -------------------------------------------------------------</span>
00088 
00089 
00090 
00091 
00092 <span class="comment">//</span>
00093 <span class="comment">// Used by ModuleList.h</span>
00094 <span class="comment">//</span>
00095 <span class="comment">// Maximum time (in ms) between statistics packets from module to </span>
00096 <span class="comment">// leader.</span>
00097 <span class="comment">// The module is assumed to be dead after this time.</span>
00098 <span class="comment">//--------------------------------------------------------------</span>
<a name="l00099"></a><a class="code" href="config_8h.html#a3">00099</a> <span class="preprocessor">#  define   MAX_TIME_NO_STATISTICS 3000</span>
00100 <span class="preprocessor"></span><span class="comment">//--------------------------------------------------------------</span>
00101 <span class="comment">//</span>
00102 
00103 
00104 
00105 <span class="comment">// </span>
00106 <span class="comment">//</span>
00107 <span class="comment">//--------------------------------------------------------------</span>
00108 <span class="comment">// The DEBUG_VERBOSE() macro is deprecated and should</span>
00109 <span class="comment">// not be used! Replace with the different DEGUG</span>
00110 <span class="comment">// levels below!</span>
00111 <span class="comment">//--------------------------------------------------------------</span>
<a name="l00112"></a><a class="code" href="config_8h.html#a4">00112</a> <span class="preprocessor">#  define   DEBUG_VERBOSE(a)</span>
00113 <span class="preprocessor"></span><span class="comment">//--------------------------------------------------------------</span>
00114 <span class="comment">//</span>
00115 <span class="comment">//</span>
00116 
00117 <span class="preprocessor">#  ifdef DEBUG_LEVEL_8</span>
00118 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG8(a)   a</span>
00119 <span class="preprocessor"></span><span class="preprocessor">#  elif DEBUG_LEVEL_8_NUM</span>
00120 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG8(a)   cerr &lt;&lt; __FILE__ &lt;&lt; ":" &lt;&lt; __LINE__ &lt;&lt; ":\t" ; a</span>
00121 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
<a name="l00122"></a><a class="code" href="config_8h.html#a5">00122</a> <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG8(a)</span>
00123 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00124 <span class="preprocessor"></span>
00125 <span class="preprocessor">#  ifdef DEBUG_LEVEL_4</span>
00126 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG4(a)    a</span>
00127 <span class="preprocessor"></span><span class="preprocessor">#  elif DEBUG_LEVEL_4_NUM</span>
00128 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG4(a)   cerr &lt;&lt; __FILE__ &lt;&lt; ":" &lt;&lt; __LINE__ &lt;&lt; ":\t" ; a</span>
00129 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
<a name="l00130"></a><a class="code" href="config_8h.html#a6">00130</a> <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG4(a)</span>
00131 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00132 <span class="preprocessor"></span>
00133 <span class="preprocessor">#  ifdef DEBUG_LEVEL_2</span>
00134 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG2(a)   a</span>
00135 <span class="preprocessor"></span><span class="preprocessor">#  elif DEBUG_LEVEL_2_NUM</span>
00136 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG2(a)   cerr &lt;&lt; __FILE__ &lt;&lt; ":" &lt;&lt; __LINE__ &lt;&lt; ":\t" ; a</span>
00137 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
<a name="l00138"></a><a class="code" href="config_8h.html#a7">00138</a> <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG2(a)</span>
00139 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00140 <span class="preprocessor"></span>
00141 <span class="preprocessor">#  ifdef DEBUG_LEVEL_1</span>
00142 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG1(a)   a</span>
00143 <span class="preprocessor"></span><span class="preprocessor">#  elif DEBUG_LEVEL_1_NUM</span>
00144 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG1(a)   cerr &lt;&lt; __FILE__ &lt;&lt; ":" &lt;&lt; __LINE__ &lt;&lt; ":\t" ; a</span>
00145 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
<a name="l00146"></a><a class="code" href="config_8h.html#a8">00146</a> <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG1(a)</span>
00147 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00148 <span class="preprocessor"></span>
00149 <span class="comment">// This is for debugging the database</span>
00150 <span class="preprocessor">#  ifdef DEBUG_LEVEL_DB</span>
00151 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG_DB(a)   cerr &lt;&lt; __FILE__ &lt;&lt; ":" &lt;&lt; __LINE__ &lt;&lt; ":\t" ; a</span>
00152 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
<a name="l00153"></a><a class="code" href="config_8h.html#a9">00153</a> <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG_DB(a)</span>
00154 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00155 <span class="preprocessor"></span>
00156 <span class="comment">// This is for debugging the destructors</span>
00157 <span class="preprocessor">#  ifdef DEBUG_LEVEL_DEL</span>
00158 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG_DEL(a)   cerr &lt;&lt; __FILE__ &lt;&lt; ":" &lt;&lt; __LINE__ &lt;&lt; ":\t" ; a</span>
00159 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
<a name="l00160"></a><a class="code" href="config_8h.html#a10">00160</a> <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG_DEL(a)</span>
00161 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00162 <span class="preprocessor"></span>
00163 <span class="comment">// This is for debugging the GDF extraction</span>
00164 <span class="preprocessor">#  ifdef DEBUG_LEVEL_GDF</span>
00165 <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG_GDF(a)   a</span>
00166 <span class="preprocessor"></span><span class="preprocessor">#  else</span>
<a name="l00167"></a><a class="code" href="config_8h.html#a11">00167</a> <span class="preprocessor"></span><span class="preprocessor">#     define   DEBUG_GDF(a)</span>
00168 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
00169 <span class="preprocessor"></span>
00175 <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="config_8h.html#a37">almostAssert</a>(<span class="keywordtype">bool</span> testResult);
00176 <span class="comment">// implementation</span>
<a name="l00177"></a><a class="code" href="config_8h.html#a37">00177</a> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="config_8h.html#a37">almostAssert</a>(<span class="keywordtype">bool</span> testResult) {
00178    <span class="keywordtype">int</span> kalle = 3;
00179 <span class="preprocessor">#if defined(_DEBUG) || defined(DEBUG_LEVEL_2)</span>
00180 <span class="preprocessor"></span>   <span class="keywordflow">if</span> (!testResult) {
00181 <span class="preprocessor">#     ifndef _MSC_VER</span>
00182 <span class="preprocessor"></span><span class="comment">//      MC2_ASSERT(false);</span>
00183 <span class="preprocessor">#     else</span>
00184 <span class="preprocessor"></span><span class="comment">//      TRACE(_T("almostAssertion failed!"));</span>
00185 <span class="preprocessor">#     endif</span>
00186 <span class="preprocessor"></span>      <span class="comment">// place breakpoint here!</span>
00187       kalle++;
00188    }
00189 <span class="preprocessor">#endif</span>
00190 <span class="preprocessor"></span>   <span class="keywordflow">return</span> kalle;
00191 }
00192 
00193 <span class="comment">// Error prints date time message to stderr, but doesn't exit</span>
00194 <span class="preprocessor">#ifndef _MSC_VER</span>
00195 <span class="preprocessor"></span>
00196 <span class="comment">// @param infoType The string to begin the message with,</span>
00197 <span class="comment">//                 e.g., ERROR, WARNING, INFO.</span>
<a name="l00198"></a><a class="code" href="config_8h.html#a12">00198</a> <span class="preprocessor">#define MC2DEBUGPRINT( infoType, str ) { \</span>
00199 <span class="preprocessor">   char mc2debugprint_buff[1024]; \</span>
00200 <span class="preprocessor">   int mc2debugprint_pos = 0; \</span>
00201 <span class="preprocessor">   time_t mc2debugprint_t; \</span>
00202 <span class="preprocessor">   struct tm *mc2debugprint_tm; \</span>
00203 <span class="preprocessor">\</span>
00204 <span class="preprocessor">   ::time(&amp;mc2debugprint_t); \</span>
00205 <span class="preprocessor">   struct tm mc2debugprint_result; \</span>
00206 <span class="preprocessor">   mc2debugprint_tm = localtime_r( &amp;mc2debugprint_t, &amp;mc2debugprint_result ); \</span>
00207 <span class="preprocessor">\</span>
00208 <span class="preprocessor">   mc2debugprint_pos += sprintf( \</span>
00209 <span class="preprocessor">      mc2debugprint_buff + mc2debugprint_pos, \</span>
00210 <span class="preprocessor">      "%04d-%02d-%02d %02d:%02d:%02d %s: ", \</span>
00211 <span class="preprocessor">      mc2debugprint_tm-&gt;tm_year + 1900, mc2debugprint_tm-&gt;tm_mon + 1, \</span>
00212 <span class="preprocessor">      mc2debugprint_tm-&gt;tm_mday, \</span>
00213 <span class="preprocessor">      mc2debugprint_tm-&gt;tm_hour, mc2debugprint_tm-&gt;tm_min, \</span>
00214 <span class="preprocessor">      mc2debugprint_tm-&gt;tm_sec, infoType ); \</span>
00215 <span class="preprocessor">   </span><span class="comment">/* 1024 - 34 = 991 !!!includes length of string!!! */</span> \
00216    strncpy( mc2debugprint_buff + mc2debugprint_pos, str, 991 ); \
00217    mc2debugprint_buff[1023] = '\0'; \
00218    cerr &lt;&lt; mc2debugprint_buff+2 &lt;&lt; endl; \
00219 }
00220 
<a name="l00221"></a><a class="code" href="config_8h.html#a13">00221</a> <span class="preprocessor">#define MC2ERROR( str )   MC2DEBUGPRINT( "ERROR", str )</span>
<a name="l00222"></a><a class="code" href="config_8h.html#a14">00222</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2WARNING( str ) MC2DEBUGPRINT( "WARN ", str )</span>
<a name="l00223"></a><a class="code" href="config_8h.html#a15">00223</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2INFO( str )    MC2DEBUGPRINT( "INFO ", str )</span>
<a name="l00224"></a><a class="code" href="config_8h.html#a16">00224</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2ERROR2( str, A )   { MC2ERROR(   str ) A }</span>
<a name="l00225"></a><a class="code" href="config_8h.html#a17">00225</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2WARNING2( str, A ) { MC2WARNING( str ) A }</span>
<a name="l00226"></a><a class="code" href="config_8h.html#a18">00226</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2INFO2( str, A )    { MC2INFO(    str ) A }</span>
<a name="l00227"></a><a class="code" href="config_8h.html#a19">00227</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2ERROR_STMT( A ) A</span>
<a name="l00228"></a><a class="code" href="config_8h.html#a20">00228</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2WARNING_STMT( A ) A</span>
<a name="l00229"></a><a class="code" href="config_8h.html#a21">00229</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2INFO_STMT( A ) A</span>
00230 <span class="preprocessor"></span>
00231 <span class="preprocessor">#else // if _MSC_VER is defined to something.</span>
00232 <span class="preprocessor"></span>
00233 <span class="preprocessor">#define MC2ERROR( str )       almostAssert(false);</span>
00234 <span class="preprocessor"></span><span class="preprocessor">#define MC2WARNING( str )     almostAssert(false);</span>
00235 <span class="preprocessor"></span><span class="preprocessor">#define MC2ERROR2( str, A )   almostAssert(false);</span>
00236 <span class="preprocessor"></span><span class="preprocessor">#define MC2WARNING2( str, A ) almostAssert(false);</span>
00237 <span class="preprocessor"></span><span class="preprocessor">#define MC2INFO( str )</span>
00238 <span class="preprocessor"></span><span class="preprocessor">#define MC2INFO2( str, A )</span>
00239 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00240 <span class="preprocessor"></span>
00241 <span class="comment">// Defines to help the compiler optimizing branches.</span>
00242 <span class="comment">// Example where size usually is != 0 </span>
00243 <span class="comment">// if ( MC2_LIKELY( size() != 0 ) ) {</span>
00244 <span class="comment">//   // Do stuff</span>
00245 <span class="comment">// }</span>
00246 <span class="preprocessor">#if defined (__GNUC__) </span>
00247 <span class="preprocessor"></span><span class="preprocessor">#   define MC2_LIKELY(expression) (__builtin_expect(!!(expression), 1))</span>
00248 <span class="preprocessor"></span><span class="preprocessor">#   define MC2_UNLIKELY(expression) (__builtin_expect(!!(expression), 0))</span>
00249 <span class="preprocessor"></span><span class="preprocessor">#   define ATTRIB_NOTHROW   __attribute__((nothrow))</span>
00250 <span class="preprocessor"></span><span class="preprocessor">#   define ATTRIB_PURE      __attribute__((pure))</span>
00251 <span class="preprocessor"></span><span class="preprocessor">#   define ATTRIB_CONST     __attribute__((const))</span>
00252 <span class="preprocessor"></span><span class="preprocessor">#   if (__GNUC__) &gt; 2 </span>
00253 <span class="preprocessor"></span><span class="preprocessor">#     define ATTRIB_NORETURN  __attribute__((noreturn))</span>
00254 <span class="preprocessor"></span><span class="preprocessor">#   else</span>
00255 <span class="preprocessor"></span>      <span class="comment">//  Doesn't seem to work on older gccs.</span>
00256 <span class="preprocessor">#     define ATTRIB_NORETURN</span>
00257 <span class="preprocessor"></span><span class="preprocessor">#   endif</span>
00258 <span class="preprocessor"></span><span class="preprocessor">#else</span>
<a name="l00259"></a><a class="code" href="config_8h.html#a22">00259</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2_LIKELY(expression) (expression)</span>
<a name="l00260"></a><a class="code" href="config_8h.html#a23">00260</a> <span class="preprocessor"></span><span class="preprocessor">#define MC2_UNLIKELY(expression) (expression)</span>
<a name="l00261"></a><a class="code" href="config_8h.html#a24">00261</a> <span class="preprocessor"></span><span class="preprocessor">#define ATTRIB_NOTHROW</span>
<a name="l00262"></a><a class="code" href="config_8h.html#a25">00262</a> <span class="preprocessor"></span><span class="preprocessor">#define ATTRIB_PURE</span>
<a name="l00263"></a><a class="code" href="config_8h.html#a26">00263</a> <span class="preprocessor"></span><span class="preprocessor">#define ATTRIB_CONST</span>
<a name="l00264"></a><a class="code" href="config_8h.html#a27">00264</a> <span class="preprocessor"></span><span class="preprocessor">#define ATTRIB_NORETURN</span>
00265 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00266 <span class="preprocessor"></span>
00267 
00268 <span class="comment">//----------------------------------------------------------</span>
00269 <span class="comment">//</span>
00270 <span class="comment">// Assert-macro to be used in the mc2-source.</span>
00271 <span class="comment">// </span>
00272 <span class="comment">//----------------------------------------------------------</span>
00273 <span class="preprocessor">#ifdef NDEBUG</span>
00274 <span class="preprocessor"></span><span class="preprocessor">   #define MC2_ASSERT(f) do { if ( false &amp;&amp; (f) ) {} } while (0)</span>
00275 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00276 <span class="preprocessor"></span>
00277 <span class="preprocessor">   #ifdef _MSC_VER</span>
00278 <span class="preprocessor"></span><span class="preprocessor">      #ifdef ASSERT</span>
00279 <span class="preprocessor"></span><span class="preprocessor">         #define MC2_ASSERT(f) ASSERT(f)</span>
00280 <span class="preprocessor"></span><span class="preprocessor">      #else</span>
00281 <span class="preprocessor"></span><span class="preprocessor">         #define MC2_ASSERT(f) { almostAssert(f); strlen(NULL); }</span>
00282 <span class="preprocessor"></span><span class="preprocessor">      #endif</span>
00283 <span class="preprocessor"></span><span class="preprocessor">   #else</span>
00284 <span class="preprocessor"></span>
00293       <span class="keywordtype">void</span> <a class="code" href="config_8h.html#a38">handleAssert</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* l, <span class="keywordtype">int</span> n, <span class="keyword">const</span> <span class="keywordtype">char</span>* e) ATTRIB_NORETURN;
00294 
<a name="l00295"></a><a class="code" href="config_8h.html#a28">00295</a> <span class="preprocessor">      #define MC2_ASSERT_STRINGIFY(x) #x</span>
<a name="l00296"></a><a class="code" href="config_8h.html#a29">00296</a> <span class="preprocessor"></span><span class="preprocessor">      #define MC2_ASSERT(f)                     \</span>
00297 <span class="preprocessor">         if ( MC2_LIKELY(f) ) { ;                             \</span>
00298 <span class="preprocessor">         } else                                 \</span>
00299 <span class="preprocessor">            handleAssert(__FILE__, __LINE__, MC2_ASSERT_STRINGIFY(f) )</span>
00300 <span class="preprocessor"></span><span class="preprocessor">   #endif</span>
00301 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00302 <span class="preprocessor"></span>
00303 
00304 
00305 <span class="comment">//</span>
00306 <span class="comment">//</span>
00307 <span class="comment">//----------------------------------------------------------</span>
00308 <span class="comment">// NEW NAMES THAT DO NOT CONFLICT </span>
00309 <span class="comment">// WITH STANDARD TYPES IN VC STUDIO.</span>
00310 <span class="comment">//</span>
00311 <span class="comment">// Replace the TRACE macros with the debug options above!</span>
00312 <span class="comment">//----------------------------------------------------------</span>
00313 <span class="preprocessor">#ifndef _MSC_VER</span>
<a name="l00314"></a><a class="code" href="config_8h.html#a30">00314</a> <span class="preprocessor"></span><span class="preprocessor">   #define TRACE  printf</span>
00315 <span class="preprocessor"></span><span class="comment">//#define TRACE if (false) printf</span>
00316 <span class="preprocessor">#endif</span>
00317 <span class="preprocessor"></span>
<a name="l00318"></a><a class="code" href="config_8h.html#a31">00318</a> <span class="preprocessor">#  define   TRACE_2(a)</span>
<a name="l00319"></a><a class="code" href="config_8h.html#a32">00319</a> <span class="preprocessor"></span><span class="preprocessor">#  define   TRACE_4(a)</span>
<a name="l00320"></a><a class="code" href="config_8h.html#a33">00320</a> <span class="preprocessor"></span><span class="preprocessor">#  define   TRACE_8(a)</span>
00321 <span class="preprocessor"></span><span class="comment">//----------------------------------------------------------</span>
00322 <span class="comment">//</span>
00323 <span class="comment">//</span>
00324 
00325 
00326 <span class="comment">//__________________________________________________________</span>
00327 
00328 <span class="preprocessor">#ifdef _MSC_VER</span>
00329 <span class="preprocessor"></span>      <span class="comment">// STL include file</span>
00330 <span class="preprocessor">#  include &lt;yvals.h&gt;</span>              <span class="comment">// warning numbers get enabled in yvals.h </span>
00331 
00332 <span class="preprocessor">#  pragma warning(disable: 4786)  // identifier was truncated to 'number' characters in </span>
00333 <span class="preprocessor"></span>                                  <span class="comment">// the debug information</span>
00334 <span class="preprocessor">#endif</span>
00335 <span class="preprocessor"></span>
00336 
00337 <span class="preprocessor">#  include "<a class="code" href="Types_8h.html">Types.h</a>"</span>
00338 
00339 <span class="preprocessor">#include "<a class="code" href="MC2Logging_8h.html">MC2Logging.h</a>"</span>
00340 
00341 <span class="preprocessor">#ifndef _MSC_VER</span>
00342 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;errno.h&gt;</span>
00343 <span class="preprocessor">#  include &lt;time.h&gt;</span>
00344 <span class="preprocessor">#  include &lt;string.h&gt;</span>
00345 <span class="preprocessor">#  if defined (__CYGWIN32__)</span>
00346 <span class="preprocessor"></span><span class="preprocessor">#     undef __declspec</span>
00347 <span class="preprocessor"></span><span class="preprocessor">#  endif</span>
<a name="l00348"></a><a class="code" href="config_8h.html#a34">00348</a> <span class="preprocessor"></span><span class="preprocessor">#  define __declspec(a)</span>
00349 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00350 <span class="preprocessor"></span>
<a name="l00352"></a><a class="code" href="config_8h.html#a35">00352</a> <span class="preprocessor">#define NBR_ITEMS(x) ( sizeof(x)/sizeof(x[0]) )</span>
00353 <span class="preprocessor"></span>
<a name="l00354"></a><a class="code" href="config_8h.html#a36">00354</a> <span class="preprocessor">#define CHECK_ARRAY_SIZE( x, y ) if ( true ) ; else { \</span>
00355 <span class="preprocessor">               uint32 check_array[\</span>
00356 <span class="preprocessor">               ( (y) == NBR_ITEMS( x ) ) ? 1 : -1 ] = { 0 };\</span>
00357 <span class="preprocessor">               check_array[0] = 8;\</span>
00358 <span class="preprocessor">               }</span>
00359 <span class="preprocessor"></span>
00360 
00361 <span class="preprocessor">#endif //   MC2_CONFIG_H</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:45 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
