<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mc2: LocalMapMessageRequest.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.9.1 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000002.html">Server</a>&nbsp;/&nbsp;<a class="el" href="dir_000003.html">Servers</a>&nbsp;/&nbsp;<a class="el" href="dir_000004.html">include</a></div>
<h1>LocalMapMessageRequest.h</h1><a href="LocalMapMessageRequest_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment">00001 <span class="comment">/*</span>
00002 <span class="comment">Copyright (c) 1999 - 2010, Vodafone Group Services Ltd</span>
00003 <span class="comment">All rights reserved.</span>
00004 <span class="comment"></span>
00005 <span class="comment">Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</span>
00006 <span class="comment"></span>
00007 <span class="comment">    * Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</span>
00008 <span class="comment">    * Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</span>
00009 <span class="comment">    * Neither the name of the Vodafone Group Services Ltd nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</span>
00010 <span class="comment"></span>
00011 <span class="comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span>
00012 <span class="comment">*/</span>
00013 
00014 <span class="preprocessor">#ifndef LOCALMAPMESSAGEREQUEST_H</span>
00015 <span class="preprocessor"></span><span class="preprocessor">#define LOCALMAPMESSAGEREQUEST_H</span>
00016 <span class="preprocessor"></span>
00017 <span class="preprocessor">#include "<a class="code" href="config_8h.html">config.h</a>"</span>
00018 <span class="preprocessor">#include "<a class="code" href="StringTable_8h.html">StringTable.h</a>"</span>
00019 <span class="preprocessor">#include "<a class="code" href="Request_8h.html">Request.h</a>"</span>
00020 <span class="preprocessor">#include "<a class="code" href="PacketContainer_8h.html">PacketContainer.h</a>"</span>
00021 <span class="preprocessor">#include "<a class="code" href="MimeMessage_8h.html">MimeMessage.h</a>"</span>
00022 <span class="preprocessor">#include "<a class="code" href="ImageDrawConfig_8h.html">ImageDrawConfig.h</a>"</span>
00023 <span class="preprocessor">#include "<a class="code" href="MC2String_8h.html">MC2String.h</a>"</span>
00024 <span class="preprocessor">#include "<a class="code" href="RouteMessageRequestType_8h.html">RouteMessageRequestType.h</a>"</span>
00025 <span class="preprocessor">#include "<a class="code" href="MapSettingsTypes_8h.html">MapSettingsTypes.h</a>"</span>
00026 <span class="preprocessor">#include "<a class="code" href="NotCopyable_8h.html">NotCopyable.h</a>"</span>
00027 
00028 <span class="keyword">class </span><a class="code" href="classTopRegionRequest.html">TopRegionRequest</a>;
00029 <span class="keyword">class </span><a class="code" href="classMapSettings.html">MapSettings</a>;
00030 <span class="keyword">class </span><a class="code" href="classGfxFeatureMap.html">GfxFeatureMap</a>;
00031 <span class="keyword">class </span><a class="code" href="classGfxFeatureMapImageRequest.html">GfxFeatureMapImageRequest</a>;
00032 <span class="keyword">class </span><a class="code" href="classUserItem.html">UserItem</a>;
00033 <span class="keyword">class </span><a class="code" href="classClientSetting.html">ClientSetting</a>;
00034 
<a name="l00040"></a><a class="code" href="classLocalMapMessageRequest.html">00040</a> <span class="keyword">class </span><a class="code" href="classLocalMapMessageRequest.html">LocalMapMessageRequest</a> : <span class="keyword">public</span> <a class="code" href="classRequest.html">Request</a>, <span class="keyword">private</span> <a class="code" href="classNotCopyable.html">NotCopyable</a> {
00041    <span class="keyword">public</span>:
00097       <a class="code" href="classLocalMapMessageRequest.html#a0">LocalMapMessageRequest</a>( 
00098          <span class="keyword">const</span> <a class="code" href="classRequestData.html">RequestData</a>&amp; data,
00099          <a class="code" href="Types_8h.html#a22">int32</a> northLat, <a class="code" href="Types_8h.html#a22">int32</a> westLon,
00100          <a class="code" href="Types_8h.html#a22">int32</a> southLat, <a class="code" href="Types_8h.html#a22">int32</a> eastLon,
00101          StringTable::languageCode lang,
00102          <a class="code" href="Types_8h.html#a19">uint16</a> localMapWidth,
00103          <a class="code" href="Types_8h.html#a19">uint16</a> localMapHeight,
00104          <span class="keyword">const</span> <span class="keywordtype">char</span>* localMapString,
00105          <span class="keyword">const</span> <a class="code" href="classTopRegionRequest.html">TopRegionRequest</a>* topReq,
00106          <span class="keyword">const</span> <a class="code" href="classClientSetting.html">ClientSetting</a>* clientSetting,
00107          <a class="code" href="classGfxFeatureMap.html">GfxFeatureMap</a>* markItems = NULL,
00108          <span class="keywordtype">bool</span> makeImages = <span class="keyword">true</span>,
00109          <span class="keywordtype">bool</span> makeLink = <span class="keyword">false</span>,
00110          <span class="keywordtype">bool</span> realMapURLs = <span class="keyword">true</span>,
00111          RouteMessageRequestType::MessageContent contentType = 
00112          RouteMessageRequestType::HTML_CONTENT,
00113          <a class="code" href="Types_8h.html#a21">uint32</a> maxMessageSize = <a class="code" href="Types_8h.html#a4">MAX_UINT32</a>,
00114          <span class="keywordtype">bool</span> sendEmail = <span class="keyword">false</span>,
00115          <span class="keyword">const</span> <span class="keywordtype">char</span>* toMailAddr = NULL,
00116          <span class="keyword">const</span> <span class="keywordtype">char</span>* fromMailAddr = NULL,
00117          <span class="keyword">const</span> <span class="keywordtype">char</span>* subject = NULL,
00118          <span class="keyword">const</span> <span class="keywordtype">char</span>* signature = NULL,
00119          ImageDrawConfig::imageFormat defaultFormat = ImageDrawConfig::PNG,
00120          <span class="keyword">const</span> <a class="code" href="classMC2String.html">MC2String</a>&amp; copyright = <span class="stringliteral">""</span>,
00121          <span class="keyword">const</span> <a class="code" href="classUserItem.html">UserItem</a>* user = NULL,
00122          <span class="keywordtype">bool</span> contentLocation = <span class="keyword">false</span>,
00123          MapSettingsTypes::defaultMapSetting mapSetting = 
00124          MapSettingsTypes::MAP_SETTING_STD,
00125          <span class="keyword">struct</span> <a class="code" href="structMapSettingsTypes_1_1ImageSettings.html">MapSettingsTypes::ImageSettings</a>* 
00126          imageSettings = NULL,
00127          <span class="keyword">const</span> <span class="keywordtype">char</span>* messageFmt = NULL,
00128          <span class="keyword">const</span> <span class="keywordtype">char</span>* messageStartTextFmt = NULL,
00129          <span class="keyword">const</span> <span class="keywordtype">char</span>* messageEndTextFmt = NULL,
00130          <a class="code" href="Types_8h.html#a21">uint32</a> nbrMessageResources = <a class="code" href="Types_8h.html#a4">MAX_UINT32</a>,
00131          <span class="keywordtype">char</span>** messageResourcesURI = NULL,
00132          <a class="code" href="Types_8h.html#a21">uint32</a>* messageResourcesBuffLength = NULL,
00133          <a class="code" href="Types_8h.html#a25">byte</a>** messageResourcesBuff = NULL );
00134 
00135 
00139       <span class="keyword">virtual</span> <a class="code" href="classLocalMapMessageRequest.html#a1">~LocalMapMessageRequest</a>();
00140 
00141       
00146       <span class="keyword">virtual</span> <a class="code" href="classPacketContainer.html">PacketContainer</a>* <a class="code" href="classLocalMapMessageRequest.html#a2">getNextPacket</a>();
00147 
00148        
00153       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classLocalMapMessageRequest.html#a3">processPacket</a>( <a class="code" href="classPacketContainer.html">PacketContainer</a>* ansCont );
00154        
00155        
00160       <span class="keyword">virtual</span> <a class="code" href="classPacketContainer.html">PacketContainer</a>* <a class="code" href="classLocalMapMessageRequest.html#a4">getAnswer</a>();
00161       
00162       
00166       <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classMimeMessage.html">MimeMessage</a>* <a class="code" href="classLocalMapMessageRequest.html#a5">getMimeMessage</a>() <span class="keyword">const</span>;
00167 
00168       
00169    <span class="keyword">private</span>:
<a name="l00173"></a><a class="code" href="classLocalMapMessageRequest.html#y5">00173</a>       <span class="keyword">enum</span> <a class="code" href="classLocalMapMessageRequest.html#y5">state</a> {
00174          INITIAL,
00175          IMAGE_REQUESTS,
00176          EMAIL_REQUEST,
00177          DONE,
00178          <a class="code" href="classLocalMapMessageRequest.html#y5y4">ERROR</a>
00179       } m_state;
00180 
00181 
00191       <span class="keywordtype">void</span> <a class="code" href="classLocalMapMessageRequest.html#d0">getDefaultMessage</a>( <span class="keywordtype">char</span>*&amp; messageFmt,
00192                               <span class="keywordtype">char</span>*&amp; messageStartTextFmt,
00193                               <span class="keywordtype">char</span>*&amp; messageEndTextFmt,
00194                               uint32&amp; nbrMessageResources,
00195                               <span class="keywordtype">char</span>**&amp; messageResourcesURI,
00196                               uint32*&amp; messageResourcesBuffLength,
00197                               byte**&amp; messageResourcesBuff );
00198 
00199 
00237       state <a class="code" href="classLocalMapMessageRequest.html#d1">makeInitialSetup</a>( int32 northLat, int32 westLon,
00238                               int32 southLat, int32 eastLon,
00239                               StringTable::languageCode lang,
00240                               uint16 localMapWidth,
00241                               uint16 localMapHeight,
00242                               <span class="keyword">const</span> <span class="keywordtype">char</span>* localMapString,
00243                               <a class="code" href="classGfxFeatureMap.html">GfxFeatureMap</a>* markItems,
00244                               <span class="keywordtype">bool</span> makeImages,
00245                               <span class="keywordtype">bool</span> makeLink,
00246                               <span class="keywordtype">bool</span> realMapURLs,
00247                               RouteMessageRequestType::MessageContent 
00248                               contentType,
00249                               uint32 maxMessageSize,
00250                               <span class="keyword">const</span> <span class="keywordtype">char</span>* signature,
00251                               ImageDrawConfig::imageFormat defaultFormat,
00252                               MapSettingsTypes::defaultMapSetting
00253                               mapSetting,
00254                               <span class="keyword">struct</span> <a class="code" href="structMapSettingsTypes_1_1ImageSettings.html">MapSettingsTypes::ImageSettings</a>* 
00255                               imageSettings,
00256                               <span class="keyword">const</span> <span class="keywordtype">char</span>* messageFmt,
00257                               <span class="keyword">const</span> <span class="keywordtype">char</span>* messageStartTextFmt,
00258                               <span class="keyword">const</span> <span class="keywordtype">char</span>* messageEndTextFmt,
00259                               uint32 nbrMessageResources,
00260                               <span class="keywordtype">char</span>** messageResourcesURI,
00261                               uint32* messageResourcesBuffLength,
00262                               byte** messageResourcesBuff, 
00263                               <span class="keyword">const</span> <a class="code" href="classTopRegionRequest.html">TopRegionRequest</a>* topReq);
00264 
00265       
00269       state <a class="code" href="classLocalMapMessageRequest.html#d2">makeEmailRequest</a>();
00270 
00271 
<a name="l00276"></a><a class="code" href="classLocalMapMessageRequest.html#v0">00276</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classLocalMapMessageRequest.html#v0">m_messageFmtFile</a>[];
00277       
00278 
<a name="l00284"></a><a class="code" href="classLocalMapMessageRequest.html#v1">00284</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="classLocalMapMessageRequest.html#v1">m_messageStartTextFmtFile</a>[];
00285 
00286 
<a name="l00292"></a><a class="code" href="classLocalMapMessageRequest.html#v2">00292</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> <a class="code" href="classLocalMapMessageRequest.html#v2">m_messageEndTextFmtFile</a>[];
00293 
00294       
<a name="l00299"></a><a class="code" href="classLocalMapMessageRequest.html#v3">00299</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="classLocalMapMessageRequest.html#v3">m_messageResourcesFile</a>[];
00300 
00301 
<a name="l00305"></a><a class="code" href="classLocalMapMessageRequest.html#v4">00305</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* localMapStr;
00306 
00307       
<a name="l00311"></a><a class="code" href="classLocalMapMessageRequest.html#v5">00311</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* localMapURIStr;
00312 
00313 
<a name="l00317"></a><a class="code" href="classLocalMapMessageRequest.html#v6">00317</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* localMapWidthStr;
00318 
00319       
<a name="l00323"></a><a class="code" href="classLocalMapMessageRequest.html#v7">00323</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* localMapHeightStr;
00324 
00325 
<a name="l00329"></a><a class="code" href="classLocalMapMessageRequest.html#v8">00329</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* localMapAltStr;
00330 
00331 
<a name="l00335"></a><a class="code" href="classLocalMapMessageRequest.html#v9">00335</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* localMapNameStr;
00336 
00337       
<a name="l00341"></a><a class="code" href="classLocalMapMessageRequest.html#v10">00341</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* signatureStr;
00342 
00343 
<a name="l00347"></a><a class="code" href="classLocalMapMessageRequest.html#v11">00347</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* startFileStr;
00348       
00349 
<a name="l00353"></a><a class="code" href="classLocalMapMessageRequest.html#v12">00353</a>       <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* endFileStr;
00354 
00355 
<a name="l00359"></a><a class="code" href="classLocalMapMessageRequest.html#r1">00359</a>       <a class="code" href="classMimeMessage.html">MimeMessage</a> m_message;
00360 
00361       
<a name="l00365"></a><a class="code" href="classLocalMapMessageRequest.html#r2">00365</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_nbrImageRequests;
00366 
00367       
<a name="l00371"></a><a class="code" href="classLocalMapMessageRequest.html#r3">00371</a>       <a class="code" href="Types_8h.html#a21">uint32</a> m_currentImageRequest;
00372 
00373       
<a name="l00377"></a><a class="code" href="classLocalMapMessageRequest.html#r4">00377</a>       <a class="code" href="classGfxFeatureMapImageRequest.html">GfxFeatureMapImageRequest</a>** m_imageRequests;
00378 
00379 
<a name="l00383"></a><a class="code" href="classLocalMapMessageRequest.html#r5">00383</a>       <span class="keywordtype">char</span>** m_imageURIs;
00384 
00385 
<a name="l00389"></a><a class="code" href="classLocalMapMessageRequest.html#r6">00389</a>       <a class="code" href="classMapSettings.html">MapSettings</a>* m_mapSettings;
00390 
00391       
<a name="l00395"></a><a class="code" href="classLocalMapMessageRequest.html#r7">00395</a>       <a class="code" href="classPacketContainer.html">PacketContainer</a>* m_answer;
00396 
00397       
<a name="l00401"></a><a class="code" href="classLocalMapMessageRequest.html#r8">00401</a>       ImageDrawConfig::imageFormat m_format;
00402 
00403       
<a name="l00407"></a><a class="code" href="classLocalMapMessageRequest.html#r9">00407</a>       <a class="code" href="classPacketContainer.html">PacketContainer</a>* m_emailRequest;
00408 
00409       
<a name="l00413"></a><a class="code" href="classLocalMapMessageRequest.html#r10">00413</a>       <span class="keywordtype">bool</span> m_sendEmail;
00414 
00415       
<a name="l00419"></a><a class="code" href="classLocalMapMessageRequest.html#r11">00419</a>       <span class="keyword">const</span> <span class="keywordtype">char</span>* m_toMailAddr;
00420 
00421       
<a name="l00425"></a><a class="code" href="classLocalMapMessageRequest.html#r12">00425</a>       <span class="keyword">const</span> <span class="keywordtype">char</span>* m_fromMailAddr;
00426 
00427       
<a name="l00431"></a><a class="code" href="classLocalMapMessageRequest.html#r13">00431</a>       <span class="keyword">const</span> <span class="keywordtype">char</span>* m_subject;
00432 
00433 
<a name="l00437"></a><a class="code" href="classLocalMapMessageRequest.html#r14">00437</a>       RouteMessageRequestType::MessageContent m_contentType;
00438 
00439 
<a name="l00443"></a><a class="code" href="classLocalMapMessageRequest.html#r15">00443</a>       <span class="keywordtype">bool</span> m_makeImages;
00444 
<a name="l00448"></a><a class="code" href="classLocalMapMessageRequest.html#r16">00448</a>       <span class="keywordtype">bool</span> m_contentLocation;
00449 
<a name="l00454"></a><a class="code" href="classLocalMapMessageRequest.html#r17">00454</a>       <span class="keywordtype">bool</span> m_makeLink;
00455 
00456 
<a name="l00461"></a><a class="code" href="classLocalMapMessageRequest.html#r18">00461</a>       <span class="keywordtype">bool</span> m_realMapURLs;
<a name="l00463"></a><a class="code" href="classLocalMapMessageRequest.html#r19">00463</a>    <a class="code" href="classMC2String.html">MC2String</a> m_copyright;
00464 
<a name="l00466"></a><a class="code" href="classLocalMapMessageRequest.html#r20">00466</a>       <span class="keyword">const</span> <a class="code" href="classUserItem.html">UserItem</a>* m_user;
00467 
<a name="l00469"></a><a class="code" href="classLocalMapMessageRequest.html#r21">00469</a>    <span class="keyword">const</span> <a class="code" href="classClientSetting.html">ClientSetting</a>* m_clientSetting;
00470 };
00471 
00472 
00473 <span class="comment">// ========================================================================</span>
00474 <span class="comment">//                                  Implementation of the inlined methods =</span>
00475 
00476 
00477 <span class="keyword">inline</span> <span class="keyword">const</span> <a class="code" href="classMimeMessage.html">MimeMessage</a>* 
<a name="l00478"></a><a class="code" href="classLocalMapMessageRequest.html#a5">00478</a> <a class="code" href="classLocalMapMessageRequest.html#a5">LocalMapMessageRequest::getMimeMessage</a>()<span class="keyword"> const </span>{
00479    <span class="keywordflow">return</span> &amp;m_message;
00480 }
00481 
00482 
00483 
00484 <span class="preprocessor">#endif // LOCALMAPMESSAGEREQUEST_H</span>
00485 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Jun 30 10:11:47 2010 for mc2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.3.9.1 </small></address>
</body>
</html>
